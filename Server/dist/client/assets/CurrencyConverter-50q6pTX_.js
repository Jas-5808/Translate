const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-GIirBIWi.js","assets/index-DMOjk18q.js","assets/index-Cn18mLjp.css","assets/defineProperty-DJACW-dl.js","assets/typeof-QjJsDpFa.js","assets/LanguageSwitcher-CdE5WNON.js","assets/react-select.esm-D7xumVL8.js","assets/Helmet-w-JA7pje.js","assets/Description-5auFE1Wt.js"])))=>i.map(i=>d[i]);
var Yv=Object.defineProperty;var Z2=o=>{throw TypeError(o)};var Kv=(o,t,e)=>t in o?Yv(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var ie=(o,t,e)=>Kv(o,typeof t!="symbol"?t+"":t,e),m1=(o,t,e)=>t.has(o)||Z2("Cannot "+e);var c=(o,t,e)=>(m1(o,t,"read from private field"),e?e.call(o):t.get(o)),M=(o,t,e)=>t.has(o)?Z2("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(o):t.set(o,e),N=(o,t,e,i)=>(m1(o,t,"write to private field"),i?i.call(o,e):t.set(o,e),e),P=(o,t,e)=>(m1(o,t,"access private method"),e);var mn=(o,t,e,i)=>({set _(n){N(o,t,n,e)},get _(){return c(o,t,i)}});import{_ as Er,r as Gi,u as Jv,a as Qv,j as te,c as tm}from"./index-DMOjk18q.js";import{J as Zv,l as ty}from"./index-jHIM51f6.js";import{_ as We}from"./typeof-QjJsDpFa.js";var zu={};zu.d=(o,t)=>{for(var e in t)zu.o(t,e)&&!zu.o(o,e)&&Object.defineProperty(o,e,{enumerable:!0,get:t[e]})};zu.o=(o,t)=>Object.prototype.hasOwnProperty.call(o,t);var le=globalThis.pdfjsLib={};zu.d(le,{AbortException:()=>Yl,AnnotationEditorLayer:()=>z0,AnnotationEditorParamsType:()=>ne,AnnotationEditorType:()=>pe,AnnotationEditorUIManager:()=>Wl,AnnotationLayer:()=>Qw,AnnotationMode:()=>za,ColorPicker:()=>Kp,DOMSVGFactory:()=>b2,DrawLayer:()=>G0,FeatureTest:()=>wn,GlobalWorkerOptions:()=>va,ImageKind:()=>fp,InvalidPDFException:()=>zm,MissingPDFException:()=>$l,OPS:()=>Fs,OutputScale:()=>D1,PDFDataRangeTransport:()=>j5,PDFDateString:()=>c2,PDFWorker:()=>zh,PasswordResponses:()=>sy,PermissionFlag:()=>ny,PixelsPerInch:()=>vo,RenderingCancelledException:()=>l2,TextLayer:()=>Gu,UnexpectedResponseException:()=>wg,Util:()=>Wt,VerbosityLevel:()=>bg,XfaLayer:()=>q5,build:()=>Iw,createValidAbsoluteUrl:()=>ly,fetchData:()=>_g,getDocument:()=>xw,getFilenameFromUrl:()=>by,getPdfFilenameFromUrl:()=>vy,getXfaPageViewport:()=>yy,isDataScheme:()=>xg,isPdfFile:()=>h2,noContextMenu:()=>vs,normalizeUnicode:()=>py,setLayerDimensions:()=>Ul,shadow:()=>_e,version:()=>Tw});const dn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Hm=[1,0,0,1,0,0],I1=[.001,0,0,.001,0,0],ey=1e7,b1=1.35,Jn={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},za={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},iy="pdfjs_internal_editor_",pe={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},ne={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},ny={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},rn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},fp={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Ni={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Au={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},bg={ERRORS:0,WARNINGS:1,INFOS:5},Fs={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},sy={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let vg=bg.WARNINGS;function ry(o){Number.isInteger(o)&&(vg=o)}function ay(){return vg}function yg(o){vg>=bg.INFOS&&console.log(`Info: ${o}`)}function me(o){vg>=bg.WARNINGS&&console.log(`Warning: ${o}`)}function $e(o){throw new Error(o)}function Ti(o,t){o||$e(t)}function oy(o){switch(o==null?void 0:o.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function ly(o,t=null,e=null){if(!o)return null;try{if(e&&typeof o=="string"){if(e.addDefaultProtocol&&o.startsWith("www.")){const n=o.match(/\./g);(n==null?void 0:n.length)>=2&&(o=`http://${o}`)}if(e.tryConvertEncoding)try{o=fy(o)}catch{}}const i=t?new URL(o,t):new URL(o);if(oy(i))return i}catch{}return null}function _e(o,t,e,i=!1){return Object.defineProperty(o,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const So=function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}();class F1 extends So{constructor(t,e){super(t,"PasswordException"),this.code=e}}class M1 extends So{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class zm extends So{constructor(t){super(t,"InvalidPDFException")}}class $l extends So{constructor(t){super(t,"MissingPDFException")}}class wg extends So{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class hy extends So{constructor(t){super(t,"FormatError")}}class Yl extends So{constructor(t){super(t,"AbortException")}}function Um(o){(typeof o!="object"||(o==null?void 0:o.length)===void 0)&&$e("Invalid argument for bytesToString");const t=o.length,e=8192;if(t<e)return String.fromCharCode.apply(null,o);const i=[];for(let n=0;n<t;n+=e){const s=Math.min(n+e,t),r=o.subarray(n,s);i.push(String.fromCharCode.apply(null,r))}return i.join("")}function Ag(o){typeof o!="string"&&$e("Invalid argument for stringToBytes");const t=o.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=o.charCodeAt(i)&255;return e}function cy(o){return String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255)}function a2(o){const t=Object.create(null);for(const[e,i]of o)t[e]=i;return t}function uy(){const o=new Uint8Array(4);return o[0]=1,new Uint32Array(o.buffer,0,1)[0]===1}function dy(){try{return new Function(""),!0}catch{return!1}}class wn{static get isLittleEndian(){return _e(this,"isLittleEndian",uy())}static get isEvalSupported(){return _e(this,"isEvalSupported",dy())}static get isOffscreenCanvasSupported(){return _e(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?_e(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):_e(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return _e(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const v1=Array.from(Array(256).keys(),o=>o.toString(16).padStart(2,"0"));var wa,pp,R1;class Wt{static makeHexColor(t,e,i){return`#${v1[t]}${v1[e]}${v1[i]}`}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const i=t[0]*e[0]+t[1]*e[2]+e[4],n=t[0]*e[1]+t[1]*e[3]+e[5];return[i,n]}static applyInverseTransform(t,e){const i=e[0]*e[3]-e[1]*e[2],n=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/i,s=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/i;return[n,s]}static getAxialAlignedBoundingBox(t,e){const i=this.applyTransform(t,e),n=this.applyTransform(t.slice(2,4),e),s=this.applyTransform([t[0],t[3]],e),r=this.applyTransform([t[2],t[1]],e);return[Math.min(i[0],n[0],s[0],r[0]),Math.min(i[1],n[1],s[1],r[1]),Math.max(i[0],n[0],s[0],r[0]),Math.max(i[1],n[1],s[1],r[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],i=t[0]*e[0]+t[1]*e[2],n=t[0]*e[1]+t[1]*e[3],s=t[2]*e[0]+t[3]*e[2],r=t[2]*e[1]+t[3]*e[3],a=(i+r)/2,l=Math.sqrt((i+r)**2-4*(i*r-s*n))/2,u=a+l||1,d=a-l||1;return[Math.sqrt(u),Math.sqrt(d)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),n=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>n)return null;const s=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),r=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return s>r?null:[i,s,n,r]}static bezierBoundingBox(t,e,i,n,s,r,a,l,u){return u?(u[0]=Math.min(u[0],t,a),u[1]=Math.min(u[1],e,l),u[2]=Math.max(u[2],t,a),u[3]=Math.max(u[3],e,l)):u=[Math.min(t,a),Math.min(e,l),Math.max(t,a),Math.max(e,l)],P(this,wa,R1).call(this,t,i,s,a,e,n,r,l,3*(-t+3*(i-s)+a),6*(t-2*i+s),3*(i-t),u),P(this,wa,R1).call(this,t,i,s,a,e,n,r,l,3*(-e+3*(n-r)+l),6*(e-2*n+r),3*(n-e),u),u}}wa=new WeakSet,pp=function(t,e,i,n,s,r,a,l,u,d){if(u<=0||u>=1)return;const p=1-u,b=u*u,g=b*u,y=p*(p*(p*t+3*u*e)+3*b*i)+g*n,w=p*(p*(p*s+3*u*r)+3*b*a)+g*l;d[0]=Math.min(d[0],y),d[1]=Math.min(d[1],w),d[2]=Math.max(d[2],y),d[3]=Math.max(d[3],w)},R1=function(t,e,i,n,s,r,a,l,u,d,p,b){if(Math.abs(u)<1e-12){Math.abs(d)>=1e-12&&P(this,wa,pp).call(this,t,e,i,n,s,r,a,l,-p/d,b);return}const g=d**2-4*p*u;if(g<0)return;const y=Math.sqrt(g),w=2*u;P(this,wa,pp).call(this,t,e,i,n,s,r,a,l,(-d+y)/w,b),P(this,wa,pp).call(this,t,e,i,n,s,r,a,l,(-d-y)/w,b)},M(Wt,wa);function fy(o){return decodeURIComponent(escape(o))}let y1=null,em=null;function py(o){return y1||(y1=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,em=new Map([["ﬅ","ſt"]])),o.replaceAll(y1,(t,e,i)=>e?e.normalize("NFKC"):em.get(i))}function gy(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const o=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(o);else for(let t=0;t<32;t++)o[t]=Math.floor(Math.random()*255);return Um(o)}const o2="pdfjs_internal_id_",zr={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function my(o){return Uint8Array.prototype.toBase64?o.toBase64():btoa(Um(o))}const Vr="http://www.w3.org/2000/svg",Wo=class Wo{};ie(Wo,"CSS",96),ie(Wo,"PDF",72),ie(Wo,"PDF_TO_CSS_UNITS",Wo.CSS/Wo.PDF);let vo=Wo;async function _g(o,t="text"){if(Nu(o,document.baseURI)){const e=await fetch(o);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const n=new XMLHttpRequest;n.open("GET",o,!0),n.responseType=t,n.onreadystatechange=()=>{if(n.readyState===XMLHttpRequest.DONE){if(n.status===200||n.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(n.response);return}e(n.responseText);return}i(new Error(n.statusText))}},n.send(null)})}class uf{constructor({viewBox:t,scale:e,rotation:i,offsetX:n=0,offsetY:s=0,dontFlip:r=!1}){this.viewBox=t,this.scale=e,this.rotation=i,this.offsetX=n,this.offsetY=s;const a=(t[2]+t[0])/2,l=(t[3]+t[1])/2;let u,d,p,b;switch(i%=360,i<0&&(i+=360),i){case 180:u=-1,d=0,p=0,b=1;break;case 90:u=0,d=1,p=1,b=0;break;case 270:u=0,d=-1,p=-1,b=0;break;case 0:u=1,d=0,p=0,b=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}r&&(p=-p,b=-b);let g,y,w,S;u===0?(g=Math.abs(l-t[1])*e+n,y=Math.abs(a-t[0])*e+s,w=(t[3]-t[1])*e,S=(t[2]-t[0])*e):(g=Math.abs(a-t[0])*e+n,y=Math.abs(l-t[1])*e+s,w=(t[2]-t[0])*e,S=(t[3]-t[1])*e),this.transform=[u*e,d*e,p*e,b*e,g-u*e*a-p*e*l,y-d*e*a-b*e*l],this.width=w,this.height=S}get rawDims(){const{viewBox:t}=this;return _e(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:n=this.offsetY,dontFlip:s=!1}={}){return new uf({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:i,offsetY:n,dontFlip:s})}convertToViewportPoint(t,e){return Wt.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=Wt.applyTransform([t[0],t[1]],this.transform),i=Wt.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){return Wt.applyInverseTransform([t,e],this.transform)}}class l2 extends So{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function xg(o){const t=o.length;let e=0;for(;e<t&&o[e].trim()==="";)e++;return o.substring(e,e+5).toLowerCase()==="data:"}function h2(o){return typeof o=="string"&&/\.pdf$/i.test(o)}function by(o){return[o]=o.split(/[#?]/,1),o.substring(o.lastIndexOf("/")+1)}function vy(o,t="document.pdf"){if(typeof o!="string")return t;if(xg(o))return me('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,n=e.exec(o);let s=i.exec(n[1])||i.exec(n[2])||i.exec(n[3]);if(s&&(s=s[0],s.includes("%")))try{s=i.exec(decodeURIComponent(s))[0]}catch{}return s||t}class im{constructor(){ie(this,"started",Object.create(null));ie(this,"times",[])}time(t){t in this.started&&me(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||me(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:n,end:s}of this.times)t.push(`${i.padEnd(e)} ${s-n}ms
`);return t.join("")}}function Nu(o,t){try{const{protocol:e}=t?new URL(o,t):new URL(o);return e==="http:"||e==="https:"}catch{return!1}}function vs(o){o.preventDefault()}function nm(o){console.log("Deprecated API usage: "+o)}var Yu;class c2{static toDateObject(t){if(!t||typeof t!="string")return null;c(this,Yu)||N(this,Yu,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=c(this,Yu).exec(t);if(!e)return null;const i=parseInt(e[1],10);let n=parseInt(e[2],10);n=n>=1&&n<=12?n-1:0;let s=parseInt(e[3],10);s=s>=1&&s<=31?s:1;let r=parseInt(e[4],10);r=r>=0&&r<=23?r:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(e[6],10);l=l>=0&&l<=59?l:0;const u=e[7]||"Z";let d=parseInt(e[8],10);d=d>=0&&d<=23?d:0;let p=parseInt(e[9],10)||0;return p=p>=0&&p<=59?p:0,u==="-"?(r+=d,a+=p):u==="+"&&(r-=d,a-=p),new Date(Date.UTC(i,n,s,r,a,l))}}Yu=new WeakMap,M(c2,Yu);function yy(o,{scale:t=1,rotation:e=0}){const{width:i,height:n}=o.attributes.style,s=[0,0,parseInt(i),parseInt(n)];return new uf({viewBox:s,scale:t,rotation:e})}function u2(o){if(o.startsWith("#")){const t=parseInt(o.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return o.startsWith("rgb(")?o.slice(4,-1).split(",").map(t=>parseInt(t)):o.startsWith("rgba(")?o.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(me(`Not a valid color format: "${o}"`),[0,0,0])}function wy(o){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of o.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;o.set(e,u2(i))}t.remove()}function ii(o){const{a:t,b:e,c:i,d:n,e:s,f:r}=o.getTransform();return[t,e,i,n,s,r]}function Ur(o){const{a:t,b:e,c:i,d:n,e:s,f:r}=o.getTransform().invertSelf();return[t,e,i,n,s,r]}function Ul(o,t,e=!1,i=!0){if(t instanceof uf){const{pageWidth:n,pageHeight:s}=t.rawDims,{style:r}=o,a=wn.isCSSRoundSupported,l=`var(--scale-factor) * ${n}px`,u=`var(--scale-factor) * ${s}px`,d=a?`round(down, ${l}, var(--scale-round-x, 1px))`:`calc(${l})`,p=a?`round(down, ${u}, var(--scale-round-y, 1px))`:`calc(${u})`;!e||t.rotation%180===0?(r.width=d,r.height=p):(r.width=p,r.height=d)}i&&o.setAttribute("data-main-rotation",t.rotation)}class D1{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var Ua,Go,Rs,Xo,Ku,Ju,tg,Wm,An,Vm,Gm,gp,Xm,j1;const Gr=class Gr{constructor(t){M(this,An);M(this,Ua,null);M(this,Go,null);M(this,Rs);M(this,Xo,null);M(this,Ku,null);N(this,Rs,t),c(Gr,Ju)||N(Gr,Ju,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const t=N(this,Ua,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=c(this,Rs)._uiManager._signal;t.addEventListener("contextmenu",vs,{signal:e}),t.addEventListener("pointerdown",P(Gr,tg,Wm),{signal:e});const i=N(this,Xo,document.createElement("div"));i.className="buttons",t.append(i);const n=c(this,Rs).toolbarPosition;if(n){const{style:s}=t,r=c(this,Rs)._uiManager.direction==="ltr"?1-n[0]:n[0];s.insetInlineEnd=`${100*r}%`,s.top=`calc(${100*n[1]}% + var(--editor-toolbar-vert-offset))`}return P(this,An,Xm).call(this),t}get div(){return c(this,Ua)}hide(){var t;c(this,Ua).classList.add("hidden"),(t=c(this,Go))==null||t.hideDropdown()}show(){var t;c(this,Ua).classList.remove("hidden"),(t=c(this,Ku))==null||t.shown()}async addAltText(t){const e=await t.render();P(this,An,gp).call(this,e),c(this,Xo).prepend(e,c(this,An,j1)),N(this,Ku,t)}addColorPicker(t){N(this,Go,t);const e=t.renderButton();P(this,An,gp).call(this,e),c(this,Xo).prepend(e,c(this,An,j1))}remove(){var t;c(this,Ua).remove(),(t=c(this,Go))==null||t.destroy(),N(this,Go,null)}};Ua=new WeakMap,Go=new WeakMap,Rs=new WeakMap,Xo=new WeakMap,Ku=new WeakMap,Ju=new WeakMap,tg=new WeakSet,Wm=function(t){t.stopPropagation()},An=new WeakSet,Vm=function(t){c(this,Rs)._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()},Gm=function(t){c(this,Rs)._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()},gp=function(t){const e=c(this,Rs)._uiManager._signal;t.addEventListener("focusin",P(this,An,Vm).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",P(this,An,Gm).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",vs,{signal:e})},Xm=function(){const{editorType:t,_uiManager:e}=c(this,Rs),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",c(Gr,Ju)[t]),P(this,An,gp).call(this,i),i.addEventListener("click",n=>{e.delete()},{signal:e._signal}),c(this,Xo).append(i)},j1=function(){const t=document.createElement("div");return t.className="divider",t},M(Gr,tg),M(Gr,Ju,null);let O1=Gr;var Qu,$o,Yo,_o,$m,Ym,Km;class Ay{constructor(t){M(this,_o);M(this,Qu,null);M(this,$o,null);M(this,Yo);N(this,Yo,t)}show(t,e,i){const[n,s]=P(this,_o,Ym).call(this,e,i),{style:r}=c(this,$o)||N(this,$o,P(this,_o,$m).call(this));t.append(c(this,$o)),r.insetInlineEnd=`${100*n}%`,r.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,$o).remove()}}Qu=new WeakMap,$o=new WeakMap,Yo=new WeakMap,_o=new WeakSet,$m=function(){const t=N(this,$o,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",vs,{signal:c(this,Yo)._signal});const e=N(this,Qu,document.createElement("div"));return e.className="buttons",t.append(e),P(this,_o,Km).call(this),t},Ym=function(t,e){let i=0,n=0;for(const s of t){const r=s.y+s.height;if(r<i)continue;const a=s.x+(e?s.width:0);if(r>i){n=a,i=r;continue}e?a>n&&(n=a):a<n&&(n=a)}return[e?1-n:n,i]},Km=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=c(this,Yo)._signal;t.addEventListener("contextmenu",vs,{signal:i}),t.addEventListener("click",()=>{c(this,Yo).highlightSelection("floating_button")},{signal:i}),c(this,Qu).append(t)};function Xp(o,t,e){for(const i of e)t.addEventListener(i,o[i].bind(o))}function _y(o){return Math.round(Math.min(255,Math.max(1,255*o))).toString(16).padStart(2,"0")}var eg;class xy{constructor(){M(this,eg,0)}get id(){return`${iy}${mn(this,eg)._++}`}}eg=new WeakMap;var Xh,Zu,on,$h,mp;const _2=class _2{constructor(){M(this,$h);M(this,Xh,gy());M(this,Zu,0);M(this,on,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),n=new Image;n.src=t;const s=n.decode().then(()=>(i.drawImage(n,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return _e(this,"_isSVGFittingCanvas",s)}async getFromFile(t){const{lastModified:e,name:i,size:n,type:s}=t;return P(this,$h,mp).call(this,`${e}_${i}_${n}_${s}`,t)}async getFromUrl(t){return P(this,$h,mp).call(this,t,t)}async getFromBlob(t,e){const i=await e;return P(this,$h,mp).call(this,t,i)}async getFromId(t){c(this,on)||N(this,on,new Map);const e=c(this,on).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){c(this,on)||N(this,on,new Map);let i=c(this,on).get(t);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const n=new OffscreenCanvas(e.width,e.height);return n.getContext("2d").drawImage(e,0,0),i={bitmap:n.transferToImageBitmap(),id:`image_${c(this,Xh)}_${mn(this,Zu)._++}`,refCounter:1,isSvg:!1},c(this,on).set(t,i),c(this,on).set(i.id,i),i}getSvgUrl(t){const e=c(this,on).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var n;c(this,on)||N(this,on,new Map);const e=c(this,on).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const s=new OffscreenCanvas(i.width,i.height);s.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=s.convertToBlob()}(n=i.close)==null||n.call(i),e.bitmap=null}isValidId(t){return t.startsWith(`image_${c(this,Xh)}_`)}};Xh=new WeakMap,Zu=new WeakMap,on=new WeakMap,$h=new WeakSet,mp=async function(t,e){c(this,on)||N(this,on,new Map);let i=c(this,on).get(t);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${c(this,Xh)}_${mn(this,Zu)._++}`,refCounter:0,isSvg:!1});let n;if(typeof e=="string"?(i.url=e,n=await _g(e,"blob")):e instanceof File?n=i.file=e:e instanceof Blob&&(n=e),n.type==="image/svg+xml"){const s=_2._isSVGFittingCanvas,r=new FileReader,a=new Image,l=new Promise((u,d)=>{a.onload=()=>{i.bitmap=a,i.isSvg=!0,u()},r.onload=async()=>{const p=i.svgUrl=r.result;a.src=await s?`${p}#svgView(preserveAspectRatio(none))`:p},a.onerror=r.onerror=d});r.readAsDataURL(n),await l}else i.bitmap=await createImageBitmap(n);i.refCounter=1}catch(n){console.error(n),i=null}return c(this,on).set(t,i),i&&c(this,on).set(i.id,i),i};let B1=_2;var Di,Wa,td,Oi;class Sy{constructor(t=128){M(this,Di,[]);M(this,Wa,!1);M(this,td);M(this,Oi,-1);N(this,td,t)}add({cmd:t,undo:e,post:i,mustExec:n,type:s=NaN,overwriteIfSameType:r=!1,keepUndo:a=!1}){if(n&&t(),c(this,Wa))return;const l={cmd:t,undo:e,post:i,type:s};if(c(this,Oi)===-1){c(this,Di).length>0&&(c(this,Di).length=0),N(this,Oi,0),c(this,Di).push(l);return}if(r&&c(this,Di)[c(this,Oi)].type===s){a&&(l.undo=c(this,Di)[c(this,Oi)].undo),c(this,Di)[c(this,Oi)]=l;return}const u=c(this,Oi)+1;u===c(this,td)?c(this,Di).splice(0,1):(N(this,Oi,u),u<c(this,Di).length&&c(this,Di).splice(u)),c(this,Di).push(l)}undo(){if(c(this,Oi)===-1)return;N(this,Wa,!0);const{undo:t,post:e}=c(this,Di)[c(this,Oi)];t(),e==null||e(),N(this,Wa,!1),N(this,Oi,c(this,Oi)-1)}redo(){if(c(this,Oi)<c(this,Di).length-1){N(this,Oi,c(this,Oi)+1),N(this,Wa,!0);const{cmd:t,post:e}=c(this,Di)[c(this,Oi)];t(),e==null||e(),N(this,Wa,!1)}}hasSomethingToUndo(){return c(this,Oi)!==-1}hasSomethingToRedo(){return c(this,Oi)<c(this,Di).length-1}destroy(){N(this,Di,null)}}Di=new WeakMap,Wa=new WeakMap,td=new WeakMap,Oi=new WeakMap;var ig,Jm;class df{constructor(t){M(this,ig);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=wn.platform;for(const[i,n,s={}]of t)for(const r of i){const a=r.startsWith("mac+");e&&a?(this.callbacks.set(r.slice(4),{callback:n,options:s}),this.allKeys.add(r.split("+").at(-1))):!e&&!a&&(this.callbacks.set(r,{callback:n,options:s}),this.allKeys.add(r.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(P(this,ig,Jm).call(this,e));if(!i)return;const{callback:n,options:{bubbles:s=!1,args:r=[],checker:a=null}}=i;a&&!a(t,e)||(n.bind(t,...r,e)(),s||(e.stopPropagation(),e.preventDefault()))}}ig=new WeakSet,Jm=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const ng=class ng{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return wy(t),_e(this,"_colors",t)}convert(t){const e=u2(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,n]of this._colors)if(n.every((s,r)=>s===e[r]))return ng._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?Wt.makeHexColor(...e):t}};ie(ng,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let q1=ng;var Yh,Un,Ci,Xi,Kh,$r,Jh,Ds,Va,Qh,Ko,hr,Os,Jo,ed,id,Zh,nd,cr,Ga,tc,Xa,ur,sg,$a,sd,Ya,Qo,rd,ad,ji,Me,Yr,Zo,od,ld,Ka,dr,Kr,hd,cs,Mt,bp,H1,Qm,Zm,vp,t5,e5,i5,z1,n5,U1,W1,s5,bn,qa,r5,a5,V1,o5,Eu,G1;const qh=class qh{constructor(t,e,i,n,s,r,a,l,u,d,p){M(this,Mt);M(this,Yh,new AbortController);M(this,Un,null);M(this,Ci,new Map);M(this,Xi,new Map);M(this,Kh,null);M(this,$r,null);M(this,Jh,null);M(this,Ds,new Sy);M(this,Va,null);M(this,Qh,0);M(this,Ko,new Set);M(this,hr,null);M(this,Os,null);M(this,Jo,new Set);M(this,ed,!1);M(this,id,!1);M(this,Zh,!1);M(this,nd,null);M(this,cr,null);M(this,Ga,null);M(this,tc,null);M(this,Xa,!1);M(this,ur,null);M(this,sg,new xy);M(this,$a,!1);M(this,sd,!1);M(this,Ya,null);M(this,Qo,null);M(this,rd,null);M(this,ad,null);M(this,ji,pe.NONE);M(this,Me,new Set);M(this,Yr,null);M(this,Zo,null);M(this,od,null);M(this,ld,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});M(this,Ka,[0,0]);M(this,dr,null);M(this,Kr,null);M(this,hd,null);M(this,cs,null);const b=this._signal=c(this,Yh).signal;N(this,Kr,t),N(this,hd,e),N(this,Kh,i),this._eventBus=n,n._on("editingaction",this.onEditingAction.bind(this),{signal:b}),n._on("pagechanging",this.onPageChanging.bind(this),{signal:b}),n._on("scalechanging",this.onScaleChanging.bind(this),{signal:b}),n._on("rotationchanging",this.onRotationChanging.bind(this),{signal:b}),n._on("setpreference",this.onSetPreference.bind(this),{signal:b}),n._on("switchannotationeditorparams",g=>this.updateParams(g.type,g.value),{signal:b}),P(this,Mt,t5).call(this),P(this,Mt,s5).call(this),P(this,Mt,z1).call(this),N(this,$r,s.annotationStorage),N(this,nd,s.filterFactory),N(this,Zo,r),N(this,tc,a||null),N(this,ed,l),N(this,id,u),N(this,Zh,d),N(this,ad,p||null),this.viewParameters={realScale:vo.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const t=qh.prototype,e=r=>c(r,Kr).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&r.hasSomethingToControl(),i=(r,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},n=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return _e(this,"_keyboardManager",new df([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(r,{target:a})=>!(a instanceof HTMLButtonElement)&&c(r,Kr).contains(a)&&!r.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(r,{target:a})=>!(a instanceof HTMLButtonElement)&&c(r,Kr).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}]]))}destroy(){var t,e,i,n;(t=c(this,cs))==null||t.resolve(),N(this,cs,null),(e=c(this,Yh))==null||e.abort(),N(this,Yh,null),this._signal=null;for(const s of c(this,Xi).values())s.destroy();c(this,Xi).clear(),c(this,Ci).clear(),c(this,Jo).clear(),N(this,Un,null),c(this,Me).clear(),c(this,Ds).destroy(),(i=c(this,Kh))==null||i.destroy(),(n=c(this,ur))==null||n.hide(),N(this,ur,null),c(this,cr)&&(clearTimeout(c(this,cr)),N(this,cr,null)),c(this,dr)&&(clearTimeout(c(this,dr)),N(this,dr,null))}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return c(this,ad)}get useNewAltTextFlow(){return c(this,id)}get useNewAltTextWhenAddingImage(){return c(this,Zh)}get hcmFilter(){return _e(this,"hcmFilter",c(this,Zo)?c(this,nd).addHCMFilter(c(this,Zo).foreground,c(this,Zo).background):"none")}get direction(){return _e(this,"direction",getComputedStyle(c(this,Kr)).direction)}get highlightColors(){return _e(this,"highlightColors",c(this,tc)?new Map(c(this,tc).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return _e(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setMainHighlightColorPicker(t){N(this,rd,t)}editAltText(t,e=!1){var i;(i=c(this,Kh))==null||i.editAltText(this,t,e)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":N(this,Zh,e);break}}onPageChanging({pageNumber:t}){N(this,Qh,t-1)}focusMainContainer(){c(this,Kr).focus()}findParent(t,e){for(const i of c(this,Xi).values()){const{x:n,y:s,width:r,height:a}=i.div.getBoundingClientRect();if(t>=n&&t<=n+r&&e>=s&&e<=s+a)return i}return null}disableUserSelect(t=!1){c(this,hd).classList.toggle("noUserSelect",t)}addShouldRescale(t){c(this,Jo).add(t)}removeShouldRescale(t){c(this,Jo).delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*vo.PDF_TO_CSS_UNITS;for(const e of c(this,Jo))e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:i,anchorOffset:n,focusNode:s,focusOffset:r}=e,a=e.toString(),u=P(this,Mt,bp).call(this,e).closest(".textLayer"),d=this.getSelectionBoxes(u);if(!d)return;e.empty();const p=P(this,Mt,H1).call(this,u),b=c(this,ji)===pe.NONE,g=()=>{p==null||p.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:d,anchorNode:i,anchorOffset:n,focusNode:s,focusOffset:r,text:a}),b&&this.showAllEditors("highlight",!0,!0)};if(b){this.switchToMode(pe.HIGHLIGHT,g);return}g()}addToAnnotationStorage(t){!t.isEmpty()&&c(this,$r)&&!c(this,$r).has(t.id)&&c(this,$r).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,c(this,Xa)&&(N(this,Xa,!1),P(this,Mt,vp).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of c(this,Me))if(e.div.contains(t)){N(this,Qo,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!c(this,Qo))return;const[t,e]=c(this,Qo);N(this,Qo,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){P(this,Mt,z1).call(this),P(this,Mt,U1).call(this)}removeEditListeners(){P(this,Mt,n5).call(this),P(this,Mt,W1).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of c(this,Os))if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of c(this,Os))if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var i;if(t.preventDefault(),(i=c(this,Un))==null||i.commitOrRemove(),!this.hasSelection)return;const e=[];for(const n of c(this,Me)){const s=n.serialize(!0);s&&e.push(s)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const s of e.items)for(const r of c(this,Os))if(r.isHandlingMimeForPasting(s.type)){r.paste(s,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(s){me(`paste: "${s.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const n=this.currentLayer;try{const s=[];for(const l of i){const u=await n.deserialize(l);if(!u)return;s.push(u)}const r=()=>{for(const l of s)P(this,Mt,V1).call(this,l);P(this,Mt,G1).call(this,s)},a=()=>{for(const l of s)l.remove()};this.addCommands({cmd:r,undo:a,mustExec:!0})}catch(s){me(`paste: "${s.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,ji)!==pe.NONE&&!this.isEditorHandlingKeyboard&&qh._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,Xa)&&(N(this,Xa,!1),P(this,Mt,vp).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(P(this,Mt,e5).call(this),P(this,Mt,U1).call(this),P(this,Mt,bn).call(this,{isEditing:c(this,ji)!==pe.NONE,isEmpty:P(this,Mt,Eu).call(this),hasSomethingToUndo:c(this,Ds).hasSomethingToUndo(),hasSomethingToRedo:c(this,Ds).hasSomethingToRedo(),hasSelectedEditor:!1})):(P(this,Mt,i5).call(this),P(this,Mt,W1).call(this),P(this,Mt,bn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!c(this,Os)){N(this,Os,t);for(const e of c(this,Os))P(this,Mt,qa).call(this,e.defaultPropertiesToUpdate)}}getId(){return c(this,sg).id}get currentLayer(){return c(this,Xi).get(c(this,Qh))}getLayer(t){return c(this,Xi).get(t)}get currentPageIndex(){return c(this,Qh)}addLayer(t){c(this,Xi).set(t.pageIndex,t),c(this,$a)?t.enable():t.disable()}removeLayer(t){c(this,Xi).delete(t.pageIndex)}async updateMode(t,e=null,i=!1){if(c(this,ji)!==t&&!(c(this,cs)&&(await c(this,cs).promise,!c(this,cs)))){if(N(this,cs,Promise.withResolvers()),N(this,ji,t),t===pe.NONE){this.setEditingState(!1),P(this,Mt,a5).call(this),c(this,cs).resolve();return}this.setEditingState(!0),await P(this,Mt,r5).call(this),this.unselectAll();for(const n of c(this,Xi).values())n.updateMode(t);if(!e){i&&this.addNewEditorFromKeyboard(),c(this,cs).resolve();return}for(const n of c(this,Ci).values())n.annotationElementId===e?(this.setSelected(n),n.enterInEditMode()):n.unselect();c(this,cs).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==c(this,ji)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var i;if(c(this,Os)){switch(t){case ne.CREATE:this.currentLayer.addNewEditor();return;case ne.HIGHLIGHT_DEFAULT_COLOR:(i=c(this,rd))==null||i.updateColor(e);break;case ne.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,od)||N(this,od,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const n of c(this,Me))n.updateParams(t,e);for(const n of c(this,Os))n.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){var s;for(const r of c(this,Ci).values())r.editorType===t&&r.show(e);(((s=c(this,od))==null?void 0:s.get(ne.HIGHLIGHT_SHOW_ALL))??!0)!==e&&P(this,Mt,qa).call(this,[[ne.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(c(this,sd)!==t){N(this,sd,t);for(const e of c(this,Xi).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const i of c(this,Ci).values())i.pageIndex===t&&e.push(i);return e}getEditor(t){return c(this,Ci).get(t)}addEditor(t){c(this,Ci).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(c(this,cr)&&clearTimeout(c(this,cr)),N(this,cr,setTimeout(()=>{this.focusMainContainer(),N(this,cr,null)},0))),c(this,Ci).delete(t.id),this.unselect(t),(!t.annotationElementId||!c(this,Ko).has(t.annotationElementId))&&((e=c(this,$r))==null||e.remove(t.id))}addDeletedAnnotationElement(t){c(this,Ko).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return c(this,Ko).has(t)}removeDeletedAnnotationElement(t){c(this,Ko).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){c(this,Un)!==t&&(N(this,Un,t),t&&P(this,Mt,qa).call(this,t.propertiesToUpdate))}updateUI(t){c(this,Mt,o5)===t&&P(this,Mt,qa).call(this,t.propertiesToUpdate)}toggleSelected(t){if(c(this,Me).has(t)){c(this,Me).delete(t),t.unselect(),P(this,Mt,bn).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,Me).add(t),t.select(),P(this,Mt,qa).call(this,t.propertiesToUpdate),P(this,Mt,bn).call(this,{hasSelectedEditor:!0})}setSelected(t){for(const e of c(this,Me))e!==t&&e.unselect();c(this,Me).clear(),c(this,Me).add(t),t.select(),P(this,Mt,qa).call(this,t.propertiesToUpdate),P(this,Mt,bn).call(this,{hasSelectedEditor:!0})}isSelected(t){return c(this,Me).has(t)}get firstSelectedEditor(){return c(this,Me).values().next().value}unselect(t){t.unselect(),c(this,Me).delete(t),P(this,Mt,bn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,Me).size!==0}get isEnterHandled(){return c(this,Me).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){c(this,Ds).undo(),P(this,Mt,bn).call(this,{hasSomethingToUndo:c(this,Ds).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:P(this,Mt,Eu).call(this)})}redo(){c(this,Ds).redo(),P(this,Mt,bn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,Ds).hasSomethingToRedo(),isEmpty:P(this,Mt,Eu).call(this)})}addCommands(t){c(this,Ds).add(t),P(this,Mt,bn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:P(this,Mt,Eu).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...c(this,Me)],e=()=>{for(const n of t)n.remove()},i=()=>{for(const n of t)P(this,Mt,V1).call(this,n)};this.addCommands({cmd:e,undo:i,mustExec:!0})}commitOrRemove(){var t;(t=c(this,Un))==null||t.commitOrRemove()}hasSomethingToControl(){return c(this,Un)||this.hasSelection}selectAll(){for(const t of c(this,Me))t.commit();P(this,Mt,G1).call(this,c(this,Ci).values())}unselectAll(){if(!(c(this,Un)&&(c(this,Un).commitOrRemove(),c(this,ji)!==pe.NONE))&&this.hasSelection){for(const t of c(this,Me))t.unselect();c(this,Me).clear(),P(this,Mt,bn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;c(this,Ka)[0]+=t,c(this,Ka)[1]+=e;const[n,s]=c(this,Ka),r=[...c(this,Me)],a=1e3;c(this,dr)&&clearTimeout(c(this,dr)),N(this,dr,setTimeout(()=>{N(this,dr,null),c(this,Ka)[0]=c(this,Ka)[1]=0,this.addCommands({cmd:()=>{for(const l of r)c(this,Ci).has(l.id)&&l.translateInPage(n,s)},undo:()=>{for(const l of r)c(this,Ci).has(l.id)&&l.translateInPage(-n,-s)},mustExec:!1})},a));for(const l of r)l.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),N(this,hr,new Map);for(const t of c(this,Me))c(this,hr).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,hr))return!1;this.disableUserSelect(!1);const t=c(this,hr);N(this,hr,null);let e=!1;for(const[{x:n,y:s,pageIndex:r},a]of t)a.newX=n,a.newY=s,a.newPageIndex=r,e||(e=n!==a.savedX||s!==a.savedY||r!==a.savedPageIndex);if(!e)return!1;const i=(n,s,r,a)=>{if(c(this,Ci).has(n.id)){const l=c(this,Xi).get(a);l?n._setParentAndPosition(l,s,r):(n.pageIndex=a,n.x=s,n.y=r)}};return this.addCommands({cmd:()=>{for(const[n,{newX:s,newY:r,newPageIndex:a}]of t)i(n,s,r,a)},undo:()=>{for(const[n,{savedX:s,savedY:r,savedPageIndex:a}]of t)i(n,s,r,a)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(c(this,hr))for(const i of c(this,hr).keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||c(this,Me).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return c(this,Un)===t}getActive(){return c(this,Un)}getMode(){return c(this,ji)}get imageManager(){return _e(this,"imageManager",new B1)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let u=0,d=e.rangeCount;u<d;u++)if(!t.contains(e.getRangeAt(u).commonAncestorContainer))return null;const{x:i,y:n,width:s,height:r}=t.getBoundingClientRect();let a;switch(t.getAttribute("data-main-rotation")){case"90":a=(u,d,p,b)=>({x:(d-n)/r,y:1-(u+p-i)/s,width:b/r,height:p/s});break;case"180":a=(u,d,p,b)=>({x:1-(u+p-i)/s,y:1-(d+b-n)/r,width:p/s,height:b/r});break;case"270":a=(u,d,p,b)=>({x:1-(d+b-n)/r,y:(u-i)/s,width:b/r,height:p/s});break;default:a=(u,d,p,b)=>({x:(u-i)/s,y:(d-n)/r,width:p/s,height:b/r});break}const l=[];for(let u=0,d=e.rangeCount;u<d;u++){const p=e.getRangeAt(u);if(!p.collapsed)for(const{x:b,y:g,width:y,height:w}of p.getClientRects())y===0||w===0||l.push(a(b,g,y,w))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:t,id:e}){(c(this,Jh)||N(this,Jh,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=c(this,Jh))==null||e.delete(t)}renderAnnotationElement(t){var n;const e=(n=c(this,Jh))==null?void 0:n.get(t.data.id);if(!e)return;const i=c(this,$r).getRawValue(e);i&&(c(this,ji)===pe.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}};Yh=new WeakMap,Un=new WeakMap,Ci=new WeakMap,Xi=new WeakMap,Kh=new WeakMap,$r=new WeakMap,Jh=new WeakMap,Ds=new WeakMap,Va=new WeakMap,Qh=new WeakMap,Ko=new WeakMap,hr=new WeakMap,Os=new WeakMap,Jo=new WeakMap,ed=new WeakMap,id=new WeakMap,Zh=new WeakMap,nd=new WeakMap,cr=new WeakMap,Ga=new WeakMap,tc=new WeakMap,Xa=new WeakMap,ur=new WeakMap,sg=new WeakMap,$a=new WeakMap,sd=new WeakMap,Ya=new WeakMap,Qo=new WeakMap,rd=new WeakMap,ad=new WeakMap,ji=new WeakMap,Me=new WeakMap,Yr=new WeakMap,Zo=new WeakMap,od=new WeakMap,ld=new WeakMap,Ka=new WeakMap,dr=new WeakMap,Kr=new WeakMap,hd=new WeakMap,cs=new WeakMap,Mt=new WeakSet,bp=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},H1=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of c(this,Xi).values())if(i.hasTextLayer(t))return i;return null},Qm=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=P(this,Mt,bp).call(this,t).closest(".textLayer"),n=this.getSelectionBoxes(i);n&&(c(this,ur)||N(this,ur,new Ay(this)),c(this,ur).show(i,n,this.direction==="ltr"))},Zm=function(){var s,r,a;const t=document.getSelection();if(!t||t.isCollapsed){c(this,Yr)&&((s=c(this,ur))==null||s.hide(),N(this,Yr,null),P(this,Mt,bn).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===c(this,Yr))return;const n=P(this,Mt,bp).call(this,t).closest(".textLayer");if(!n){c(this,Yr)&&((r=c(this,ur))==null||r.hide(),N(this,Yr,null),P(this,Mt,bn).call(this,{hasSelectedText:!1}));return}if((a=c(this,ur))==null||a.hide(),N(this,Yr,e),P(this,Mt,bn).call(this,{hasSelectedText:!0}),!(c(this,ji)!==pe.HIGHLIGHT&&c(this,ji)!==pe.NONE)&&(c(this,ji)===pe.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),N(this,Xa,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=c(this,ji)===pe.HIGHLIGHT?P(this,Mt,H1).call(this,n):null;l==null||l.toggleDrawing();const u=new AbortController,d=this.combinedSignal(u),p=b=>{b.type==="pointerup"&&b.button!==0||(u.abort(),l==null||l.toggleDrawing(!0),b.type==="pointerup"&&P(this,Mt,vp).call(this,"main_toolbar"))};window.addEventListener("pointerup",p,{signal:d}),window.addEventListener("blur",p,{signal:d})}},vp=function(t=""){c(this,ji)===pe.HIGHLIGHT?this.highlightSelection(t):c(this,ed)&&P(this,Mt,Qm).call(this)},t5=function(){document.addEventListener("selectionchange",P(this,Mt,Zm).bind(this),{signal:this._signal})},e5=function(){if(c(this,Ga))return;N(this,Ga,new AbortController);const t=this.combinedSignal(c(this,Ga));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},i5=function(){var t;(t=c(this,Ga))==null||t.abort(),N(this,Ga,null)},z1=function(){if(c(this,Ya))return;N(this,Ya,new AbortController);const t=this.combinedSignal(c(this,Ya));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},n5=function(){var t;(t=c(this,Ya))==null||t.abort(),N(this,Ya,null)},U1=function(){if(c(this,Va))return;N(this,Va,new AbortController);const t=this.combinedSignal(c(this,Va));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},W1=function(){var t;(t=c(this,Va))==null||t.abort(),N(this,Va,null)},s5=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},bn=function(t){Object.entries(t).some(([i,n])=>c(this,ld)[i]!==n)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,ld),t)}),c(this,ji)===pe.HIGHLIGHT&&t.hasSelectedEditor===!1&&P(this,Mt,qa).call(this,[[ne.HIGHLIGHT_FREE,!0]]))},qa=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},r5=async function(){if(!c(this,$a)){N(this,$a,!0);const t=[];for(const e of c(this,Xi).values())t.push(e.enable());await Promise.all(t);for(const e of c(this,Ci).values())e.enable()}},a5=function(){if(this.unselectAll(),c(this,$a)){N(this,$a,!1);for(const t of c(this,Xi).values())t.disable();for(const t of c(this,Ci).values())t.disable()}},V1=function(t){const e=c(this,Xi).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},o5=function(){let t=null;for(t of c(this,Me));return t},Eu=function(){if(c(this,Ci).size===0)return!0;if(c(this,Ci).size===1)for(const t of c(this,Ci).values())return t.isEmpty();return!1},G1=function(t){for(const e of c(this,Me))e.unselect();c(this,Me).clear();for(const e of t)e.isEmpty()||(c(this,Me).add(e),e.select());P(this,Mt,bn).call(this,{hasSelectedEditor:this.hasSelection})},ie(qh,"TRANSLATE_SMALL",1),ie(qh,"TRANSLATE_BIG",10);let Wl=qh;var Bi,fr,js,ec,pr,Wn,ic,gr,Tn,Jr,tl,mr,Ja,$s,Cu,yp;const vn=class vn{constructor(t){M(this,$s);M(this,Bi,null);M(this,fr,!1);M(this,js,null);M(this,ec,null);M(this,pr,null);M(this,Wn,null);M(this,ic,!1);M(this,gr,null);M(this,Tn,null);M(this,Jr,null);M(this,tl,null);M(this,mr,!1);N(this,Tn,t),N(this,mr,t._uiManager.useNewAltTextFlow),c(vn,Ja)||N(vn,Ja,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){vn._l10n??(vn._l10n=t)}async render(){const t=N(this,js,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=N(this,ec,document.createElement("span"));t.append(e),c(this,mr)?(t.classList.add("new"),t.setAttribute("data-l10n-id",c(vn,Ja).missing),e.setAttribute("data-l10n-id",c(vn,Ja)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=c(this,Tn)._uiManager._signal;t.addEventListener("contextmenu",vs,{signal:i}),t.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:i});const n=s=>{s.preventDefault(),c(this,Tn)._uiManager.editAltText(c(this,Tn)),c(this,mr)&&c(this,Tn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:c(this,$s,Cu)}})};return t.addEventListener("click",n,{capture:!0,signal:i}),t.addEventListener("keydown",s=>{s.target===t&&s.key==="Enter"&&(N(this,ic,!0),n(s))},{signal:i}),await P(this,$s,yp).call(this),t}finish(){c(this,js)&&(c(this,js).focus({focusVisible:c(this,ic)}),N(this,ic,!1))}isEmpty(){return c(this,mr)?c(this,Bi)===null:!c(this,Bi)&&!c(this,fr)}hasData(){return c(this,mr)?c(this,Bi)!==null||!!c(this,Jr):this.isEmpty()}get guessedText(){return c(this,Jr)}async setGuessedText(t){c(this,Bi)===null&&(N(this,Jr,t),N(this,tl,await vn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),P(this,$s,yp).call(this))}toggleAltTextBadge(t=!1){var e;if(!c(this,mr)||c(this,Bi)){(e=c(this,gr))==null||e.remove(),N(this,gr,null);return}if(!c(this,gr)){const i=N(this,gr,document.createElement("div"));i.className="noAltTextBadge",c(this,Tn).div.append(i)}c(this,gr).classList.toggle("hidden",!t)}serialize(t){let e=c(this,Bi);return!t&&c(this,Jr)===e&&(e=c(this,tl)),{altText:e,decorative:c(this,fr),guessedText:c(this,Jr),textWithDisclaimer:c(this,tl)}}get data(){return{altText:c(this,Bi),decorative:c(this,fr)}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:n,cancel:s=!1}){i&&(N(this,Jr,i),N(this,tl,n)),!(c(this,Bi)===t&&c(this,fr)===e)&&(s||(N(this,Bi,t),N(this,fr,e)),P(this,$s,yp).call(this))}toggle(t=!1){c(this,js)&&(!t&&c(this,Wn)&&(clearTimeout(c(this,Wn)),N(this,Wn,null)),c(this,js).disabled=!t)}shown(){c(this,Tn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:c(this,$s,Cu)}})}destroy(){var t,e;(t=c(this,js))==null||t.remove(),N(this,js,null),N(this,ec,null),N(this,pr,null),(e=c(this,gr))==null||e.remove(),N(this,gr,null)}};Bi=new WeakMap,fr=new WeakMap,js=new WeakMap,ec=new WeakMap,pr=new WeakMap,Wn=new WeakMap,ic=new WeakMap,gr=new WeakMap,Tn=new WeakMap,Jr=new WeakMap,tl=new WeakMap,mr=new WeakMap,Ja=new WeakMap,$s=new WeakSet,Cu=function(){return c(this,Bi)&&"added"||c(this,Bi)===null&&this.guessedText&&"review"||"missing"},yp=async function(){var n,s,r;const t=c(this,js);if(!t)return;if(c(this,mr)){if(t.classList.toggle("done",!!c(this,Bi)),t.setAttribute("data-l10n-id",c(vn,Ja)[c(this,$s,Cu)]),(n=c(this,ec))==null||n.setAttribute("data-l10n-id",c(vn,Ja)[`${c(this,$s,Cu)}-label`]),!c(this,Bi)){(s=c(this,pr))==null||s.remove();return}}else{if(!c(this,Bi)&&!c(this,fr)){t.classList.remove("done"),(r=c(this,pr))==null||r.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=c(this,pr);if(!e){N(this,pr,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${c(this,Tn).id}`;const a=100,l=c(this,Tn)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(c(this,Wn)),N(this,Wn,null)},{once:!0}),t.addEventListener("mouseenter",()=>{N(this,Wn,setTimeout(()=>{N(this,Wn,null),c(this,pr).classList.add("show"),c(this,Tn)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:l}),t.addEventListener("mouseleave",()=>{var u;c(this,Wn)&&(clearTimeout(c(this,Wn)),N(this,Wn,null)),(u=c(this,pr))==null||u.classList.remove("show")},{signal:l})}c(this,fr)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=c(this,Bi)),e.parentNode||t.append(e);const i=c(this,Tn).getImageForAltText();i==null||i.setAttribute("aria-describedby",e.id)},M(vn,Ja,null),ie(vn,"_l10n",null);let $p=vn;var el,Bs,ti,nc,il,$i,nl,Qa,cd,sl,Za,ud,rl,Qr,br,sc,rc,us,dd,rg,ge,X1,fd,$1,Y1,l5,h5,K1,J1,Q1,c5,Z1,u5,d5,f5,t0,Pu;const Te=class Te{constructor(t){M(this,ge);M(this,el,null);M(this,Bs,null);M(this,ti,null);M(this,nc,!1);M(this,il,!1);M(this,$i,null);M(this,nl,null);M(this,Qa,null);M(this,cd,"");M(this,sl,!1);M(this,Za,null);M(this,ud,!1);M(this,rl,!1);M(this,Qr,!1);M(this,br,null);M(this,sc,0);M(this,rc,0);M(this,us,null);ie(this,"_editToolbar",null);ie(this,"_initialOptions",Object.create(null));ie(this,"_initialData",null);ie(this,"_isVisible",!0);ie(this,"_uiManager",null);ie(this,"_focusEventsAllowed",!0);M(this,dd,!1);M(this,rg,Te._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:n,pageX:s,pageY:r}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,n],this.pageTranslation=[s,r];const[a,l]=this.parentDimensions;this.x=t.x/a,this.y=t.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Te.prototype._resizeWithKeyboard,e=Wl.TRANSLATE_SMALL,i=Wl.TRANSLATE_BIG;return _e(this,"_resizerKeyboardManager",new df([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],Te.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return _e(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new Ly({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Te._l10n??(Te._l10n=t),Te._l10nResizer||(Te._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Te._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);Te._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){$e("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,dd)}set _isDraggable(t){var e;N(this,dd,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,rg)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):P(this,ge,Pu).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(c(this,sl)?N(this,sl,!1):this.parent.setSelected(this))}focusout(t){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,n){const[s,r]=this.parentDimensions;[i,n]=this.screenToPageTranslation(i,n),this.x=(t+i)/s,this.y=(e+n)/r,this.fixAndSetPosition()}translate(t,e){P(this,ge,X1).call(this,this.parentDimensions,t,e)}translateInPage(t,e){c(this,Za)||N(this,Za,[this.x,this.y]),P(this,ge,X1).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){c(this,Za)||N(this,Za,[this.x,this.y]);const[i,n]=this.parentDimensions;if(this.x+=t/i,this.y+=e/n,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:u,y:d}=this.div.getBoundingClientRect();this.parent.findNewParent(this,u,d)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:r}=this;const[a,l]=this.getBaseTranslation();s+=a,r+=l,this.div.style.left=`${(100*s).toFixed(2)}%`,this.div.style.top=`${(100*r).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!c(this,Za)&&(c(this,Za)[0]!==this.x||c(this,Za)[1]!==this.y)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=Te,n=i/t,s=i/e;switch(this.rotation){case 90:return[-n,s];case 180:return[n,s];case 270:return[n,-s];default:return[-n,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const[e,i]=this.pageDimensions;let{x:n,y:s,width:r,height:a}=this;if(r*=e,a*=i,n*=e,s*=i,this._mustFixPosition)switch(t){case 0:n=Math.max(0,Math.min(e-r,n)),s=Math.max(0,Math.min(i-a,s));break;case 90:n=Math.max(0,Math.min(e-a,n)),s=Math.min(i,Math.max(r,s));break;case 180:n=Math.min(e,Math.max(r,n)),s=Math.min(i,Math.max(a,s));break;case 270:n=Math.min(e,Math.max(a,n)),s=Math.max(0,Math.min(i-r,s));break}this.x=n/=e,this.y=s/=i;const[l,u]=this.getBaseTranslation();n+=l,s+=u;const{style:d}=this.div;d.left=`${(100*n).toFixed(2)}%`,d.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var i;return P(i=Te,fd,$1).call(i,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var i;return P(i=Te,fd,$1).call(i,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(t,e){const[i,n]=this.parentDimensions;this.div.style.width=`${(100*t/i).toFixed(2)}%`,c(this,il)||(this.div.style.height=`${(100*e/n).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:i}=t,n=i.endsWith("%"),s=!c(this,il)&&e.endsWith("%");if(n&&s)return;const[r,a]=this.parentDimensions;n||(t.width=`${(100*parseFloat(i)/r).toFixed(2)}%`),!c(this,il)&&!s&&(t.height=`${(100*parseFloat(e)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var t;(t=c(this,ti))==null||t.finish()}async addEditToolbar(){return this._editToolbar||c(this,rl)?this._editToolbar:(this._editToolbar=new O1(this),this.div.append(this._editToolbar.render()),c(this,ti)&&await this._editToolbar.addAltText(c(this,ti)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=c(this,ti))==null||t.destroy())}addContainer(t){var i;const e=(i=this._editToolbar)==null?void 0:i.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){c(this,ti)||($p.initialize(Te._l10n),N(this,ti,new $p(this)),c(this,el)&&(c(this,ti).data=c(this,el),N(this,el,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=c(this,ti))==null?void 0:t.data}set altTextData(t){c(this,ti)&&(c(this,ti).data=t)}get guessedAltText(){var t;return(t=c(this,ti))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=c(this,ti))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=c(this,ti))==null?void 0:e.serialize(t)}hasAltText(){return!!c(this,ti)&&!c(this,ti).isEmpty()}hasAltTextData(){var t;return((t=c(this,ti))==null?void 0:t.hasData())??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=c(this,nc)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),P(this,ge,Z1).call(this);const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[i,n]=this.getInitialTranslation();return this.translate(i,n),Xp(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:e}=wn.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(N(this,sl,!0),this._isDraggable){P(this,ge,c5).call(this,t);return}P(this,ge,Q1).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){c(this,br)&&clearTimeout(c(this,br)),N(this,br,setTimeout(()=>{var t;N(this,br,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition()}getRect(t,e,i=this.rotation){const n=this.parentScale,[s,r]=this.pageDimensions,[a,l]=this.pageTranslation,u=t/n,d=e/n,p=this.x*s,b=this.y*r,g=this.width*s,y=this.height*r;switch(i){case 0:return[p+u+a,r-b-d-y+l,p+u+g+a,r-b-d+l];case 90:return[p+d+a,r-b+u+l,p+d+y+a,r-b+u+g+l];case 180:return[p-u-g+a,r-b+d+l,p-u+a,r-b+d+y+l];case 270:return[p-d-y+a,r-b-u-g+l,p-d+a,r-b-u+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,n,s,r]=t,a=s-i,l=r-n;switch(this.rotation){case 0:return[i,e-r,a,l];case 90:return[i,e-n,l,a];case 180:return[s,e-n,a,l];case 270:return[s,e-r,l,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){N(this,rl,!0)}disableEditMode(){N(this,rl,!1)}isInEditMode(){return c(this,rl)}shouldGetKeyboardEvents(){return c(this,Qr)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){P(this,ge,Z1).call(this)}rotate(t){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){$e("An editor must be serializable")}static async deserialize(t,e,i){const n=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i});n.rotation=t.rotation,N(n,el,t.accessibilityData);const[s,r]=n.pageDimensions,[a,l,u,d]=n.getRectInCurrentCoords(t.rect,r);return n.x=a/s,n.y=l/r,n.width=u/s,n.height=d/r,n}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t;if((t=c(this,Qa))==null||t.abort(),N(this,Qa,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),c(this,br)&&(clearTimeout(c(this,br)),N(this,br,null)),P(this,ge,Pu).call(this),this.removeEditToolbar(),c(this,us)){for(const e of c(this,us).values())clearTimeout(e);N(this,us,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(P(this,ge,l5).call(this),c(this,$i).classList.remove("hidden"),Xp(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),N(this,nl,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=c(this,$i).children;if(!c(this,Bs)){N(this,Bs,Array.from(e));const r=P(this,ge,u5).bind(this),a=P(this,ge,d5).bind(this),l=this._uiManager._signal;for(const u of c(this,Bs)){const d=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",r,{signal:l}),u.addEventListener("blur",a,{signal:l}),u.addEventListener("focus",P(this,ge,f5).bind(this,d),{signal:l}),u.setAttribute("data-l10n-id",Te._l10nResizer[d])}}const i=c(this,Bs)[0];let n=0;for(const r of e){if(r===i)break;n++}const s=(360-this.rotation+this.parentRotation)%360/90*(c(this,Bs).length/4);if(s!==n){if(s<n)for(let a=0;a<n-s;a++)c(this,$i).append(c(this,$i).firstChild);else if(s>n)for(let a=0;a<s-n;a++)c(this,$i).firstChild.before(c(this,$i).lastChild);let r=0;for(const a of e){const u=c(this,Bs)[r++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",Te._l10nResizer[u])}}P(this,ge,t0).call(this,0),N(this,Qr,!0),c(this,$i).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){c(this,Qr)&&P(this,ge,J1).call(this,c(this,cd),{movementX:t,movementY:e})}_stopResizingWithKeyboard(){P(this,ge,Pu).call(this),this.div.focus()}select(){var t,e,i;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var n,s;(n=this.div)!=null&&n.classList.contains("selectedEditor")&&((s=this._editToolbar)==null||s.show())});return}(e=this._editToolbar)==null||e.show(),(i=c(this,ti))==null||i.toggleAltTextBadge(!1)}unselect(){var t,e,i,n,s;(t=c(this,$i))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(n=this._editToolbar)==null||n.hide(),(s=c(this,ti))==null||s.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return c(this,ud)}set isEditing(t){N(this,ud,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){N(this,il,!0);const i=t/e,{style:n}=this.div;n.aspectRatio=i,n.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){c(this,us)||N(this,us,new Map);const{action:i}=t;let n=c(this,us).get(i);n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(t),c(this,us).delete(i),c(this,us).size===0&&N(this,us,null)},Te._telemetryTimeout),c(this,us).set(i,n);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),N(this,nc,!1)}disable(){this.div&&(this.div.tabIndex=-1),N(this,nc,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};el=new WeakMap,Bs=new WeakMap,ti=new WeakMap,nc=new WeakMap,il=new WeakMap,$i=new WeakMap,nl=new WeakMap,Qa=new WeakMap,cd=new WeakMap,sl=new WeakMap,Za=new WeakMap,ud=new WeakMap,rl=new WeakMap,Qr=new WeakMap,br=new WeakMap,sc=new WeakMap,rc=new WeakMap,us=new WeakMap,dd=new WeakMap,rg=new WeakMap,ge=new WeakSet,X1=function([t,e],i,n){[i,n]=this.screenToPageTranslation(i,n),this.x+=i/t,this.y+=n/e,this.fixAndSetPosition()},fd=new WeakSet,$1=function(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Y1=function(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}},l5=function(){if(c(this,$i))return;N(this,$i,document.createElement("div")),c(this,$i).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const n=document.createElement("div");c(this,$i).append(n),n.classList.add("resizer",i),n.setAttribute("data-resizer-name",i),n.addEventListener("pointerdown",P(this,ge,h5).bind(this,i),{signal:e}),n.addEventListener("contextmenu",vs,{signal:e}),n.tabIndex=-1}this.div.prepend(c(this,$i))},h5=function(t,e){var y;e.preventDefault();const{isMac:i}=wn.platform;if(e.button!==0||e.ctrlKey&&i)return;(y=c(this,ti))==null||y.toggle(!1);const n=this._isDraggable;this._isDraggable=!1;const s=new AbortController,r=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",P(this,ge,J1).bind(this,t),{passive:!0,capture:!0,signal:r}),window.addEventListener("contextmenu",vs,{signal:r});const a=this.x,l=this.y,u=this.width,d=this.height,p=this.parent.div.style.cursor,b=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const g=()=>{var w;s.abort(),this.parent.togglePointerEvents(!0),(w=c(this,ti))==null||w.toggle(!0),this._isDraggable=n,this.parent.div.style.cursor=p,this.div.style.cursor=b,P(this,ge,K1).call(this,a,l,u,d)};window.addEventListener("pointerup",g,{signal:r}),window.addEventListener("blur",g,{signal:r})},K1=function(t,e,i,n){const s=this.x,r=this.y,a=this.width,l=this.height;s===t&&r===e&&a===i&&l===n||this.addCommands({cmd:()=>{this.width=a,this.height=l,this.x=s,this.y=r;const[u,d]=this.parentDimensions;this.setDims(u*a,d*l),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=n,this.x=t,this.y=e;const[u,d]=this.parentDimensions;this.setDims(u*i,d*n),this.fixAndSetPosition()},mustExec:!0})},J1=function(t,e){const[i,n]=this.parentDimensions,s=this.x,r=this.y,a=this.width,l=this.height,u=Te.MIN_SIZE/i,d=Te.MIN_SIZE/n,p=at=>Math.round(at*1e4)/1e4,b=P(this,ge,Y1).call(this,this.rotation),g=(at,it)=>[b[0]*at+b[2]*it,b[1]*at+b[3]*it],y=P(this,ge,Y1).call(this,360-this.rotation),w=(at,it)=>[y[0]*at+y[2]*it,y[1]*at+y[3]*it];let S,A,E=!1,D=!1;switch(t){case"topLeft":E=!0,S=(at,it)=>[0,0],A=(at,it)=>[at,it];break;case"topMiddle":S=(at,it)=>[at/2,0],A=(at,it)=>[at/2,it];break;case"topRight":E=!0,S=(at,it)=>[at,0],A=(at,it)=>[0,it];break;case"middleRight":D=!0,S=(at,it)=>[at,it/2],A=(at,it)=>[0,it/2];break;case"bottomRight":E=!0,S=(at,it)=>[at,it],A=(at,it)=>[0,0];break;case"bottomMiddle":S=(at,it)=>[at/2,it],A=(at,it)=>[at/2,0];break;case"bottomLeft":E=!0,S=(at,it)=>[0,it],A=(at,it)=>[at,0];break;case"middleLeft":D=!0,S=(at,it)=>[0,it/2],A=(at,it)=>[at,it/2];break}const q=S(a,l),G=A(a,l);let K=g(...G);const X=p(s+K[0]),H=p(r+K[1]);let et=1,ct=1,[I,O]=this.screenToPageTranslation(e.movementX,e.movementY);if([I,O]=w(I/i,O/n),E){const at=Math.hypot(a,l);et=ct=Math.max(Math.min(Math.hypot(G[0]-q[0]-I,G[1]-q[1]-O)/at,1/a,1/l),u/a,d/l)}else D?et=Math.max(u,Math.min(1,Math.abs(G[0]-q[0]-I)))/a:ct=Math.max(d,Math.min(1,Math.abs(G[1]-q[1]-O)))/l;const $=p(a*et),W=p(l*ct);K=g(...A($,W));const ht=X-K[0],lt=H-K[1];this.width=$,this.height=W,this.x=ht,this.y=lt,this.setDims(i*$,n*W),this.fixAndSetPosition()},Q1=function(t){const{isMac:e}=wn.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},c5=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();const i=new AbortController,n=this._uiManager.combinedSignal(i);if(e){this.div.classList.add("moving"),N(this,sc,t.clientX),N(this,rc,t.clientY);const r=a=>{const{clientX:l,clientY:u}=a,[d,p]=this.screenToPageTranslation(l-c(this,sc),u-c(this,rc));N(this,sc,l),N(this,rc,u),this._uiManager.dragSelectedEditors(d,p)};window.addEventListener("pointermove",r,{passive:!0,capture:!0,signal:n})}const s=()=>{i.abort(),e&&this.div.classList.remove("moving"),N(this,sl,!1),this._uiManager.endDragSession()||P(this,ge,Q1).call(this,t)};window.addEventListener("pointerup",s,{signal:n}),window.addEventListener("blur",s,{signal:n})},Z1=function(){if(c(this,Qa)||!this.div)return;N(this,Qa,new AbortController);const t=this._uiManager.combinedSignal(c(this,Qa));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},u5=function(t){Te._resizerKeyboardManager.exec(this,t)},d5=function(t){var e;c(this,Qr)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==c(this,$i)&&P(this,ge,Pu).call(this)},f5=function(t){N(this,cd,c(this,Qr)?t:"")},t0=function(t){if(c(this,Bs))for(const e of c(this,Bs))e.tabIndex=t},Pu=function(){if(N(this,Qr,!1),P(this,ge,t0).call(this,-1),c(this,nl)){const{savedX:t,savedY:e,savedWidth:i,savedHeight:n}=c(this,nl);P(this,ge,K1).call(this,t,e,i,n),N(this,nl,null)}},M(Te,fd),ie(Te,"_l10n",null),ie(Te,"_l10nResizer",null),ie(Te,"_borderLineWidth",-1),ie(Te,"_colorManager",new q1),ie(Te,"_zIndex",1),ie(Te,"_telemetryTimeout",1e3);let De=Te;class Ly extends De{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const sm=3285377520,hs=4294901760,or=65535;class p5{constructor(t){this.h1=t?t&4294967295:sm,this.h2=t?t&4294967295:sm}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let w=0,S=t.length;w<S;w++){const A=t.charCodeAt(w);A<=255?e[i++]=A:(e[i++]=A>>>8,e[i++]=A&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const n=i>>2,s=i-n*4,r=new Uint32Array(e.buffer,0,n);let a=0,l=0,u=this.h1,d=this.h2;const p=3432918353,b=461845907,g=p&or,y=b&or;for(let w=0;w<n;w++)w&1?(a=r[w],a=a*p&hs|a*g&or,a=a<<15|a>>>17,a=a*b&hs|a*y&or,u^=a,u=u<<13|u>>>19,u=u*5+3864292196):(l=r[w],l=l*p&hs|l*g&or,l=l<<15|l>>>17,l=l*b&hs|l*y&or,d^=l,d=d<<13|d>>>19,d=d*5+3864292196);switch(a=0,s){case 3:a^=e[n*4+2]<<16;case 2:a^=e[n*4+1]<<8;case 1:a^=e[n*4],a=a*p&hs|a*g&or,a=a<<15|a>>>17,a=a*b&hs|a*y&or,n&1?u^=a:d^=a}this.h1=u,this.h2=d}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&hs|t*36045&or,e=e*4283543511&hs|((e<<16|t>>>16)*2950163797&hs)>>>16,t^=e>>>1,t=t*444984403&hs|t*60499&or,e=e*3301882366&hs|((e<<16|t>>>16)*3120437893&hs)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const e0=Object.freeze({map:null,hash:"",transfer:void 0});var al,ol,qi,ag,g5;class d2{constructor(){M(this,ag);M(this,al,!1);M(this,ol,null);M(this,qi,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=c(this,qi).get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return c(this,qi).get(t)}remove(t){if(c(this,qi).delete(t),c(this,qi).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of c(this,qi).values())if(e instanceof De)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=c(this,qi).get(t);let n=!1;if(i!==void 0)for(const[s,r]of Object.entries(e))i[s]!==r&&(n=!0,i[s]=r);else n=!0,c(this,qi).set(t,e);n&&P(this,ag,g5).call(this),e instanceof De&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return c(this,qi).has(t)}getAll(){return c(this,qi).size>0?a2(c(this,qi)):null}setAll(t){for(const[e,i]of Object.entries(t))this.setValue(e,i)}get size(){return c(this,qi).size}resetModified(){c(this,al)&&(N(this,al,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new m5(this)}get serializable(){if(c(this,qi).size===0)return e0;const t=new Map,e=new p5,i=[],n=Object.create(null);let s=!1;for(const[r,a]of c(this,qi)){const l=a instanceof De?a.serialize(!1,n):a;l&&(t.set(r,l),e.update(`${r}:${JSON.stringify(l)}`),s||(s=!!l.bitmap))}if(s)for(const r of t.values())r.bitmap&&i.push(r.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:e0}get editorStats(){let t=null;const e=new Map;for(const i of c(this,qi).values()){if(!(i instanceof De))continue;const n=i.telemetryFinalData;if(!n)continue;const{type:s}=n;e.has(s)||e.set(s,Object.getPrototypeOf(i).constructor),t||(t=Object.create(null));const r=t[s]||(t[s]=new Map);for(const[a,l]of Object.entries(n)){if(a==="type")continue;let u=r.get(a);u||(u=new Map,r.set(a,u));const d=u.get(l)??0;u.set(l,d+1)}}for(const[i,n]of e)t[i]=n.computeTelemetryFinalData(t[i]);return t}resetModifiedIds(){N(this,ol,null)}get modifiedIds(){if(c(this,ol))return c(this,ol);const t=[];for(const e of c(this,qi).values())!(e instanceof De)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return N(this,ol,{ids:new Set(t),hash:t.join(",")})}}al=new WeakMap,ol=new WeakMap,qi=new WeakMap,ag=new WeakSet,g5=function(){c(this,al)||(N(this,al,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var pd;class m5 extends d2{constructor(e){super();M(this,pd);const{map:i,hash:n,transfer:s}=e.serializable,r=structuredClone(i,s?{transfer:s}:null);N(this,pd,{map:r,hash:n,transfer:s})}get print(){$e("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,pd)}get modifiedIds(){return _e(this,"modifiedIds",{ids:new Set,hash:""})}}pd=new WeakMap;var ac;class Ny{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){M(this,ac,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),c(this,ac).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||c(this,ac).has(t.loadedName))){if(Ti(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:n,style:s}=t,r=new FontFace(i,n,s);this.addNativeFontFace(r);try{await r.load(),c(this,ac).add(i),e==null||e(t)}catch{me(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(r)}return}$e("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(n){throw me(`Failed to load font '${i.family}': '${n}'.`),t.disableFontFace=!0,n}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const n=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,n)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return _e(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(dn||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),_e(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(Ti(!n.done,"completeRequest() cannot be called twice."),n.done=!0;i.length>0&&i[0].done;){const s=i.shift();setTimeout(s.callback,0)}}const{loadingRequests:i}=this,n={done:!1,complete:e,callback:t};return i.push(n),n}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return _e(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(q,G){return q.charCodeAt(G)<<24|q.charCodeAt(G+1)<<16|q.charCodeAt(G+2)<<8|q.charCodeAt(G+3)&255}function n(q,G,K,X){const H=q.substring(0,G),et=q.substring(G+K);return H+X+et}let s,r;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let u=0;function d(q,G){if(++u>30){me("Load test font never loaded."),G();return}if(l.font="30px "+q,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){G();return}setTimeout(d.bind(null,q,G))}const p=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=n(b,976,p.length,p);const y=16,w=1482184792;let S=i(b,y);for(s=0,r=p.length-3;s<r;s+=4)S=S-w+i(p,s)|0;s<p.length&&(S=S-w+i(p+"XXX",s)|0),b=n(b,y,4,cy(S));const A=`url(data:font/opentype;base64,${btoa(b)});`,E=`@font-face {font-family:"${p}";src:${A}}`;this.insertRule(E);const D=this._document.createElement("div");D.style.visibility="hidden",D.style.width=D.style.height="10px",D.style.position="absolute",D.style.top=D.style.left="0px";for(const q of[t.loadedName,p]){const G=this._document.createElement("span");G.textContent="Hi",G.style.fontFamily=q,D.append(G)}this._document.body.append(D),d(p,()=>{D.remove(),e.complete()})}}ac=new WeakMap;class Ey{constructor(t,{disableFontFace:e=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const n in t)this[n]=t[n];this.disableFontFace=e===!0,this._inspectFont=i}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${my(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${t}}`}return(i=this._inspectFont)==null||i.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let i;try{i=t.get(this.loadedName+"_path_"+e)}catch(s){me(`getPathGenerator - ignoring character: "${s}".`)}if(!Array.isArray(i)||i.length===0)return this.compiledGlyphs[e]=function(s,r){};const n=[];for(let s=0,r=i.length;s<r;)switch(i[s++]){case zr.BEZIER_CURVE_TO:{const[a,l,u,d,p,b]=i.slice(s,s+6);n.push(g=>g.bezierCurveTo(a,l,u,d,p,b)),s+=6}break;case zr.MOVE_TO:{const[a,l]=i.slice(s,s+2);n.push(u=>u.moveTo(a,l)),s+=2}break;case zr.LINE_TO:{const[a,l]=i.slice(s,s+2);n.push(u=>u.lineTo(a,l)),s+=2}break;case zr.QUADRATIC_CURVE_TO:{const[a,l,u,d]=i.slice(s,s+4);n.push(p=>p.quadraticCurveTo(a,l,u,d)),s+=4}break;case zr.RESTORE:n.push(a=>a.restore());break;case zr.SAVE:n.push(a=>a.save());break;case zr.SCALE:Ti(n.length===2,"Scale command is only valid at the third position.");break;case zr.TRANSFORM:{const[a,l,u,d,p,b]=i.slice(s,s+6);n.push(g=>g.transform(a,l,u,d,p,b)),s+=6}break;case zr.TRANSLATE:{const[a,l]=i.slice(s,s+2);n.push(u=>u.translate(a,l)),s+=2}break}return this.compiledGlyphs[e]=function(r,a){n[0](r),n[1](r),r.scale(a,-a);for(let l=2,u=n.length;l<u;l++)n[l](r)}}}var gd;class b5{constructor({enableHWA:t=!1}){M(this,gd,!1);N(this,gd,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!c(this,gd)})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){$e("Abstract method `_createCanvas` called.")}}gd=new WeakMap;class Cy extends b5{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class v5{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){$e("Abstract method `_fetch` called.")}}class y5 extends v5{async _fetch(t){const e=await _g(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Ag(e)}}class w5{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,n,s){return"none"}destroy(t=!1){}}var ll,hl,vr,Zr,ln,og,cl,Ht,an,Ph,kh,wp,Th,A5,i0,Ih,ku,Tu,n0,Iu;class Py extends w5{constructor({docId:e,ownerDocument:i=globalThis.document}){super();M(this,Ht);M(this,ll);M(this,hl);M(this,vr);M(this,Zr);M(this,ln);M(this,og);M(this,cl,0);N(this,Zr,e),N(this,ln,i)}addFilter(e){if(!e)return"none";let i=c(this,Ht,an).get(e);if(i)return i;const[n,s,r]=P(this,Ht,wp).call(this,e),a=e.length===1?n:`${n}${s}${r}`;if(i=c(this,Ht,an).get(a),i)return c(this,Ht,an).set(e,i),i;const l=`g_${c(this,Zr)}_transfer_map_${mn(this,cl)._++}`,u=P(this,Ht,Th).call(this,l);c(this,Ht,an).set(e,u),c(this,Ht,an).set(a,u);const d=P(this,Ht,Ih).call(this,l);return P(this,Ht,Tu).call(this,n,s,r,d),u}addHCMFilter(e,i){var y;const n=`${e}-${i}`,s="base";let r=c(this,Ht,Ph).get(s);if((r==null?void 0:r.key)===n||(r?((y=r.filter)==null||y.remove(),r.key=n,r.url="none",r.filter=null):(r={key:n,url:"none",filter:null},c(this,Ht,Ph).set(s,r)),!e||!i))return r.url;const a=P(this,Ht,Iu).call(this,e);e=Wt.makeHexColor(...a);const l=P(this,Ht,Iu).call(this,i);if(i=Wt.makeHexColor(...l),c(this,Ht,kh).style.color="",e==="#000000"&&i==="#ffffff"||e===i)return r.url;const u=new Array(256);for(let w=0;w<=255;w++){const S=w/255;u[w]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const d=u.join(","),p=`g_${c(this,Zr)}_hcm_filter`,b=r.filter=P(this,Ht,Ih).call(this,p);P(this,Ht,Tu).call(this,d,d,d,b),P(this,Ht,i0).call(this,b);const g=(w,S)=>{const A=a[w]/255,E=l[w]/255,D=new Array(S+1);for(let q=0;q<=S;q++)D[q]=A+q/S*(E-A);return D.join(",")};return P(this,Ht,Tu).call(this,g(0,5),g(1,5),g(2,5),b),r.url=P(this,Ht,Th).call(this,p),r.url}addAlphaFilter(e){let i=c(this,Ht,an).get(e);if(i)return i;const[n]=P(this,Ht,wp).call(this,[e]),s=`alpha_${n}`;if(i=c(this,Ht,an).get(s),i)return c(this,Ht,an).set(e,i),i;const r=`g_${c(this,Zr)}_alpha_map_${mn(this,cl)._++}`,a=P(this,Ht,Th).call(this,r);c(this,Ht,an).set(e,a),c(this,Ht,an).set(s,a);const l=P(this,Ht,Ih).call(this,r);return P(this,Ht,n0).call(this,n,l),a}addLuminosityFilter(e){let i=c(this,Ht,an).get(e||"luminosity");if(i)return i;let n,s;if(e?([n]=P(this,Ht,wp).call(this,[e]),s=`luminosity_${n}`):s="luminosity",i=c(this,Ht,an).get(s),i)return c(this,Ht,an).set(e,i),i;const r=`g_${c(this,Zr)}_luminosity_map_${mn(this,cl)._++}`,a=P(this,Ht,Th).call(this,r);c(this,Ht,an).set(e,a),c(this,Ht,an).set(s,a);const l=P(this,Ht,Ih).call(this,r);return P(this,Ht,A5).call(this,l),e&&P(this,Ht,n0).call(this,n,l),a}addHighlightHCMFilter(e,i,n,s,r){var E;const a=`${i}-${n}-${s}-${r}`;let l=c(this,Ht,Ph).get(e);if((l==null?void 0:l.key)===a||(l?((E=l.filter)==null||E.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},c(this,Ht,Ph).set(e,l)),!i||!n))return l.url;const[u,d]=[i,n].map(P(this,Ht,Iu).bind(this));let p=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),b=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[g,y]=[s,r].map(P(this,Ht,Iu).bind(this));b<p&&([p,b,g,y]=[b,p,y,g]),c(this,Ht,kh).style.color="";const w=(D,q,G)=>{const K=new Array(256),X=(b-p)/G,H=D/255,et=(q-D)/(255*G);let ct=0;for(let I=0;I<=G;I++){const O=Math.round(p+I*X),$=H+I*et;for(let W=ct;W<=O;W++)K[W]=$;ct=O+1}for(let I=ct;I<256;I++)K[I]=K[ct-1];return K.join(",")},S=`g_${c(this,Zr)}_hcm_${e}_filter`,A=l.filter=P(this,Ht,Ih).call(this,S);return P(this,Ht,i0).call(this,A),P(this,Ht,Tu).call(this,w(g[0],y[0],5),w(g[1],y[1],5),w(g[2],y[2],5),A),l.url=P(this,Ht,Th).call(this,S),l.url}destroy(e=!1){e&&c(this,Ht,Ph).size!==0||(c(this,vr)&&(c(this,vr).parentNode.parentNode.remove(),N(this,vr,null)),c(this,hl)&&(c(this,hl).clear(),N(this,hl,null)),N(this,cl,0))}}ll=new WeakMap,hl=new WeakMap,vr=new WeakMap,Zr=new WeakMap,ln=new WeakMap,og=new WeakMap,cl=new WeakMap,Ht=new WeakSet,an=function(){return c(this,hl)||N(this,hl,new Map)},Ph=function(){return c(this,og)||N(this,og,new Map)},kh=function(){if(!c(this,vr)){const e=c(this,ln).createElement("div"),{style:i}=e;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const n=c(this,ln).createElementNS(Vr,"svg");n.setAttribute("width",0),n.setAttribute("height",0),N(this,vr,c(this,ln).createElementNS(Vr,"defs")),e.append(n),n.append(c(this,vr)),c(this,ln).body.append(e)}return c(this,vr)},wp=function(e){if(e.length===1){const u=e[0],d=new Array(256);for(let b=0;b<256;b++)d[b]=u[b]/255;const p=d.join(",");return[p,p,p]}const[i,n,s]=e,r=new Array(256),a=new Array(256),l=new Array(256);for(let u=0;u<256;u++)r[u]=i[u]/255,a[u]=n[u]/255,l[u]=s[u]/255;return[r.join(","),a.join(","),l.join(",")]},Th=function(e){if(c(this,ll)===void 0){N(this,ll,"");const i=c(this,ln).URL;i!==c(this,ln).baseURI&&(xg(i)?me('#createUrl: ignore "data:"-URL for performance reasons.'):N(this,ll,i.split("#",1)[0]))}return`url(${c(this,ll)}#${e})`},A5=function(e){const i=c(this,ln).createElementNS(Vr,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(i)},i0=function(e){const i=c(this,ln).createElementNS(Vr,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(i)},Ih=function(e){const i=c(this,ln).createElementNS(Vr,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",e),c(this,Ht,kh).append(i),i},ku=function(e,i,n){const s=c(this,ln).createElementNS(Vr,i);s.setAttribute("type","discrete"),s.setAttribute("tableValues",n),e.append(s)},Tu=function(e,i,n,s){const r=c(this,ln).createElementNS(Vr,"feComponentTransfer");s.append(r),P(this,Ht,ku).call(this,r,"feFuncR",e),P(this,Ht,ku).call(this,r,"feFuncG",i),P(this,Ht,ku).call(this,r,"feFuncB",n)},n0=function(e,i){const n=c(this,ln).createElementNS(Vr,"feComponentTransfer");i.append(n),P(this,Ht,ku).call(this,n,"feFuncA",e)},Iu=function(e){return c(this,Ht,kh).style.color=e,u2(getComputedStyle(c(this,Ht,kh)).getPropertyValue("color"))};class _5{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){$e("Abstract method `_fetch` called.")}}class x5 extends _5{async _fetch(t){const e=await _g(t,"arraybuffer");return new Uint8Array(e)}}if(dn){var s0=Promise.withResolvers(),Uu=null;(async()=>{const t=await Er(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),e=await Er(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),i=await Er(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),n=await Er(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let s,r;return new Map(Object.entries({fs:t,http:e,https:i,url:n,canvas:s,path2d:r}))})().then(t=>{Uu=t,s0.resolve()},t=>{me(`loadPackages: ${t}`),Uu=new Map,s0.resolve()})}class yo{static get promise(){return s0.promise}static get(t){return Uu==null?void 0:Uu.get(t)}}async function S5(o){const e=await yo.get("fs").promises.readFile(o);return new Uint8Array(e)}class ky extends w5{}class Ty extends b5{_createCanvas(t,e){return yo.get("canvas").createCanvas(t,e)}}class Iy extends v5{async _fetch(t){return S5(t)}}class Fy extends _5{async _fetch(t){return S5(t)}}const yn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function r0(o,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],n=new Path2D;n.rect(t[0],t[1],e,i),o.clip(n)}class f2{getPattern(){$e("Abstract method `getPattern` called.")}}class My extends f2{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,n){let s;if(n===yn.STROKE||n===yn.FILL){const r=e.current.getClippedPathBoundingBox(n,ii(t))||[0,0,0,0],a=Math.ceil(r[2]-r[0])||1,l=Math.ceil(r[3]-r[1])||1,u=e.cachedCanvases.getCanvas("pattern",a,l),d=u.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-r[0],-r[1]),i=Wt.transform(i,[1,0,0,1,r[0],r[1]]),d.transform(...e.baseTransform),this.matrix&&d.transform(...this.matrix),r0(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),s=t.createPattern(u.canvas,"no-repeat");const p=new DOMMatrix(i);s.setTransform(p)}else r0(t,this._bbox),s=this._createGradient(t);return s}}function w1(o,t,e,i,n,s,r,a){const l=t.coords,u=t.colors,d=o.data,p=o.width*4;let b;l[e+1]>l[i+1]&&(b=e,e=i,i=b,b=s,s=r,r=b),l[i+1]>l[n+1]&&(b=i,i=n,n=b,b=r,r=a,a=b),l[e+1]>l[i+1]&&(b=e,e=i,i=b,b=s,s=r,r=b);const g=(l[e]+t.offsetX)*t.scaleX,y=(l[e+1]+t.offsetY)*t.scaleY,w=(l[i]+t.offsetX)*t.scaleX,S=(l[i+1]+t.offsetY)*t.scaleY,A=(l[n]+t.offsetX)*t.scaleX,E=(l[n+1]+t.offsetY)*t.scaleY;if(y>=E)return;const D=u[s],q=u[s+1],G=u[s+2],K=u[r],X=u[r+1],H=u[r+2],et=u[a],ct=u[a+1],I=u[a+2],O=Math.round(y),$=Math.round(E);let W,ht,lt,at,it,mt,ut,wt;for(let C=O;C<=$;C++){if(C<S){const st=C<y?0:(y-C)/(y-S);W=g-(g-w)*st,ht=D-(D-K)*st,lt=q-(q-X)*st,at=G-(G-H)*st}else{let st;C>E?st=1:S===E?st=0:st=(S-C)/(S-E),W=w-(w-A)*st,ht=K-(K-et)*st,lt=X-(X-ct)*st,at=H-(H-I)*st}let j;C<y?j=0:C>E?j=1:j=(y-C)/(y-E),it=g-(g-A)*j,mt=D-(D-et)*j,ut=q-(q-ct)*j,wt=G-(G-I)*j;const U=Math.round(Math.min(W,it)),Y=Math.round(Math.max(W,it));let Q=p*C+U*4;for(let st=U;st<=Y;st++)j=(W-st)/(W-it),j<0?j=0:j>1&&(j=1),d[Q++]=ht-(ht-mt)*j|0,d[Q++]=lt-(lt-ut)*j|0,d[Q++]=at-(at-wt)*j|0,d[Q++]=255}}function Ry(o,t,e){const i=t.coords,n=t.colors;let s,r;switch(t.type){case"lattice":const a=t.verticesPerRow,l=Math.floor(i.length/a)-1,u=a-1;for(s=0;s<l;s++){let d=s*a;for(let p=0;p<u;p++,d++)w1(o,e,i[d],i[d+1],i[d+a],n[d],n[d+1],n[d+a]),w1(o,e,i[d+a+1],i[d+1],i[d+a],n[d+a+1],n[d+1],n[d+a])}break;case"triangles":for(s=0,r=i.length;s<r;s+=3)w1(o,e,i[s],i[s+1],i[s+2],n[s],n[s+1],n[s+2]);break;default:throw new Error("illegal figure")}}class Dy extends f2{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,i){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-a,d=Math.ceil(this._bounds[3])-l,p=Math.min(Math.ceil(Math.abs(u*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(d*t[1]*1.1)),3e3),g=u/p,y=d/b,w={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/g,scaleY:1/y},S=p+2*2,A=b+2*2,E=i.getCanvas("mesh",S,A),D=E.context,q=D.createImageData(p,b);if(e){const K=q.data;for(let X=0,H=K.length;X<H;X+=4)K[X]=e[0],K[X+1]=e[1],K[X+2]=e[2],K[X+3]=255}for(const K of this._figures)Ry(q,K,w);return D.putImageData(q,2,2),{canvas:E.canvas,offsetX:a-2*g,offsetY:l-2*y,scaleX:g,scaleY:y}}getPattern(t,e,i,n){r0(t,this._bbox);let s;if(n===yn.SHADING)s=Wt.singularValueDecompose2dScale(ii(t));else if(s=Wt.singularValueDecompose2dScale(e.baseTransform),this.matrix){const a=Wt.singularValueDecompose2dScale(this.matrix);s=[s[0]*a[0],s[1]*a[1]]}const r=this._createMeshCanvas(s,n===yn.SHADING?null:this._background,e.cachedCanvases);return n!==yn.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(r.offsetX,r.offsetY),t.scale(r.scaleX,r.scaleY),t.createPattern(r.canvas,"no-repeat")}}class Oy extends f2{getPattern(){return"hotpink"}}function jy(o){switch(o[0]){case"RadialAxial":return new My(o);case"Mesh":return new Dy(o);case"Dummy":return new Oy}throw new Error(`Unknown IR type: ${o[0]}`)}const rm={COLORED:1,UNCOLORED:2},lg=class lg{constructor(t,e,i,n,s){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=i,this.canvasGraphicsFactory=n,this.baseTransform=s}createPatternCanvas(t){const{bbox:e,operatorList:i,paintType:n,tilingType:s,color:r,canvasGraphicsFactory:a}=this;let{xstep:l,ystep:u}=this;l=Math.abs(l),u=Math.abs(u),yg("TilingType: "+s);const d=e[0],p=e[1],b=e[2],g=e[3],y=b-d,w=g-p,S=Wt.singularValueDecompose2dScale(this.matrix),A=Wt.singularValueDecompose2dScale(this.baseTransform),E=S[0]*A[0],D=S[1]*A[1];let q=y,G=w,K=!1,X=!1;const H=Math.ceil(l*E),et=Math.ceil(u*D),ct=Math.ceil(y*E),I=Math.ceil(w*D);H>=ct?q=l:K=!0,et>=I?G=u:X=!0;const O=this.getSizeAndScale(q,this.ctx.canvas.width,E),$=this.getSizeAndScale(G,this.ctx.canvas.height,D),W=t.cachedCanvases.getCanvas("pattern",O.size,$.size),ht=W.context,lt=a.createCanvasGraphics(ht);if(lt.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(lt,n,r),ht.translate(-O.scale*d,-$.scale*p),lt.transform(O.scale,0,0,$.scale,0,0),ht.save(),this.clipBbox(lt,d,p,b,g),lt.baseTransform=ii(lt.ctx),lt.executeOperatorList(i),lt.endDrawing(),ht.restore(),K||X){const at=W.canvas;K&&(q=l),X&&(G=u);const it=this.getSizeAndScale(q,this.ctx.canvas.width,E),mt=this.getSizeAndScale(G,this.ctx.canvas.height,D),ut=it.size,wt=mt.size,C=t.cachedCanvases.getCanvas("pattern-workaround",ut,wt),j=C.context,U=K?Math.floor(y/l):0,Y=X?Math.floor(w/u):0;for(let Q=0;Q<=U;Q++)for(let st=0;st<=Y;st++)j.drawImage(at,ut*Q,wt*st,ut,wt,0,0,ut,wt);return{canvas:C.canvas,scaleX:it.scale,scaleY:mt.scale,offsetX:d,offsetY:p}}return{canvas:W.canvas,scaleX:O.scale,scaleY:$.scale,offsetX:d,offsetY:p}}getSizeAndScale(t,e,i){const n=Math.max(lg.MAX_PATTERN_SIZE,e);let s=Math.ceil(t*i);return s>=n?s=n:i=s/t,{scale:i,size:s}}clipBbox(t,e,i,n,s){const r=n-e,a=s-i;t.ctx.rect(e,i,r,a),t.current.updateRectMinMax(ii(t.ctx),[e,i,n,s]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const n=t.ctx,s=t.current;switch(e){case rm.COLORED:const r=this.ctx;n.fillStyle=r.fillStyle,n.strokeStyle=r.strokeStyle,s.fillColor=r.fillStyle,s.strokeColor=r.strokeStyle;break;case rm.UNCOLORED:const a=Wt.makeHexColor(i[0],i[1],i[2]);n.fillStyle=a,n.strokeStyle=a,s.fillColor=a,s.strokeColor=a;break;default:throw new hy(`Unsupported paint type: ${e}`)}}getPattern(t,e,i,n){let s=i;n!==yn.SHADING&&(s=Wt.transform(s,e.baseTransform),this.matrix&&(s=Wt.transform(s,this.matrix)));const r=this.createPatternCanvas(e);let a=new DOMMatrix(s);a=a.translate(r.offsetX,r.offsetY),a=a.scale(1/r.scaleX,1/r.scaleY);const l=t.createPattern(r.canvas,"repeat");return l.setTransform(a),l}};ie(lg,"MAX_PATTERN_SIZE",3e3);let a0=lg;function By({src:o,srcPos:t=0,dest:e,width:i,height:n,nonBlackColor:s=4294967295,inverseDecode:r=!1}){const a=wn.isLittleEndian?4278190080:255,[l,u]=r?[s,a]:[a,s],d=i>>3,p=i&7,b=o.length;e=new Uint32Array(e.buffer);let g=0;for(let y=0;y<n;y++){for(const S=t+d;t<S;t++){const A=t<b?o[t]:255;e[g++]=A&128?u:l,e[g++]=A&64?u:l,e[g++]=A&32?u:l,e[g++]=A&16?u:l,e[g++]=A&8?u:l,e[g++]=A&4?u:l,e[g++]=A&2?u:l,e[g++]=A&1?u:l}if(p===0)continue;const w=t<b?o[t++]:255;for(let S=0;S<p;S++)e[g++]=w&1<<7-S?u:l}return{srcPos:t,destPos:g}}const am=16,om=100,qy=15,lm=10,hm=1e3,Mn=16;function Hy(o,t){if(o._removeMirroring)throw new Error("Context is already forwarding operations.");o.__originalSave=o.save,o.__originalRestore=o.restore,o.__originalRotate=o.rotate,o.__originalScale=o.scale,o.__originalTranslate=o.translate,o.__originalTransform=o.transform,o.__originalSetTransform=o.setTransform,o.__originalResetTransform=o.resetTransform,o.__originalClip=o.clip,o.__originalMoveTo=o.moveTo,o.__originalLineTo=o.lineTo,o.__originalBezierCurveTo=o.bezierCurveTo,o.__originalRect=o.rect,o.__originalClosePath=o.closePath,o.__originalBeginPath=o.beginPath,o._removeMirroring=()=>{o.save=o.__originalSave,o.restore=o.__originalRestore,o.rotate=o.__originalRotate,o.scale=o.__originalScale,o.translate=o.__originalTranslate,o.transform=o.__originalTransform,o.setTransform=o.__originalSetTransform,o.resetTransform=o.__originalResetTransform,o.clip=o.__originalClip,o.moveTo=o.__originalMoveTo,o.lineTo=o.__originalLineTo,o.bezierCurveTo=o.__originalBezierCurveTo,o.rect=o.__originalRect,o.closePath=o.__originalClosePath,o.beginPath=o.__originalBeginPath,delete o._removeMirroring},o.save=function(){t.save(),this.__originalSave()},o.restore=function(){t.restore(),this.__originalRestore()},o.translate=function(i,n){t.translate(i,n),this.__originalTranslate(i,n)},o.scale=function(i,n){t.scale(i,n),this.__originalScale(i,n)},o.transform=function(i,n,s,r,a,l){t.transform(i,n,s,r,a,l),this.__originalTransform(i,n,s,r,a,l)},o.setTransform=function(i,n,s,r,a,l){t.setTransform(i,n,s,r,a,l),this.__originalSetTransform(i,n,s,r,a,l)},o.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},o.rotate=function(i){t.rotate(i),this.__originalRotate(i)},o.clip=function(i){t.clip(i),this.__originalClip(i)},o.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},o.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},o.bezierCurveTo=function(e,i,n,s,r,a){t.bezierCurveTo(e,i,n,s,r,a),this.__originalBezierCurveTo(e,i,n,s,r,a)},o.rect=function(e,i,n,s){t.rect(e,i,n,s),this.__originalRect(e,i,n,s)},o.closePath=function(){t.closePath(),this.__originalClosePath()},o.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class zy{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let n;return this.cache[t]!==void 0?(n=this.cache[t],this.canvasFactory.reset(n,e,i)):(n=this.canvasFactory.create(e,i),this.cache[t]=n),n}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function sp(o,t,e,i,n,s,r,a,l,u){const[d,p,b,g,y,w]=ii(o);if(p===0&&b===0){const E=r*d+y,D=Math.round(E),q=a*g+w,G=Math.round(q),K=(r+l)*d+y,X=Math.abs(Math.round(K)-D)||1,H=(a+u)*g+w,et=Math.abs(Math.round(H)-G)||1;return o.setTransform(Math.sign(d),0,0,Math.sign(g),D,G),o.drawImage(t,e,i,n,s,0,0,X,et),o.setTransform(d,p,b,g,y,w),[X,et]}if(d===0&&g===0){const E=a*b+y,D=Math.round(E),q=r*p+w,G=Math.round(q),K=(a+u)*b+y,X=Math.abs(Math.round(K)-D)||1,H=(r+l)*p+w,et=Math.abs(Math.round(H)-G)||1;return o.setTransform(0,Math.sign(p),Math.sign(b),0,D,G),o.drawImage(t,e,i,n,s,0,0,et,X),o.setTransform(d,p,b,g,y,w),[et,X]}o.drawImage(t,e,i,n,s,r,a,l,u);const S=Math.hypot(d,p),A=Math.hypot(b,g);return[S*l,A*u]}function Uy(o){const{width:t,height:e}=o;if(t>hm||e>hm)return null;const i=1e3,n=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),s=t+1;let r=new Uint8Array(s*(e+1)),a,l,u;const d=t+7&-8;let p=new Uint8Array(d*e),b=0;for(const A of o.data){let E=128;for(;E>0;)p[b++]=A&E?0:255,E>>=1}let g=0;for(b=0,p[b]!==0&&(r[0]=1,++g),l=1;l<t;l++)p[b]!==p[b+1]&&(r[l]=p[b]?2:1,++g),b++;for(p[b]!==0&&(r[l]=2,++g),a=1;a<e;a++){b=a*d,u=a*s,p[b-d]!==p[b]&&(r[u]=p[b]?1:8,++g);let A=(p[b]?4:0)+(p[b-d]?8:0);for(l=1;l<t;l++)A=(A>>2)+(p[b+1]?4:0)+(p[b-d+1]?8:0),n[A]&&(r[u+l]=n[A],++g),b++;if(p[b-d]!==p[b]&&(r[u+l]=p[b]?2:4,++g),g>i)return null}for(b=d*(e-1),u=a*s,p[b]!==0&&(r[u]=8,++g),l=1;l<t;l++)p[b]!==p[b+1]&&(r[u+l]=p[b]?4:8,++g),b++;if(p[b]!==0&&(r[u+l]=4,++g),g>i)return null;const y=new Int32Array([0,s,-1,0,-s,0,0,0,1]),w=new Path2D;for(a=0;g&&a<=e;a++){let A=a*s;const E=A+t;for(;A<E&&!r[A];)A++;if(A===E)continue;w.moveTo(A%s,a);const D=A;let q=r[A];do{const G=y[q];do A+=G;while(!r[A]);const K=r[A];K!==5&&K!==10?(q=K,r[A]=0):(q=K&51*q>>4,r[A]&=q>>2|q<<2),w.lineTo(A%s,A/s|0),r[A]||--g}while(D!==A);--a}return p=null,r=null,function(A){A.save(),A.scale(1/t,-1/e),A.translate(0,-e),A.fill(w),A.beginPath(),A.restore()}}class cm{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=Hm,this.textMatrixScale=1,this.fontMatrix=I1,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=rn.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,i){[e,i]=Wt.applyTransform([e,i],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(t,e){const i=Wt.applyTransform(e,t),n=Wt.applyTransform(e.slice(2),t),s=Wt.applyTransform([e[0],e[3]],t),r=Wt.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,i[0],n[0],s[0],r[0]),this.minY=Math.min(this.minY,i[1],n[1],s[1],r[1]),this.maxX=Math.max(this.maxX,i[0],n[0],s[0],r[0]),this.maxY=Math.max(this.maxY,i[1],n[1],s[1],r[1])}updateScalingPathMinMax(t,e){Wt.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,i,n,s,r,a,l,u,d){const p=Wt.bezierBoundingBox(e,i,n,s,r,a,l,u,d);d||this.updateRectMinMax(t,p)}getPathBoundingBox(t=yn.FILL,e=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(t===yn.STROKE){e||$e("Stroke bounding box must include transform.");const n=Wt.singularValueDecompose2dScale(e),s=n[0]*this.lineWidth/2,r=n[1]*this.lineWidth/2;i[0]-=s,i[1]-=r,i[2]+=s,i[3]+=r}return i}updateClipFromPath(){const t=Wt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=yn.FILL,e=null){return Wt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function um(o,t){if(typeof ImageData<"u"&&t instanceof ImageData){o.putImageData(t,0,0);return}const e=t.height,i=t.width,n=e%Mn,s=(e-n)/Mn,r=n===0?s:s+1,a=o.createImageData(i,Mn);let l=0,u;const d=t.data,p=a.data;let b,g,y,w;if(t.kind===fp.GRAYSCALE_1BPP){const S=d.byteLength,A=new Uint32Array(p.buffer,0,p.byteLength>>2),E=A.length,D=i+7>>3,q=4294967295,G=wn.isLittleEndian?4278190080:255;for(b=0;b<r;b++){for(y=b<s?Mn:n,u=0,g=0;g<y;g++){const K=S-l;let X=0;const H=K>D?i:K*8-7,et=H&-8;let ct=0,I=0;for(;X<et;X+=8)I=d[l++],A[u++]=I&128?q:G,A[u++]=I&64?q:G,A[u++]=I&32?q:G,A[u++]=I&16?q:G,A[u++]=I&8?q:G,A[u++]=I&4?q:G,A[u++]=I&2?q:G,A[u++]=I&1?q:G;for(;X<H;X++)ct===0&&(I=d[l++],ct=128),A[u++]=I&ct?q:G,ct>>=1}for(;u<E;)A[u++]=0;o.putImageData(a,0,b*Mn)}}else if(t.kind===fp.RGBA_32BPP){for(g=0,w=i*Mn*4,b=0;b<s;b++)p.set(d.subarray(l,l+w)),l+=w,o.putImageData(a,0,g),g+=Mn;b<r&&(w=i*n*4,p.set(d.subarray(l,l+w)),o.putImageData(a,0,g))}else if(t.kind===fp.RGB_24BPP)for(y=Mn,w=i*y,b=0;b<r;b++){for(b>=s&&(y=n,w=i*y),u=0,g=w;g--;)p[u++]=d[l++],p[u++]=d[l++],p[u++]=d[l++],p[u++]=255;o.putImageData(a,0,b*Mn)}else throw new Error(`bad image kind: ${t.kind}`)}function dm(o,t){if(t.bitmap){o.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,n=e%Mn,s=(e-n)/Mn,r=n===0?s:s+1,a=o.createImageData(i,Mn);let l=0;const u=t.data,d=a.data;for(let p=0;p<r;p++){const b=p<s?Mn:n;({srcPos:l}=By({src:u,srcPos:l,dest:d,width:i,height:b,nonBlackColor:0})),o.putImageData(a,0,p*Mn)}}function _u(o,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)o[i]!==void 0&&(t[i]=o[i]);o.setLineDash!==void 0&&(t.setLineDash(o.getLineDash()),t.lineDashOffset=o.lineDashOffset)}function rp(o){if(o.strokeStyle=o.fillStyle="#000000",o.fillRule="nonzero",o.globalAlpha=1,o.lineWidth=1,o.lineCap="butt",o.lineJoin="miter",o.miterLimit=10,o.globalCompositeOperation="source-over",o.font="10px sans-serif",o.setLineDash!==void 0&&(o.setLineDash([]),o.lineDashOffset=0),!dn){const{filter:t}=o;t!=="none"&&t!==""&&(o.filter="none")}}function fm(o,t){if(t)return!0;const e=Wt.singularValueDecompose2dScale(o);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*vo.PDF_TO_CSS_UNITS);return e[0]<=i&&e[1]<=i}const Wy=["butt","round","square"],Vy=["miter","round","bevel"],Gy={},pm={};var xo,o0,l0;const x2=class x2{constructor(t,e,i,n,s,{optionalContentConfig:r,markedContentStack:a=null},l,u){M(this,xo);this.ctx=t,this.current=new cm(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=n,this.filterFactory=s,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=r,this.cachedCanvases=new zy(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:n=null}){const s=this.ctx.canvas.width,r=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=n||"#ffffff",this.ctx.fillRect(0,0,s,r),this.ctx.fillStyle=a,i){const l=this.cachedCanvases.getCanvas("transparent",s,r);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...ii(this.compositeCtx))}this.ctx.save(),rp(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=ii(this.ctx)}executeOperatorList(t,e,i,n){const s=t.argsArray,r=t.fnArray;let a=e||0;const l=s.length;if(l===a)return a;const u=l-a>lm&&typeof i=="function",d=u?Date.now()+qy:0;let p=0;const b=this.commonObjs,g=this.objs;let y;for(;;){if(n!==void 0&&a===n.nextBreakPoint)return n.breakIt(a,i),a;if(y=r[a],y!==Fs.dependency)this[y].apply(this,s[a]);else for(const w of s[a]){const S=w.startsWith("g_")?b:g;if(!S.has(w))return S.get(w,i),a}if(a++,a===l)return a;if(u&&++p>lm){if(Date.now()>d)return i(),a;p=0}}}endDrawing(){P(this,xo,o0).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),P(this,xo,l0).call(this)}_scaleImage(t,e){const i=t.width??t.displayWidth,n=t.height??t.displayHeight;let s=Math.max(Math.hypot(e[0],e[1]),1),r=Math.max(Math.hypot(e[2],e[3]),1),a=i,l=n,u="prescale1",d,p;for(;s>2&&a>1||r>2&&l>1;){let b=a,g=l;s>2&&a>1&&(b=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),s/=a/b),r>2&&l>1&&(g=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,r/=l/g),d=this.cachedCanvases.getCanvas(u,b,g),p=d.context,p.clearRect(0,0,b,g),p.drawImage(t,0,0,a,l,0,0,b,g),t=d.canvas,a=b,l=g,u=u==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:a,paintHeight:l}}_createMaskCanvas(t){const e=this.ctx,{width:i,height:n}=t,s=this.current.fillColor,r=this.current.patternFill,a=ii(e);let l,u,d,p;if((t.bitmap||t.data)&&t.count>1){const H=t.bitmap||t.data.buffer;u=JSON.stringify(r?a:[a.slice(0,4),s]),l=this._cachedBitmapsMap.get(H),l||(l=new Map,this._cachedBitmapsMap.set(H,l));const et=l.get(u);if(et&&!r){const ct=Math.round(Math.min(a[0],a[2])+a[4]),I=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:et,offsetX:ct,offsetY:I}}d=et}d||(p=this.cachedCanvases.getCanvas("maskCanvas",i,n),dm(p.context,t));let b=Wt.transform(a,[1/i,0,0,-1/n,0,0]);b=Wt.transform(b,[1,0,0,1,0,-n]);const[g,y,w,S]=Wt.getAxialAlignedBoundingBox([0,0,i,n],b),A=Math.round(w-g)||1,E=Math.round(S-y)||1,D=this.cachedCanvases.getCanvas("fillCanvas",A,E),q=D.context,G=g,K=y;q.translate(-G,-K),q.transform(...b),d||(d=this._scaleImage(p.canvas,Ur(q)),d=d.img,l&&r&&l.set(u,d)),q.imageSmoothingEnabled=fm(ii(q),t.interpolate),sp(q,d,0,0,d.width,d.height,0,0,i,n),q.globalCompositeOperation="source-in";const X=Wt.transform(Ur(q),[1,0,0,1,-G,-K]);return q.fillStyle=r?s.getPattern(e,this,X,yn.FILL):s,q.fillRect(0,0,i,n),l&&!r&&(this.cachedCanvases.delete("fillCanvas"),l.set(u,D.canvas)),{canvas:D.canvas,offsetX:Math.round(G),offsetY:Math.round(K)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=Wy[t]}setLineJoin(t){this.ctx.lineJoin=Vy[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(i,t,e);this.suspendedCtx=this.ctx,this.ctx=n.context;const s=this.ctx;s.setTransform(...ii(this.suspendedCtx)),_u(this.suspendedCtx,s),Hy(s,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),_u(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,n){const s=n[0],r=n[1],a=n[2]-s,l=n[3]-r;a===0||l===0||(this.genericComposeSMask(e.context,i,a,l,e.subtype,e.backdrop,e.transferMap,s,r,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,n,s,r,a,l,u,d,p){let b=t.canvas,g=l-d,y=u-p;if(r){const S=Wt.makeHexColor(...r);if(g<0||y<0||g+i>b.width||y+n>b.height){const A=this.cachedCanvases.getCanvas("maskExtension",i,n),E=A.context;E.drawImage(b,-g,-y),E.globalCompositeOperation="destination-atop",E.fillStyle=S,E.fillRect(0,0,i,n),E.globalCompositeOperation="source-over",b=A.canvas,g=y=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const A=new Path2D;A.rect(g,y,i,n),t.clip(A),t.globalCompositeOperation="destination-atop",t.fillStyle=S,t.fillRect(g,y,i,n),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),s==="Alpha"&&a?e.filter=this.filterFactory.addAlphaFilter(a):s==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(a));const w=new Path2D;w.rect(l,u,i,n),e.clip(w),e.globalCompositeOperation="destination-in",e.drawImage(b,g,y,i,n,l,u,i,n),e.restore()}save(){this.inSMaskMode?(_u(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),_u(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,i,n,s,r){this.ctx.transform(t,e,i,n,s,r),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i){const n=this.ctx,s=this.current;let r=s.x,a=s.y,l,u;const d=ii(n),p=d[0]===0&&d[3]===0||d[1]===0&&d[2]===0,b=p?i.slice(0):null;for(let g=0,y=0,w=t.length;g<w;g++)switch(t[g]|0){case Fs.rectangle:r=e[y++],a=e[y++];const S=e[y++],A=e[y++],E=r+S,D=a+A;n.moveTo(r,a),S===0||A===0?n.lineTo(E,D):(n.lineTo(E,a),n.lineTo(E,D),n.lineTo(r,D)),p||s.updateRectMinMax(d,[r,a,E,D]),n.closePath();break;case Fs.moveTo:r=e[y++],a=e[y++],n.moveTo(r,a),p||s.updatePathMinMax(d,r,a);break;case Fs.lineTo:r=e[y++],a=e[y++],n.lineTo(r,a),p||s.updatePathMinMax(d,r,a);break;case Fs.curveTo:l=r,u=a,r=e[y+4],a=e[y+5],n.bezierCurveTo(e[y],e[y+1],e[y+2],e[y+3],r,a),s.updateCurvePathMinMax(d,l,u,e[y],e[y+1],e[y+2],e[y+3],r,a,b),y+=6;break;case Fs.curveTo2:l=r,u=a,n.bezierCurveTo(r,a,e[y],e[y+1],e[y+2],e[y+3]),s.updateCurvePathMinMax(d,l,u,r,a,e[y],e[y+1],e[y+2],e[y+3],b),r=e[y+2],a=e[y+3],y+=4;break;case Fs.curveTo3:l=r,u=a,r=e[y+2],a=e[y+3],n.bezierCurveTo(e[y],e[y+1],r,a,r,a),s.updateCurvePathMinMax(d,l,u,e[y],e[y+1],r,a,r,a,b),y+=4;break;case Fs.closePath:n.closePath();break}p&&s.updateScalingPathMinMax(d,b),s.setCurrentPoint(r,a)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,i=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(e.save(),e.strokeStyle=i.getPattern(e,this,Ur(e),yn.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,i=this.current.fillColor,n=this.current.patternFill;let s=!1;n&&(e.save(),e.fillStyle=i.getPattern(e,this,Ur(e),yn.FILL),s=!0);const r=this.current.getClippedPathBoundingBox();this.contentVisible&&r!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),s&&e.restore(),t&&this.consumePath(r)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Gy}eoClip(){this.pendingClip=pm}beginText(){this.current.textMatrix=Hm,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}e.save(),e.beginPath();for(const i of t)e.setTransform(...i.transform),e.translate(i.x,i.y),i.addToPath(e,i.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var d;const i=this.commonObjs.get(t),n=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(n.fontMatrix=i.fontMatrix||I1,(n.fontMatrix[0]===0||n.fontMatrix[3]===0)&&me("Invalid font matrix for font "+t),e<0?(e=-e,n.fontDirection=-1):n.fontDirection=1,this.current.font=i,this.current.fontSize=e,i.isType3Font)return;const s=i.loadedName||"sans-serif",r=((d=i.systemFontInfo)==null?void 0:d.css)||`"${s}", ${i.fallbackName}`;let a="normal";i.black?a="900":i.bold&&(a="bold");const l=i.italic?"italic":"normal";let u=e;e<am?u=am:e>om&&(u=om),this.current.fontSizeScale=e/u,this.ctx.font=`${l} ${a} ${u}px ${r}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,i,n,s,r){this.current.textMatrix=[t,e,i,n,s,r],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,i,n){const s=this.ctx,r=this.current,a=r.font,l=r.textRenderingMode,u=r.fontSize/r.fontSizeScale,d=l&rn.FILL_STROKE_MASK,p=!!(l&rn.ADD_TO_PATH_FLAG),b=r.patternFill&&!a.missingFile;let g;(a.disableFontFace||p||b)&&(g=a.getPathGenerator(this.commonObjs,t)),a.disableFontFace||b?(s.save(),s.translate(e,i),s.beginPath(),g(s,u),n&&s.setTransform(...n),(d===rn.FILL||d===rn.FILL_STROKE)&&s.fill(),(d===rn.STROKE||d===rn.FILL_STROKE)&&s.stroke(),s.restore()):((d===rn.FILL||d===rn.FILL_STROKE)&&s.fillText(t,e,i),(d===rn.STROKE||d===rn.FILL_STROKE)&&s.strokeText(t,e,i)),p&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ii(s),x:e,y:i,fontSize:u,addToPath:g})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let n=3;n<e.length;n+=4)if(e[n]>0&&e[n]<255){i=!0;break}return _e(this,"isFontSubpixelAAEnabled",i)}showText(t){const e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(t);const n=e.fontSize;if(n===0)return;const s=this.ctx,r=e.fontSizeScale,a=e.charSpacing,l=e.wordSpacing,u=e.fontDirection,d=e.textHScale*u,p=t.length,b=i.vertical,g=b?1:-1,y=i.defaultVMetrics,w=n*e.fontMatrix[0],S=e.textRenderingMode===rn.FILL&&!i.disableFontFace&&!e.patternFill;s.save(),s.transform(...e.textMatrix),s.translate(e.x,e.y+e.textRise),u>0?s.scale(d,-1):s.scale(d,1);let A;if(e.patternFill){s.save();const K=e.fillColor.getPattern(s,this,Ur(s),yn.FILL);A=ii(s),s.restore(),s.fillStyle=K}let E=e.lineWidth;const D=e.textMatrixScale;if(D===0||E===0){const K=e.textRenderingMode&rn.FILL_STROKE_MASK;(K===rn.STROKE||K===rn.FILL_STROKE)&&(E=this.getSinglePixelWidth())}else E/=D;if(r!==1&&(s.scale(r,r),E/=r),s.lineWidth=E,i.isInvalidPDFjsFont){const K=[];let X=0;for(const H of t)K.push(H.unicode),X+=H.width;s.fillText(K.join(""),0,0),e.x+=X*w*d,s.restore(),this.compose();return}let q=0,G;for(G=0;G<p;++G){const K=t[G];if(typeof K=="number"){q+=g*K*n/1e3;continue}let X=!1;const H=(K.isSpace?l:0)+a,et=K.fontChar,ct=K.accent;let I,O,$=K.width;if(b){const ht=K.vmetric||y,lt=-(K.vmetric?ht[1]:$*.5)*w,at=ht[2]*w;$=ht?-ht[0]:$,I=lt/r,O=(q+at)/r}else I=q/r,O=0;if(i.remeasure&&$>0){const ht=s.measureText(et).width*1e3/n*r;if($<ht&&this.isFontSubpixelAAEnabled){const lt=$/ht;X=!0,s.save(),s.scale(lt,1),I/=lt}else $!==ht&&(I+=($-ht)/2e3*n/r)}if(this.contentVisible&&(K.isInFont||i.missingFile)){if(S&&!ct)s.fillText(et,I,O);else if(this.paintChar(et,I,O,A),ct){const ht=I+n*ct.offset.x/r,lt=O-n*ct.offset.y/r;this.paintChar(ct.fontChar,ht,lt,A)}}const W=b?$*w-H*u:$*w+H*u;q+=W,X&&s.restore()}b?e.y-=q:e.x+=q*d,s.restore(),this.compose()}showType3Text(t){const e=this.ctx,i=this.current,n=i.font,s=i.fontSize,r=i.fontDirection,a=n.vertical?1:-1,l=i.charSpacing,u=i.wordSpacing,d=i.textHScale*r,p=i.fontMatrix||I1,b=t.length,g=i.textRenderingMode===rn.INVISIBLE;let y,w,S,A;if(!(g||s===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...i.textMatrix),e.translate(i.x,i.y),e.scale(d,r),y=0;y<b;++y){if(w=t[y],typeof w=="number"){A=a*w*s/1e3,this.ctx.translate(A,0),i.x+=A*d;continue}const E=(w.isSpace?u:0)+l,D=n.charProcOperatorList[w.operatorListId];if(!D){me(`Type3 character "${w.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=w,this.save(),e.scale(s,s),e.transform(...p),this.executeOperatorList(D),this.restore()),S=Wt.applyTransform([w.width,0],p)[0]*s+E,e.translate(S,0),i.x+=S*d}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,i,n,s,r){this.ctx.rect(i,n,s-i,r-n),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const i=t[1],n=this.baseTransform||ii(this.ctx),s={createCanvasGraphics:r=>new x2(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new a0(t,i,this.ctx,s,n)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,i){this.ctx.strokeStyle=this.current.strokeColor=Wt.makeHexColor(t,e,i)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(t,e,i){this.ctx.fillStyle=this.current.fillColor=Wt.makeHexColor(t,e,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=jy(this.getObject(t)),this.cachedPatterns.set(t,i)),e&&(i.matrix=e),i}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const i=this._getPattern(t);e.fillStyle=i.getPattern(e,this,Ur(e),yn.SHADING);const n=Ur(e);if(n){const{width:s,height:r}=e.canvas,[a,l,u,d]=Wt.getAxialAlignedBoundingBox([0,0,s,r],n);this.ctx.fillRect(a,l,u-a,d-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){$e("Should not call beginInlineImage")}beginImageData(){$e("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=ii(this.ctx),e)){const i=e[2]-e[0],n=e[3]-e[1];this.ctx.rect(e[0],e[1],i,n),this.current.updateRectMinMax(ii(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||yg("TODO: Support non-isolated groups."),t.knockout&&me("Knockout groups not supported.");const i=ii(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let n=Wt.getAxialAlignedBoundingBox(t.bbox,ii(e));const s=[0,0,e.canvas.width,e.canvas.height];n=Wt.intersect(n,s)||[0,0,0,0];const r=Math.floor(n[0]),a=Math.floor(n[1]),l=Math.max(Math.ceil(n[2])-r,1),u=Math.max(Math.ceil(n[3])-a,1);this.current.startNewPathAndClipBox([0,0,l,u]);let d="groupAt"+this.groupLevel;t.smask&&(d+="_smask_"+this.smaskCounter++%2);const p=this.cachedCanvases.getCanvas(d,l,u),b=p.context;b.translate(-r,-a),b.transform(...i),t.smask?this.smaskStack.push({canvas:p.canvas,context:b,offsetX:r,offsetY:a,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(r,a),e.save()),_u(e,b),this.ctx=b,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const n=ii(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...n);const s=Wt.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],n);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(t,e,i,n,s){if(P(this,xo,o0).call(this),rp(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const r=e[2]-e[0],a=e[3]-e[1];if(s&&this.annotationCanvasMap){i=i.slice(),i[4]-=e[0],i[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=r,e[3]=a;const[l,u]=Wt.singularValueDecompose2dScale(ii(this.ctx)),{viewportScale:d}=this,p=Math.ceil(r*this.outputScaleX*d),b=Math.ceil(a*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(p,b);const{canvas:g,context:y}=this.annotationCanvas;this.annotationCanvasMap.set(t,g),this.annotationCanvas.savedCtx=this.ctx,this.ctx=y,this.ctx.save(),this.ctx.setTransform(l,0,0,-u,0,a*u),rp(this.ctx)}else rp(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],r,a),this.ctx.clip(),this.ctx.beginPath()}this.current=new cm(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...n)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),P(this,xo,l0).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const i=this.ctx,n=this.processingType3;if(n&&(n.compiled===void 0&&(n.compiled=Uy(t)),n.compiled)){n.compiled(i);return}const s=this._createMaskCanvas(t),r=s.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(r,s.offsetX,s.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i=0,n=0,s,r){if(!this.contentVisible)return;t=this.getObject(t.data,t);const a=this.ctx;a.save();const l=ii(a);a.transform(e,i,n,s,0,0);const u=this._createMaskCanvas(t);a.setTransform(1,0,0,1,u.offsetX-l[4],u.offsetY-l[5]);for(let d=0,p=r.length;d<p;d+=2){const b=Wt.transform(l,[e,i,n,s,r[d],r[d+1]]),[g,y]=Wt.applyTransform([0,0],b);a.drawImage(u.canvas,g,y)}a.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,i=this.current.fillColor,n=this.current.patternFill;for(const s of t){const{data:r,width:a,height:l,transform:u}=s,d=this.cachedCanvases.getCanvas("maskCanvas",a,l),p=d.context;p.save();const b=this.getObject(r,s);dm(p,b),p.globalCompositeOperation="source-in",p.fillStyle=n?i.getPattern(p,this,Ur(e),yn.FILL):i,p.fillRect(0,0,a,l),p.restore(),e.save(),e.transform(...u),e.scale(1,-1),sp(e,d.canvas,0,0,a,l,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){me("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,i,n){if(!this.contentVisible)return;const s=this.getObject(t);if(!s){me("Dependent image isn't ready yet");return}const r=s.width,a=s.height,l=[];for(let u=0,d=n.length;u<d;u+=2)l.push({transform:[e,0,0,i,n[u],n[u+1]],x:0,y:0,w:r,h:a});this.paintInlineImageXObjectGroup(s,l)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:n}=t,s=this.cachedCanvases.getCanvas("inlineImage",i,n),r=s.context;return r.filter=this.current.transferMaps,r.drawImage(e,0,0),r.filter="none",s.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,i=t.height,n=this.ctx;if(this.save(),!dn){const{filter:a}=n;a!=="none"&&a!==""&&(n.filter="none")}n.scale(1/e,-1/i);let s;if(t.bitmap)s=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)s=t;else{const l=this.cachedCanvases.getCanvas("inlineImage",e,i).context;um(l,t),s=this.applyTransferMapsToCanvas(l)}const r=this._scaleImage(s,Ur(n));n.imageSmoothingEnabled=fm(ii(n),t.interpolate),sp(n,r.img,0,0,r.paintWidth,r.paintHeight,0,-i,e,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx;let n;if(t.bitmap)n=t.bitmap;else{const s=t.width,r=t.height,l=this.cachedCanvases.getCanvas("inlineImage",s,r).context;um(l,t),n=this.applyTransferMapsToCanvas(l)}for(const s of e)i.save(),i.transform(...s.transform),i.scale(1,-1),sp(i,n,s.x,s.y,s.w,s.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const i=this.ctx;this.pendingClip&&(e||(this.pendingClip===pm?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=ii(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),n=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,n)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:n,d:s}=this.ctx.getTransform();let r,a;if(i===0&&n===0){const l=Math.abs(e),u=Math.abs(s);if(l===u)if(t===0)r=a=1/l;else{const d=l*t;r=a=d<1?1/d:1}else if(t===0)r=1/l,a=1/u;else{const d=l*t,p=u*t;r=d<1?1/d:1,a=p<1?1/p:1}}else{const l=Math.abs(e*s-i*n),u=Math.hypot(e,i),d=Math.hypot(n,s);if(t===0)r=d/l,a=u/l;else{const p=t*l;r=d>p?d/p:1,a=u>p?u/p:1}}this._cachedScaleForStroking[0]=r,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:i}=this.current,[n,s]=this.getScaleForStroking();if(e.lineWidth=i||1,n===1&&s===1){e.stroke();return}const r=e.getLineDash();if(t&&e.save(),e.scale(n,s),r.length>0){const a=Math.max(n,s);e.setLineDash(r.map(l=>l/a)),e.lineDashOffset/=a}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};xo=new WeakSet,o0=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},l0=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}};let Hh=x2;for(const o in Fs)Hh.prototype[o]!==void 0&&(Hh.prototype[Fs[o]]=Hh.prototype[o]);var md,bd;class va{static get workerPort(){return c(this,md)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");N(this,md,t)}static get workerSrc(){return c(this,bd)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");N(this,bd,t)}}md=new WeakMap,bd=new WeakMap,M(va,md,null),M(va,bd,"");const ap={UNKNOWN:0,DATA:1,ERROR:2},Ai={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function zn(o){switch(o instanceof Error||typeof o=="object"&&o!==null||$e('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),o.name){case"AbortException":return new Yl(o.message);case"MissingPDFException":return new $l(o.message);case"PasswordException":return new F1(o.message,o.code);case"UnexpectedResponseException":return new wg(o.message,o.status);case"UnknownErrorException":return new M1(o.message,o.details);default:return new M1(o.message,o.toString())}}var oc,bs,L5,N5,E5,Ap;class Fu{constructor(t,e,i){M(this,bs);M(this,oc,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",P(this,bs,L5).bind(this),{signal:c(this,oc).signal})}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const n=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[n]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:n,data:e},i)}catch(r){s.reject(r)}return s.promise}sendWithStream(t,e,i,n){const s=this.streamId++,r=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:u=>{const d=Promise.withResolvers();return this.streamControllers[s]={controller:u,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:r,targetName:a,action:t,streamId:s,data:e,desiredSize:u.desiredSize},n),d.promise},pull:u=>{const d=Promise.withResolvers();return this.streamControllers[s].pullCall=d,l.postMessage({sourceName:r,targetName:a,stream:Ai.PULL,streamId:s,desiredSize:u.desiredSize}),d.promise},cancel:u=>{Ti(u instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[s].cancelCall=d,this.streamControllers[s].isClosed=!0,l.postMessage({sourceName:r,targetName:a,stream:Ai.CANCEL,streamId:s,reason:zn(u)}),d.promise}},i)}destroy(){var t;(t=c(this,oc))==null||t.abort(),N(this,oc,null)}}oc=new WeakMap,bs=new WeakSet,L5=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){P(this,bs,E5).call(this,t);return}if(t.callback){const i=t.callbackId,n=this.callbackCapabilities[i];if(!n)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===ap.DATA)n.resolve(t.data);else if(t.callback===ap.ERROR)n.reject(zn(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,n=t.sourceName,s=this.comObj;new Promise(function(r){r(e(t.data))}).then(function(r){s.postMessage({sourceName:i,targetName:n,callback:ap.DATA,callbackId:t.callbackId,data:r})},function(r){s.postMessage({sourceName:i,targetName:n,callback:ap.ERROR,callbackId:t.callbackId,reason:zn(r)})});return}if(t.streamId){P(this,bs,N5).call(this,t);return}e(t.data)},N5=function(t){const e=t.streamId,i=this.sourceName,n=t.sourceName,s=this.comObj,r=this,a=this.actionHandler[t.action],l={enqueue(u,d=1,p){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=d,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:i,targetName:n,stream:Ai.ENQUEUE,streamId:e,chunk:u},p)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:n,stream:Ai.CLOSE,streamId:e}),delete r.streamSinks[e])},error(u){Ti(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:n,stream:Ai.ERROR,streamId:e,reason:zn(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[e]=l,new Promise(function(u){u(a(t.data,l))}).then(function(){s.postMessage({sourceName:i,targetName:n,stream:Ai.START_COMPLETE,streamId:e,success:!0})},function(u){s.postMessage({sourceName:i,targetName:n,stream:Ai.START_COMPLETE,streamId:e,reason:zn(u)})})},E5=function(t){const e=t.streamId,i=this.sourceName,n=t.sourceName,s=this.comObj,r=this.streamControllers[e],a=this.streamSinks[e];switch(t.stream){case Ai.START_COMPLETE:t.success?r.startCall.resolve():r.startCall.reject(zn(t.reason));break;case Ai.PULL_COMPLETE:t.success?r.pullCall.resolve():r.pullCall.reject(zn(t.reason));break;case Ai.PULL:if(!a){s.postMessage({sourceName:i,targetName:n,stream:Ai.PULL_COMPLETE,streamId:e,success:!0});break}a.desiredSize<=0&&t.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=t.desiredSize,new Promise(function(l){var u;l((u=a.onPull)==null?void 0:u.call(a))}).then(function(){s.postMessage({sourceName:i,targetName:n,stream:Ai.PULL_COMPLETE,streamId:e,success:!0})},function(l){s.postMessage({sourceName:i,targetName:n,stream:Ai.PULL_COMPLETE,streamId:e,reason:zn(l)})});break;case Ai.ENQUEUE:if(Ti(r,"enqueue should have stream controller"),r.isClosed)break;r.controller.enqueue(t.chunk);break;case Ai.CLOSE:if(Ti(r,"close should have stream controller"),r.isClosed)break;r.isClosed=!0,r.controller.close(),P(this,bs,Ap).call(this,r,e);break;case Ai.ERROR:Ti(r,"error should have stream controller"),r.controller.error(zn(t.reason)),P(this,bs,Ap).call(this,r,e);break;case Ai.CANCEL_COMPLETE:t.success?r.cancelCall.resolve():r.cancelCall.reject(zn(t.reason)),P(this,bs,Ap).call(this,r,e);break;case Ai.CANCEL:if(!a)break;new Promise(function(l){var u;l((u=a.onCancel)==null?void 0:u.call(a,zn(t.reason)))}).then(function(){s.postMessage({sourceName:i,targetName:n,stream:Ai.CANCEL_COMPLETE,streamId:e,success:!0})},function(l){s.postMessage({sourceName:i,targetName:n,stream:Ai.CANCEL_COMPLETE,streamId:e,reason:zn(l)})}),a.sinkCapability.reject(zn(t.reason)),a.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Ap=async function(t,e){var i,n,s;await Promise.allSettled([(i=t.startCall)==null?void 0:i.promise,(n=t.pullCall)==null?void 0:n.promise,(s=t.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[e]};var ul,vd;class Xy{constructor({parsedData:t,rawData:e}){M(this,ul);M(this,vd);N(this,ul,t),N(this,vd,e)}getRaw(){return c(this,vd)}get(t){return c(this,ul).get(t)??null}getAll(){return a2(c(this,ul))}has(t){return c(this,ul).has(t)}}ul=new WeakMap,vd=new WeakMap;const Fh=Symbol("INTERNAL");var yd,wd,Ad,lc;class $y{constructor(t,{name:e,intent:i,usage:n,rbGroups:s}){M(this,yd,!1);M(this,wd,!1);M(this,Ad,!1);M(this,lc,!0);N(this,yd,!!(t&Jn.DISPLAY)),N(this,wd,!!(t&Jn.PRINT)),this.name=e,this.intent=i,this.usage=n,this.rbGroups=s}get visible(){if(c(this,Ad))return c(this,lc);if(!c(this,lc))return!1;const{print:t,view:e}=this.usage;return c(this,yd)?(e==null?void 0:e.viewState)!=="OFF":c(this,wd)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,i=!1){t!==Fh&&$e("Internal method `_setVisible` called."),N(this,Ad,i),N(this,lc,e)}}yd=new WeakMap,wd=new WeakMap,Ad=new WeakMap,lc=new WeakMap;var to,Re,hc,cc,_d,h0;class Yy{constructor(t,e=Jn.DISPLAY){M(this,_d);M(this,to,null);M(this,Re,new Map);M(this,hc,null);M(this,cc,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,N(this,cc,t.order);for(const i of t.groups)c(this,Re).set(i.id,new $y(e,i));if(t.baseState==="OFF")for(const i of c(this,Re).values())i._setVisible(Fh,!1);for(const i of t.on)c(this,Re).get(i)._setVisible(Fh,!0);for(const i of t.off)c(this,Re).get(i)._setVisible(Fh,!1);N(this,hc,this.getHash())}}isVisible(t){if(c(this,Re).size===0)return!0;if(!t)return yg("Optional content group not defined."),!0;if(t.type==="OCG")return c(this,Re).has(t.id)?c(this,Re).get(t.id).visible:(me(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return P(this,_d,h0).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!c(this,Re).has(e))return me(`Optional content group not found: ${e}`),!0;if(c(this,Re).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!c(this,Re).has(e))return me(`Optional content group not found: ${e}`),!0;if(!c(this,Re).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!c(this,Re).has(e))return me(`Optional content group not found: ${e}`),!0;if(!c(this,Re).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!c(this,Re).has(e))return me(`Optional content group not found: ${e}`),!0;if(c(this,Re).get(e).visible)return!1}return!0}return me(`Unknown optional content policy ${t.policy}.`),!0}return me(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){var s;const n=c(this,Re).get(t);if(!n){me(`Optional content group not found: ${t}`);return}if(i&&e&&n.rbGroups.length)for(const r of n.rbGroups)for(const a of r)a!==t&&((s=c(this,Re).get(a))==null||s._setVisible(Fh,!1,!0));n._setVisible(Fh,!!e,!0),N(this,to,null)}setOCGState({state:t,preserveRB:e}){let i;for(const n of t){switch(n){case"ON":case"OFF":case"Toggle":i=n;continue}const s=c(this,Re).get(n);if(s)switch(i){case"ON":this.setVisibility(n,!0,e);break;case"OFF":this.setVisibility(n,!1,e);break;case"Toggle":this.setVisibility(n,!s.visible,e);break}}N(this,to,null)}get hasInitialVisibility(){return c(this,hc)===null||this.getHash()===c(this,hc)}getOrder(){return c(this,Re).size?c(this,cc)?c(this,cc).slice():[...c(this,Re).keys()]:null}getGroups(){return c(this,Re).size>0?a2(c(this,Re)):null}getGroup(t){return c(this,Re).get(t)||null}getHash(){if(c(this,to)!==null)return c(this,to);const t=new p5;for(const[e,i]of c(this,Re))t.update(`${e}:${i.visible}`);return N(this,to,t.hexdigest())}}to=new WeakMap,Re=new WeakMap,hc=new WeakMap,cc=new WeakMap,_d=new WeakSet,h0=function(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let n=1;n<e;n++){const s=t[n];let r;if(Array.isArray(s))r=P(this,_d,h0).call(this,s);else if(c(this,Re).has(s))r=c(this,Re).get(s).visible;else return me(`Optional content group not found: ${s}`),!0;switch(i){case"And":if(!r)return!1;break;case"Or":if(r)return!0;break;case"Not":return!r;default:return!0}}return i==="And"};class Ky{constructor(t,{disableRange:e=!1,disableStream:i=!1}){Ti(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:n,initialData:s,progressiveDone:r,contentDispositionFilename:a}=t;if(this._queuedChunks=[],this._progressiveDone=r,this._contentDispositionFilename=a,(s==null?void 0:s.length)>0){const l=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=n,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((l,u)=>{this._onReceiveData({begin:l,chunk:u})}),t.addProgressListener((l,u)=>{this._onProgress({loaded:l,total:u})}),t.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const n=this._rangeReaders.some(function(s){return s._begin!==t?!1:(s._enqueue(i),!0)});Ti(n,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,i,n,s;t.total===void 0?(i=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||i.call(e,{loaded:t.loaded}):(s=(n=this._fullRequestReader)==null?void 0:n.onProgress)==null||s.call(n,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Ti(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new Jy(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Qy(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeReaders.slice(0))i.cancel(t);this._pdfDataRangeTransport.abort()}}class Jy{constructor(t,e,i=!1,n=null){this._stream=t,this._done=i||!1,this._filename=h2(n)?n:null,this._queuedChunks=e||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Qy{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Zy(o){let t=!0,e=i("filename\\*","i").exec(o);if(e){e=e[1];let d=a(e);return d=unescape(d),d=l(d),d=u(d),s(d)}if(e=r(o),e){const d=u(e);return s(d)}if(e=i("filename","i").exec(o),e){e=e[1];let d=a(e);return d=u(d),s(d)}function i(d,p){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function n(d,p){if(d){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const b=new TextDecoder(d,{fatal:!0}),g=Ag(p);p=b.decode(g),t=!1}catch{}}return p}function s(d){return t&&/[\x80-\xff]/.test(d)&&(d=n("utf-8",d),t&&(d=n("iso-8859-1",d))),d}function r(d){const p=[];let b;const g=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=g.exec(d))!==null;){let[,w,S,A]=b;if(w=parseInt(w,10),w in p){if(w===0)break;continue}p[w]=[S,A]}const y=[];for(let w=0;w<p.length&&w in p;++w){let[S,A]=p[w];A=a(A),S&&(A=unescape(A),w===0&&(A=l(A))),y.push(A)}return y.join("")}function a(d){if(d.startsWith('"')){const p=d.slice(1).split('\\"');for(let b=0;b<p.length;++b){const g=p[b].indexOf('"');g!==-1&&(p[b]=p[b].slice(0,g),p.length=b+1),p[b]=p[b].replaceAll(/\\(.)/g,"$1")}d=p.join('"')}return d}function l(d){const p=d.indexOf("'");if(p===-1)return d;const b=d.slice(0,p),y=d.slice(p+1).replace(/^[^']*'/,"");return n(b,y)}function u(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,b,g,y){if(g==="q"||g==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,S){return String.fromCharCode(parseInt(S,16))}),n(b,y);try{y=atob(y)}catch{}return n(b,y)})}return""}function p2(o,t){const e=new Headers;if(!o||!t||typeof t!="object")return e;for(const i in t){const n=t[i];n!==void 0&&e.append(i,n)}return e}function g2({responseHeaders:o,isHttp:t,rangeChunkSize:e,disableRange:i}){const n={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(o.get("Content-Length"),10);return!Number.isInteger(s)||(n.suggestedLength=s,s<=2*e)||i||!t||o.get("Accept-Ranges")!=="bytes"||(o.get("Content-Encoding")||"identity")!=="identity"||(n.allowRangeRequests=!0),n}function m2(o){const t=o.get("Content-Disposition");if(t){let e=Zy(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(h2(e))return e}return null}function Sg(o,t){return o===404||o===0&&t.startsWith("file:")?new $l('Missing PDF "'+t+'".'):new wg(`Unexpected server response (${o}) while retrieving PDF "${t}".`,o)}function C5(o){return o===200||o===206}function P5(o,t,e){return{method:"GET",headers:o,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function k5(o){return o instanceof Uint8Array?o.buffer:o instanceof ArrayBuffer?o:(me(`getArrayBuffer - unexpected data format: ${o}`),new Uint8Array(o).buffer)}class gm{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=p2(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Ti(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new tw(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new ew(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class tw{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),n=e.url;fetch(n,P5(i,this._withCredentials,this._abortController)).then(s=>{if(!C5(s.status))throw Sg(s.status,n);this._reader=s.body.getReader(),this._headersCapability.resolve();const r=s.headers,{allowRangeRequests:a,suggestedLength:l}=g2({responseHeaders:r,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=m2(r),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Yl("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:k5(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class ew{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const n=t.source;this._withCredentials=n.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!n.disableStream,this._abortController=new AbortController;const s=new Headers(t.headers);s.append("Range",`bytes=${e}-${i-1}`);const r=n.url;fetch(r,P5(s,this._withCredentials,this._abortController)).then(a=>{if(!C5(a.status))throw Sg(a.status,r);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:k5(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const A1=200,_1=206;function iw(o){const t=o.response;return typeof t!="string"?t:Ag(t).buffer}class nw{constructor({url:t,httpHeaders:e,withCredentials:i}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=p2(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,i){const n={begin:t,end:e};for(const s in i)n[s]=i[s];return this.request(n)}requestFull(t){return this.request(t)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,n=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[s,r]of this.headers)e.setRequestHeader(s,r);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),n.expectedStatus=_1):n.expectedStatus=A1,e.responseType="arraybuffer",t.onError&&(e.onerror=function(s){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),n.onHeadersReceived=t.onHeadersReceived,n.onDone=t.onDone,n.onError=t.onError,n.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){var n;const i=this.pendingRequests[t];i&&((n=i.onProgress)==null||n.call(i,e))}onStateChange(t,e){var l,u,d;const i=this.pendingRequests[t];if(!i)return;const n=i.xhr;if(n.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),n.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],n.status===0&&this.isHttp){(l=i.onError)==null||l.call(i,n.status);return}const s=n.status||A1;if(!(s===A1&&i.expectedStatus===_1)&&s!==i.expectedStatus){(u=i.onError)==null||u.call(i,n.status);return}const a=iw(n);if(s===_1){const p=n.getResponseHeader("Content-Range"),b=/bytes (\d+)-(\d+)\/(\d+)/.exec(p);i.onDone({begin:parseInt(b[1],10),chunk:a})}else a?i.onDone({begin:0,chunk:a}):(d=i.onError)==null||d.call(i,n.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class sw{constructor(t){this._source=t,this._manager=new nw(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Ti(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new rw(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new aw(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class rw{constructor(t,e){this._manager=t;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(i),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),i=new Headers(e.getAllResponseHeaders().trim().split(/[\r\n]+/).map(r=>{const[a,...l]=r.split(": ");return[a,l.join(": ")]})),{allowRangeRequests:n,suggestedLength:s}=g2({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});n&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=m2(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Sg(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class aw{constructor(t,e,i){this._manager=t;const n={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,i,n),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=Sg(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const ow=/^[a-z][a-z0-9\-+.]+:/i;function lw(o){if(ow.test(o))return new URL(o);const t=yo.get("url");return new URL(t.pathToFileURL(o))}function T5(o,t,e){return o.protocol==="http:"?yo.get("http").request(o,{headers:t},e):yo.get("https").request(o,{headers:t},e)}class hw{constructor(t){this.source=t,this.url=lw(t.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=p2(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Ti(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new dw(this):new cw(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=this.isFsUrl?new fw(this,t,e):new uw(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class I5{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Yl("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class F5{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class cw extends I5{constructor(t){super(t);const e=Object.fromEntries(t.headers),i=n=>{if(n.statusCode===404){const l=new $l(`Missing PDF "${this._url}".`);this._storedError=l,this._headersCapability.reject(l);return}this._headersCapability.resolve(),this._setReadableStream(n);const s=new Headers(this._readableStream.headers),{allowRangeRequests:r,suggestedLength:a}=g2({responseHeaders:s,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=a||this._contentLength,this._filename=m2(s)};this._request=T5(this._url,e,i),this._request.on("error",n=>{this._storedError=n,this._headersCapability.reject(n)}),this._request.end()}}class uw extends F5{constructor(t,e,i){super(t);const n=Object.fromEntries(t.headers);n.Range=`bytes=${e}-${i-1}`;const s=r=>{if(r.statusCode===404){const a=new $l(`Missing PDF "${this._url}".`);this._storedError=a;return}this._setReadableStream(r)};this._request=T5(this._url,n,s),this._request.on("error",r=>{this._storedError=r}),this._request.end()}}class dw extends I5{constructor(t){super(t);const e=yo.get("fs");e.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(e.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new $l(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}}class fw extends F5{constructor(t,e,i){super(t);const n=yo.get("fs");this._setReadableStream(n.createReadStream(this._url,{start:e,end:i-1}))}}const pw=1e5,Pn=30,gw=.8;var qm,eo,In,xd,Sd,dl,ta,Ld,Nd,fl,uc,dc,io,fc,Ed,pc,pl,Cd,Pd,gl,ml,kd,no,gc,_a,M5,R5,c0,ts,_p,u0,D5,O5;const Ei=class Ei{constructor({textContentSource:t,container:e,viewport:i}){M(this,_a);M(this,eo,Promise.withResolvers());M(this,In,null);M(this,xd,!1);M(this,Sd,!!((qm=globalThis.FontInspector)!=null&&qm.enabled));M(this,dl,null);M(this,ta,null);M(this,Ld,0);M(this,Nd,0);M(this,fl,null);M(this,uc,null);M(this,dc,0);M(this,io,0);M(this,fc,Object.create(null));M(this,Ed,[]);M(this,pc,null);M(this,pl,[]);M(this,Cd,new WeakMap);M(this,Pd,null);var l;if(t instanceof ReadableStream)N(this,pc,t);else if(typeof t=="object")N(this,pc,new ReadableStream({start(u){u.enqueue(t),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');N(this,In,N(this,uc,e)),N(this,io,i.scale*(globalThis.devicePixelRatio||1)),N(this,dc,i.rotation),N(this,ta,{div:null,properties:null,ctx:null});const{pageWidth:n,pageHeight:s,pageX:r,pageY:a}=i.rawDims;N(this,Pd,[1,0,0,-1,-r,a+s]),N(this,Nd,n),N(this,Ld,s),P(l=Ei,ts,D5).call(l),Ul(e,i),c(this,eo).promise.finally(()=>{c(Ei,gc).delete(this),N(this,ta,null),N(this,fc,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=wn.platform;return _e(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{c(this,fl).read().then(({value:e,done:i})=>{if(i){c(this,eo).resolve();return}c(this,dl)??N(this,dl,e.lang),Object.assign(c(this,fc),e.styles),P(this,_a,M5).call(this,e.items),t()},c(this,eo).reject)};return N(this,fl,c(this,pc).getReader()),c(Ei,gc).add(this),t(),c(this,eo).promise}update({viewport:t,onBefore:e=null}){var s;const i=t.scale*(globalThis.devicePixelRatio||1),n=t.rotation;if(n!==c(this,dc)&&(e==null||e(),N(this,dc,n),Ul(c(this,uc),{rotation:n})),i!==c(this,io)){e==null||e(),N(this,io,i);const r={div:null,properties:null,ctx:P(s=Ei,ts,_p).call(s,c(this,dl))};for(const a of c(this,pl))r.properties=c(this,Cd).get(a),r.div=a,P(this,_a,c0).call(this,r)}}cancel(){var e;const t=new Yl("TextLayer task cancelled.");(e=c(this,fl))==null||e.cancel(t).catch(()=>{}),N(this,fl,null),c(this,eo).reject(t)}get textDivs(){return c(this,pl)}get textContentItemsStr(){return c(this,Ed)}static cleanup(){if(!(c(this,gc).size>0)){c(this,gl).clear();for(const{canvas:t}of c(this,ml).values())t.remove();c(this,ml).clear()}}};eo=new WeakMap,In=new WeakMap,xd=new WeakMap,Sd=new WeakMap,dl=new WeakMap,ta=new WeakMap,Ld=new WeakMap,Nd=new WeakMap,fl=new WeakMap,uc=new WeakMap,dc=new WeakMap,io=new WeakMap,fc=new WeakMap,Ed=new WeakMap,pc=new WeakMap,pl=new WeakMap,Cd=new WeakMap,Pd=new WeakMap,gl=new WeakMap,ml=new WeakMap,kd=new WeakMap,no=new WeakMap,gc=new WeakMap,_a=new WeakSet,M5=function(t){var n,s;if(c(this,xd))return;(s=c(this,ta)).ctx??(s.ctx=P(n=Ei,ts,_p).call(n,c(this,dl)));const e=c(this,pl),i=c(this,Ed);for(const r of t){if(e.length>pw){me("Ignoring additional textDivs for performance reasons."),N(this,xd,!0);return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const a=c(this,In);N(this,In,document.createElement("span")),c(this,In).classList.add("markedContent"),r.id!==null&&c(this,In).setAttribute("id",`${r.id}`),a.append(c(this,In))}else r.type==="endMarkedContent"&&N(this,In,c(this,In).parentNode);continue}i.push(r.str),P(this,_a,R5).call(this,r)}},R5=function(t){var w;const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};c(this,pl).push(e);const n=Wt.transform(c(this,Pd),t.transform);let s=Math.atan2(n[1],n[0]);const r=c(this,fc)[t.fontName];r.vertical&&(s+=Math.PI/2);let a=c(this,Sd)&&r.fontSubstitution||r.fontFamily;a=Ei.fontFamilyMap.get(a)||a;const l=Math.hypot(n[2],n[3]),u=l*P(w=Ei,ts,O5).call(w,a,c(this,dl));let d,p;s===0?(d=n[4],p=n[5]-u):(d=n[4]+u*Math.sin(s),p=n[5]-u*Math.cos(s));const b="calc(var(--scale-factor)*",g=e.style;c(this,In)===c(this,uc)?(g.left=`${(100*d/c(this,Nd)).toFixed(2)}%`,g.top=`${(100*p/c(this,Ld)).toFixed(2)}%`):(g.left=`${b}${d.toFixed(2)}px)`,g.top=`${b}${p.toFixed(2)}px)`),g.fontSize=`${b}${(c(Ei,no)*l).toFixed(2)}px)`,g.fontFamily=a,i.fontSize=l,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,c(this,Sd)&&(e.dataset.fontName=r.fontSubstitutionLoadedName||t.fontName),s!==0&&(i.angle=s*(180/Math.PI));let y=!1;if(t.str.length>1)y=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const S=Math.abs(t.transform[0]),A=Math.abs(t.transform[3]);S!==A&&Math.max(S,A)/Math.min(S,A)>1.5&&(y=!0)}if(y&&(i.canvasWidth=r.vertical?t.height:t.width),c(this,Cd).set(e,i),c(this,ta).div=e,c(this,ta).properties=i,P(this,_a,c0).call(this,c(this,ta)),i.hasText&&c(this,In).append(e),i.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),c(this,In).append(S)}},c0=function(t){var a;const{div:e,properties:i,ctx:n}=t,{style:s}=e;let r="";if(c(Ei,no)>1&&(r=`scale(${1/c(Ei,no)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:l}=s,{canvasWidth:u,fontSize:d}=i;P(a=Ei,ts,u0).call(a,n,d*c(this,io),l);const{width:p}=n.measureText(e.textContent);p>0&&(r=`scaleX(${u*c(this,io)/p}) ${r}`)}i.angle!==0&&(r=`rotate(${i.angle}deg) ${r}`),r.length>0&&(s.transform=r)},ts=new WeakSet,_p=function(t=null){let e=c(this,ml).get(t||(t=""));if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),c(this,ml).set(t,e),c(this,kd).set(e,{size:0,family:""})}return e},u0=function(t,e,i){const n=c(this,kd).get(t);e===n.size&&i===n.family||(t.font=`${e}px ${i}`,n.size=e,n.family=i)},D5=function(){if(c(this,no)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),N(this,no,t.getBoundingClientRect().height),t.remove()},O5=function(t,e){const i=c(this,gl).get(t);if(i)return i;const n=P(this,ts,_p).call(this,e);n.canvas.width=n.canvas.height=Pn,P(this,ts,u0).call(this,n,Pn,t);const s=n.measureText("");let r=s.fontBoundingBoxAscent,a=Math.abs(s.fontBoundingBoxDescent);if(r){const d=r/(r+a);return c(this,gl).set(t,d),n.canvas.width=n.canvas.height=0,d}n.strokeStyle="red",n.clearRect(0,0,Pn,Pn),n.strokeText("g",0,0);let l=n.getImageData(0,0,Pn,Pn).data;a=0;for(let d=l.length-1-3;d>=0;d-=4)if(l[d]>0){a=Math.ceil(d/4/Pn);break}n.clearRect(0,0,Pn,Pn),n.strokeText("A",0,Pn),l=n.getImageData(0,0,Pn,Pn).data,r=0;for(let d=0,p=l.length;d<p;d+=4)if(l[d]>0){r=Pn-Math.floor(d/4/Pn);break}n.canvas.width=n.canvas.height=0;const u=r?r/(r+a):gw;return c(this,gl).set(t,u),u},M(Ei,ts),M(Ei,gl,new Map),M(Ei,ml,new Map),M(Ei,kd,new WeakMap),M(Ei,no,null),M(Ei,gc,new Set);let Gu=Ei;class Xu{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function n(s){var l;if(!s)return;let r=null;const a=s.name;if(a==="#text")r=s.value;else if(Xu.shouldBuildText(a))(l=s==null?void 0:s.attributes)!=null&&l.textContent?r=s.attributes.textContent:s.value&&(r=s.value);else return;if(r!==null&&e.push({str:r}),!!s.children)for(const u of s.children)n(u)}return n(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const mw=65536,bw=100,vw=5e3,yw=dn?Ty:Cy,ww=dn?Iy:y5,Aw=dn?ky:Py,_w=dn?Fy:x5;function xw(o={}){typeof o=="string"||o instanceof URL?o={url:o}:(o instanceof ArrayBuffer||ArrayBuffer.isView(o))&&(o={data:o});const t=new d0,{docId:e}=t,i=o.url?Sw(o.url):null,n=o.data?Lw(o.data):null,s=o.httpHeaders||null,r=o.withCredentials===!0,a=o.password??null,l=o.range instanceof j5?o.range:null,u=Number.isInteger(o.rangeChunkSize)&&o.rangeChunkSize>0?o.rangeChunkSize:mw;let d=o.worker instanceof zh?o.worker:null;const p=o.verbosity,b=typeof o.docBaseUrl=="string"&&!xg(o.docBaseUrl)?o.docBaseUrl:null,g=typeof o.cMapUrl=="string"?o.cMapUrl:null,y=o.cMapPacked!==!1,w=o.CMapReaderFactory||ww,S=typeof o.standardFontDataUrl=="string"?o.standardFontDataUrl:null,A=o.StandardFontDataFactory||_w,E=o.stopAtErrors!==!0,D=Number.isInteger(o.maxImageSize)&&o.maxImageSize>-1?o.maxImageSize:-1,q=o.isEvalSupported!==!1,G=typeof o.isOffscreenCanvasSupported=="boolean"?o.isOffscreenCanvasSupported:!dn,K=typeof o.isChrome=="boolean"?o.isChrome:!wn.platform.isFirefox&&typeof window<"u"&&!!(window!=null&&window.chrome),X=Number.isInteger(o.canvasMaxAreaInBytes)?o.canvasMaxAreaInBytes:-1,H=typeof o.disableFontFace=="boolean"?o.disableFontFace:dn,et=o.fontExtraProperties===!0,ct=o.enableXfa===!0,I=o.ownerDocument||globalThis.document,O=o.disableRange===!0,$=o.disableStream===!0,W=o.disableAutoFetch===!0,ht=o.pdfBug===!0,lt=o.CanvasFactory||yw,at=o.FilterFactory||Aw,it=o.enableHWA===!0,mt=l?l.length:o.length??NaN,ut=typeof o.useSystemFonts=="boolean"?o.useSystemFonts:!dn&&!H,wt=typeof o.useWorkerFetch=="boolean"?o.useWorkerFetch:w===y5&&A===x5&&g&&S&&Nu(g,document.baseURI)&&Nu(S,document.baseURI);o.canvasFactory&&nm("`canvasFactory`-instance option, please use `CanvasFactory` instead."),o.filterFactory&&nm("`filterFactory`-instance option, please use `FilterFactory` instead.");const C=null;ry(p);const j={canvasFactory:new lt({ownerDocument:I,enableHWA:it}),filterFactory:new at({docId:e,ownerDocument:I}),cMapReaderFactory:wt?null:new w({baseUrl:g,isCompressed:y}),standardFontDataFactory:wt?null:new A({baseUrl:S})};if(!d){const Q={verbosity:p,port:va.workerPort};d=Q.port?zh.fromPort(Q):new zh(Q),t._worker=d}const U={docId:e,apiVersion:"4.8.69",data:n,password:a,disableAutoFetch:W,rangeChunkSize:u,length:mt,docBaseUrl:b,enableXfa:ct,evaluatorOptions:{maxImageSize:D,disableFontFace:H,ignoreErrors:E,isEvalSupported:q,isOffscreenCanvasSupported:G,isChrome:K,canvasMaxAreaInBytes:X,fontExtraProperties:et,useSystemFonts:ut,cMapUrl:wt?g:null,standardFontDataUrl:wt?S:null}},Y={disableFontFace:H,fontExtraProperties:et,ownerDocument:I,pdfBug:ht,styleElement:C,loadingParams:{disableAutoFetch:W,enableXfa:ct}};return d.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const Q=d.messageHandler.sendWithPromise("GetDocRequest",U,n?[n.buffer]:null);let st;if(l)st=new Ky(l,{disableRange:O,disableStream:$});else if(!n){if(!i)throw new Error("getDocument - no `url` parameter provided.");let pt;dn?pt=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&Nu(i)?gm:hw:pt=Nu(i)?gm:sw,st=new pt({url:i,length:mt,httpHeaders:s,withCredentials:r,rangeChunkSize:u,disableRange:O,disableStream:$})}return Q.then(pt=>{if(t.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const gt=new Fu(e,pt,d.port),Et=new Pw(gt,t,st,Y,j);t._transport=Et,gt.send("Ready",null)})}).catch(t._capability.reject),t}function Sw(o){if(o instanceof URL)return o.href;try{return new URL(o,window.location).href}catch{if(dn&&typeof o=="string")return o}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Lw(o){if(dn&&typeof Buffer<"u"&&o instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength)return o;if(typeof o=="string")return Ag(o);if(o instanceof ArrayBuffer||ArrayBuffer.isView(o)||typeof o=="object"&&!isNaN(o==null?void 0:o.length))return new Uint8Array(o);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function mm(o){return typeof o=="object"&&Number.isInteger(o==null?void 0:o.num)&&o.num>=0&&Number.isInteger(o==null?void 0:o.gen)&&o.gen>=0}var hg;const cg=class cg{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${mn(cg,hg)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,i;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(n){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,n}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};hg=new WeakMap,M(cg,hg,0);let d0=cg;class j5{constructor(t,e,i=!1,n=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const i of this._rangeListeners)i(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){$e("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class Nw{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return _e(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var so,ea,gs,Mh,xp;class Ew{constructor(t,e,i,n=!1){M(this,gs);M(this,so,null);M(this,ea,!1);this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=n?new im:null,this._pdfBug=n,this.commonObjs=i.commonObjs,this.objs=new B5,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:n=0,dontFlip:s=!1}={}){return new uf({viewBox:this.view,scale:t,rotation:e,offsetX:i,offsetY:n,dontFlip:s})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return _e(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:i="display",annotationMode:n=za.ENABLE,transform:s=null,background:r=null,optionalContentConfigPromise:a=null,annotationCanvasMap:l=null,pageColors:u=null,printAnnotationStorage:d=null,isEditing:p=!1}){var q,G;(q=this._stats)==null||q.time("Overall");const b=this._transport.getRenderingIntent(i,n,d,p),{renderingIntent:g,cacheKey:y}=b;N(this,ea,!1),P(this,gs,xp).call(this),a||(a=this._transport.getOptionalContentConfig(g));let w=this._intentStates.get(y);w||(w=Object.create(null),this._intentStates.set(y,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);const S=!!(g&Jn.PRINT);w.displayReadyCapability||(w.displayReadyCapability=Promise.withResolvers(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(G=this._stats)==null||G.time("Page Request"),this._pumpOperatorList(b));const A=K=>{var X;w.renderTasks.delete(E),(this._maybeCleanupAfterRender||S)&&N(this,ea,!0),P(this,gs,Mh).call(this,!S),K?(E.capability.reject(K),this._abortOperatorList({intentState:w,reason:K instanceof Error?K:new Error(K)})):E.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(X=globalThis.Stats)!=null&&X.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},E=new p0({callback:A,params:{canvasContext:t,viewport:e,transform:s,background:r},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!S,pdfBug:this._pdfBug,pageColors:u});(w.renderTasks||(w.renderTasks=new Set)).add(E);const D=E.task;return Promise.all([w.displayReadyCapability.promise,a]).then(([K,X])=>{var H;if(this.destroyed){A();return}if((H=this._stats)==null||H.time("Rendering"),!(X.renderingIntent&g))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");E.initializeGraphics({transparency:K,optionalContentConfig:X}),E.operatorListChanged()}).catch(A),D}getOperatorList({intent:t="display",annotationMode:e=za.ENABLE,printAnnotationStorage:i=null,isEditing:n=!1}={}){var u;function s(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}const r=this._transport.getRenderingIntent(t,e,i,n,!0);let a=this._intentStates.get(r.cacheKey);a||(a=Object.create(null),this._intentStates.set(r.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=s,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(r)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(n){return n.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Xu.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,n){function s(){r.read().then(function({value:l,done:u}){if(u){i(a);return}a.lang??(a.lang=l.lang),Object.assign(a.styles,l.styles),a.items.push(...l.items),s()},n)}const r=e.getReader(),a={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),N(this,ea,!1),P(this,gs,xp).call(this),Promise.all(t)}cleanup(t=!1){N(this,ea,!0);const e=P(this,gs,Mh).call(this,!1);return t&&e&&this._stats&&(this._stats=new im),e}_startRenderPage(t,e){var n,s;const i=this._intentStates.get(e);i&&((n=this._stats)==null||n.timeEnd("Page Request"),(s=i.displayReadyCapability)==null||s.resolve(t))}_renderPageChunk(t,e){for(let i=0,n=t.length;i<n;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&P(this,gs,Mh).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:n}){const{map:s,transfer:r}=i,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:s,modifiedIds:n},r).getReader(),u=this._intentStates.get(e);u.streamReader=l;const d=()=>{l.read().then(({value:p,done:b})=>{if(b){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(p,u),d())},p=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const b of u.renderTasks)b.operatorListChanged();P(this,gs,Mh).call(this,!0)}if(u.displayReadyCapability)u.displayReadyCapability.reject(p);else if(u.opListReadCapability)u.opListReadCapability.reject(p);else throw p}})};d()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof l2){let n=bw;e.extraDelay>0&&e.extraDelay<1e3&&(n+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},n);return}}if(t.streamReader.cancel(new Yl(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[n,s]of this._intentStates)if(s===t){this._intentStates.delete(n);break}this.cleanup()}}}get stats(){return this._stats}}so=new WeakMap,ea=new WeakMap,gs=new WeakSet,Mh=function(t=!1){if(P(this,gs,xp).call(this),!c(this,ea)||this.destroyed)return!1;if(t)return N(this,so,setTimeout(()=>{N(this,so,null),P(this,gs,Mh).call(this,!1)},vw)),!1;for(const{renderTasks:e,operatorList:i}of this._intentStates.values())if(e.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),N(this,ea,!1),!0},xp=function(){c(this,so)&&(clearTimeout(c(this,so)),N(this,so,null))};var ia,ug;class Cw{constructor(){M(this,ia,new Map);M(this,ug,Promise.resolve())}postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};c(this,ug).then(()=>{for(const[n]of c(this,ia))n.call(this,i)})}addEventListener(t,e,i=null){let n=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:s}=i;if(s.aborted){me("LoopbackPort - cannot use an `aborted` signal.");return}const r=()=>this.removeEventListener(t,e);n=()=>s.removeEventListener("abort",r),s.addEventListener("abort",r)}c(this,ia).set(e,n)}removeEventListener(t,e){const i=c(this,ia).get(e);i==null||i(),c(this,ia).delete(e)}terminate(){for(const[,t]of c(this,ia))t==null||t();c(this,ia).clear()}}ia=new WeakMap,ug=new WeakMap;var dg,bl,vl,mc,Sp,bc,Lp;const Je=class Je{constructor({name:t=null,port:e=null,verbosity:i=ay()}={}){M(this,mc);var n;if(this.name=t,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((n=c(Je,vl))!=null&&n.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(c(Je,vl)||N(Je,vl,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return dn?Promise.all([yo.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new Fu("main","worker",t),this._messageHandler.on("ready",function(){}),P(this,mc,Sp).call(this)}_initialize(){if(c(Je,bl)||c(Je,bc,Lp)){this._setupFakeWorker();return}let{workerSrc:t}=Je;try{Je._isSameOrigin(window.location.href,t)||(t=Je._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new Fu("main","worker",e),n=()=>{s.abort(),i.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=new AbortController;e.addEventListener("error",()=>{this._webWorker||n()},{signal:s.signal}),i.on("test",a=>{if(s.abort(),this.destroyed||!a){n();return}this._messageHandler=i,this._port=e,this._webWorker=e,P(this,mc,Sp).call(this)}),i.on("ready",a=>{if(s.abort(),this.destroyed){n();return}try{r()}catch{this._setupFakeWorker()}});const r=()=>{const a=new Uint8Array;i.send("test",a,[a.buffer])};r();return}catch{yg("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){c(Je,bl)||(me("Setting up fake worker."),N(Je,bl,!0)),Je._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new Cw;this._port=e;const i=`fake${mn(Je,dg)._++}`,n=new Fu(i+"_worker",i,e);t.setup(n,e),this._messageHandler=new Fu(i,i+"_worker",e),P(this,mc,Sp).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(t=c(Je,vl))==null||t.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){var i;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(i=c(this,vl))==null?void 0:i.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Je(t)}static get workerSrc(){if(va.workerSrc)return va.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return _e(this,"_setupFakeWorkerGlobal",(async()=>c(this,bc,Lp)?c(this,bc,Lp):(await import(this.workerSrc)).WorkerMessageHandler)())}};dg=new WeakMap,bl=new WeakMap,vl=new WeakMap,mc=new WeakSet,Sp=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},bc=new WeakSet,Lp=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},M(Je,bc),M(Je,dg,0),M(Je,bl,!1),M(Je,vl),dn&&(N(Je,bl,!0),va.workerSrc||(va.workerSrc="./pdf.worker.mjs")),Je._isSameOrigin=(t,e)=>{let i;try{if(i=new URL(t),!i.origin||i.origin==="null")return!1}catch{return!1}const n=new URL(e,i);return i.origin===n.origin},Je._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let zh=Je;var na,yr,vc,yc,wr,yl,Mu;class Pw{constructor(t,e,i,n,s){M(this,yl);M(this,na,new Map);M(this,yr,new Map);M(this,vc,new Map);M(this,yc,new Map);M(this,wr,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new B5,this.fontLoader=new Ny({ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this.loadingParams=n.loadingParams,this._params=n,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return _e(this,"annotationStorage",new d2)}getRenderingIntent(t,e=za.ENABLE,i=null,n=!1,s=!1){let r=Jn.DISPLAY,a=e0;switch(t){case"any":r=Jn.ANY;break;case"display":break;case"print":r=Jn.PRINT;break;default:me(`getRenderingIntent - invalid intent: ${t}`)}const l=r&Jn.PRINT&&i instanceof m5?i:this.annotationStorage;switch(e){case za.DISABLE:r+=Jn.ANNOTATIONS_DISABLE;break;case za.ENABLE:break;case za.ENABLE_FORMS:r+=Jn.ANNOTATIONS_FORMS;break;case za.ENABLE_STORAGE:r+=Jn.ANNOTATIONS_STORAGE,a=l.serializable;break;default:me(`getRenderingIntent - invalid annotationMode: ${e}`)}n&&(r+=Jn.IS_EDITING),s&&(r+=Jn.OPLIST);const{ids:u,hash:d}=l.modifiedIds,p=[r,a.hash,d];return{renderingIntent:r,cacheKey:p.join("_"),annotationStorageSerializable:a,modifiedIds:u}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=c(this,wr))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const n of c(this,yr).values())t.push(n._destroy());c(this,yr).clear(),c(this,vc).clear(),c(this,yc).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var n;this.commonObjs.clear(),this.fontLoader.clear(),c(this,na).clear(),this.filterFactory.destroy(),Gu.cleanup(),(n=this._networkStream)==null||n.cancelAllRequests(new Yl("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,n)=>{Ti(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},n.onPull=()=>{this._fullReader.read().then(function({value:s,done:r}){if(r){n.close();return}Ti(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{n.error(s)})},n.onCancel=s=>{this._fullReader.cancel(s),n.ready.catch(r=>{if(!this.destroyed)throw r})}}),t.on("ReaderHeadersReady",async i=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:n,isRangeSupported:s,contentLength:r}=this._fullReader;return(!n||!s)&&(this._lastProgress&&((a=e.onProgress)==null||a.call(e,this._lastProgress)),this._fullReader.onProgress=l=>{var u;(u=e.onProgress)==null||u.call(e,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:n,isRangeSupported:s,contentLength:r}}),t.on("GetRangeReader",(i,n)=>{Ti(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(i.begin,i.end);if(!s){n.close();return}n.onPull=()=>{s.read().then(function({value:r,done:a}){if(a){n.close();return}Ti(r instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{n.error(r)})},n.onCancel=r=>{s.cancel(r),n.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new Nw(i,this))}),t.on("DocException",function(i){let n;switch(i.name){case"PasswordException":n=new F1(i.message,i.code);break;case"InvalidPDFException":n=new zm(i.message);break;case"MissingPDFException":n=new $l(i.message);break;case"UnexpectedResponseException":n=new wg(i.message,i.status);break;case"UnknownErrorException":n=new M1(i.message,i.details);break;default:$e("DocException - expected a valid Error.")}e._capability.reject(n)}),t.on("PasswordRequest",i=>{if(N(this,wr,Promise.withResolvers()),e.onPassword){const n=s=>{s instanceof Error?c(this,wr).reject(s):c(this,wr).resolve({password:s})};try{e.onPassword(n,i.code)}catch(s){c(this,wr).reject(s)}}else c(this,wr).reject(new F1(i.message,i.code));return c(this,wr).promise}),t.on("DataLoaded",i=>{var n;(n=e.onProgress)==null||n.call(e,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;c(this,yr).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,n,s])=>{var r;if(this.destroyed||this.commonObjs.has(i))return null;switch(n){case"Font":const{disableFontFace:a,fontExtraProperties:l,pdfBug:u}=this._params;if("error"in s){const g=s.error;me(`Error during font loading: ${g}`),this.commonObjs.resolve(i,g);break}const d=u&&((r=globalThis.FontInspector)!=null&&r.enabled)?(g,y)=>globalThis.FontInspector.fontAdded(g,y):null,p=new Ey(s,{disableFontFace:a,inspectFont:d});this.fontLoader.bind(p).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!l&&p.data&&(p.data=null),this.commonObjs.resolve(i,p)});break;case"CopyLocalImage":const{imageRef:b}=s;Ti(b,"The imageRef must be defined.");for(const g of c(this,yr).values())for(const[,y]of g.objs)if((y==null?void 0:y.ref)===b)return y.dataLen?(this.commonObjs.resolve(i,structuredClone(y)),y.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,s);break;default:throw new Error(`Got unknown common object type ${n}`)}return null}),t.on("obj",([i,n,s,r])=>{var l;if(this.destroyed)return;const a=c(this,yr).get(n);if(!a.objs.has(i)){if(a._intentStates.size===0){(l=r==null?void 0:r.bitmap)==null||l.close();return}switch(s){case"Image":a.objs.resolve(i,r),(r==null?void 0:r.dataLen)>ey&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(i,r);break;default:throw new Error(`Got unknown object type ${s}`)}}}),t.on("DocProgress",i=>{var n;this.destroyed||(n=e.onProgress)==null||n.call(e,{loaded:i.loaded,total:i.total})}),t.on("FetchBuiltInCMap",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(i)}),t.on("FetchStandardFontData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&me("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((i=this._fullReader)==null?void 0:i.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=c(this,vc).get(e);if(i)return i;const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&c(this,yc).set(s.refStr,t);const r=new Ew(e,s,this,this._params.pdfBug);return c(this,yr).set(e,r),r});return c(this,vc).set(e,n),n}getPageIndex(t){return mm(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return P(this,yl,Mu).call(this,"GetFieldObjects")}hasJSActions(){return P(this,yl,Mu).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return P(this,yl,Mu).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return P(this,yl,Mu).call(this,"GetOptionalContentConfig").then(e=>new Yy(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=c(this,na).get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(n=>{var s,r;return{info:n[0],metadata:n[1]?new Xy(n[1]):null,contentDispositionFilename:((s=this._fullReader)==null?void 0:s.filename)??null,contentLength:((r=this._fullReader)==null?void 0:r.contentLength)??null}});return c(this,na).set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of c(this,yr).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),c(this,na).clear(),this.filterFactory.destroy(!0),Gu.cleanup()}}cachedPageNumber(t){if(!mm(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return c(this,yc).get(e)??null}}na=new WeakMap,yr=new WeakMap,vc=new WeakMap,yc=new WeakMap,wr=new WeakMap,yl=new WeakSet,Mu=function(t,e=null){const i=c(this,na).get(t);if(i)return i;const n=this.messageHandler.sendWithPromise(t,e);return c(this,na).set(t,n),n};const op=Symbol("INITIAL_DATA");var qs,Td,f0;class B5{constructor(){M(this,Td);M(this,qs,Object.create(null))}get(t,e=null){if(e){const n=P(this,Td,f0).call(this,t);return n.promise.then(()=>e(n.data)),null}const i=c(this,qs)[t];if(!i||i.data===op)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=c(this,qs)[t];return!!e&&e.data!==op}resolve(t,e=null){const i=P(this,Td,f0).call(this,t);i.data=e,i.resolve()}clear(){var t;for(const e in c(this,qs)){const{data:i}=c(this,qs)[e];(t=i==null?void 0:i.bitmap)==null||t.close()}N(this,qs,Object.create(null))}*[Symbol.iterator](){for(const t in c(this,qs)){const{data:e}=c(this,qs)[t];e!==op&&(yield[t,e])}}}qs=new WeakMap,Td=new WeakSet,f0=function(t){var e;return(e=c(this,qs))[t]||(e[t]={...Promise.withResolvers(),data:op})};var ro;class kw{constructor(t){M(this,ro,null);N(this,ro,t),this.onContinue=null}get promise(){return c(this,ro).capability.promise}cancel(t=0){c(this,ro).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=c(this,ro).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=c(this,ro);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}ro=new WeakMap;var ao,wl;const Vo=class Vo{constructor({callback:t,params:e,objs:i,commonObjs:n,annotationCanvasMap:s,operatorList:r,pageIndex:a,canvasFactory:l,filterFactory:u,useRequestAnimationFrame:d=!1,pdfBug:p=!1,pageColors:b=null}){M(this,ao,null);this.callback=t,this.params=e,this.objs=i,this.commonObjs=n,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=r,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=u,this._pdfBug=p,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new kw(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var a,l;if(this.cancelled)return;if(this._canvas){if(c(Vo,wl).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c(Vo,wl).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:n,transform:s,background:r}=this.params;this.gfx=new Hh(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:n,transparency:t,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(t=null,e=0){var i;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),c(this,ao)&&(window.cancelAnimationFrame(c(this,ao)),N(this,ao,null)),c(Vo,wl).delete(this._canvas),this.callback(t||new l2(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?N(this,ao,window.requestAnimationFrame(()=>{N(this,ao,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c(Vo,wl).delete(this._canvas),this.callback())))}};ao=new WeakMap,wl=new WeakMap,M(Vo,wl,new WeakSet);let p0=Vo;const Tw="4.8.69",Iw="3634dab10";function bm(o){return Math.floor(Math.max(0,Math.min(1,o))*255).toString(16).padStart(2,"0")}function xu(o){return Math.max(0,Math.min(255,255*o))}class vm{static CMYK_G([t,e,i,n]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+n)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=xu(t),[t,t,t]}static G_HTML([t]){const e=bm(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(xu)}static RGB_HTML(t){return`#${t.map(bm).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,n]){return["RGB",1-Math.min(1,t+n),1-Math.min(1,i+n),1-Math.min(1,e+n)]}static CMYK_rgb([t,e,i,n]){return[xu(1-Math.min(1,t+n)),xu(1-Math.min(1,i+n)),xu(1-Math.min(1,e+n))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const n=1-t,s=1-e,r=1-i,a=Math.min(n,s,r);return["CMYK",n,s,r,a]}}class Fw{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const n=this._createSVG("svg:svg");return n.setAttribute("version","1.1"),i||(n.setAttribute("width",`${t}px`),n.setAttribute("height",`${e}px`)),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox",`0 0 ${t} ${e}`),n}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){$e("Abstract method `_createSVG` called.")}}class b2 extends Fw{_createSVG(t){return document.createElementNS(Vr,t)}}class q5{static setupStorage(t,e,i,n,s){const r=n.getValue(e,{value:null});switch(i.name){case"textarea":if(r.value!==null&&(t.textContent=r.value),s==="print")break;t.addEventListener("input",a=>{n.setValue(e,{value:a.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(r.value===i.attributes.xfaOn?t.setAttribute("checked",!0):r.value===i.attributes.xfaOff&&t.removeAttribute("checked"),s==="print")break;t.addEventListener("change",a=>{n.setValue(e,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(r.value!==null&&t.setAttribute("value",r.value),s==="print")break;t.addEventListener("input",a=>{n.setValue(e,{value:a.target.value})})}break;case"select":if(r.value!==null){t.setAttribute("value",r.value);for(const a of i.children)a.attributes.value===r.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}t.addEventListener("input",a=>{const l=a.target.options,u=l.selectedIndex===-1?"":l[l.selectedIndex].value;n.setValue(e,{value:u})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:n,linkService:s}){const{attributes:r}=e,a=t instanceof HTMLAnchorElement;r.type==="radio"&&(r.name=`${r.name}-${n}`);for(const[l,u]of Object.entries(r))if(u!=null)switch(l){case"class":u.length&&t.setAttribute(l,u.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",u);break;case"style":Object.assign(t.style,u);break;case"textContent":t.textContent=u;break;default:(!a||l!=="href"&&l!=="newWindow")&&t.setAttribute(l,u)}a&&s.addLinkAttributes(t,r.href,r.newWindow),i&&r.dataId&&this.setupStorage(t,r.dataId,e,i)}static render(t){var p,b;const e=t.annotationStorage,i=t.linkService,n=t.xfaHtml,s=t.intent||"display",r=document.createElement(n.name);n.attributes&&this.setAttributes({html:r,element:n,intent:s,linkService:i});const a=s!=="richText",l=t.div;if(l.append(r),t.viewport){const g=`matrix(${t.viewport.transform.join(",")})`;l.style.transform=g}a&&l.setAttribute("class","xfaLayer xfaFont");const u=[];if(n.children.length===0){if(n.value){const g=document.createTextNode(n.value);r.append(g),a&&Xu.shouldBuildText(n.name)&&u.push(g)}return{textDivs:u}}const d=[[n,-1,r]];for(;d.length>0;){const[g,y,w]=d.at(-1);if(y+1===g.children.length){d.pop();continue}const S=g.children[++d.at(-1)[1]];if(S===null)continue;const{name:A}=S;if(A==="#text"){const D=document.createTextNode(S.value);u.push(D),w.append(D);continue}const E=(p=S==null?void 0:S.attributes)!=null&&p.xmlns?document.createElementNS(S.attributes.xmlns,A):document.createElement(A);if(w.append(E),S.attributes&&this.setAttributes({html:E,element:S,storage:e,intent:s,linkService:i}),((b=S.children)==null?void 0:b.length)>0)d.push([S,-1,E]);else if(S.value){const D=document.createTextNode(S.value);a&&Xu.shouldBuildText(A)&&u.push(D),E.append(D)}}for(const g of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:u}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const ff=1e3,Mw=9,Vl=new WeakSet;function ya(o){return{width:o[2]-o[0],height:o[3]-o[1]}}class Rw{static create(t){switch(t.data.annotationType){case Ni.LINK:return new H5(t);case Ni.TEXT:return new Dw(t);case Ni.WIDGET:switch(t.data.fieldType){case"Tx":return new Ow(t);case"Btn":return t.data.radioButton?new W5(t):t.data.checkBox?new Bw(t):new qw(t);case"Ch":return new Hw(t);case"Sig":return new jw(t)}return new Kl(t);case Ni.POPUP:return new m0(t);case Ni.FREETEXT:return new Y5(t);case Ni.LINE:return new Uw(t);case Ni.SQUARE:return new Ww(t);case Ni.CIRCLE:return new Vw(t);case Ni.POLYLINE:return new K5(t);case Ni.CARET:return new Xw(t);case Ni.INK:return new v2(t);case Ni.POLYGON:return new Gw(t);case Ni.HIGHLIGHT:return new J5(t);case Ni.UNDERLINE:return new $w(t);case Ni.SQUIGGLY:return new Yw(t);case Ni.STRIKEOUT:return new Kw(t);case Ni.STAMP:return new Q5(t);case Ni.FILEATTACHMENT:return new Jw(t);default:return new mi(t)}}}var Al,wc,Ac,Id,g0;const S2=class S2{constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:n=!1}={}){M(this,Id);M(this,Al,null);M(this,wc,!1);M(this,Ac,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),n&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:i}){return!!(t!=null&&t.str||e!=null&&e.str||i!=null&&i.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return S2._hasPopupData(this.data)}updateEdited(t){var i;if(!this.container)return;c(this,Al)||N(this,Al,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&P(this,Id,g0).call(this,e),(i=c(this,Ac))==null||i.popup.updateEdited(t)}resetEdited(){var t;c(this,Al)&&(P(this,Id,g0).call(this,c(this,Al).rect),(t=c(this,Ac))==null||t.popup.resetEdited(),N(this,Al,null))}_createContainer(t){const{data:e,parent:{page:i,viewport:n}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",e.id),this instanceof Kl||(s.tabIndex=ff);const{style:r}=s;if(r.zIndex=this.parent.zIndex++,e.alternativeText&&(s.title=e.alternativeText),e.noRotate&&s.classList.add("norotate"),!e.rect||this instanceof m0){const{rotation:w}=e;return!e.hasOwnCanvas&&w!==0&&this.setRotation(w,s),s}const{width:a,height:l}=ya(e.rect);if(!t&&e.borderStyle.width>0){r.borderWidth=`${e.borderStyle.width}px`;const w=e.borderStyle.horizontalCornerRadius,S=e.borderStyle.verticalCornerRadius;if(w>0||S>0){const E=`calc(${w}px * var(--scale-factor)) / calc(${S}px * var(--scale-factor))`;r.borderRadius=E}else if(this instanceof W5){const E=`calc(${a}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;r.borderRadius=E}switch(e.borderStyle.style){case Au.SOLID:r.borderStyle="solid";break;case Au.DASHED:r.borderStyle="dashed";break;case Au.BEVELED:me("Unimplemented border style: beveled");break;case Au.INSET:me("Unimplemented border style: inset");break;case Au.UNDERLINE:r.borderBottomStyle="solid";break}const A=e.borderColor||null;A?(N(this,wc,!0),r.borderColor=Wt.makeHexColor(A[0]|0,A[1]|0,A[2]|0)):r.borderWidth=0}const u=Wt.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:d,pageHeight:p,pageX:b,pageY:g}=n.rawDims;r.left=`${100*(u[0]-b)/d}%`,r.top=`${100*(u[1]-g)/p}%`;const{rotation:y}=e;return e.hasOwnCanvas||y===0?(r.width=`${100*a/d}%`,r.height=`${100*l/p}%`):this.setRotation(y,s),s}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:n}=this.parent.viewport.rawDims,{width:s,height:r}=ya(this.data.rect);let a,l;t%180===0?(a=100*s/i,l=100*r/n):(a=100*r/i,l=100*s/n),e.style.width=`${a}%`,e.style.height=`${l}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,n)=>{const s=n.detail[e],r=s[0],a=s.slice(1);n.target.style[i]=vm[`${r}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[i]:vm[`${r}_rgb`](a)})};return _e(this,"_commonActions",{display:e=>{const{display:i}=e.detail,n=i%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const n of Object.keys(e.detail)){const s=t[n]||i[n];s==null||s(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[n,s]of Object.entries(e)){const r=i[n];if(r){const a={detail:{[n]:s},target:t};r(a),delete e[n]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,n,s]=this.data.rect.map(w=>Math.fround(w));if(t.length===8){const[w,S,A,E]=t.subarray(2,6);if(n===w&&s===S&&e===A&&i===E)return}const{style:r}=this.container;let a;if(c(this,wc)){const{borderColor:w,borderWidth:S}=r;r.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const l=n-e,u=s-i,{svgFactory:d}=this,p=d.createElement("svg");p.classList.add("quadrilateralsContainer"),p.setAttribute("width",0),p.setAttribute("height",0);const b=d.createElement("defs");p.append(b);const g=d.createElement("clipPath"),y=`clippath_${this.data.id}`;g.setAttribute("id",y),g.setAttribute("clipPathUnits","objectBoundingBox"),b.append(g);for(let w=2,S=t.length;w<S;w+=8){const A=t[w],E=t[w+1],D=t[w+2],q=t[w+3],G=d.createElement("rect"),K=(D-e)/l,X=(s-E)/u,H=(A-D)/l,et=(E-q)/u;G.setAttribute("x",K),G.setAttribute("y",X),G.setAttribute("width",H),G.setAttribute("height",et),g.append(G),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${K}" y="${X}" width="${H}" height="${et}"/>`)}c(this,wc)&&(a.push("</g></svg>')"),r.backgroundImage=a.join("")),this.container.append(p),this.container.style.clipPath=`url(#${y})`}_createPopup(){const{data:t}=this,e=N(this,Ac,new m0({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){$e("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const n=this._fieldObjects[t];if(n)for(const{page:s,id:r,exportValues:a}of n){if(s===-1||r===e)continue;const l=typeof a=="string"?a:null,u=document.querySelector(`[data-element-id="${r}"]`);if(u&&!Vl.has(u)){me(`_getElementsByName - element not allowed: ${r}`);continue}i.push({id:r,exportValue:l,domElement:u})}return i}for(const n of document.getElementsByName(t)){const{exportValue:s}=n,r=n.getAttribute("data-element-id");r!==e&&Vl.has(n)&&i.push({id:r,exportValue:s,domElement:n})}return i}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};Al=new WeakMap,wc=new WeakMap,Ac=new WeakMap,Id=new WeakSet,g0=function(t){const{container:{style:e},data:{rect:i,rotation:n},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:a,pageY:l}}}}=this;i==null||i.splice(0,4,...t);const{width:u,height:d}=ya(t);e.left=`${100*(t[0]-a)/s}%`,e.top=`${100*(r-t[3]+l)/r}%`,n===0?(e.width=`${100*u/s}%`,e.height=`${100*d/r}%`):this.setRotation(n)};let mi=S2;var Qn,jo,z5,U5;class H5 extends mi{constructor(e,i=null){super(e,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});M(this,Qn);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:i}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let s=!1;return e.url?(i.addLinkAttributes(n,e.url,e.newWindow),s=!0):e.action?(this._bindNamedAction(n,e.action),s=!0):e.attachment?(P(this,Qn,z5).call(this,n,e.attachment,e.attachmentDest),s=!0):e.setOCGState?(P(this,Qn,U5).call(this,n,e.setOCGState),s=!0):e.dest?(this._bindLink(n,e.dest),s=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),s=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(n,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(n),this.container}_bindLink(e,i){e.href=this.linkService.getDestinationHash(i),e.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&P(this,Qn,jo).call(this)}_bindNamedAction(e,i){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(i),!1),P(this,Qn,jo).call(this)}_bindJSAction(e,i){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(i.actions)){const r=n.get(s);r&&(e[r]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:s}}),!1})}e.onclick||(e.onclick=()=>!1),P(this,Qn,jo).call(this)}_bindResetFormAction(e,i){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),P(this,Qn,jo).call(this),!this._fieldObjects){me('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(e.onclick=()=>!1);return}e.onclick=()=>{var p;n==null||n();const{fields:s,refs:r,include:a}=i,l=[];if(s.length!==0||r.length!==0){const b=new Set(r);for(const g of s){const y=this._fieldObjects[g]||[];for(const{id:w}of y)b.add(w)}for(const g of Object.values(this._fieldObjects))for(const y of g)b.has(y.id)===a&&l.push(y)}else for(const b of Object.values(this._fieldObjects))l.push(...b);const u=this.annotationStorage,d=[];for(const b of l){const{id:g}=b;switch(d.push(g),b.type){case"text":{const w=b.defaultValue||"";u.setValue(g,{value:w});break}case"checkbox":case"radiobutton":{const w=b.defaultValue===b.exportValues;u.setValue(g,{value:w});break}case"combobox":case"listbox":{const w=b.defaultValue||"";u.setValue(g,{value:w});break}default:continue}const y=document.querySelector(`[data-element-id="${g}"]`);if(y){if(!Vl.has(y)){me(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}})),!1}}}Qn=new WeakSet,jo=function(){this.container.setAttribute("data-internal-link","")},z5=function(e,i,n=null){e.href=this.linkService.getAnchorUrl(""),i.description&&(e.title=i.description),e.onclick=()=>{var s;return(s=this.downloadManager)==null||s.openOrDownloadData(i.content,i.filename,n),!1},P(this,Qn,jo).call(this)},U5=function(e,i){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(i),!1),P(this,Qn,jo).call(this)};class Dw extends mi{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Kl extends mi{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return wn.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,n,s){i.includes("mouse")?t.addEventListener(i,r=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:s(r),shift:r.shiftKey,modifier:this._getKeyModifier(r)}})}):t.addEventListener(i,r=>{var a;if(i==="blur"){if(!e.focused||!r.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}s&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:s(r)}}))})}_setEventListeners(t,e,i,n){var s,r,a;for(const[l,u]of i)(u==="Action"||(s=this.data.actions)!=null&&s[u])&&((u==="Focus"||u==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,l,u,n),u==="Focus"&&!((r=this.data.actions)!=null&&r.Blur)?this._setEventListener(t,e,"blur","Blur",null):u==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":Wt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,n=this.data.defaultAppearanceData.fontSize||Mw,s=t.style;let r;const a=2,l=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a),d=Math.round(u/(b1*n))||1,p=u/d;r=Math.min(n,l(p/b1))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a);r=Math.min(n,l(u/b1))}s.fontSize=`calc(${r}px * var(--scale-factor))`,s.color=Wt.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(s.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class Ow extends Kl{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,n){const s=this.annotationStorage;for(const r of this._getElementsByName(t.name,t.id))r.domElement&&(r.domElement[e]=i),s.setValue(r.id,{[n]:i})}render(){var n,s;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const r=t.getValue(e,{value:this.data.fieldValue});let a=r.value||"";const l=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let u=r.formattedValue||((n=this.data.textContent)==null?void 0:n.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:a,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=u??a,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",u??a),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Vl.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=ff,this._setRequired(i,this.data.required),l&&(i.maxLength=l),i.addEventListener("input",b=>{t.setValue(e,{value:b.target.value}),this.setPropertyOnSiblings(i,"value",b.target.value,"value"),d.formattedValue=null}),i.addEventListener("resetform",b=>{const g=this.data.defaultFieldValue??"";i.value=d.userValue=g,d.formattedValue=null});let p=b=>{const{formattedValue:g}=d;g!=null&&(b.target.value=g),b.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",g=>{var w;if(d.focused)return;const{target:y}=g;d.userValue&&(y.value=d.userValue),d.lastCommittedValue=y.value,d.commitKey=1,(w=this.data.actions)!=null&&w.Focus||(d.focused=!0)}),i.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const y={value(w){d.userValue=w.detail.value??"",t.setValue(e,{value:d.userValue.toString()}),w.target.value=d.userValue},formattedValue(w){const{formattedValue:S}=w.detail;d.formattedValue=S,S!=null&&w.target!==document.activeElement&&(w.target.value=S),t.setValue(e,{formattedValue:S})},selRange(w){w.target.setSelectionRange(...w.detail.selRange)},charLimit:w=>{var D;const{charLimit:S}=w.detail,{target:A}=w;if(S===0){A.removeAttribute("maxLength");return}A.setAttribute("maxLength",S);let E=d.userValue;!E||E.length<=S||(E=E.slice(0,S),A.value=d.userValue=E,t.setValue(e,{value:E}),(D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,willCommit:!0,commitKey:1,selStart:A.selectionStart,selEnd:A.selectionEnd}}))}};this._dispatchEventFromSandbox(y,g)}),i.addEventListener("keydown",g=>{var S;d.commitKey=1;let y=-1;if(g.key==="Escape"?y=0:g.key==="Enter"&&!this.data.multiLine?y=2:g.key==="Tab"&&(d.commitKey=3),y===-1)return;const{value:w}=g.target;d.lastCommittedValue!==w&&(d.lastCommittedValue=w,d.userValue=w,(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,willCommit:!0,commitKey:y,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const b=p;p=null,i.addEventListener("blur",g=>{var w,S;if(!d.focused||!g.relatedTarget)return;(w=this.data.actions)!=null&&w.Blur||(d.focused=!1);const{value:y}=g.target;d.userValue=y,d.lastCommittedValue!==y&&((S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:y,willCommit:!0,commitKey:d.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}})),b(g)}),(s=this.data.actions)!=null&&s.Keystroke&&i.addEventListener("beforeinput",g=>{var G;d.lastCommittedValue=null;const{data:y,target:w}=g,{value:S,selectionStart:A,selectionEnd:E}=w;let D=A,q=E;switch(g.inputType){case"deleteWordBackward":{const K=S.substring(0,A).match(/\w*[^\w]*$/);K&&(D-=K[0].length);break}case"deleteWordForward":{const K=S.substring(A).match(/^[^\w]*\w*/);K&&(q+=K[0].length);break}case"deleteContentBackward":A===E&&(D-=1);break;case"deleteContentForward":A===E&&(q+=1);break}g.preventDefault(),(G=this.linkService.eventBus)==null||G.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:S,change:y||"",willCommit:!1,selStart:D,selEnd:q}})}),this._setEventListeners(i,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(p&&i.addEventListener("blur",p),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/l;i.classList.add("comb"),i.style.letterSpacing=`calc(${g}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class jw extends Kl{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class Bw extends Kl{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let n=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof n=="string"&&(n=n!=="Off",t.setValue(i,{value:n})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return Vl.add(s),s.setAttribute("data-element-id",i),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=e.fieldName,n&&s.setAttribute("checked",!0),s.setAttribute("exportValue",e.exportValue),s.tabIndex=ff,s.addEventListener("change",r=>{const{name:a,checked:l}=r.target;for(const u of this._getElementsByName(a,i)){const d=l&&u.exportValue===e.exportValue;u.domElement&&(u.domElement.checked=d),t.setValue(u.id,{value:d})}t.setValue(i,{value:l})}),s.addEventListener("resetform",r=>{const a=e.defaultFieldValue||"Off";r.target.checked=a===e.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",r=>{const a={value(l){l.target.checked=l.detail.value!=="Off",t.setValue(i,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,r)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],r=>r.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class W5 extends Kl{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let n=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof n=="string"&&(n=n!==e.buttonValue,t.setValue(i,{value:n})),n)for(const r of this._getElementsByName(e.fieldName,i))t.setValue(r.id,{value:!1});const s=document.createElement("input");if(Vl.add(s),s.setAttribute("data-element-id",i),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=e.fieldName,n&&s.setAttribute("checked",!0),s.tabIndex=ff,s.addEventListener("change",r=>{const{name:a,checked:l}=r.target;for(const u of this._getElementsByName(a,i))t.setValue(u.id,{value:!1});t.setValue(i,{value:l})}),s.addEventListener("resetform",r=>{const a=e.defaultFieldValue;r.target.checked=a!=null&&a===e.buttonValue}),this.enableScripting&&this.hasJSActions){const r=e.buttonValue;s.addEventListener("updatefromsandbox",a=>{const l={value:u=>{const d=r===u.detail.value;for(const p of this._getElementsByName(u.target.name)){const b=d&&p.id===i;p.domElement&&(p.domElement.checked=b),t.setValue(p.id,{value:b})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class qw extends H5{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class Hw extends Kl{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),n=document.createElement("select");Vl.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,this._setRequired(n,this.data.required),n.name=this.data.fieldName,n.tabIndex=ff;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0)),n.addEventListener("resetform",d=>{const p=this.data.defaultFieldValue;for(const b of n.options)b.selected=b.value===p});for(const d of this.data.options){const p=document.createElement("option");p.textContent=d.displayValue,p.value=d.exportValue,i.value.includes(d.exportValue)&&(p.setAttribute("selected",!0),s=!1),n.append(p)}let r=null;if(s){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),n.prepend(d),r=()=>{d.remove(),n.removeEventListener("input",r),r=null},n.addEventListener("input",r)}const a=d=>{const p=d?"value":"textContent",{options:b,multiple:g}=n;return g?Array.prototype.filter.call(b,y=>y.selected).map(y=>y[p]):b.selectedIndex===-1?null:b[b.selectedIndex][p]};let l=a(!1);const u=d=>{const p=d.target.options;return Array.prototype.map.call(p,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(n.addEventListener("updatefromsandbox",d=>{const p={value(b){r==null||r();const g=b.detail.value,y=new Set(Array.isArray(g)?g:[g]);for(const w of n.options)w.selected=y.has(w.value);t.setValue(e,{value:a(!0)}),l=a(!1)},multipleSelection(b){n.multiple=!0},remove(b){const g=n.options,y=b.detail.remove;g[y].selected=!1,n.remove(y),g.length>0&&Array.prototype.findIndex.call(g,S=>S.selected)===-1&&(g[0].selected=!0),t.setValue(e,{value:a(!0),items:u(b)}),l=a(!1)},clear(b){for(;n.length!==0;)n.remove(0);t.setValue(e,{value:null,items:[]}),l=a(!1)},insert(b){const{index:g,displayValue:y,exportValue:w}=b.detail.insert,S=n.children[g],A=document.createElement("option");A.textContent=y,A.value=w,S?S.before(A):n.append(A),t.setValue(e,{value:a(!0),items:u(b)}),l=a(!1)},items(b){const{items:g}=b.detail;for(;n.length!==0;)n.remove(0);for(const y of g){const{displayValue:w,exportValue:S}=y,A=document.createElement("option");A.textContent=w,A.value=S,n.append(A)}n.options.length>0&&(n.options[0].selected=!0),t.setValue(e,{value:a(!0),items:u(b)}),l=a(!1)},indices(b){const g=new Set(b.detail.indices);for(const y of b.target.options)y.selected=g.has(y.index);t.setValue(e,{value:a(!0)}),l=a(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(p,d)}),n.addEventListener("input",d=>{var g;const p=a(!0),b=a(!1);t.setValue(e,{value:p}),d.preventDefault(),(g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:l,change:b,changeEx:p,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(n,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):n.addEventListener("input",function(d){t.setValue(e,{value:a(!0)})}),this.data.combo&&this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class m0 extends mi{constructor(t){const{data:e,elements:i}=t;super(t,{isRenderable:mi._hasPopupData(e)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new zw({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",e.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(i=>`${o2}${i}`).join(",")),this.container}}var _c,fg,pg,xc,_l,oi,sa,Sc,Fd,Md,Lc,ra,Hs,aa,Rd,oa,Dd,xl,Sl,qe,Np,b0,V5,G5,X5,$5,Ep,Cp,v0;class zw{constructor({container:t,color:e,elements:i,titleObj:n,modificationDate:s,contentsObj:r,richText:a,parent:l,rect:u,parentRect:d,open:p}){M(this,qe);M(this,_c,P(this,qe,X5).bind(this));M(this,fg,P(this,qe,v0).bind(this));M(this,pg,P(this,qe,Cp).bind(this));M(this,xc,P(this,qe,Ep).bind(this));M(this,_l,null);M(this,oi,null);M(this,sa,null);M(this,Sc,null);M(this,Fd,null);M(this,Md,null);M(this,Lc,null);M(this,ra,!1);M(this,Hs,null);M(this,aa,null);M(this,Rd,null);M(this,oa,null);M(this,Dd,null);M(this,xl,null);M(this,Sl,!1);var b;N(this,oi,t),N(this,Dd,n),N(this,sa,r),N(this,oa,a),N(this,Md,l),N(this,_l,e),N(this,Rd,u),N(this,Lc,d),N(this,Fd,i),N(this,Sc,c2.toDateObject(s)),this.trigger=i.flatMap(g=>g.getElementsToTriggerPopup());for(const g of this.trigger)g.addEventListener("click",c(this,xc)),g.addEventListener("mouseenter",c(this,pg)),g.addEventListener("mouseleave",c(this,fg)),g.classList.add("popupTriggerArea");for(const g of i)(b=g.container)==null||b.addEventListener("keydown",c(this,_c));c(this,oi).hidden=!0,p&&P(this,qe,Ep).call(this)}render(){if(c(this,Hs))return;const t=N(this,Hs,document.createElement("div"));if(t.className="popup",c(this,_l)){const s=t.style.outlineColor=Wt.makeHexColor(...c(this,_l));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`:t.style.backgroundColor=Wt.makeHexColor(...c(this,_l).map(a=>Math.floor(.7*(255-a)+a)))}const e=document.createElement("span");e.className="header";const i=document.createElement("h1");if(e.append(i),{dir:i.dir,str:i.textContent}=c(this,Dd),t.append(e),c(this,Sc)){const s=document.createElement("span");s.classList.add("popupDate"),s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(this,Sc).valueOf()})),e.append(s)}const n=c(this,qe,Np);if(n)q5.render({xfaHtml:n,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const s=this._formatContents(c(this,sa));t.append(s)}c(this,oi).append(t)}_formatContents({str:t,dir:e}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=e;const n=t.split(/(?:\r\n?|\n)/);for(let s=0,r=n.length;s<r;++s){const a=n[s];i.append(document.createTextNode(a)),s<r-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:t,popupContent:e}){var i;c(this,xl)||N(this,xl,{contentsObj:c(this,sa),richText:c(this,oa)}),t&&N(this,aa,null),e&&(N(this,oa,P(this,qe,G5).call(this,e)),N(this,sa,null)),(i=c(this,Hs))==null||i.remove(),N(this,Hs,null)}resetEdited(){var t;c(this,xl)&&({contentsObj:mn(this,sa)._,richText:mn(this,oa)._}=c(this,xl),N(this,xl,null),(t=c(this,Hs))==null||t.remove(),N(this,Hs,null),N(this,aa,null))}forceHide(){N(this,Sl,this.isVisible),c(this,Sl)&&(c(this,oi).hidden=!0)}maybeShow(){c(this,Sl)&&(c(this,Hs)||P(this,qe,Cp).call(this),N(this,Sl,!1),c(this,oi).hidden=!1)}get isVisible(){return c(this,oi).hidden===!1}}_c=new WeakMap,fg=new WeakMap,pg=new WeakMap,xc=new WeakMap,_l=new WeakMap,oi=new WeakMap,sa=new WeakMap,Sc=new WeakMap,Fd=new WeakMap,Md=new WeakMap,Lc=new WeakMap,ra=new WeakMap,Hs=new WeakMap,aa=new WeakMap,Rd=new WeakMap,oa=new WeakMap,Dd=new WeakMap,xl=new WeakMap,Sl=new WeakMap,qe=new WeakSet,Np=function(){const t=c(this,oa),e=c(this,sa);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&c(this,oa).html||null},b0=function(){var t,e,i;return((i=(e=(t=c(this,qe,Np))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.fontSize)||0},V5=function(){var t,e,i;return((i=(e=(t=c(this,qe,Np))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.color)||null},G5=function(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},n={style:{color:c(this,qe,V5),fontSize:c(this,qe,b0)?`calc(${c(this,qe,b0)}px * var(--scale-factor))`:""}};for(const s of t.split(`
`))e.push({name:"span",value:s,attributes:n});return i},X5=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&c(this,ra))&&P(this,qe,Ep).call(this)},$5=function(){if(c(this,aa)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:n,pageY:s}}}=c(this,Md);let r=!!c(this,Lc),a=r?c(this,Lc):c(this,Rd);for(const y of c(this,Fd))if(!a||Wt.intersect(y.data.rect,a)!==null){a=y.data.rect,r=!0;break}const l=Wt.normalizeRect([a[0],t[3]-a[1]+t[1],a[2],t[3]-a[3]+t[1]]),d=r?a[2]-a[0]+5:0,p=l[0]+d,b=l[1];N(this,aa,[100*(p-n)/e,100*(b-s)/i]);const{style:g}=c(this,oi);g.left=`${c(this,aa)[0]}%`,g.top=`${c(this,aa)[1]}%`},Ep=function(){N(this,ra,!c(this,ra)),c(this,ra)?(P(this,qe,Cp).call(this),c(this,oi).addEventListener("click",c(this,xc)),c(this,oi).addEventListener("keydown",c(this,_c))):(P(this,qe,v0).call(this),c(this,oi).removeEventListener("click",c(this,xc)),c(this,oi).removeEventListener("keydown",c(this,_c)))},Cp=function(){c(this,Hs)||this.render(),this.isVisible?c(this,ra)&&c(this,oi).classList.add("focused"):(P(this,qe,$5).call(this),c(this,oi).hidden=!1,c(this,oi).style.zIndex=parseInt(c(this,oi).style.zIndex)+1e3)},v0=function(){c(this,oi).classList.remove("focused"),!(c(this,ra)||!this.isVisible)&&(c(this,oi).hidden=!0,c(this,oi).style.zIndex=parseInt(c(this,oi).style.zIndex)-1e3)};class Y5 extends mi{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=pe.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Od;class Uw extends mi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});M(this,Od,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:i,height:n}=ya(e.rect),s=this.svgFactory.create(i,n,!0),r=N(this,Od,this.svgFactory.createElement("svg:line"));return r.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),r.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),r.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),r.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),r.setAttribute("stroke-width",e.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),s.append(r),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Od)}addHighlightArea(){this.container.classList.add("highlightArea")}}Od=new WeakMap;var jd;class Ww extends mi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});M(this,jd,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:i,height:n}=ya(e.rect),s=this.svgFactory.create(i,n,!0),r=e.borderStyle.width,a=N(this,jd,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",r/2),a.setAttribute("y",r/2),a.setAttribute("width",i-r),a.setAttribute("height",n-r),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,jd)}addHighlightArea(){this.container.classList.add("highlightArea")}}jd=new WeakMap;var Bd;class Vw extends mi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});M(this,Bd,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:i,height:n}=ya(e.rect),s=this.svgFactory.create(i,n,!0),r=e.borderStyle.width,a=N(this,Bd,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",i/2),a.setAttribute("cy",n/2),a.setAttribute("rx",i/2-r/2),a.setAttribute("ry",n/2-r/2),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Bd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Bd=new WeakMap;var qd;class K5 extends mi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});M(this,qd,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:i,borderStyle:n,popupRef:s}}=this;if(!i)return this.container;const{width:r,height:a}=ya(e),l=this.svgFactory.create(r,a,!0);let u=[];for(let p=0,b=i.length;p<b;p+=2){const g=i[p]-e[0],y=e[3]-i[p+1];u.push(`${g},${y}`)}u=u.join(" ");const d=N(this,qd,this.svgFactory.createElement(this.svgElementName));return d.setAttribute("points",u),d.setAttribute("stroke-width",n.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),l.append(d),this.container.append(l),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,qd)}addHighlightArea(){this.container.classList.add("highlightArea")}}qd=new WeakMap;class Gw extends K5{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Xw extends mi{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Hd;class v2 extends mi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});M(this,Hd,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?pe.HIGHLIGHT:pe.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,inkLists:i,borderStyle:n,popupRef:s}}=this,{width:r,height:a}=ya(e),l=this.svgFactory.create(r,a,!0);for(const u of i){let d=[];for(let b=0,g=u.length;b<g;b+=2){const y=u[b]-e[0],w=e[3]-u[b+1];d.push(`${y},${w}`)}d=d.join(" ");const p=this.svgFactory.createElement(this.svgElementName);c(this,Hd).push(p),p.setAttribute("points",d),p.setAttribute("stroke-width",n.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),l.append(p)}return!s&&this.hasPopupData&&this._createPopup(),this.container.append(l),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return c(this,Hd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Hd=new WeakMap;class J5 extends mi{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=pe.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class $w extends mi{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Yw extends mi{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Kw extends mi{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Q5 extends mi{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=pe.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var zd,Ud,y0;class Jw extends mi{constructor(e){var n;super(e,{isRenderable:!0});M(this,Ud);M(this,zd,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(n=this.linkService.eventBus)==null||n.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:i}=this;let n;i.hasAppearance||i.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),n.addEventListener("dblclick",P(this,Ud,y0).bind(this)),N(this,zd,n);const{isMac:s}=wn.platform;return e.addEventListener("keydown",r=>{r.key==="Enter"&&(s?r.metaKey:r.ctrlKey)&&P(this,Ud,y0).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return c(this,zd)}addHighlightArea(){this.container.classList.add("highlightArea")}}zd=new WeakMap,Ud=new WeakSet,y0=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var Wd,Ll,Nl,Vd,Gl,Z5,w0;class Qw{constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:n,page:s,viewport:r,structTreeLayer:a}){M(this,Gl);M(this,Wd,null);M(this,Ll,null);M(this,Nl,new Map);M(this,Vd,null);this.div=t,N(this,Wd,e),N(this,Ll,i),N(this,Vd,a||null),this.page=s,this.viewport=r,this.zIndex=0,this._annotationEditorUIManager=n}hasEditableAnnotations(){return c(this,Nl).size>0}async render(t){var r;const{annotations:e}=t,i=this.div;Ul(i,this.viewport);const n=new Map,s={data:null,layer:i,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new b2,annotationStorage:t.annotationStorage||new d2,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const a of e){if(a.noHTML)continue;const l=a.annotationType===Ni.POPUP;if(l){const p=n.get(a.id);if(!p)continue;s.elements=p}else{const{width:p,height:b}=ya(a.rect);if(p<=0||b<=0)continue}s.data=a;const u=Rw.create(s);if(!u.isRenderable)continue;if(!l&&a.popupRef){const p=n.get(a.popupRef);p?p.push(u):n.set(a.popupRef,[u])}const d=u.render();a.hidden&&(d.style.visibility="hidden"),await P(this,Gl,Z5).call(this,d,a.id),u._isEditable&&(c(this,Nl).set(u.data.id,u),(r=this._annotationEditorUIManager)==null||r.renderAnnotationElement(u))}P(this,Gl,w0).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,Ul(e,{rotation:t.rotation}),P(this,Gl,w0).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(c(this,Nl).values())}getEditableAnnotation(t){return c(this,Nl).get(t)}}Wd=new WeakMap,Ll=new WeakMap,Nl=new WeakMap,Vd=new WeakMap,Gl=new WeakSet,Z5=async function(t,e){var r,a;const i=t.firstChild||t,n=i.id=`${o2}${e}`,s=await((r=c(this,Vd))==null?void 0:r.getAriaAttributes(n));if(s)for(const[l,u]of s)i.setAttribute(l,u);this.div.append(t),(a=c(this,Wd))==null||a.moveElementInDOM(this.div,t,i,!1)},w0=function(){if(!c(this,Ll))return;const t=this.div;for(const[e,i]of c(this,Ll)){const n=t.querySelector(`[data-annotation-id="${e}"]`);if(!n)continue;i.className="annotationContent";const{firstChild:s}=n;s?s.nodeName==="CANVAS"?s.replaceWith(i):s.classList.contains("annotationContent")?s.after(i):s.before(i):n.append(i)}c(this,Ll).clear()};const lp=/\r\n?|\n/g;var zs,Vn,Gd,El,Gn,xi,tb,eb,ib,Pp,Aa,kp,Tp,nb,_0,sb;const Xe=class Xe extends De{constructor(e){super({...e,name:"freeTextEditor"});M(this,xi);M(this,zs);M(this,Vn,"");M(this,Gd,`${this.id}-editor`);M(this,El,null);M(this,Gn);N(this,zs,e.color||Xe._defaultColor||De._defaultLineColor),N(this,Gn,e.fontSize||Xe._defaultFontSize)}static get _keyboardManager(){const e=Xe.prototype,i=r=>r.isEmpty(),n=Wl.TRANSLATE_SMALL,s=Wl.TRANSLATE_BIG;return _e(this,"_keyboardManager",new df([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:i}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[s,0],checker:i}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:i}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,s],checker:i}]]))}static initialize(e,i){De.initialize(e,i);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,i){switch(e){case ne.FREETEXT_SIZE:Xe._defaultFontSize=i;break;case ne.FREETEXT_COLOR:Xe._defaultColor=i;break}}updateParams(e,i){switch(e){case ne.FREETEXT_SIZE:P(this,xi,tb).call(this,i);break;case ne.FREETEXT_COLOR:P(this,xi,eb).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[ne.FREETEXT_SIZE,Xe._defaultFontSize],[ne.FREETEXT_COLOR,Xe._defaultColor||De._defaultLineColor]]}get propertiesToUpdate(){return[[ne.FREETEXT_SIZE,c(this,Gn)],[ne.FREETEXT_COLOR,c(this,zs)]]}_translateEmpty(e,i){this._uiManager.translateSelectedEditors(e,i,!0)}getInitialTranslation(){const e=this.parentScale;return[-Xe._internalPadding*e,-(Xe._internalPadding+c(this,Gn))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(pe.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),N(this,El,new AbortController);const e=this._uiManager.combinedSignal(c(this,El));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,Gd)),this._isDraggable=!0,(e=c(this,El))==null||e.abort(),N(this,El,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var e;this.width||(this.enableEditMode(),this.editorDiv.focus(),(e=this._initialOptions)!=null&&e.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=c(this,Vn),i=N(this,Vn,P(this,xi,ib).call(this).trimEnd());if(e===i)return;const n=s=>{if(N(this,Vn,s),!s){this.remove();return}P(this,xi,Tp).call(this),this._uiManager.rebuild(this),P(this,xi,Pp).call(this)};this.addCommands({cmd:()=>{n(i)},undo:()=>{n(e)},mustExec:!1}),P(this,xi,Pp).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Xe._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,i;this.width&&(e=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,Gd)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${c(this,Gn)}px * var(--scale-factor))`,n.color=c(this,zs),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Xp(this,this.div,["dblclick","keydown"]),this.width){const[s,r]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[l,u]=this.getInitialTranslation();[l,u]=this.pageTranslationToScreen(l,u);const[d,p]=this.pageDimensions,[b,g]=this.pageTranslation;let y,w;switch(this.rotation){case 0:y=e+(a[0]-b)/d,w=i+this.height-(a[1]-g)/p;break;case 90:y=e+(a[0]-b)/d,w=i-(a[1]-g)/p,[l,u]=[u,-l];break;case 180:y=e-this.width+(a[0]-b)/d,w=i-(a[1]-g)/p,[l,u]=[-l,-u];break;case 270:y=e+(a[0]-b-this.height*p)/d,w=i+(a[1]-g-this.width*d)/p,[l,u]=[-u,l];break}this.setAt(y*s,w*r,l,u)}else this.setAt(e*s,i*r,this.width*s,this.height*r);P(this,xi,Tp).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var y,w,S;const i=e.clipboardData||window.clipboardData,{types:n}=i;if(n.length===1&&n[0]==="text/plain")return;e.preventDefault();const s=P(y=Xe,Aa,_0).call(y,i.getData("text")||"").replaceAll(lp,`
`);if(!s)return;const r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();const a=r.getRangeAt(0);if(!s.includes(`
`)){a.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),r.collapseToStart();return}const{startContainer:l,startOffset:u}=a,d=[],p=[];if(l.nodeType===Node.TEXT_NODE){const A=l.parentElement;if(p.push(l.nodeValue.slice(u).replaceAll(lp,"")),A!==this.editorDiv){let E=d;for(const D of this.editorDiv.childNodes){if(D===A){E=p;continue}E.push(P(w=Xe,Aa,kp).call(w,D))}}d.push(l.nodeValue.slice(0,u).replaceAll(lp,""))}else if(l===this.editorDiv){let A=d,E=0;for(const D of this.editorDiv.childNodes)E++===u&&(A=p),A.push(P(S=Xe,Aa,kp).call(S,D))}N(this,Vn,`${d.join(`
`)}${s}${p.join(`
`)}`),P(this,xi,Tp).call(this);const b=new Range;let g=d.reduce((A,E)=>A+E.length,0);for(const{firstChild:A}of this.editorDiv.childNodes)if(A.nodeType===Node.TEXT_NODE){const E=A.nodeValue.length;if(g<=E){b.setStart(A,g),b.setEnd(A,g);break}g-=E}r.removeAllRanges(),r.addRange(b)}get contentDiv(){return this.editorDiv}static async deserialize(e,i,n){var a;let s=null;if(e instanceof Y5){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:d,rotation:p,id:b,popupRef:g},textContent:y,textPosition:w,parent:{page:{pageNumber:S}}}=e;if(!y||y.length===0)return null;s=e={annotationType:pe.FREETEXT,color:Array.from(u),fontSize:l,value:y.join(`
`),position:w,pageIndex:S-1,rect:d.slice(0),rotation:p,id:b,deleted:!1,popupRef:g}}const r=await super.deserialize(e,i,n);return N(r,Gn,e.fontSize),N(r,zs,Wt.makeHexColor(...e.color)),N(r,Vn,P(a=Xe,Aa,_0).call(a,e.value)),r.annotationElementId=e.id||null,r._initialData=s,r}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Xe._internalPadding*this.parentScale,n=this.getRect(i,i),s=De._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:c(this,zs)),r={annotationType:pe.FREETEXT,color:s,fontSize:c(this,Gn),value:P(this,xi,nb).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?r:this.annotationElementId&&!P(this,xi,sb).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){const i=super.renderAnnotationElement(e);if(this.deleted)return i;const{style:n}=i;n.fontSize=`calc(${c(this,Gn)}px * var(--scale-factor))`,n.color=c(this,zs),i.replaceChildren();for(const r of c(this,Vn).split(`
`)){const a=document.createElement("div");a.append(r?document.createTextNode(r):document.createElement("br")),i.append(a)}const s=Xe._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(s,s),popupContent:c(this,Vn)}),i}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};zs=new WeakMap,Vn=new WeakMap,Gd=new WeakMap,El=new WeakMap,Gn=new WeakMap,xi=new WeakSet,tb=function(e){const i=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--scale-factor))`,this.translate(0,-(s-c(this,Gn))*this.parentScale),N(this,Gn,s),P(this,xi,Pp).call(this)},n=c(this,Gn);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ne.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},eb=function(e){const i=s=>{N(this,zs,this.editorDiv.style.color=s)},n=c(this,zs);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ne.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},ib=function(){var n;const e=[];this.editorDiv.normalize();let i=null;for(const s of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&s.nodeName==="BR"||(e.push(P(n=Xe,Aa,kp).call(n,s)),i=s);return e.join(`
`)},Pp=function(){const[e,i]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:s,div:r}=this,a=r.style.display,l=r.classList.contains("hidden");r.classList.remove("hidden"),r.style.display="hidden",s.div.append(this.div),n=r.getBoundingClientRect(),r.remove(),r.style.display=a,r.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/i):(this.width=n.height/e,this.height=n.width/i),this.fixAndSetPosition()},Aa=new WeakSet,kp=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(lp,"")},Tp=function(){if(this.editorDiv.replaceChildren(),!!c(this,Vn))for(const e of c(this,Vn).split(`
`)){const i=document.createElement("div");i.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(i)}},nb=function(){return c(this,Vn).replaceAll(" "," ")},_0=function(e){return e.replaceAll(" "," ")},sb=function(e){const{value:i,fontSize:n,color:s,pageIndex:r}=this._initialData;return this._hasBeenMoved||e.value!==i||e.fontSize!==n||e.color.some((a,l)=>a!==s[l])||e.pageIndex!==r},M(Xe,Aa),ie(Xe,"_freeTextDefaultContent",""),ie(Xe,"_internalPadding",0),ie(Xe,"_defaultColor",null),ie(Xe,"_defaultFontSize",10),ie(Xe,"_type","freetext"),ie(Xe,"_editorType",pe.FREETEXT);let A0=Xe;class rb{toSVGPath(){$e("Abstract method `toSVGPath` must be implemented.")}get box(){$e("Abstract getter `box` must be implemented.")}serialize(t,e){$e("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){$e("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){$e("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}var Xn,Us,Nc,Ec,Ar,ve,Cl,Pl,Xd,$d,Cc,Pc,oo,Yd,gg,mg,Ii,Ru,ab,ob,lb,hb,cb,ub;const Xr=class Xr{constructor({x:t,y:e},i,n,s,r,a=0){M(this,Ii);M(this,Xn);M(this,Us,[]);M(this,Nc);M(this,Ec);M(this,Ar,[]);M(this,ve,new Float64Array(18));M(this,Cl);M(this,Pl);M(this,Xd);M(this,$d);M(this,Cc);M(this,Pc);M(this,oo,[]);N(this,Xn,i),N(this,Pc,s*n),N(this,Ec,r),c(this,ve).set([NaN,NaN,NaN,NaN,t,e],6),N(this,Nc,a),N(this,$d,c(Xr,Yd)*n),N(this,Xd,c(Xr,mg)*n),N(this,Cc,n),c(this,oo).push(t,e)}isEmpty(){return isNaN(c(this,ve)[8])}add({x:t,y:e}){var et;N(this,Cl,t),N(this,Pl,e);const[i,n,s,r]=c(this,Xn);let[a,l,u,d]=c(this,ve).subarray(8,12);const p=t-u,b=e-d,g=Math.hypot(p,b);if(g<c(this,Xd))return!1;const y=g-c(this,$d),w=y/g,S=w*p,A=w*b;let E=a,D=l;a=u,l=d,u+=S,d+=A,(et=c(this,oo))==null||et.push(t,e);const q=-A/y,G=S/y,K=q*c(this,Pc),X=G*c(this,Pc);return c(this,ve).set(c(this,ve).subarray(2,8),0),c(this,ve).set([u+K,d+X],4),c(this,ve).set(c(this,ve).subarray(14,18),12),c(this,ve).set([u-K,d-X],16),isNaN(c(this,ve)[6])?(c(this,Ar).length===0&&(c(this,ve).set([a+K,l+X],2),c(this,Ar).push(NaN,NaN,NaN,NaN,(a+K-i)/s,(l+X-n)/r),c(this,ve).set([a-K,l-X],14),c(this,Us).push(NaN,NaN,NaN,NaN,(a-K-i)/s,(l-X-n)/r)),c(this,ve).set([E,D,a,l,u,d],6),!this.isEmpty()):(c(this,ve).set([E,D,a,l,u,d],6),Math.abs(Math.atan2(D-l,E-a)-Math.atan2(A,S))<Math.PI/2?([a,l,u,d]=c(this,ve).subarray(2,6),c(this,Ar).push(NaN,NaN,NaN,NaN,((a+u)/2-i)/s,((l+d)/2-n)/r),[a,l,E,D]=c(this,ve).subarray(14,18),c(this,Us).push(NaN,NaN,NaN,NaN,((E+a)/2-i)/s,((D+l)/2-n)/r),!0):([E,D,a,l,u,d]=c(this,ve).subarray(0,6),c(this,Ar).push(((E+5*a)/6-i)/s,((D+5*l)/6-n)/r,((5*a+u)/6-i)/s,((5*l+d)/6-n)/r,((a+u)/2-i)/s,((l+d)/2-n)/r),[u,d,a,l,E,D]=c(this,ve).subarray(12,18),c(this,Us).push(((E+5*a)/6-i)/s,((D+5*l)/6-n)/r,((5*a+u)/6-i)/s,((5*l+d)/6-n)/r,((a+u)/2-i)/s,((l+d)/2-n)/r),!0))}toSVGPath(){if(this.isEmpty())return"";const t=c(this,Ar),e=c(this,Us);if(isNaN(c(this,ve)[6])&&!this.isEmpty())return P(this,Ii,ab).call(this);const i=[];i.push(`M${t[4]} ${t[5]}`);for(let n=6;n<t.length;n+=6)isNaN(t[n])?i.push(`L${t[n+4]} ${t[n+5]}`):i.push(`C${t[n]} ${t[n+1]} ${t[n+2]} ${t[n+3]} ${t[n+4]} ${t[n+5]}`);P(this,Ii,lb).call(this,i);for(let n=e.length-6;n>=6;n-=6)isNaN(e[n])?i.push(`L${e[n+4]} ${e[n+5]}`):i.push(`C${e[n]} ${e[n+1]} ${e[n+2]} ${e[n+3]} ${e[n+4]} ${e[n+5]}`);return P(this,Ii,ob).call(this,i),i.join(" ")}newFreeDrawOutline(t,e,i,n,s,r){return new db(t,e,i,n,s,r)}getOutlines(){var p;const t=c(this,Ar),e=c(this,Us),i=c(this,ve),[n,s,r,a]=c(this,Xn),l=new Float64Array((((p=c(this,oo))==null?void 0:p.length)??0)+2);for(let b=0,g=l.length-2;b<g;b+=2)l[b]=(c(this,oo)[b]-n)/r,l[b+1]=(c(this,oo)[b+1]-s)/a;if(l[l.length-2]=(c(this,Cl)-n)/r,l[l.length-1]=(c(this,Pl)-s)/a,isNaN(i[6])&&!this.isEmpty())return P(this,Ii,hb).call(this,l);const u=new Float64Array(c(this,Ar).length+24+c(this,Us).length);let d=t.length;for(let b=0;b<d;b+=2){if(isNaN(t[b])){u[b]=u[b+1]=NaN;continue}u[b]=t[b],u[b+1]=t[b+1]}d=P(this,Ii,ub).call(this,u,d);for(let b=e.length-6;b>=6;b-=6)for(let g=0;g<6;g+=2){if(isNaN(e[b+g])){u[d]=u[d+1]=NaN,d+=2;continue}u[d]=e[b+g],u[d+1]=e[b+g+1],d+=2}return P(this,Ii,cb).call(this,u,d),this.newFreeDrawOutline(u,l,c(this,Xn),c(this,Cc),c(this,Nc),c(this,Ec))}};Xn=new WeakMap,Us=new WeakMap,Nc=new WeakMap,Ec=new WeakMap,Ar=new WeakMap,ve=new WeakMap,Cl=new WeakMap,Pl=new WeakMap,Xd=new WeakMap,$d=new WeakMap,Cc=new WeakMap,Pc=new WeakMap,oo=new WeakMap,Yd=new WeakMap,gg=new WeakMap,mg=new WeakMap,Ii=new WeakSet,Ru=function(){const t=c(this,ve).subarray(4,6),e=c(this,ve).subarray(16,18),[i,n,s,r]=c(this,Xn);return[(c(this,Cl)+(t[0]-e[0])/2-i)/s,(c(this,Pl)+(t[1]-e[1])/2-n)/r,(c(this,Cl)+(e[0]-t[0])/2-i)/s,(c(this,Pl)+(e[1]-t[1])/2-n)/r]},ab=function(){const[t,e,i,n]=c(this,Xn),[s,r,a,l]=P(this,Ii,Ru).call(this);return`M${(c(this,ve)[2]-t)/i} ${(c(this,ve)[3]-e)/n} L${(c(this,ve)[4]-t)/i} ${(c(this,ve)[5]-e)/n} L${s} ${r} L${a} ${l} L${(c(this,ve)[16]-t)/i} ${(c(this,ve)[17]-e)/n} L${(c(this,ve)[14]-t)/i} ${(c(this,ve)[15]-e)/n} Z`},ob=function(t){const e=c(this,Us);t.push(`L${e[4]} ${e[5]} Z`)},lb=function(t){const[e,i,n,s]=c(this,Xn),r=c(this,ve).subarray(4,6),a=c(this,ve).subarray(16,18),[l,u,d,p]=P(this,Ii,Ru).call(this);t.push(`L${(r[0]-e)/n} ${(r[1]-i)/s} L${l} ${u} L${d} ${p} L${(a[0]-e)/n} ${(a[1]-i)/s}`)},hb=function(t){const e=c(this,ve),[i,n,s,r]=c(this,Xn),[a,l,u,d]=P(this,Ii,Ru).call(this),p=new Float64Array(36);return p.set([NaN,NaN,NaN,NaN,(e[2]-i)/s,(e[3]-n)/r,NaN,NaN,NaN,NaN,(e[4]-i)/s,(e[5]-n)/r,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,(e[16]-i)/s,(e[17]-n)/r,NaN,NaN,NaN,NaN,(e[14]-i)/s,(e[15]-n)/r],0),this.newFreeDrawOutline(p,t,c(this,Xn),c(this,Cc),c(this,Nc),c(this,Ec))},cb=function(t,e){const i=c(this,Us);return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6},ub=function(t,e){const i=c(this,ve).subarray(4,6),n=c(this,ve).subarray(16,18),[s,r,a,l]=c(this,Xn),[u,d,p,b]=P(this,Ii,Ru).call(this);return t.set([NaN,NaN,NaN,NaN,(i[0]-s)/a,(i[1]-r)/l,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,p,b,NaN,NaN,NaN,NaN,(n[0]-s)/a,(n[1]-r)/l],e),e+=24},M(Xr,Yd,8),M(Xr,gg,2),M(Xr,mg,c(Xr,Yd)+c(Xr,gg));let Yp=Xr;var kc,kl,la,Kd,$n,Jd,di,Rn,Du,Ou,fb;class db extends rb{constructor(e,i,n,s,r,a){super();M(this,Rn);M(this,kc);M(this,kl,null);M(this,la);M(this,Kd);M(this,$n);M(this,Jd);M(this,di);N(this,di,e),N(this,$n,i),N(this,kc,n),N(this,Jd,s),N(this,la,r),N(this,Kd,a),P(this,Rn,fb).call(this,a);const{x:l,y:u,width:d,height:p}=c(this,kl);for(let b=0,g=e.length;b<g;b+=2)e[b]=(e[b]-l)/d,e[b+1]=(e[b+1]-u)/p;for(let b=0,g=i.length;b<g;b+=2)i[b]=(i[b]-l)/d,i[b+1]=(i[b+1]-u)/p}toSVGPath(){const e=[`M${c(this,di)[4]} ${c(this,di)[5]}`];for(let i=6,n=c(this,di).length;i<n;i+=6){if(isNaN(c(this,di)[i])){e.push(`L${c(this,di)[i+4]} ${c(this,di)[i+5]}`);continue}e.push(`C${c(this,di)[i]} ${c(this,di)[i+1]} ${c(this,di)[i+2]} ${c(this,di)[i+3]} ${c(this,di)[i+4]} ${c(this,di)[i+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,i,n,s],r){const a=n-e,l=s-i;let u,d;switch(r){case 0:u=P(this,Rn,Du).call(this,c(this,di),e,s,a,-l),d=P(this,Rn,Du).call(this,c(this,$n),e,s,a,-l);break;case 90:u=P(this,Rn,Ou).call(this,c(this,di),e,i,a,l),d=P(this,Rn,Ou).call(this,c(this,$n),e,i,a,l);break;case 180:u=P(this,Rn,Du).call(this,c(this,di),n,i,-a,l),d=P(this,Rn,Du).call(this,c(this,$n),n,i,-a,l);break;case 270:u=P(this,Rn,Ou).call(this,c(this,di),n,s,-a,-l),d=P(this,Rn,Ou).call(this,c(this,$n),n,s,-a,-l);break}return{outline:Array.from(u),points:[Array.from(d)]}}get box(){return c(this,kl)}newOutliner(e,i,n,s,r,a=0){return new Yp(e,i,n,s,r,a)}getNewOutline(e,i){const{x:n,y:s,width:r,height:a}=c(this,kl),[l,u,d,p]=c(this,kc),b=r*d,g=a*p,y=n*d+l,w=s*p+u,S=this.newOutliner({x:c(this,$n)[0]*b+y,y:c(this,$n)[1]*g+w},c(this,kc),c(this,Jd),e,c(this,Kd),i??c(this,la));for(let A=2;A<c(this,$n).length;A+=2)S.add({x:c(this,$n)[A]*b+y,y:c(this,$n)[A+1]*g+w});return S.getOutlines()}get mustRemoveSelfIntersections(){return!0}}kc=new WeakMap,kl=new WeakMap,la=new WeakMap,Kd=new WeakMap,$n=new WeakMap,Jd=new WeakMap,di=new WeakMap,Rn=new WeakSet,Du=function(e,i,n,s,r){const a=new Float64Array(e.length);for(let l=0,u=e.length;l<u;l+=2)a[l]=i+e[l]*s,a[l+1]=n+e[l+1]*r;return a},Ou=function(e,i,n,s,r){const a=new Float64Array(e.length);for(let l=0,u=e.length;l<u;l+=2)a[l]=i+e[l+1]*s,a[l+1]=n+e[l]*r;return a},fb=function(e){const i=c(this,di);let n=i[4],s=i[5],r=n,a=s,l=n,u=s,d=n,p=s;const b=e?Math.max:Math.min;for(let A=6,E=i.length;A<E;A+=6){if(isNaN(i[A]))r=Math.min(r,i[A+4]),a=Math.min(a,i[A+5]),l=Math.max(l,i[A+4]),u=Math.max(u,i[A+5]),p<i[A+5]?(d=i[A+4],p=i[A+5]):p===i[A+5]&&(d=b(d,i[A+4]));else{const D=Wt.bezierBoundingBox(n,s,...i.slice(A,A+6));r=Math.min(r,D[0]),a=Math.min(a,D[1]),l=Math.max(l,D[2]),u=Math.max(u,D[3]),p<D[3]?(d=D[2],p=D[3]):p===D[3]&&(d=b(d,D[2]))}n=i[A+4],s=i[A+5]}const g=r-c(this,la),y=a-c(this,la),w=l-r+2*c(this,la),S=u-a+2*c(this,la);N(this,kl,{x:g,y,width:w,height:S,lastPoint:[d,p]})};var Qd,lo,Ws,_n,pb,Ip,gb,mb,x0;class ym{constructor(t,e=0,i=0,n=!0){M(this,_n);M(this,Qd);M(this,lo,[]);M(this,Ws,[]);let s=1/0,r=-1/0,a=1/0,l=-1/0;const d=10**-4;for(const{x:A,y:E,width:D,height:q}of t){const G=Math.floor((A-e)/d)*d,K=Math.ceil((A+D+e)/d)*d,X=Math.floor((E-e)/d)*d,H=Math.ceil((E+q+e)/d)*d,et=[G,X,H,!0],ct=[K,X,H,!1];c(this,lo).push(et,ct),s=Math.min(s,G),r=Math.max(r,K),a=Math.min(a,X),l=Math.max(l,H)}const p=r-s+2*i,b=l-a+2*i,g=s-i,y=a-i,w=c(this,lo).at(n?-1:-2),S=[w[0],w[2]];for(const A of c(this,lo)){const[E,D,q]=A;A[0]=(E-g)/p,A[1]=(D-y)/b,A[2]=(q-y)/b}N(this,Qd,{x:g,y,width:p,height:b,lastPoint:S})}getOutlines(){c(this,lo).sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of c(this,lo))e[3]?(t.push(...P(this,_n,x0).call(this,e)),P(this,_n,gb).call(this,e)):(P(this,_n,mb).call(this,e),t.push(...P(this,_n,x0).call(this,e)));return P(this,_n,pb).call(this,t)}}Qd=new WeakMap,lo=new WeakMap,Ws=new WeakMap,_n=new WeakSet,pb=function(t){const e=[],i=new Set;for(const r of t){const[a,l,u]=r;e.push([a,l,r],[a,u,r])}e.sort((r,a)=>r[1]-a[1]||r[0]-a[0]);for(let r=0,a=e.length;r<a;r+=2){const l=e[r][2],u=e[r+1][2];l.push(u),u.push(l),i.add(l),i.add(u)}const n=[];let s;for(;i.size>0;){const r=i.values().next().value;let[a,l,u,d,p]=r;i.delete(r);let b=a,g=l;for(s=[a,u],n.push(s);;){let y;if(i.has(d))y=d;else if(i.has(p))y=p;else break;i.delete(y),[a,l,u,d,p]=y,b!==a&&(s.push(b,g,a,g===l?l:u),b=a),g=g===l?u:l}s.push(b,g)}return new Zw(n,c(this,Qd))},Ip=function(t){const e=c(this,Ws);let i=0,n=e.length-1;for(;i<=n;){const s=i+n>>1,r=e[s][0];if(r===t)return s;r<t?i=s+1:n=s-1}return n+1},gb=function([,t,e]){const i=P(this,_n,Ip).call(this,t);c(this,Ws).splice(i,0,[t,e])},mb=function([,t,e]){const i=P(this,_n,Ip).call(this,t);for(let n=i;n<c(this,Ws).length;n++){const[s,r]=c(this,Ws)[n];if(s!==t)break;if(s===t&&r===e){c(this,Ws).splice(n,1);return}}for(let n=i-1;n>=0;n--){const[s,r]=c(this,Ws)[n];if(s!==t)break;if(s===t&&r===e){c(this,Ws).splice(n,1);return}}},x0=function(t){const[e,i,n]=t,s=[[e,i,n]],r=P(this,_n,Ip).call(this,n);for(let a=0;a<r;a++){const[l,u]=c(this,Ws)[a];for(let d=0,p=s.length;d<p;d++){const[,b,g]=s[d];if(!(u<=b||g<=l)){if(b>=l){if(g>u)s[d][1]=u;else{if(p===1)return[];s.splice(d,1),d--,p--}continue}s[d][2]=l,g>u&&s.push([e,u,g])}}}return s};var Zd,Tc;class Zw extends rb{constructor(e,i){super();M(this,Zd);M(this,Tc);N(this,Tc,e),N(this,Zd,i)}toSVGPath(){const e=[];for(const i of c(this,Tc)){let[n,s]=i;e.push(`M${n} ${s}`);for(let r=2;r<i.length;r+=2){const a=i[r],l=i[r+1];a===n?(e.push(`V${l}`),s=l):l===s&&(e.push(`H${a}`),n=a)}e.push("Z")}return e.join(" ")}serialize([e,i,n,s],r){const a=[],l=n-e,u=s-i;for(const d of c(this,Tc)){const p=new Array(d.length);for(let b=0;b<d.length;b+=2)p[b]=e+d[b]*l,p[b+1]=s-d[b+1]*u;a.push(p)}return a}get box(){return c(this,Zd)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}Zd=new WeakMap,Tc=new WeakMap;class S0 extends Yp{newFreeDrawOutline(t,e,i,n,s,r){return new tA(t,e,i,n,s,r)}get classNamesForDrawing(){return["highlight","free"]}}class tA extends db{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(t,e,i,n,s,r=0){return new S0(t,e,i,n,s,r)}}var Vs,Tl,Ic,Pi,tf,Fc,ef,nf,ho,Gs,Mc,sf,Be,L0,N0,E0,Bo,bb,Ha;const kn=class kn{constructor({editor:t=null,uiManager:e=null}){M(this,Be);M(this,Vs,null);M(this,Tl,null);M(this,Ic);M(this,Pi,null);M(this,tf,!1);M(this,Fc,!1);M(this,ef,null);M(this,nf);M(this,ho,null);M(this,Gs,null);M(this,Mc);var i;t?(N(this,Fc,!1),N(this,Mc,ne.HIGHLIGHT_COLOR),N(this,ef,t)):(N(this,Fc,!0),N(this,Mc,ne.HIGHLIGHT_DEFAULT_COLOR)),N(this,Gs,(t==null?void 0:t._uiManager)||e),N(this,nf,c(this,Gs)._eventBus),N(this,Ic,(t==null?void 0:t.color)||((i=c(this,Gs))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),c(kn,sf)||N(kn,sf,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return _e(this,"_keyboardManager",new df([[["Escape","mac+Escape"],kn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],kn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],kn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],kn.prototype._moveToPrevious],[["Home","mac+Home"],kn.prototype._moveToBeginning],[["End","mac+End"],kn.prototype._moveToEnd]]))}renderButton(){const t=N(this,Vs,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=c(this,Gs)._signal;t.addEventListener("click",P(this,Be,Bo).bind(this),{signal:e}),t.addEventListener("keydown",P(this,Be,E0).bind(this),{signal:e});const i=N(this,Tl,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=c(this,Ic),t.append(i),t}renderMainDropdown(){const t=N(this,Pi,P(this,Be,L0).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===c(this,Vs)){P(this,Be,Bo).call(this,t);return}const e=t.target.getAttribute("data-color");e&&P(this,Be,N0).call(this,e,t)}_moveToNext(t){var e,i;if(!c(this,Be,Ha)){P(this,Be,Bo).call(this,t);return}if(t.target===c(this,Vs)){(e=c(this,Pi).firstChild)==null||e.focus();return}(i=t.target.nextSibling)==null||i.focus()}_moveToPrevious(t){var e,i;if(t.target===((e=c(this,Pi))==null?void 0:e.firstChild)||t.target===c(this,Vs)){c(this,Be,Ha)&&this._hideDropdownFromKeyboard();return}c(this,Be,Ha)||P(this,Be,Bo).call(this,t),(i=t.target.previousSibling)==null||i.focus()}_moveToBeginning(t){var e;if(!c(this,Be,Ha)){P(this,Be,Bo).call(this,t);return}(e=c(this,Pi).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!c(this,Be,Ha)){P(this,Be,Bo).call(this,t);return}(e=c(this,Pi).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=c(this,Pi))==null||t.classList.add("hidden"),(e=c(this,ho))==null||e.abort(),N(this,ho,null)}_hideDropdownFromKeyboard(){var t;if(!c(this,Fc)){if(!c(this,Be,Ha)){(t=c(this,ef))==null||t.unselect();return}this.hideDropdown(),c(this,Vs).focus({preventScroll:!0,focusVisible:c(this,tf)})}}updateColor(t){if(c(this,Tl)&&(c(this,Tl).style.backgroundColor=t),!c(this,Pi))return;const e=c(this,Gs).highlightColors.values();for(const i of c(this,Pi).children)i.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=c(this,Vs))==null||t.remove(),N(this,Vs,null),N(this,Tl,null),(e=c(this,Pi))==null||e.remove(),N(this,Pi,null)}};Vs=new WeakMap,Tl=new WeakMap,Ic=new WeakMap,Pi=new WeakMap,tf=new WeakMap,Fc=new WeakMap,ef=new WeakMap,nf=new WeakMap,ho=new WeakMap,Gs=new WeakMap,Mc=new WeakMap,sf=new WeakMap,Be=new WeakSet,L0=function(){const t=document.createElement("div"),e=c(this,Gs)._signal;t.addEventListener("contextmenu",vs,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,n]of c(this,Gs).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",n),s.title=i,s.setAttribute("data-l10n-id",c(kn,sf)[i]);const r=document.createElement("span");s.append(r),r.className="swatch",r.style.backgroundColor=n,s.setAttribute("aria-selected",n===c(this,Ic)),s.addEventListener("click",P(this,Be,N0).bind(this,n),{signal:e}),t.append(s)}return t.addEventListener("keydown",P(this,Be,E0).bind(this),{signal:e}),t},N0=function(t,e){e.stopPropagation(),c(this,nf).dispatch("switchannotationeditorparams",{source:this,type:c(this,Mc),value:t})},E0=function(t){kn._keyboardManager.exec(this,t)},Bo=function(t){if(c(this,Be,Ha)){this.hideDropdown();return}if(N(this,tf,t.detail===0),c(this,ho)||(N(this,ho,new AbortController),window.addEventListener("pointerdown",P(this,Be,bb).bind(this),{signal:c(this,Gs).combinedSignal(c(this,ho))})),c(this,Pi)){c(this,Pi).classList.remove("hidden");return}const e=N(this,Pi,P(this,Be,L0).call(this));c(this,Vs).append(e)},bb=function(t){var e;(e=c(this,Pi))!=null&&e.contains(t.target)||this.hideDropdown()},Ha=function(){return c(this,Pi)&&!c(this,Pi).classList.contains("hidden")},M(kn,sf,null);let Kp=kn;var Rc,rf,ha,Il,Dc,ds,af,of,Fl,Xs,hn,Fn,Oc,ca,ki,jc,fs,lf,de,C0,Fp,vb,yb,wb,P0,qo,ms,Rh,Ab,Mp,ju,_b,xb,Sb,Lb,Nb;const Ce=class Ce extends De{constructor(e){super({...e,name:"highlightEditor"});M(this,de);M(this,Rc,null);M(this,rf,0);M(this,ha);M(this,Il,null);M(this,Dc,null);M(this,ds,null);M(this,af,null);M(this,of,0);M(this,Fl,null);M(this,Xs,null);M(this,hn,null);M(this,Fn,!1);M(this,Oc,null);M(this,ca);M(this,ki,null);M(this,jc,"");M(this,fs);M(this,lf,"");this.color=e.color||Ce._defaultColor,N(this,fs,e.thickness||Ce._defaultThickness),N(this,ca,e.opacity||Ce._defaultOpacity),N(this,ha,e.boxes||null),N(this,lf,e.methodOfCreation||""),N(this,jc,e.text||""),this._isDraggable=!1,e.highlightId>-1?(N(this,Fn,!0),P(this,de,Fp).call(this,e),P(this,de,qo).call(this)):c(this,ha)&&(N(this,Rc,e.anchorNode),N(this,rf,e.anchorOffset),N(this,af,e.focusNode),N(this,of,e.focusOffset),P(this,de,C0).call(this),P(this,de,qo).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=Ce.prototype;return _e(this,"_keyboardManager",new df([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,Fn)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:c(this,fs),methodOfCreation:c(this,lf)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,i){var n;De.initialize(e,i),Ce._defaultColor||(Ce._defaultColor=((n=i.highlightColors)==null?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(e,i){switch(e){case ne.HIGHLIGHT_DEFAULT_COLOR:Ce._defaultColor=i;break;case ne.HIGHLIGHT_THICKNESS:Ce._defaultThickness=i;break}}translateInPage(e,i){}get toolbarPosition(){return c(this,Oc)}updateParams(e,i){switch(e){case ne.HIGHLIGHT_COLOR:P(this,de,vb).call(this,i);break;case ne.HIGHLIGHT_THICKNESS:P(this,de,yb).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[ne.HIGHLIGHT_DEFAULT_COLOR,Ce._defaultColor],[ne.HIGHLIGHT_THICKNESS,Ce._defaultThickness]]}get propertiesToUpdate(){return[[ne.HIGHLIGHT_COLOR,this.color||Ce._defaultColor],[ne.HIGHLIGHT_THICKNESS,c(this,fs)||Ce._defaultThickness],[ne.HIGHLIGHT_FREE,c(this,Fn)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(N(this,Dc,new Kp({editor:this})),e.addColorPicker(c(this,Dc))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(P(this,de,ju).call(this))}getBaseTranslation(){return[0,0]}getRect(e,i){return super.getRect(e,i,P(this,de,ju).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){P(this,de,P0).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(P(this,de,qo).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var n;let i=!1;this.parent&&!e?P(this,de,P0).call(this):e&&(P(this,de,qo).call(this,e),i=!this.parent&&((n=this.div)==null?void 0:n.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),i&&this.select()}rotate(e){var s,r,a;const{drawLayer:i}=this.parent;let n;c(this,Fn)?(e=(e-this.rotation+360)%360,n=P(s=Ce,ms,Rh).call(s,c(this,Xs).box,e)):n=P(r=Ce,ms,Rh).call(r,this,e),i.rotate(c(this,hn),e),i.rotate(c(this,ki),e),i.updateBox(c(this,hn),n),i.updateBox(c(this,ki),P(a=Ce,ms,Rh).call(a,c(this,ds).box,e))}render(){if(this.div)return this.div;const e=super.render();c(this,jc)&&(e.setAttribute("aria-label",c(this,jc)),e.setAttribute("role","mark")),c(this,Fn)?e.classList.add("free"):this.div.addEventListener("keydown",P(this,de,Ab).bind(this),{signal:this._uiManager._signal});const i=N(this,Fl,document.createElement("div"));e.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=c(this,Il);const[n,s]=this.parentDimensions;return this.setDims(this.width*n,this.height*s),Xp(this,c(this,Fl),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent.drawLayer.addClass(c(this,ki),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(c(this,ki),"hovered")}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:P(this,de,Mp).call(this,!0);break;case 1:case 3:P(this,de,Mp).call(this,!1);break}}select(){var e,i;super.select(),c(this,ki)&&((e=this.parent)==null||e.drawLayer.removeClass(c(this,ki),"hovered"),(i=this.parent)==null||i.drawLayer.addClass(c(this,ki),"selected"))}unselect(){var e;super.unselect(),c(this,ki)&&((e=this.parent)==null||e.drawLayer.removeClass(c(this,ki),"selected"),c(this,Fn)||P(this,de,Mp).call(this,!1))}get _mustFixPosition(){return!c(this,Fn)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(c(this,hn),e),this.parent.drawLayer.show(c(this,ki),e))}static startHighlighting(e,i,{target:n,x:s,y:r}){const{x:a,y:l,width:u,height:d}=n.getBoundingClientRect(),p=new AbortController,b=e.combinedSignal(p),g=w=>{w.preventDefault(),w.stopPropagation()},y=w=>{p.abort(),P(this,ms,Lb).call(this,e,w)};window.addEventListener("blur",y,{signal:b}),window.addEventListener("pointerup",y,{signal:b}),window.addEventListener("pointerdown",g,{capture:!0,passive:!1,signal:b}),window.addEventListener("contextmenu",vs,{signal:b}),n.addEventListener("pointermove",P(this,ms,Sb).bind(this,e),{signal:b}),this._freeHighlight=new S0({x:s,y:r},[a,l,u,d],e.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static async deserialize(e,i,n){var w,S,A,E;let s=null;if(e instanceof J5){const{data:{quadPoints:D,rect:q,rotation:G,id:K,color:X,opacity:H,popupRef:et},parent:{page:{pageNumber:ct}}}=e;s=e={annotationType:pe.HIGHLIGHT,color:Array.from(X),opacity:H,quadPoints:D,boxes:null,pageIndex:ct-1,rect:q.slice(0),rotation:G,id:K,deleted:!1,popupRef:et}}else if(e instanceof v2){const{data:{inkLists:D,rect:q,rotation:G,id:K,color:X,borderStyle:{rawWidth:H},popupRef:et},parent:{page:{pageNumber:ct}}}=e;s=e={annotationType:pe.HIGHLIGHT,color:Array.from(X),thickness:H,inkLists:D,boxes:null,pageIndex:ct-1,rect:q.slice(0),rotation:G,id:K,deleted:!1,popupRef:et}}const{color:r,quadPoints:a,inkLists:l,opacity:u}=e,d=await super.deserialize(e,i,n);d.color=Wt.makeHexColor(...r),N(d,ca,u||1),l&&N(d,fs,e.thickness),d.annotationElementId=e.id||null,d._initialData=s;const[p,b]=d.pageDimensions,[g,y]=d.pageTranslation;if(a){const D=N(d,ha,[]);for(let q=0;q<a.length;q+=8)D.push({x:(a[q]-g)/p,y:1-(a[q+1]-y)/b,width:(a[q+2]-a[q])/p,height:(a[q+1]-a[q+5])/b});P(w=d,de,C0).call(w),P(S=d,de,qo).call(S),d.rotate(d.rotation)}else if(l){N(d,Fn,!0);const D=l[0],q={x:D[0]-g,y:b-(D[1]-y)},G=new S0(q,[0,0,p,b],1,c(d,fs)/2,!0,.001);for(let H=0,et=D.length;H<et;H+=2)q.x=D[H]-g,q.y=b-(D[H+1]-y),G.add(q);const{id:K,clipPathId:X}=i.drawLayer.draw(G,d.color,d._defaultOpacity,!0);P(A=d,de,Fp).call(A,{highlightOutlines:G.getOutlines(),highlightId:K,clipPathId:X}),P(E=d,de,qo).call(E)}return d}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),n=De._colorManager.convert(this.color),s={annotationType:pe.HIGHLIGHT,color:n,opacity:c(this,ca),thickness:c(this,fs),quadPoints:P(this,de,_b).call(this),outlines:P(this,de,xb).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:P(this,de,ju).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!P(this,de,Nb).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Rc=new WeakMap,rf=new WeakMap,ha=new WeakMap,Il=new WeakMap,Dc=new WeakMap,ds=new WeakMap,af=new WeakMap,of=new WeakMap,Fl=new WeakMap,Xs=new WeakMap,hn=new WeakMap,Fn=new WeakMap,Oc=new WeakMap,ca=new WeakMap,ki=new WeakMap,jc=new WeakMap,fs=new WeakMap,lf=new WeakMap,de=new WeakSet,C0=function(){const e=new ym(c(this,ha),.001);N(this,Xs,e.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=c(this,Xs).box;const i=new ym(c(this,ha),.0025,.001,this._uiManager.direction==="ltr");N(this,ds,i.getOutlines());const{lastPoint:n}=c(this,ds).box;N(this,Oc,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height])},Fp=function({highlightOutlines:e,highlightId:i,clipPathId:n}){var p,b;if(N(this,Xs,e),N(this,ds,e.getNewOutline(c(this,fs)/2+1.5,.0025)),i>=0)N(this,hn,i),N(this,Il,n),this.parent.drawLayer.finalizeLine(i,e),N(this,ki,this.parent.drawLayer.drawOutline(c(this,ds)));else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(c(this,hn),e),this.parent.drawLayer.updateBox(c(this,hn),P(p=Ce,ms,Rh).call(p,c(this,Xs).box,(g-this.rotation+360)%360)),this.parent.drawLayer.updateLine(c(this,ki),c(this,ds)),this.parent.drawLayer.updateBox(c(this,ki),P(b=Ce,ms,Rh).call(b,c(this,ds).box,g))}const{x:r,y:a,width:l,height:u}=e.box;switch(this.rotation){case 0:this.x=r,this.y=a,this.width=l,this.height=u;break;case 90:{const[g,y]=this.parentDimensions;this.x=a,this.y=1-r,this.width=l*y/g,this.height=u*g/y;break}case 180:this.x=1-r,this.y=1-a,this.width=l,this.height=u;break;case 270:{const[g,y]=this.parentDimensions;this.x=1-a,this.y=r,this.width=l*y/g,this.height=u*g/y;break}}const{lastPoint:d}=c(this,ds).box;N(this,Oc,[(d[0]-r)/l,(d[1]-a)/u])},vb=function(e){const i=(r,a)=>{var l,u,d;this.color=r,(l=this.parent)==null||l.drawLayer.changeColor(c(this,hn),r),(u=c(this,Dc))==null||u.updateColor(r),N(this,ca,a),(d=this.parent)==null||d.drawLayer.changeOpacity(c(this,hn),a)},n=this.color,s=c(this,ca);this.addCommands({cmd:i.bind(this,e,Ce._defaultOpacity),undo:i.bind(this,n,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ne.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},yb=function(e){const i=c(this,fs),n=s=>{N(this,fs,s),P(this,de,wb).call(this,s)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ne.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},wb=function(e){if(!c(this,Fn))return;P(this,de,Fp).call(this,{highlightOutlines:c(this,Xs).getNewOutline(e/2)}),this.fixAndSetPosition();const[i,n]=this.parentDimensions;this.setDims(this.width*i,this.height*n)},P0=function(){c(this,hn)===null||!this.parent||(this.parent.drawLayer.remove(c(this,hn)),N(this,hn,null),this.parent.drawLayer.remove(c(this,ki)),N(this,ki,null))},qo=function(e=this.parent){c(this,hn)===null&&({id:mn(this,hn)._,clipPathId:mn(this,Il)._}=e.drawLayer.draw(c(this,Xs),this.color,c(this,ca)),N(this,ki,e.drawLayer.drawOutline(c(this,ds))),c(this,Fl)&&(c(this,Fl).style.clipPath=c(this,Il)))},ms=new WeakSet,Rh=function({x:e,y:i,width:n,height:s},r){switch(r){case 90:return{x:1-i-s,y:e,width:s,height:n};case 180:return{x:1-e-n,y:1-i-s,width:n,height:s};case 270:return{x:i,y:1-e-n,width:s,height:n}}return{x:e,y:i,width:n,height:s}},Ab=function(e){Ce._keyboardManager.exec(this,e)},Mp=function(e){if(!c(this,Rc))return;const i=window.getSelection();e?i.setPosition(c(this,Rc),c(this,rf)):i.setPosition(c(this,af),c(this,of))},ju=function(){return c(this,Fn)?this.rotation:0},_b=function(){if(c(this,Fn))return null;const[e,i]=this.pageDimensions,[n,s]=this.pageTranslation,r=c(this,ha),a=new Float32Array(r.length*8);let l=0;for(const{x:u,y:d,width:p,height:b}of r){const g=u*e+n,y=(1-d-b)*i+s;a[l]=a[l+4]=g,a[l+1]=a[l+3]=y,a[l+2]=a[l+6]=g+p*e,a[l+5]=a[l+7]=y+b*i,l+=8}return a},xb=function(e){return c(this,Xs).serialize(e,P(this,de,ju).call(this))},Sb=function(e,i){this._freeHighlight.add(i)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},Lb=function(e,i){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},Nb=function(e){const{color:i}=this._initialData;return e.color.some((n,s)=>n!==i[s])},M(Ce,ms),ie(Ce,"_defaultColor",null),ie(Ce,"_defaultOpacity",1),ie(Ce,"_defaultThickness",12),ie(Ce,"_type","highlight"),ie(Ce,"_editorType",pe.HIGHLIGHT),ie(Ce,"_freeHighlightId",-1),ie(Ce,"_freeHighlight",null),ie(Ce,"_freeHighlightClipId","");let Jp=Ce;var Ml,Rl,_r,ua,ps,Dl,Ol,jl,da,Bc,Bl,ql,co,Tt,Eb,Cb,Pb,kb,T0,Tb,I0,Ib,Fb,Mb,Rb,Db,Ho,F0,M0,R0,Rp,Dp,Dh,D0,Op,xa,Ob,O0,jb,Bb,j0,jp,Bu;const Ze=class Ze extends De{constructor(e){super({...e,name:"inkEditor"});M(this,Tt);M(this,Ml,0);M(this,Rl,0);M(this,_r,null);M(this,ua,new Path2D);M(this,ps,!1);M(this,Dl,null);M(this,Ol,!1);M(this,jl,!1);M(this,da,null);M(this,Bc,null);M(this,Bl,0);M(this,ql,0);M(this,co,null);this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,i){De.initialize(e,i)}static updateDefaultParams(e,i){switch(e){case ne.INK_THICKNESS:Ze._defaultThickness=i;break;case ne.INK_COLOR:Ze._defaultColor=i;break;case ne.INK_OPACITY:Ze._defaultOpacity=i/100;break}}updateParams(e,i){switch(e){case ne.INK_THICKNESS:P(this,Tt,Eb).call(this,i);break;case ne.INK_COLOR:P(this,Tt,Cb).call(this,i);break;case ne.INK_OPACITY:P(this,Tt,Pb).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[ne.INK_THICKNESS,Ze._defaultThickness],[ne.INK_COLOR,Ze._defaultColor||De._defaultLineColor],[ne.INK_OPACITY,Math.round(Ze._defaultOpacity*100)]]}get propertiesToUpdate(){return[[ne.INK_THICKNESS,this.thickness||Ze._defaultThickness],[ne.INK_COLOR,this.color||Ze._defaultColor||De._defaultLineColor],[ne.INK_OPACITY,Math.round(100*(this.opacity??Ze._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(P(this,Tt,Rp).call(this),P(this,Tt,Dp).call(this)),this.isAttachedToDOM||(this.parent.add(this),P(this,Tt,Dh).call(this)),P(this,Tt,Bu).call(this)))}remove(){var e;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,c(this,_r)&&(clearTimeout(c(this,_r)),N(this,_r,null)),(e=c(this,da))==null||e.disconnect(),N(this,da,null),super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&e===null&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,i]=this.parentDimensions,n=this.width*e,s=this.height*i;this.setDimensions(n,s)}enableEditMode(){c(this,ps)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,P(this,Tt,F0).call(this))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),P(this,Tt,M0).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){c(this,ps)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),N(this,ps,!0),this.div.classList.add("disabled"),P(this,Tt,Bu).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){e.button!==0||!this.isInEditMode()||c(this,ps)||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),P(this,Tt,Tb).call(this,e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),P(this,Tt,I0).call(this,e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),P(this,Tt,R0).call(this,e)}canvasPointerleave(e){P(this,Tt,R0).call(this,e)}get isResizable(){return!this.isEmpty()&&c(this,ps)}render(){if(this.div)return this.div;let e,i;this.width&&(e=this.x,i=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[n,s,r,a]=P(this,Tt,kb).call(this);if(this.setAt(n,s,0,0),this.setDims(r,a),P(this,Tt,Rp).call(this),this.width){const[l,u]=this.parentDimensions;this.setAspectRatio(this.width*l,this.height*u),this.setAt(e*l,i*u,this.width*l,this.height*u),N(this,jl,!0),P(this,Tt,Dh).call(this),this.setDims(this.width*l,this.height*u),P(this,Tt,Ho).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return P(this,Tt,Dp).call(this),this.div}setDimensions(e,i){const n=Math.round(e),s=Math.round(i);if(c(this,Bl)===n&&c(this,ql)===s)return;N(this,Bl,n),N(this,ql,s),this.canvas.style.visibility="hidden";const[r,a]=this.parentDimensions;this.width=e/r,this.height=i/a,this.fixAndSetPosition(),c(this,ps)&&P(this,Tt,D0).call(this,e,i),P(this,Tt,Dh).call(this),P(this,Tt,Ho).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(e,i,n){var S,A,E;if(e instanceof v2)return null;const s=await super.deserialize(e,i,n);s.thickness=e.thickness,s.color=Wt.makeHexColor(...e.color),s.opacity=e.opacity;const[r,a]=s.pageDimensions,l=s.width*r,u=s.height*a,d=s.parentScale,p=e.thickness/2;N(s,ps,!0),N(s,Bl,Math.round(l)),N(s,ql,Math.round(u));const{paths:b,rect:g,rotation:y}=e;for(let{bezier:D}of b){D=P(S=Ze,xa,jb).call(S,D,g,y);const q=[];s.paths.push(q);let G=d*(D[0]-p),K=d*(D[1]-p);for(let H=2,et=D.length;H<et;H+=6){const ct=d*(D[H]-p),I=d*(D[H+1]-p),O=d*(D[H+2]-p),$=d*(D[H+3]-p),W=d*(D[H+4]-p),ht=d*(D[H+5]-p);q.push([[G,K],[ct,I],[O,$],[W,ht]]),G=W,K=ht}const X=P(this,xa,Ob).call(this,q);s.bezierPath2D.push(X)}const w=P(A=s,Tt,j0).call(A);return N(s,Rl,Math.max(De.MIN_SIZE,w[2]-w[0])),N(s,Ml,Math.max(De.MIN_SIZE,w[3]-w[1])),P(E=s,Tt,D0).call(E,l,u),s}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),i=De._colorManager.convert(this.ctx.strokeStyle);return{annotationType:pe.INK,color:i,thickness:this.thickness,opacity:this.opacity,paths:P(this,Tt,Bb).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};Ml=new WeakMap,Rl=new WeakMap,_r=new WeakMap,ua=new WeakMap,ps=new WeakMap,Dl=new WeakMap,Ol=new WeakMap,jl=new WeakMap,da=new WeakMap,Bc=new WeakMap,Bl=new WeakMap,ql=new WeakMap,co=new WeakMap,Tt=new WeakSet,Eb=function(e){const i=s=>{this.thickness=s,P(this,Tt,Bu).call(this)},n=this.thickness;this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ne.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Cb=function(e){const i=s=>{this.color=s,P(this,Tt,Ho).call(this)},n=this.color;this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ne.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Pb=function(e){const i=s=>{this.opacity=s,P(this,Tt,Ho).call(this)};e/=100;const n=this.opacity;this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ne.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},kb=function(){const{parentRotation:e,parentDimensions:[i,n]}=this;switch(e){case 90:return[0,n,n,i];case 180:return[i,n,i,n];case 270:return[i,0,n,i];default:return[0,0,i,n]}},T0=function(){const{ctx:e,color:i,opacity:n,thickness:s,parentScale:r,scaleFactor:a}=this;e.lineWidth=s*r/a,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${i}${_y(n)}`},Tb=function(e,i){this.canvas.addEventListener("contextmenu",vs,{signal:this._uiManager._signal}),P(this,Tt,M0).call(this),N(this,Dl,new AbortController);const n=this._uiManager.combinedSignal(c(this,Dl));this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:n}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:n}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:n}),this.isEditing=!0,c(this,jl)||(N(this,jl,!0),P(this,Tt,Dh).call(this),this.thickness||(this.thickness=Ze._defaultThickness),this.color||(this.color=Ze._defaultColor||De._defaultLineColor),this.opacity??(this.opacity=Ze._defaultOpacity)),this.currentPath.push([e,i]),N(this,Ol,!1),P(this,Tt,T0).call(this),N(this,co,()=>{P(this,Tt,Mb).call(this),c(this,co)&&window.requestAnimationFrame(c(this,co))}),window.requestAnimationFrame(c(this,co))},I0=function(e,i){const[n,s]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===n&&i===s)return;const r=this.currentPath;let a=c(this,ua);if(r.push([e,i]),N(this,Ol,!0),r.length<=2){a.moveTo(...r[0]),a.lineTo(e,i);return}r.length===3&&(N(this,ua,a=new Path2D),a.moveTo(...r[0])),P(this,Tt,Rb).call(this,a,...r.at(-3),...r.at(-2),e,i)},Ib=function(){if(this.currentPath.length===0)return;const e=this.currentPath.at(-1);c(this,ua).lineTo(...e)},Fb=function(e,i){N(this,co,null),e=Math.min(Math.max(e,0),this.canvas.width),i=Math.min(Math.max(i,0),this.canvas.height),P(this,Tt,I0).call(this,e,i),P(this,Tt,Ib).call(this);let n;if(this.currentPath.length!==1)n=P(this,Tt,Db).call(this);else{const u=[e,i];n=[[u,u.slice(),u.slice(),u]]}const s=c(this,ua),r=this.currentPath;this.currentPath=[],N(this,ua,new Path2D);const a=()=>{this.allRawPaths.push(r),this.paths.push(n),this.bezierPath2D.push(s),this._uiManager.rebuild(this)},l=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(P(this,Tt,Rp).call(this),P(this,Tt,Dp).call(this)),P(this,Tt,Bu).call(this))};this.addCommands({cmd:a,undo:l,mustExec:!0})},Mb=function(){if(!c(this,Ol))return;N(this,Ol,!1);const e=Math.ceil(this.thickness*this.parentScale),i=this.currentPath.slice(-3),n=i.map(a=>a[0]),s=i.map(a=>a[1]);Math.min(...n)-e,Math.max(...n)+e,Math.min(...s)-e,Math.max(...s)+e;const{ctx:r}=this;r.save(),r.clearRect(0,0,this.canvas.width,this.canvas.height);for(const a of this.bezierPath2D)r.stroke(a);r.stroke(c(this,ua)),r.restore()},Rb=function(e,i,n,s,r,a,l){const u=(i+s)/2,d=(n+r)/2,p=(s+a)/2,b=(r+l)/2;e.bezierCurveTo(u+2*(s-u)/3,d+2*(r-d)/3,p+2*(s-p)/3,b+2*(r-b)/3,p,b)},Db=function(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const i=[];let n,[s,r]=e[0];for(n=1;n<e.length-2;n++){const[g,y]=e[n],[w,S]=e[n+1],A=(g+w)/2,E=(y+S)/2,D=[s+2*(g-s)/3,r+2*(y-r)/3],q=[A+2*(g-A)/3,E+2*(y-E)/3];i.push([[s,r],D,q,[A,E]]),[s,r]=[A,E]}const[a,l]=e[n],[u,d]=e[n+1],p=[s+2*(a-s)/3,r+2*(l-r)/3],b=[u+2*(a-u)/3,d+2*(l-d)/3];return i.push([[s,r],p,b,[u,d]]),i},Ho=function(){if(this.isEmpty()){P(this,Tt,Op).call(this);return}P(this,Tt,T0).call(this);const{canvas:e,ctx:i}=this;i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,e.width,e.height),P(this,Tt,Op).call(this);for(const n of this.bezierPath2D)i.stroke(n)},F0=function(){if(c(this,Bc))return;N(this,Bc,new AbortController);const e=this._uiManager.combinedSignal(c(this,Bc));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:e})},M0=function(){var e;(e=this.pointerdownAC)==null||e.abort(),this.pointerdownAC=null},R0=function(e){var i;(i=c(this,Dl))==null||i.abort(),N(this,Dl,null),P(this,Tt,F0).call(this),c(this,_r)&&clearTimeout(c(this,_r)),N(this,_r,setTimeout(()=>{N(this,_r,null),this.canvas.removeEventListener("contextmenu",vs)},10)),P(this,Tt,Fb).call(this,e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Rp=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Dp=function(){N(this,da,new ResizeObserver(e=>{const i=e[0].contentRect;i.width&&i.height&&this.setDimensions(i.width,i.height)})),c(this,da).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=c(this,da))==null||e.disconnect(),N(this,da,null)},{once:!0})},Dh=function(){if(!c(this,jl))return;const[e,i]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*i),P(this,Tt,Op).call(this)},D0=function(e,i){const n=P(this,Tt,jp).call(this),s=(e-n)/c(this,Rl),r=(i-n)/c(this,Ml);this.scaleFactor=Math.min(s,r)},Op=function(){const e=P(this,Tt,jp).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)},xa=new WeakSet,Ob=function(e){const i=new Path2D;for(let n=0,s=e.length;n<s;n++){const[r,a,l,u]=e[n];n===0&&i.moveTo(...r),i.bezierCurveTo(a[0],a[1],l[0],l[1],u[0],u[1])}return i},O0=function(e,i,n){const[s,r,a,l]=i;switch(n){case 0:for(let u=0,d=e.length;u<d;u+=2)e[u]+=s,e[u+1]=l-e[u+1];break;case 90:for(let u=0,d=e.length;u<d;u+=2){const p=e[u];e[u]=e[u+1]+s,e[u+1]=p+r}break;case 180:for(let u=0,d=e.length;u<d;u+=2)e[u]=a-e[u],e[u+1]+=r;break;case 270:for(let u=0,d=e.length;u<d;u+=2){const p=e[u];e[u]=a-e[u+1],e[u+1]=l-p}break;default:throw new Error("Invalid rotation")}return e},jb=function(e,i,n){const[s,r,a,l]=i;switch(n){case 0:for(let u=0,d=e.length;u<d;u+=2)e[u]-=s,e[u+1]=l-e[u+1];break;case 90:for(let u=0,d=e.length;u<d;u+=2){const p=e[u];e[u]=e[u+1]-r,e[u+1]=p-s}break;case 180:for(let u=0,d=e.length;u<d;u+=2)e[u]=a-e[u],e[u+1]-=r;break;case 270:for(let u=0,d=e.length;u<d;u+=2){const p=e[u];e[u]=l-e[u+1],e[u+1]=a-p}break;default:throw new Error("Invalid rotation")}return e},Bb=function(e,i,n,s){var d,p;const r=[],a=this.thickness/2,l=e*i+a,u=e*n+a;for(const b of this.paths){const g=[],y=[];for(let w=0,S=b.length;w<S;w++){const[A,E,D,q]=b[w];if(A[0]===q[0]&&A[1]===q[1]&&S===1){const $=e*A[0]+l,W=e*A[1]+u;g.push($,W),y.push($,W);break}const G=e*A[0]+l,K=e*A[1]+u,X=e*E[0]+l,H=e*E[1]+u,et=e*D[0]+l,ct=e*D[1]+u,I=e*q[0]+l,O=e*q[1]+u;w===0&&(g.push(G,K),y.push(G,K)),g.push(X,H,et,ct,I,O),y.push(X,H),w===S-1&&y.push(I,O)}r.push({bezier:P(d=Ze,xa,O0).call(d,g,s,this.rotation),points:P(p=Ze,xa,O0).call(p,y,s,this.rotation)})}return r},j0=function(){let e=1/0,i=-1/0,n=1/0,s=-1/0;for(const r of this.paths)for(const[a,l,u,d]of r){const p=Wt.bezierBoundingBox(...a,...l,...u,...d);e=Math.min(e,p[0]),n=Math.min(n,p[1]),i=Math.max(i,p[2]),s=Math.max(s,p[3])}return[e,n,i,s]},jp=function(){return c(this,ps)?Math.ceil(this.thickness*this.parentScale):0},Bu=function(e=!1){if(this.isEmpty())return;if(!c(this,ps)){P(this,Tt,Ho).call(this);return}const i=P(this,Tt,j0).call(this),n=P(this,Tt,jp).call(this);N(this,Rl,Math.max(De.MIN_SIZE,i[2]-i[0])),N(this,Ml,Math.max(De.MIN_SIZE,i[3]-i[1]));const s=Math.ceil(n+c(this,Rl)*this.scaleFactor),r=Math.ceil(n+c(this,Ml)*this.scaleFactor),[a,l]=this.parentDimensions;this.width=s/a,this.height=r/l,this.setAspectRatio(s,r);const u=this.translationX,d=this.translationY;this.translationX=-i[0],this.translationY=-i[1],P(this,Tt,Dh).call(this),P(this,Tt,Ho).call(this),N(this,Bl,s),N(this,ql,r),this.setDims(s,r);const p=e?n/this.scaleFactor/2:0;this.translate(u-this.translationX-p,d-this.translationY-p)},M(Ze,xa),ie(Ze,"_defaultColor",null),ie(Ze,"_defaultOpacity",1),ie(Ze,"_defaultThickness",1),ie(Ze,"_type","ink"),ie(Ze,"_editorType",pe.INK);let k0=Ze;var ei,Yi,uo,fa,fo,qc,xr,pa,Sr,Yn,Hc,Ae,qu,Hu,Bp,q0,qb,qp,H0,Hp,Hb,zb;const Vu=class Vu extends De{constructor(e){super({...e,name:"stampEditor"});M(this,Ae);M(this,ei,null);M(this,Yi,null);M(this,uo,null);M(this,fa,null);M(this,fo,null);M(this,qc,"");M(this,xr,null);M(this,pa,null);M(this,Sr,null);M(this,Yn,!1);M(this,Hc,!1);N(this,fa,e.bitmapUrl),N(this,fo,e.bitmapFile)}static initialize(e,i){De.initialize(e,i)}static get supportedTypes(){return _e(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>`image/${i}`))}static get supportedTypesStr(){return _e(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,i){i.pasteEditor(pe.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const i=e.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(e=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:r,height:a}=e||this.copyCanvas(null,null,!0).imageData,l=await n.guess({name:"altText",request:{data:s,width:r,height:a,channels:s.length/(r*a)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const u=l.output;return await this.setGuessedAltText(u),i&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var e,i;c(this,Yi)&&(N(this,ei,null),this._uiManager.imageManager.deleteId(c(this,Yi)),(e=c(this,xr))==null||e.remove(),N(this,xr,null),(i=c(this,pa))==null||i.disconnect(),N(this,pa,null),c(this,Sr)&&(clearTimeout(c(this,Sr)),N(this,Sr,null))),super.remove()}rebuild(){if(!this.parent){c(this,Yi)&&P(this,Ae,Bp).call(this);return}super.rebuild(),this.div!==null&&(c(this,Yi)&&c(this,xr)===null&&P(this,Ae,Bp).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(c(this,uo)||c(this,ei)||c(this,fa)||c(this,fo)||c(this,Yi))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,i;if(this.width&&(e=this.x,i=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),c(this,ei)?P(this,Ae,q0).call(this):P(this,Ae,Bp).call(this),this.width&&!this.annotationElementId){const[n,s]=this.parentDimensions;this.setAt(e*n,i*s,this.width*n,this.height*s)}return this.div}copyCanvas(e,i,n=!1){var g;e||(e=224);const{width:s,height:r}=c(this,ei),a=new D1;let l=c(this,ei),u=s,d=r,p=null;if(i){if(s>i||r>i){const H=Math.min(i/s,i/r);u=Math.floor(s*H),d=Math.floor(r*H)}p=document.createElement("canvas");const y=p.width=Math.ceil(u*a.sx),w=p.height=Math.ceil(d*a.sy);c(this,Yn)||(l=P(this,Ae,qp).call(this,y,w));const S=p.getContext("2d");S.filter=this._uiManager.hcmFilter;let A="white",E="#cfcfd8";this._uiManager.hcmFilter!=="none"?E="black":(g=window.matchMedia)!=null&&g.call(window,"(prefers-color-scheme: dark)").matches&&(A="#8f8f9d",E="#42414d");const D=15,q=D*a.sx,G=D*a.sy,K=new OffscreenCanvas(q*2,G*2),X=K.getContext("2d");X.fillStyle=A,X.fillRect(0,0,q*2,G*2),X.fillStyle=E,X.fillRect(0,0,q,G),X.fillRect(q,G,q,G),S.fillStyle=S.createPattern(K,"repeat"),S.fillRect(0,0,y,w),S.drawImage(l,0,0,l.width,l.height,0,0,y,w)}let b=null;if(n){let y,w;if(a.symmetric&&l.width<e&&l.height<e)y=l.width,w=l.height;else if(l=c(this,ei),s>e||r>e){const E=Math.min(e/s,e/r);y=Math.floor(s*E),w=Math.floor(r*E),c(this,Yn)||(l=P(this,Ae,qp).call(this,y,w))}const A=new OffscreenCanvas(y,w).getContext("2d",{willReadFrequently:!0});A.drawImage(l,0,0,l.width,l.height,0,0,y,w),b={width:y,height:w,data:A.getImageData(0,0,y,w).data}}return{canvas:p,width:u,height:d,imageData:b}}getImageForAltText(){return c(this,xr)}static async deserialize(e,i,n){var w;let s=null;if(e instanceof Q5){const{data:{rect:S,rotation:A,id:E,structParent:D,popupRef:q},container:G,parent:{page:{pageNumber:K}}}=e,X=G.querySelector("canvas"),H=n.imageManager.getFromCanvas(G.id,X);X.remove();const et=((w=await i._structTree.getAriaAttributes(`${o2}${E}`))==null?void 0:w.get("aria-label"))||"";s=e={annotationType:pe.STAMP,bitmapId:H.id,bitmap:H.bitmap,pageIndex:K-1,rect:S.slice(0),rotation:A,id:E,deleted:!1,accessibilityData:{decorative:!1,altText:et},isSvg:!1,structParent:D,popupRef:q}}const r=await super.deserialize(e,i,n),{rect:a,bitmap:l,bitmapUrl:u,bitmapId:d,isSvg:p,accessibilityData:b}=e;d&&n.imageManager.isValidId(d)?(N(r,Yi,d),l&&N(r,ei,l)):N(r,fa,u),N(r,Yn,p);const[g,y]=r.pageDimensions;return r.width=(a[2]-a[0])/g,r.height=(a[3]-a[1])/y,r.annotationElementId=e.id||null,b&&(r.altTextData=b),r._initialData=s,N(r,Hc,!!s),r}serialize(e=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n={annotationType:pe.STAMP,bitmapId:c(this,Yi),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:c(this,Yn),structTreeParentId:this._structTreeParentId};if(e)return n.bitmapUrl=P(this,Ae,Hp).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n;const{decorative:s,altText:r}=this.serializeAltText(!1);if(!s&&r&&(n.accessibilityData={type:"Figure",alt:r}),this.annotationElementId){const l=P(this,Ae,zb).call(this,n);if(l.isSame)return null;l.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1}if(n.id=this.annotationElementId,i===null)return n;i.stamps||(i.stamps=new Map);const a=c(this,Yn)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!i.stamps.has(c(this,Yi)))i.stamps.set(c(this,Yi),{area:a,serialized:n}),n.bitmap=P(this,Ae,Hp).call(this,!1);else if(c(this,Yn)){const l=i.stamps.get(c(this,Yi));a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=P(this,Ae,Hp).call(this,!1))}return n}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}};ei=new WeakMap,Yi=new WeakMap,uo=new WeakMap,fa=new WeakMap,fo=new WeakMap,qc=new WeakMap,xr=new WeakMap,pa=new WeakMap,Sr=new WeakMap,Yn=new WeakMap,Hc=new WeakMap,Ae=new WeakSet,qu=function(e,i=!1){if(!e){this.remove();return}N(this,ei,e.bitmap),i||(N(this,Yi,e.id),N(this,Yn,e.isSvg)),e.file&&N(this,qc,e.file.name),P(this,Ae,q0).call(this)},Hu=function(){if(N(this,uo,null),this._uiManager.enableWaiting(!1),!!c(this,xr)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,ei)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,ei)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Bp=function(){if(c(this,Yi)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,Yi)).then(n=>P(this,Ae,qu).call(this,n,!0)).finally(()=>P(this,Ae,Hu).call(this));return}if(c(this,fa)){const n=c(this,fa);N(this,fa,null),this._uiManager.enableWaiting(!0),N(this,uo,this._uiManager.imageManager.getFromUrl(n).then(s=>P(this,Ae,qu).call(this,s)).finally(()=>P(this,Ae,Hu).call(this)));return}if(c(this,fo)){const n=c(this,fo);N(this,fo,null),this._uiManager.enableWaiting(!0),N(this,uo,this._uiManager.imageManager.getFromFile(n).then(s=>P(this,Ae,qu).call(this,s)).finally(()=>P(this,Ae,Hu).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=Vu.supportedTypesStr;const i=this._uiManager._signal;N(this,uo,new Promise(n=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),P(this,Ae,qu).call(this,s)}n()},{signal:i}),e.addEventListener("cancel",()=>{this.remove(),n()},{signal:i})}).finally(()=>P(this,Ae,Hu).call(this))),e.click()},q0=function(){const{div:e}=this;let{width:i,height:n}=c(this,ei);const[s,r]=this.pageDimensions,a=.75;if(this.width)i=this.width*s,n=this.height*r;else if(i>a*s||n>a*r){const p=Math.min(a*s/i,a*r/n);i*=p,n*=p}const[l,u]=this.parentDimensions;this.setDims(i*l/s,n*u/r),this._uiManager.enableWaiting(!1);const d=N(this,xr,document.createElement("canvas"));d.setAttribute("role","img"),this.addContainer(d),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),P(this,Ae,H0).call(this,i,n),P(this,Ae,Hb).call(this),c(this,Hc)||(this.parent.addUndoableEditor(this),N(this,Hc,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,qc)&&d.setAttribute("aria-label",c(this,qc))},qb=function(e,i){var a;const[n,s]=this.parentDimensions;this.width=e/n,this.height=i/s,(a=this._initialOptions)!=null&&a.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,c(this,Sr)!==null&&clearTimeout(c(this,Sr)),N(this,Sr,setTimeout(()=>{N(this,Sr,null),P(this,Ae,H0).call(this,e,i)},200))},qp=function(e,i){const{width:n,height:s}=c(this,ei);let r=n,a=s,l=c(this,ei);for(;r>2*e||a>2*i;){const u=r,d=a;r>2*e&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),a>2*i&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const p=new OffscreenCanvas(r,a);p.getContext("2d").drawImage(l,0,0,u,d,0,0,r,a),l=p.transferToImageBitmap()}return l},H0=function(e,i){const n=new D1,s=Math.ceil(e*n.sx),r=Math.ceil(i*n.sy),a=c(this,xr);if(!a||a.width===s&&a.height===r)return;a.width=s,a.height=r;const l=c(this,Yn)?c(this,ei):P(this,Ae,qp).call(this,s,r),u=a.getContext("2d");u.filter=this._uiManager.hcmFilter,u.drawImage(l,0,0,l.width,l.height,0,0,s,r)},Hp=function(e){if(e){if(c(this,Yn)){const s=this._uiManager.imageManager.getSvgUrl(c(this,Yi));if(s)return s}const i=document.createElement("canvas");return{width:i.width,height:i.height}=c(this,ei),i.getContext("2d").drawImage(c(this,ei),0,0),i.toDataURL()}if(c(this,Yn)){const[i,n]=this.pageDimensions,s=Math.round(this.width*i*vo.PDF_TO_CSS_UNITS),r=Math.round(this.height*n*vo.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(s,r);return a.getContext("2d").drawImage(c(this,ei),0,0,c(this,ei).width,c(this,ei).height,0,0,s,r),a.transferToImageBitmap()}return structuredClone(c(this,ei))},Hb=function(){this._uiManager._signal&&(N(this,pa,new ResizeObserver(e=>{const i=e[0].contentRect;i.width&&i.height&&P(this,Ae,qb).call(this,i.width,i.height)})),c(this,pa).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=c(this,pa))==null||e.disconnect(),N(this,pa,null)},{once:!0}))},zb=function(e){var u;const{rect:i,pageIndex:n,accessibilityData:{altText:s}}=this._initialData,r=e.rect.every((d,p)=>Math.abs(d-i[p])<1),a=e.pageIndex===n,l=(((u=e.accessibilityData)==null?void 0:u.alt)||"")===s;return{isSame:r&&a&&l,isSameAltText:l}},ie(Vu,"_type","stamp"),ie(Vu,"_editorType",pe.STAMP);let B0=Vu;var Hl,zc,Lr,po,ga,Kn,go,Uc,Wc,cn,ma,Xt,mo,Ki,Ub,U0,W0,V0,zp;const Is=class Is{constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:n,accessibilityManager:s,annotationLayer:r,drawLayer:a,textLayer:l,viewport:u,l10n:d}){M(this,Ki);M(this,Hl);M(this,zc,!1);M(this,Lr,null);M(this,po,null);M(this,ga,null);M(this,Kn,new Map);M(this,go,!1);M(this,Uc,!1);M(this,Wc,!1);M(this,cn,null);M(this,ma,null);M(this,Xt);const p=[...c(Is,mo).values()];if(!Is._initialized){Is._initialized=!0;for(const b of p)b.initialize(d,t)}t.registerEditorTypes(p),N(this,Xt,t),this.pageIndex=e,this.div=i,N(this,Hl,s),N(this,Lr,r),this.viewport=u,N(this,cn,l),this.drawLayer=a,this._structTree=n,c(this,Xt).addLayer(this)}get isEmpty(){return c(this,Kn).size===0}get isInvisible(){return this.isEmpty&&c(this,Xt).getMode()===pe.NONE}updateToolbar(t){c(this,Xt).updateToolbar(t)}updateMode(t=c(this,Xt).getMode()){switch(P(this,Ki,zp).call(this),t){case pe.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case pe.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case pe.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const i of c(Is,mo).values())e.toggle(`${i._type}Editing`,t===i._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=c(this,cn))==null?void 0:e.div)}addInkEditorIfNeeded(t){if(c(this,Xt).getMode()!==pe.INK)return;if(!t){for(const i of c(this,Kn).values())if(i.isEmpty()){i.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(t){c(this,Xt).setEditingState(t)}addCommands(t){c(this,Xt).addCommands(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=c(this,Lr))==null||e.div.classList.toggle("disabled",!t)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const i of c(this,Kn).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(c(this,Xt).removeChangedExistingAnnotation(i),t.add(i.annotationElementId));if(!c(this,Lr))return;const e=c(this,Lr).getEditableAnnotations();for(const i of e){if(i.hide(),c(this,Xt).isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const n=await this.deserialize(i);n&&(this.addOrRebuild(n),n.enableEditing())}}disable(){var n;N(this,Wc,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const s of c(this,Kn).values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){t.set(s.annotationElementId,s);continue}else e.set(s.annotationElementId,s);(n=this.getEditableAnnotation(s.annotationElementId))==null||n.show(),s.remove()}if(c(this,Lr)){const s=c(this,Lr).getEditableAnnotations();for(const r of s){const{id:a}=r.data;if(c(this,Xt).isDeletedAnnotationElement(a))continue;let l=e.get(a);if(l){l.resetAnnotationElement(r),l.show(!1),r.show();continue}l=t.get(a),l&&(c(this,Xt).addChangedExistingAnnotation(l),l.renderAnnotationElement(r)&&l.show(!1)),r.show()}}P(this,Ki,zp).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const s of c(Is,mo).values())i.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),N(this,Wc,!1)}getEditableAnnotation(t){var e;return((e=c(this,Lr))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){c(this,Xt).getActive()!==t&&c(this,Xt).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=c(this,cn))!=null&&t.div&&!c(this,ma)){N(this,ma,new AbortController);const e=c(this,Xt).combinedSignal(c(this,ma));c(this,cn).div.addEventListener("pointerdown",P(this,Ki,Ub).bind(this),{signal:e}),c(this,cn).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=c(this,cn))!=null&&t.div&&c(this,ma)&&(c(this,ma).abort(),N(this,ma,null),c(this,cn).div.classList.remove("highlighting"))}enableClick(){if(c(this,po))return;N(this,po,new AbortController);const t=c(this,Xt).combinedSignal(c(this,po));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:t})}disableClick(){var t;(t=c(this,po))==null||t.abort(),N(this,po,null)}attach(t){c(this,Kn).set(t.id,t);const{annotationElementId:e}=t;e&&c(this,Xt).isDeletedAnnotationElement(e)&&c(this,Xt).removeDeletedAnnotationElement(t)}detach(t){var e;c(this,Kn).delete(t.id),(e=c(this,Hl))==null||e.removePointerInTextLayer(t.contentDiv),!c(this,Wc)&&t.annotationElementId&&c(this,Xt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),c(this,Xt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,c(this,Uc)||this.addInkEditorIfNeeded(!1)}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(c(this,Xt).addDeletedAnnotationElement(t.annotationElementId),De.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),c(this,Xt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),c(this,Xt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var i;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!c(this,ga)&&(t._focusEventsAllowed=!1,N(this,ga,setTimeout(()=>{N(this,ga,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:c(this,Xt)._signal}),e.focus())},0))),t._structTreeParentId=(i=c(this,Hl))==null?void 0:i.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getNextId(){return c(this,Xt).getId()}combinedSignal(t){return c(this,Xt).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=c(this,Ki,U0))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){c(this,Xt).updateToolbar(t),c(this,Xt).updateMode(t);const{offsetX:i,offsetY:n}=P(this,Ki,V0).call(this),s=this.getNextId(),r=P(this,Ki,W0).call(this,{parent:this,id:s,x:i,y:n,uiManager:c(this,Xt),isCentered:!0,...e});r&&this.add(r)}async deserialize(t){var e;return await((e=c(Is,mo).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,c(this,Xt)))||null}createAndAddNewEditor(t,e,i={}){const n=this.getNextId(),s=P(this,Ki,W0).call(this,{parent:this,id:n,x:t.offsetX,y:t.offsetY,uiManager:c(this,Xt),isCentered:e,...i});return s&&this.add(s),s}addNewEditor(){this.createAndAddNewEditor(P(this,Ki,V0).call(this),!0)}setSelected(t){c(this,Xt).setSelected(t)}toggleSelected(t){c(this,Xt).toggleSelected(t)}unselect(t){c(this,Xt).unselect(t)}pointerup(t){const{isMac:e}=wn.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&c(this,go)){if(N(this,go,!1),!c(this,zc)){N(this,zc,!0);return}if(c(this,Xt).getMode()===pe.STAMP){c(this,Xt).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(c(this,Xt).getMode()===pe.HIGHLIGHT&&this.enableTextSelection(),c(this,go)){N(this,go,!1);return}const{isMac:e}=wn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;N(this,go,!0);const i=c(this,Xt).getActive();N(this,zc,!i||i.isEmpty())}findNewParent(t,e,i){const n=c(this,Xt).findParent(e,i);return n===null||n===this?!1:(n.changeParent(t),!0)}destroy(){var t,e;((t=c(this,Xt).getActive())==null?void 0:t.parent)===this&&(c(this,Xt).commitOrRemove(),c(this,Xt).setActiveEditor(null)),c(this,ga)&&(clearTimeout(c(this,ga)),N(this,ga,null));for(const i of c(this,Kn).values())(e=c(this,Hl))==null||e.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,c(this,Kn).clear(),c(this,Xt).removeLayer(this)}render({viewport:t}){this.viewport=t,Ul(this.div,t);for(const e of c(this,Xt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){c(this,Xt).commitOrRemove(),P(this,Ki,zp).call(this);const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,Ul(this.div,{rotation:i}),e!==i)for(const n of c(this,Kn).values())n.rotate(i);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return c(this,Xt).viewParameters.realScale}};Hl=new WeakMap,zc=new WeakMap,Lr=new WeakMap,po=new WeakMap,ga=new WeakMap,Kn=new WeakMap,go=new WeakMap,Uc=new WeakMap,Wc=new WeakMap,cn=new WeakMap,ma=new WeakMap,Xt=new WeakMap,mo=new WeakMap,Ki=new WeakSet,Ub=function(t){c(this,Xt).unselectAll();const{target:e}=t;if(e===c(this,cn).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&c(this,cn).div.contains(e)){const{isMac:i}=wn.platform;if(t.button!==0||t.ctrlKey&&i)return;c(this,Xt).showAllEditors("highlight",!0,!0),c(this,cn).div.classList.add("free"),this.toggleDrawing(),Jp.startHighlighting(this,c(this,Xt).direction==="ltr",{target:c(this,cn).div,x:t.x,y:t.y}),c(this,cn).div.addEventListener("pointerup",()=>{c(this,cn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:c(this,Xt)._signal}),t.preventDefault()}},U0=function(){return c(Is,mo).get(c(this,Xt).getMode())},W0=function(t){const e=c(this,Ki,U0);return e?new e.prototype.constructor(t):null},V0=function(){const{x:t,y:e,width:i,height:n}=this.div.getBoundingClientRect(),s=Math.max(0,t),r=Math.max(0,e),a=Math.min(window.innerWidth,t+i),l=Math.min(window.innerHeight,e+n),u=(s+a)/2-t,d=(r+l)/2-e,[p,b]=this.viewport.rotation%180===0?[u,d]:[d,u];return{offsetX:p,offsetY:b}},zp=function(){N(this,Uc,!0);for(const t of c(this,Kn).values())t.isEmpty()&&t.remove();N(this,Uc,!1)},ie(Is,"_initialized",!1),M(Is,mo,new Map([A0,k0,B0,Jp].map(t=>[t._editorType,t])));let z0=Is;var Nr,hf,_i,ba,cf,X0,Xl,$0,Wb;const Vi=class Vi{constructor({pageIndex:t}){M(this,Xl);M(this,Nr,null);M(this,hf,0);M(this,_i,new Map);M(this,ba,new Map);this.pageIndex=t}setParent(t){if(!c(this,Nr)){N(this,Nr,t);return}if(c(this,Nr)!==t){if(c(this,_i).size>0)for(const e of c(this,_i).values())e.remove(),t.append(e);N(this,Nr,t)}}static get _svgFactory(){return _e(this,"_svgFactory",new b2)}draw(t,e,i,n=!1){const s=mn(this,hf)._++,r=P(this,Xl,$0).call(this,t.box);r.classList.add(...t.classNamesForDrawing);const a=Vi._svgFactory.createElement("defs");r.append(a);const l=Vi._svgFactory.createElement("path");a.append(l);const u=`path_p${this.pageIndex}_${s}`;l.setAttribute("id",u),l.setAttribute("d",t.toSVGPath()),n&&c(this,ba).set(s,l);const d=P(this,Xl,Wb).call(this,a,u),p=Vi._svgFactory.createElement("use");return r.append(p),r.setAttribute("fill",e),r.setAttribute("fill-opacity",i),p.setAttribute("href",`#${u}`),c(this,_i).set(s,r),{id:s,clipPathId:`url(#${d})`}}drawOutline(t){const e=mn(this,hf)._++,i=P(this,Xl,$0).call(this,t.box);i.classList.add(...t.classNamesForOutlining);const n=Vi._svgFactory.createElement("defs");i.append(n);const s=Vi._svgFactory.createElement("path");n.append(s);const r=`path_p${this.pageIndex}_${e}`;s.setAttribute("id",r),s.setAttribute("d",t.toSVGPath()),s.setAttribute("vector-effect","non-scaling-stroke");let a;if(t.mustRemoveSelfIntersections){const d=Vi._svgFactory.createElement("mask");n.append(d),a=`mask_p${this.pageIndex}_${e}`,d.setAttribute("id",a),d.setAttribute("maskUnits","objectBoundingBox");const p=Vi._svgFactory.createElement("rect");d.append(p),p.setAttribute("width","1"),p.setAttribute("height","1"),p.setAttribute("fill","white");const b=Vi._svgFactory.createElement("use");d.append(b),b.setAttribute("href",`#${r}`),b.setAttribute("stroke","none"),b.setAttribute("fill","black"),b.setAttribute("fill-rule","nonzero"),b.classList.add("mask")}const l=Vi._svgFactory.createElement("use");i.append(l),l.setAttribute("href",`#${r}`),a&&l.setAttribute("mask",`url(#${a})`);const u=l.cloneNode();return i.append(u),l.classList.add("mainOutline"),u.classList.add("secondaryOutline"),c(this,_i).set(e,i),e}finalizeLine(t,e){const i=c(this,ba).get(t);c(this,ba).delete(t),this.updateBox(t,e.box),i.setAttribute("d",e.toSVGPath())}updateLine(t,e){c(this,_i).get(t).firstChild.firstChild.setAttribute("d",e.toSVGPath())}updatePath(t,e){c(this,ba).get(t).setAttribute("d",e.toSVGPath())}updateBox(t,e){var i;P(i=Vi,cf,X0).call(i,c(this,_i).get(t),e)}show(t,e){c(this,_i).get(t).classList.toggle("hidden",!e)}rotate(t,e){c(this,_i).get(t).setAttribute("data-main-rotation",e)}changeColor(t,e){c(this,_i).get(t).setAttribute("fill",e)}changeOpacity(t,e){c(this,_i).get(t).setAttribute("fill-opacity",e)}addClass(t,e){c(this,_i).get(t).classList.add(e)}removeClass(t,e){c(this,_i).get(t).classList.remove(e)}getSVGRoot(t){return c(this,_i).get(t)}remove(t){c(this,ba).delete(t),c(this,Nr)!==null&&(c(this,_i).get(t).remove(),c(this,_i).delete(t))}destroy(){N(this,Nr,null);for(const t of c(this,_i).values())t.remove();c(this,_i).clear(),c(this,ba).clear()}};Nr=new WeakMap,hf=new WeakMap,_i=new WeakMap,ba=new WeakMap,cf=new WeakSet,X0=function(t,{x:e=0,y:i=0,width:n=1,height:s=1}={}){const{style:r}=t;r.top=`${100*i}%`,r.left=`${100*e}%`,r.width=`${100*n}%`,r.height=`${100*s}%`},Xl=new WeakSet,$0=function(t){var i;const e=Vi._svgFactory.create(1,1,!0);return c(this,Nr).append(e),e.setAttribute("aria-hidden",!0),P(i=Vi,cf,X0).call(i,e,t),e},Wb=function(t,e){const i=Vi._svgFactory.createElement("clipPath");t.append(i);const n=`clip_${e}`;i.setAttribute("id",n),i.setAttribute("clipPathUnits","objectBoundingBox");const s=Vi._svgFactory.createElement("use");return i.append(s),s.setAttribute("href",`#${e}`),s.classList.add("clip"),n},M(Vi,cf);let G0=Vi;le.AbortException;le.AnnotationEditorLayer;le.AnnotationEditorParamsType;le.AnnotationEditorType;le.AnnotationEditorUIManager;le.AnnotationLayer;le.AnnotationMode;le.ColorPicker;le.DOMSVGFactory;le.DrawLayer;le.FeatureTest;var eA=le.GlobalWorkerOptions;le.ImageKind;le.InvalidPDFException;le.MissingPDFException;le.OPS;le.OutputScale;le.PDFDataRangeTransport;le.PDFDateString;le.PDFWorker;le.PasswordResponses;le.PermissionFlag;le.PixelsPerInch;le.RenderingCancelledException;le.TextLayer;le.UnexpectedResponseException;le.Util;le.VerbosityLevel;le.XfaLayer;le.build;le.createValidAbsoluteUrl;le.fetchData;var iA=le.getDocument;le.getFilenameFromUrl;le.getPdfFilenameFromUrl;le.getXfaPageViewport;le.isDataScheme;le.isPdfFile;le.noContextMenu;le.normalizeUnicode;le.setLayerDimensions;le.shadow;le.version;var un=Uint8Array,Zn=Uint16Array,y2=Int32Array,Lg=new un([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ng=new un([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Y0=new un([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Vb=function(o,t){for(var e=new Zn(31),i=0;i<31;++i)e[i]=t+=1<<o[i-1];for(var n=new y2(e[30]),i=1;i<30;++i)for(var s=e[i];s<e[i+1];++s)n[s]=s-e[i]<<5|i;return{b:e,r:n}},Gb=Vb(Lg,2),Xb=Gb.b,K0=Gb.r;Xb[28]=258,K0[258]=28;var $b=Vb(Ng,0),nA=$b.b,wm=$b.r,J0=new Zn(32768);for(var Ye=0;Ye<32768;++Ye){var ja=(Ye&43690)>>1|(Ye&21845)<<1;ja=(ja&52428)>>2|(ja&13107)<<2,ja=(ja&61680)>>4|(ja&3855)<<4,J0[Ye]=((ja&65280)>>8|(ja&255)<<8)>>1}var Pr=function(o,t,e){for(var i=o.length,n=0,s=new Zn(t);n<i;++n)o[n]&&++s[o[n]-1];var r=new Zn(t);for(n=1;n<t;++n)r[n]=r[n-1]+s[n-1]<<1;var a;if(e){a=new Zn(1<<t);var l=15-t;for(n=0;n<i;++n)if(o[n])for(var u=n<<4|o[n],d=t-o[n],p=r[o[n]-1]++<<d,b=p|(1<<d)-1;p<=b;++p)a[J0[p]>>l]=u}else for(a=new Zn(i),n=0;n<i;++n)o[n]&&(a[n]=J0[r[o[n]-1]++]>>15-o[n]);return a},wo=new un(288);for(var Ye=0;Ye<144;++Ye)wo[Ye]=8;for(var Ye=144;Ye<256;++Ye)wo[Ye]=9;for(var Ye=256;Ye<280;++Ye)wo[Ye]=7;for(var Ye=280;Ye<288;++Ye)wo[Ye]=8;var $u=new un(32);for(var Ye=0;Ye<32;++Ye)$u[Ye]=5;var sA=Pr(wo,9,0),rA=Pr(wo,9,1),aA=Pr($u,5,0),oA=Pr($u,5,1),x1=function(o){for(var t=o[0],e=1;e<o.length;++e)o[e]>t&&(t=o[e]);return t},ks=function(o,t,e){var i=t/8|0;return(o[i]|o[i+1]<<8)>>(t&7)&e},S1=function(o,t){var e=t/8|0;return(o[e]|o[e+1]<<8|o[e+2]<<16)>>(t&7)},w2=function(o){return(o+7)/8|0},Yb=function(o,t,e){return(e==null||e>o.length)&&(e=o.length),new un(o.subarray(t,e))},lA=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ms=function(o,t,e){var i=new Error(t||lA[o]);if(i.code=o,Error.captureStackTrace&&Error.captureStackTrace(i,Ms),!e)throw i;return i},hA=function(o,t,e,i){var n=o.length,s=0;if(!n||t.f&&!t.l)return e||new un(0);var r=!e,a=r||t.i!=2,l=t.i;r&&(e=new un(n*3));var u=function(Nt){var Dt=e.length;if(Nt>Dt){var It=new un(Math.max(Dt*2,Nt));It.set(e),e=It}},d=t.f||0,p=t.p||0,b=t.b||0,g=t.l,y=t.d,w=t.m,S=t.n,A=n*8;do{if(!g){d=ks(o,p,1);var E=ks(o,p+1,3);if(p+=3,E)if(E==1)g=rA,y=oA,w=9,S=5;else if(E==2){var K=ks(o,p,31)+257,X=ks(o,p+10,15)+4,H=K+ks(o,p+5,31)+1;p+=14;for(var et=new un(H),ct=new un(19),I=0;I<X;++I)ct[Y0[I]]=ks(o,p+I*3,7);p+=X*3;for(var O=x1(ct),$=(1<<O)-1,W=Pr(ct,O,1),I=0;I<H;){var ht=W[ks(o,p,$)];p+=ht&15;var D=ht>>4;if(D<16)et[I++]=D;else{var lt=0,at=0;for(D==16?(at=3+ks(o,p,3),p+=2,lt=et[I-1]):D==17?(at=3+ks(o,p,7),p+=3):D==18&&(at=11+ks(o,p,127),p+=7);at--;)et[I++]=lt}}var it=et.subarray(0,K),mt=et.subarray(K);w=x1(it),S=x1(mt),g=Pr(it,w,1),y=Pr(mt,S,1)}else Ms(1);else{var D=w2(p)+4,q=o[D-4]|o[D-3]<<8,G=D+q;if(G>n){l&&Ms(0);break}a&&u(b+q),e.set(o.subarray(D,G),b),t.b=b+=q,t.p=p=G*8,t.f=d;continue}if(p>A){l&&Ms(0);break}}a&&u(b+131072);for(var ut=(1<<w)-1,wt=(1<<S)-1,C=p;;C=p){var lt=g[S1(o,p)&ut],j=lt>>4;if(p+=lt&15,p>A){l&&Ms(0);break}if(lt||Ms(2),j<256)e[b++]=j;else if(j==256){C=p,g=null;break}else{var U=j-254;if(j>264){var I=j-257,Y=Lg[I];U=ks(o,p,(1<<Y)-1)+Xb[I],p+=Y}var Q=y[S1(o,p)&wt],st=Q>>4;Q||Ms(3),p+=Q&15;var mt=nA[st];if(st>3){var Y=Ng[st];mt+=S1(o,p)&(1<<Y)-1,p+=Y}if(p>A){l&&Ms(0);break}a&&u(b+131072);var pt=b+U;if(b<mt){var gt=s-mt,Et=Math.min(mt,pt);for(gt+b<0&&Ms(3);b<Et;++b)e[b]=i[gt+b]}for(;b<pt;++b)e[b]=e[b-mt]}}t.l=g,t.p=C,t.b=b,t.f=d,g&&(d=1,t.m=w,t.d=y,t.n=S)}while(!d);return b!=e.length&&r?Yb(e,0,b):e.subarray(0,b)},Wr=function(o,t,e){e<<=t&7;var i=t/8|0;o[i]|=e,o[i+1]|=e>>8},Su=function(o,t,e){e<<=t&7;var i=t/8|0;o[i]|=e,o[i+1]|=e>>8,o[i+2]|=e>>16},L1=function(o,t){for(var e=[],i=0;i<o.length;++i)o[i]&&e.push({s:i,f:o[i]});var n=e.length,s=e.slice();if(!n)return{t:Jb,l:0};if(n==1){var r=new un(e[0].s+1);return r[e[0].s]=1,{t:r,l:1}}e.sort(function(G,K){return G.f-K.f}),e.push({s:-1,f:25001});var a=e[0],l=e[1],u=0,d=1,p=2;for(e[0]={s:-1,f:a.f+l.f,l:a,r:l};d!=n-1;)a=e[e[u].f<e[p].f?u++:p++],l=e[u!=d&&e[u].f<e[p].f?u++:p++],e[d++]={s:-1,f:a.f+l.f,l:a,r:l};for(var b=s[0].s,i=1;i<n;++i)s[i].s>b&&(b=s[i].s);var g=new Zn(b+1),y=Q0(e[d-1],g,0);if(y>t){var i=0,w=0,S=y-t,A=1<<S;for(s.sort(function(K,X){return g[X.s]-g[K.s]||K.f-X.f});i<n;++i){var E=s[i].s;if(g[E]>t)w+=A-(1<<y-g[E]),g[E]=t;else break}for(w>>=S;w>0;){var D=s[i].s;g[D]<t?w-=1<<t-g[D]++-1:++i}for(;i>=0&&w;--i){var q=s[i].s;g[q]==t&&(--g[q],++w)}y=t}return{t:new un(g),l:y}},Q0=function(o,t,e){return o.s==-1?Math.max(Q0(o.l,t,e+1),Q0(o.r,t,e+1)):t[o.s]=e},Am=function(o){for(var t=o.length;t&&!o[--t];);for(var e=new Zn(++t),i=0,n=o[0],s=1,r=function(l){e[i++]=l},a=1;a<=t;++a)if(o[a]==n&&a!=t)++s;else{if(!n&&s>2){for(;s>138;s-=138)r(32754);s>2&&(r(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(r(n),--s;s>6;s-=6)r(8304);s>2&&(r(s-3<<5|8208),s=0)}for(;s--;)r(n);s=1,n=o[a]}return{c:e.subarray(0,i),n:t}},Lu=function(o,t){for(var e=0,i=0;i<t.length;++i)e+=o[i]*t[i];return e},Kb=function(o,t,e){var i=e.length,n=w2(t+2);o[n]=i&255,o[n+1]=i>>8,o[n+2]=o[n]^255,o[n+3]=o[n+1]^255;for(var s=0;s<i;++s)o[n+s+4]=e[s];return(n+4+i)*8},_m=function(o,t,e,i,n,s,r,a,l,u,d){Wr(t,d++,e),++n[256];for(var p=L1(n,15),b=p.t,g=p.l,y=L1(s,15),w=y.t,S=y.l,A=Am(b),E=A.c,D=A.n,q=Am(w),G=q.c,K=q.n,X=new Zn(19),H=0;H<E.length;++H)++X[E[H]&31];for(var H=0;H<G.length;++H)++X[G[H]&31];for(var et=L1(X,7),ct=et.t,I=et.l,O=19;O>4&&!ct[Y0[O-1]];--O);var $=u+5<<3,W=Lu(n,wo)+Lu(s,$u)+r,ht=Lu(n,b)+Lu(s,w)+r+14+3*O+Lu(X,ct)+2*X[16]+3*X[17]+7*X[18];if(l>=0&&$<=W&&$<=ht)return Kb(t,d,o.subarray(l,l+u));var lt,at,it,mt;if(Wr(t,d,1+(ht<W)),d+=2,ht<W){lt=Pr(b,g,0),at=b,it=Pr(w,S,0),mt=w;var ut=Pr(ct,I,0);Wr(t,d,D-257),Wr(t,d+5,K-1),Wr(t,d+10,O-4),d+=14;for(var H=0;H<O;++H)Wr(t,d+3*H,ct[Y0[H]]);d+=3*O;for(var wt=[E,G],C=0;C<2;++C)for(var j=wt[C],H=0;H<j.length;++H){var U=j[H]&31;Wr(t,d,ut[U]),d+=ct[U],U>15&&(Wr(t,d,j[H]>>5&127),d+=j[H]>>12)}}else lt=sA,at=wo,it=aA,mt=$u;for(var H=0;H<a;++H){var Y=i[H];if(Y>255){var U=Y>>18&31;Su(t,d,lt[U+257]),d+=at[U+257],U>7&&(Wr(t,d,Y>>23&31),d+=Lg[U]);var Q=Y&31;Su(t,d,it[Q]),d+=mt[Q],Q>3&&(Su(t,d,Y>>5&8191),d+=Ng[Q])}else Su(t,d,lt[Y]),d+=at[Y]}return Su(t,d,lt[256]),d+at[256]},cA=new y2([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Jb=new un(0),uA=function(o,t,e,i,n,s){var r=s.z||o.length,a=new un(i+r+5*(1+Math.ceil(r/7e3))+n),l=a.subarray(i,a.length-n),u=s.l,d=(s.r||0)&7;if(t){d&&(l[0]=s.r>>3);for(var p=cA[t-1],b=p>>13,g=p&8191,y=(1<<e)-1,w=s.p||new Zn(32768),S=s.h||new Zn(y+1),A=Math.ceil(e/3),E=2*A,D=function(Jt){return(o[Jt]^o[Jt+1]<<A^o[Jt+2]<<E)&y},q=new y2(25e3),G=new Zn(288),K=new Zn(32),X=0,H=0,et=s.i||0,ct=0,I=s.w||0,O=0;et+2<r;++et){var $=D(et),W=et&32767,ht=S[$];if(w[W]=ht,S[$]=W,I<=et){var lt=r-et;if((X>7e3||ct>24576)&&(lt>423||!u)){d=_m(o,l,0,q,G,K,H,ct,O,et-O,d),ct=X=H=0,O=et;for(var at=0;at<286;++at)G[at]=0;for(var at=0;at<30;++at)K[at]=0}var it=2,mt=0,ut=g,wt=W-ht&32767;if(lt>2&&$==D(et-wt))for(var C=Math.min(b,lt)-1,j=Math.min(32767,et),U=Math.min(258,lt);wt<=j&&--ut&&W!=ht;){if(o[et+it]==o[et+it-wt]){for(var Y=0;Y<U&&o[et+Y]==o[et+Y-wt];++Y);if(Y>it){if(it=Y,mt=wt,Y>C)break;for(var Q=Math.min(wt,Y-2),st=0,at=0;at<Q;++at){var pt=et-wt+at&32767,gt=w[pt],Et=pt-gt&32767;Et>st&&(st=Et,ht=pt)}}}W=ht,ht=w[W],wt+=W-ht&32767}if(mt){q[ct++]=268435456|K0[it]<<18|wm[mt];var Nt=K0[it]&31,Dt=wm[mt]&31;H+=Lg[Nt]+Ng[Dt],++G[257+Nt],++K[Dt],I=et+it,++X}else q[ct++]=o[et],++G[o[et]]}}for(et=Math.max(et,I);et<r;++et)q[ct++]=o[et],++G[o[et]];d=_m(o,l,u,q,G,K,H,ct,O,et-O,d),u||(s.r=d&7|l[d/8|0]<<3,d-=7,s.h=S,s.p=w,s.i=et,s.w=I)}else{for(var et=s.w||0;et<r+u;et+=65535){var It=et+65535;It>=r&&(l[d/8|0]=u,It=r),d=Kb(l,d+1,o.subarray(et,It))}s.i=r}return Yb(a,0,i+w2(d)+n)},Qb=function(){var o=1,t=0;return{p:function(e){for(var i=o,n=t,s=e.length|0,r=0;r!=s;){for(var a=Math.min(r+2655,s);r<a;++r)n+=i+=e[r];i=(i&65535)+15*(i>>16),n=(n&65535)+15*(n>>16)}o=i,t=n},d:function(){return o%=65521,t%=65521,(o&255)<<24|(o&65280)<<8|(t&255)<<8|t>>8}}},dA=function(o,t,e,i,n){if(!n&&(n={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),r=new un(s.length+o.length);r.set(s),r.set(o,s.length),o=r,n.w=s.length}return uA(o,t.level==null?6:t.level,t.mem==null?n.l?Math.ceil(Math.max(8,Math.min(13,Math.log(o.length)))*1.5):20:12+t.mem,e,i,n)},Zb=function(o,t,e){for(;e;++t)o[t]=e,e>>>=8},fA=function(o,t){var e=t.level,i=e==0?0:e<6?1:e==9?3:2;if(o[0]=120,o[1]=i<<6|(t.dictionary&&32),o[1]|=31-(o[0]<<8|o[1])%31,t.dictionary){var n=Qb();n.p(t.dictionary),Zb(o,2,n.d())}},pA=function(o,t){return((o[0]&15)!=8||o[0]>>4>7||(o[0]<<8|o[1])%31)&&Ms(6,"invalid zlib data"),(o[1]>>5&1)==+!t&&Ms(6,"invalid zlib data: "+(o[1]&32?"need":"unexpected")+" dictionary"),(o[1]>>3&4)+2};function Z0(o,t){t||(t={});var e=Qb();e.p(o);var i=dA(o,t,t.dictionary?6:2,4);return fA(i,t),Zb(i,i.length-4,e.d()),i}function gA(o,t){return hA(o.subarray(pA(o,t),-4),{i:2},t,t)}var mA=typeof TextDecoder<"u"&&new TextDecoder,bA=0;try{mA.decode(Jb,{stream:!0}),bA=1}catch{}var Qt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function N1(){Qt.console&&typeof Qt.console.log=="function"&&Qt.console.log.apply(Qt.console,arguments)}var Ue={log:N1,warn:function(o){Qt.console&&(typeof Qt.console.warn=="function"?Qt.console.warn.apply(Qt.console,arguments):N1.call(null,arguments))},error:function(o){Qt.console&&(typeof Qt.console.error=="function"?Qt.console.error.apply(Qt.console,arguments):N1(o))}};function E1(o,t,e){var i=new XMLHttpRequest;i.open("GET",o),i.responseType="blob",i.onload=function(){zo(i.response,t,e)},i.onerror=function(){Ue.error("could not download file")},i.send()}function xm(o){var t=new XMLHttpRequest;t.open("HEAD",o,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function hp(o){try{o.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),o.dispatchEvent(t)}}var Wu,t2,zo=Qt.saveAs||((typeof window>"u"?"undefined":We(window))!=="object"||window!==Qt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(o,t,e){var i=Qt.URL||Qt.webkitURL,n=document.createElement("a");t=t||o.name||"download",n.download=t,n.rel="noopener",typeof o=="string"?(n.href=o,n.origin!==location.origin?xm(n.href)?E1(o,t,e):hp(n,n.target="_blank"):hp(n)):(n.href=i.createObjectURL(o),setTimeout(function(){i.revokeObjectURL(n.href)},4e4),setTimeout(function(){hp(n)},0))}:"msSaveOrOpenBlob"in navigator?function(o,t,e){if(t=t||o.name||"download",typeof o=="string")if(xm(o))E1(o,t,e);else{var i=document.createElement("a");i.href=o,i.target="_blank",setTimeout(function(){hp(i)})}else navigator.msSaveOrOpenBlob(function(n,s){return s===void 0?s={autoBom:!1}:We(s)!=="object"&&(Ue.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\uFEFF",n],{type:n.type}):n}(o,e),t)}:function(o,t,e,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof o=="string")return E1(o,t,e);var n=o.type==="application/octet-stream",s=/constructor/i.test(Qt.HTMLElement)||Qt.safari,r=/CriOS\/[\d]+/.test(navigator.userAgent);if((r||n&&s)&&(typeof FileReader>"u"?"undefined":We(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var d=a.result;d=r?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=d:location=d,i=null},a.readAsDataURL(o)}else{var l=Qt.URL||Qt.webkitURL,u=l.createObjectURL(o);i?i.location=u:location.href=u,i=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function tv(o){var t;o=o||"",this.ok=!1,o.charAt(0)=="#"&&(o=o.substr(1,6)),o={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[o=(o=o.replace(/ /g,"")).toLowerCase()]||o;for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],i=0;i<e.length;i++){var n=e[i].re,s=e[i].process,r=n.exec(o);r&&(t=s(r),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+a+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function C1(o,t){var e=o[0],i=o[1],n=o[2],s=o[3];e=tn(e,i,n,s,t[0],7,-680876936),s=tn(s,e,i,n,t[1],12,-389564586),n=tn(n,s,e,i,t[2],17,606105819),i=tn(i,n,s,e,t[3],22,-1044525330),e=tn(e,i,n,s,t[4],7,-176418897),s=tn(s,e,i,n,t[5],12,1200080426),n=tn(n,s,e,i,t[6],17,-1473231341),i=tn(i,n,s,e,t[7],22,-45705983),e=tn(e,i,n,s,t[8],7,1770035416),s=tn(s,e,i,n,t[9],12,-1958414417),n=tn(n,s,e,i,t[10],17,-42063),i=tn(i,n,s,e,t[11],22,-1990404162),e=tn(e,i,n,s,t[12],7,1804603682),s=tn(s,e,i,n,t[13],12,-40341101),n=tn(n,s,e,i,t[14],17,-1502002290),e=en(e,i=tn(i,n,s,e,t[15],22,1236535329),n,s,t[1],5,-165796510),s=en(s,e,i,n,t[6],9,-1069501632),n=en(n,s,e,i,t[11],14,643717713),i=en(i,n,s,e,t[0],20,-373897302),e=en(e,i,n,s,t[5],5,-701558691),s=en(s,e,i,n,t[10],9,38016083),n=en(n,s,e,i,t[15],14,-660478335),i=en(i,n,s,e,t[4],20,-405537848),e=en(e,i,n,s,t[9],5,568446438),s=en(s,e,i,n,t[14],9,-1019803690),n=en(n,s,e,i,t[3],14,-187363961),i=en(i,n,s,e,t[8],20,1163531501),e=en(e,i,n,s,t[13],5,-1444681467),s=en(s,e,i,n,t[2],9,-51403784),n=en(n,s,e,i,t[7],14,1735328473),e=nn(e,i=en(i,n,s,e,t[12],20,-1926607734),n,s,t[5],4,-378558),s=nn(s,e,i,n,t[8],11,-2022574463),n=nn(n,s,e,i,t[11],16,1839030562),i=nn(i,n,s,e,t[14],23,-35309556),e=nn(e,i,n,s,t[1],4,-1530992060),s=nn(s,e,i,n,t[4],11,1272893353),n=nn(n,s,e,i,t[7],16,-155497632),i=nn(i,n,s,e,t[10],23,-1094730640),e=nn(e,i,n,s,t[13],4,681279174),s=nn(s,e,i,n,t[0],11,-358537222),n=nn(n,s,e,i,t[3],16,-722521979),i=nn(i,n,s,e,t[6],23,76029189),e=nn(e,i,n,s,t[9],4,-640364487),s=nn(s,e,i,n,t[12],11,-421815835),n=nn(n,s,e,i,t[15],16,530742520),e=sn(e,i=nn(i,n,s,e,t[2],23,-995338651),n,s,t[0],6,-198630844),s=sn(s,e,i,n,t[7],10,1126891415),n=sn(n,s,e,i,t[14],15,-1416354905),i=sn(i,n,s,e,t[5],21,-57434055),e=sn(e,i,n,s,t[12],6,1700485571),s=sn(s,e,i,n,t[3],10,-1894986606),n=sn(n,s,e,i,t[10],15,-1051523),i=sn(i,n,s,e,t[1],21,-2054922799),e=sn(e,i,n,s,t[8],6,1873313359),s=sn(s,e,i,n,t[15],10,-30611744),n=sn(n,s,e,i,t[6],15,-1560198380),i=sn(i,n,s,e,t[13],21,1309151649),e=sn(e,i,n,s,t[4],6,-145523070),s=sn(s,e,i,n,t[11],10,-1120210379),n=sn(n,s,e,i,t[2],15,718787259),i=sn(i,n,s,e,t[9],21,-343485551),o[0]=bo(e,o[0]),o[1]=bo(i,o[1]),o[2]=bo(n,o[2]),o[3]=bo(s,o[3])}function Eg(o,t,e,i,n,s){return t=bo(bo(t,o),bo(i,s)),bo(t<<n|t>>>32-n,e)}function tn(o,t,e,i,n,s,r){return Eg(t&e|~t&i,o,t,n,s,r)}function en(o,t,e,i,n,s,r){return Eg(t&i|e&~i,o,t,n,s,r)}function nn(o,t,e,i,n,s,r){return Eg(t^e^i,o,t,n,s,r)}function sn(o,t,e,i,n,s,r){return Eg(e^(t|~i),o,t,n,s,r)}function ev(o){var t,e=o.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=o.length;t+=64)C1(i,vA(o.substring(t-64,t)));o=o.substring(t-64);var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<o.length;t++)n[t>>2]|=o.charCodeAt(t)<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(C1(i,n),t=0;t<16;t++)n[t]=0;return n[14]=8*e,C1(i,n),i}function vA(o){var t,e=[];for(t=0;t<64;t+=4)e[t>>2]=o.charCodeAt(t)+(o.charCodeAt(t+1)<<8)+(o.charCodeAt(t+2)<<16)+(o.charCodeAt(t+3)<<24);return e}Wu=Qt.atob.bind(Qt),t2=Qt.btoa.bind(Qt);var Sm="0123456789abcdef".split("");function yA(o){for(var t="",e=0;e<4;e++)t+=Sm[o>>8*e+4&15]+Sm[o>>8*e&15];return t}function wA(o){return String.fromCharCode((255&o)>>0,(65280&o)>>8,(16711680&o)>>16,(4278190080&o)>>24)}function e2(o){return ev(o).map(wA).join("")}var AA=function(o){for(var t=0;t<o.length;t++)o[t]=yA(o[t]);return o.join("")}(ev("hello"))!="5d41402abc4b2a76b9719d911017c592";function bo(o,t){if(AA){var e=(65535&o)+(65535&t);return(o>>16)+(t>>16)+(e>>16)<<16|65535&e}return o+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function i2(o,t){var e,i,n,s;if(o!==e){for(var r=(n=o,s=1+(256/o.length>>0),new Array(s+1).join(n)),a=[],l=0;l<256;l++)a[l]=l;var u=0;for(l=0;l<256;l++){var d=a[l];u=(u+d+r.charCodeAt(l))%256,a[l]=a[u],a[u]=d}e=o,i=a}else a=i;var p=t.length,b=0,g=0,y="";for(l=0;l<p;l++)g=(g+(d=a[b=(b+1)%256]))%256,a[b]=a[g],a[g]=d,r=a[(a[b]+a[g])%256],y+=String.fromCharCode(t.charCodeAt(l)^r);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Lm={print:4,modify:8,copy:16,"annot-forms":32};function Oh(o,t,e,i){this.v=1,this.r=2;var n=192;o.forEach(function(a){if(Lm.perm!==void 0)throw new Error("Invalid permission: "+a);n+=Lm[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(t+this.padding).substr(0,32),r=(e+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,r),this.P=-(1+(255^n)),this.encryptionKey=e2(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=i2(this.encryptionKey,this.padding)}function jh(o){if(/[^\u0000-\u00ff]/.test(o))throw new Error("Invalid PDF Name Object: "+o+", Only accept ASCII characters.");for(var t="",e=o.length,i=0;i<e;i++){var n=o.charCodeAt(i);n<33||n===35||n===37||n===40||n===41||n===47||n===60||n===62||n===91||n===93||n===123||n===125||n>126?t+="#"+("0"+n.toString(16)).slice(-2):t+=o[i]}return t}function Nm(o){if(We(o)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,i,n){if(n=n||!1,typeof e!="string"||typeof i!="function"||typeof n!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var s=Math.random().toString(35);return t[e][s]=[i,!!n],s},this.unsubscribe=function(e){for(var i in t)if(t[i][e])return delete t[i][e],Object.keys(t[i]).length===0&&delete t[i],!0;return!1},this.publish=function(e){if(t.hasOwnProperty(e)){var i=Array.prototype.slice.call(arguments,1),n=[];for(var s in t[e]){var r=t[e][s];try{r[0].apply(o,i)}catch(a){Qt.console&&Ue.error("jsPDF PubSub Error",a.message,a)}r[1]&&n.push(s)}n.length&&n.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Qp(o){if(!(this instanceof Qp))return new Qp(o);var t="opacity,stroke-opacity".split(",");for(var e in o)o.hasOwnProperty(e)&&t.indexOf(e)>=0&&(this[e]=o[e]);this.id="",this.objectNumber=-1}function iv(o,t){this.gState=o,this.matrix=t,this.id="",this.objectNumber=-1}function Uo(o,t,e,i,n){if(!(this instanceof Uo))return new Uo(o,t,e,i,n);this.type=o==="axial"?2:3,this.coords=t,this.colors=e,iv.call(this,i,n)}function Bh(o,t,e,i,n){if(!(this instanceof Bh))return new Bh(o,t,e,i,n);this.boundingBox=o,this.xStep=t,this.yStep=e,this.stream="",this.cloneIndex=0,iv.call(this,i,n)}function Kt(o){var t,e=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],n=arguments[2],s=arguments[3],r=[],a=1,l=16,u="S",d=null;We(o=o||{})==="object"&&(e=o.orientation,i=o.unit||i,n=o.format||n,s=o.compress||o.compressPdf||s,(d=o.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),a=typeof o.userUnit=="number"?Math.abs(o.userUnit):1,o.precision!==void 0&&(t=o.precision),o.floatPrecision!==void 0&&(l=o.floatPrecision),u=o.defaultPathOperation||"S"),r=o.filters||(s===!0?["FlateEncode"]:r),i=i||"mm",e=(""+(e||"P")).toLowerCase();var p=o.putOnlyUsedFonts||!1,b={},g={internal:{},__private__:{}};g.__private__.PubSub=Nm;var y="1.3",w=g.__private__.getPdfVersion=function(){return y};g.__private__.setPdfVersion=function(m){y=m};var S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return S};var A=g.__private__.getPageFormat=function(m){return S[m]};n=n||"a4";var E={COMPAT:"compat",ADVANCED:"advanced"},D=E.COMPAT;function q(){this.saveGraphicsState(),V(new Yt(jt,0,0,-jt,0,Na()*jt).toString()+" cm"),this.setFontSize(this.getFontSize()/jt),u="n",D=E.ADVANCED}function G(){this.restoreGraphicsState(),u="S",D=E.COMPAT}var K=g.__private__.combineFontStyleAndFontWeight=function(m,L){if(m=="bold"&&L=="normal"||m=="bold"&&L==400||m=="normal"&&L=="italic"||m=="bold"&&L=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return L&&(m=L==400||L==="normal"?m==="italic"?"italic":"normal":L!=700&&L!=="bold"||m!=="normal"?(L==700?"bold":L)+""+m:"bold"),m};g.advancedAPI=function(m){var L=D===E.COMPAT;return L&&q.call(this),typeof m!="function"||(m(this),L&&G.call(this)),this},g.compatAPI=function(m){var L=D===E.ADVANCED;return L&&G.call(this),typeof m!="function"||(m(this),L&&q.call(this)),this},g.isAdvancedAPI=function(){return D===E.ADVANCED};var X,H=function(m){if(D!==E.ADVANCED)throw new Error(m+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},et=g.roundToPrecision=g.__private__.roundToPrecision=function(m,L){var z=t||L;if(isNaN(m)||isNaN(z))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return m.toFixed(z).replace(/0+$/,"")};X=g.hpf=g.__private__.hpf=typeof l=="number"?function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return et(m,l)}:l==="smart"?function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return et(m,m>-1&&m<1?16:5)}:function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return et(m,16)};var ct=g.f2=g.__private__.f2=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.f2");return et(m,2)},I=g.__private__.f3=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.f3");return et(m,3)},O=g.scale=g.__private__.scale=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.scale");return D===E.COMPAT?m*jt:D===E.ADVANCED?m:void 0},$=function(m){return D===E.COMPAT?Na()-m:D===E.ADVANCED?m:void 0},W=function(m){return O($(m))};g.__private__.setPrecision=g.setPrecision=function(m){typeof parseInt(m,10)=="number"&&(t=parseInt(m,10))};var ht,lt="00000000000000000000000000000000",at=g.__private__.getFileId=function(){return lt},it=g.__private__.setFileId=function(m){return lt=m!==void 0&&/^[a-fA-F0-9]{32}$/.test(m)?m.toUpperCase():lt.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(Qi=new Oh(d.userPermissions,d.userPassword,d.ownerPassword,lt)),lt};g.setFileId=function(m){return it(m),this},g.getFileId=function(){return at()};var mt=g.__private__.convertDateToPDFDate=function(m){var L=m.getTimezoneOffset(),z=L<0?"+":"-",J=Math.floor(Math.abs(L/60)),ot=Math.abs(L%60),vt=[z,U(J),"'",U(ot),"'"].join("");return["D:",m.getFullYear(),U(m.getMonth()+1),U(m.getDate()),U(m.getHours()),U(m.getMinutes()),U(m.getSeconds()),vt].join("")},ut=g.__private__.convertPDFDateToDate=function(m){var L=parseInt(m.substr(2,4),10),z=parseInt(m.substr(6,2),10)-1,J=parseInt(m.substr(8,2),10),ot=parseInt(m.substr(10,2),10),vt=parseInt(m.substr(12,2),10),Lt=parseInt(m.substr(14,2),10);return new Date(L,z,J,ot,vt,Lt,0)},wt=g.__private__.setCreationDate=function(m){var L;if(m===void 0&&(m=new Date),m instanceof Date)L=mt(m);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(m))throw new Error("Invalid argument passed to jsPDF.setCreationDate");L=m}return ht=L},C=g.__private__.getCreationDate=function(m){var L=ht;return m==="jsDate"&&(L=ut(ht)),L};g.setCreationDate=function(m){return wt(m),this},g.getCreationDate=function(m){return C(m)};var j,U=g.__private__.padd2=function(m){return("0"+parseInt(m)).slice(-2)},Y=g.__private__.padd2Hex=function(m){return("00"+(m=m.toString())).substr(m.length)},Q=0,st=[],pt=[],gt=0,Et=[],Nt=[],Dt=!1,It=pt,Jt=function(){Q=0,gt=0,pt=[],st=[],Et=[],Ir=bi(),_s=bi()};g.__private__.setCustomOutputDestination=function(m){Dt=!0,It=m};var yt=function(m){Dt||(It=m)};g.__private__.resetCustomOutputDestination=function(){Dt=!1,It=pt};var V=g.__private__.out=function(m){return m=m.toString(),gt+=m.length+1,It.push(m),It},he=g.__private__.write=function(m){return V(arguments.length===1?m.toString():Array.prototype.join.call(arguments," "))},Ut=g.__private__.getArrayBuffer=function(m){for(var L=m.length,z=new ArrayBuffer(L),J=new Uint8Array(z);L--;)J[L]=m.charCodeAt(L);return z},Ct=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return Ct};var Pt=o.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(m){return Pt=D===E.ADVANCED?m/jt:m,this};var Ot,Rt=g.__private__.getFontSize=g.getFontSize=function(){return D===E.COMPAT?Pt:Pt*jt},Vt=o.R2L||!1;g.__private__.setR2L=g.setR2L=function(m){return Vt=m,this},g.__private__.getR2L=g.getR2L=function(){return Vt};var se,fe=g.__private__.setZoomMode=function(m){var L=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(m))Ot=m;else if(isNaN(m)){if(L.indexOf(m)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+m+'" is not recognized.');Ot=m}else Ot=parseInt(m,10)};g.__private__.getZoomMode=function(){return Ot};var be,Se=g.__private__.setPageMode=function(m){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(m)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+m+'" is not recognized.');se=m};g.__private__.getPageMode=function(){return se};var Oe=g.__private__.setLayoutMode=function(m){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(m)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+m+'" is not recognized.');be=m};g.__private__.getLayoutMode=function(){return be},g.__private__.setDisplayMode=g.setDisplayMode=function(m,L,z){return fe(m),Oe(L),Se(z),this};var Zt={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(m){if(Object.keys(Zt).indexOf(m)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Zt[m]},g.__private__.getDocumentProperties=function(){return Zt},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(m){for(var L in Zt)Zt.hasOwnProperty(L)&&m[L]&&(Zt[L]=m[L]);return this},g.__private__.setDocumentProperty=function(m,L){if(Object.keys(Zt).indexOf(m)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Zt[m]=L};var ye,jt,Ji,Ne,ys,He={},Ke={},Js=[],Pe={},Lo={},ni={},ws={},Tr=null,si=0,re=[],ke=new Nm(g),No=o.hotfixes||[],zi={},Qs={},Zs=[],Yt=function m(L,z,J,ot,vt,Lt){if(!(this instanceof m))return new m(L,z,J,ot,vt,Lt);isNaN(L)&&(L=1),isNaN(z)&&(z=0),isNaN(J)&&(J=0),isNaN(ot)&&(ot=1),isNaN(vt)&&(vt=0),isNaN(Lt)&&(Lt=0),this._matrix=[L,z,J,ot,vt,Lt]};Object.defineProperty(Yt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(m){this._matrix[0]=m}}),Object.defineProperty(Yt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(m){this._matrix[1]=m}}),Object.defineProperty(Yt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(m){this._matrix[2]=m}}),Object.defineProperty(Yt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(m){this._matrix[3]=m}}),Object.defineProperty(Yt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(m){this._matrix[4]=m}}),Object.defineProperty(Yt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(m){this._matrix[5]=m}}),Object.defineProperty(Yt.prototype,"a",{get:function(){return this._matrix[0]},set:function(m){this._matrix[0]=m}}),Object.defineProperty(Yt.prototype,"b",{get:function(){return this._matrix[1]},set:function(m){this._matrix[1]=m}}),Object.defineProperty(Yt.prototype,"c",{get:function(){return this._matrix[2]},set:function(m){this._matrix[2]=m}}),Object.defineProperty(Yt.prototype,"d",{get:function(){return this._matrix[3]},set:function(m){this._matrix[3]=m}}),Object.defineProperty(Yt.prototype,"e",{get:function(){return this._matrix[4]},set:function(m){this._matrix[4]=m}}),Object.defineProperty(Yt.prototype,"f",{get:function(){return this._matrix[5]},set:function(m){this._matrix[5]=m}}),Object.defineProperty(Yt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Yt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Yt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Yt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Yt.prototype.join=function(m){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(X).join(m)},Yt.prototype.multiply=function(m){var L=m.sx*this.sx+m.shy*this.shx,z=m.sx*this.shy+m.shy*this.sy,J=m.shx*this.sx+m.sy*this.shx,ot=m.shx*this.shy+m.sy*this.sy,vt=m.tx*this.sx+m.ty*this.shx+this.tx,Lt=m.tx*this.shy+m.ty*this.sy+this.ty;return new Yt(L,z,J,ot,vt,Lt)},Yt.prototype.decompose=function(){var m=this.sx,L=this.shy,z=this.shx,J=this.sy,ot=this.tx,vt=this.ty,Lt=Math.sqrt(m*m+L*L),Bt=(m/=Lt)*z+(L/=Lt)*J;z-=m*Bt,J-=L*Bt;var Gt=Math.sqrt(z*z+J*J);return Bt/=Gt,m*(J/=Gt)<L*(z/=Gt)&&(m=-m,L=-L,Bt=-Bt,Lt=-Lt),{scale:new Yt(Lt,0,0,Gt,0,0),translate:new Yt(1,0,0,1,ot,vt),rotate:new Yt(m,L,-L,m,0,0),skew:new Yt(1,0,Bt,1,0,0)}},Yt.prototype.toString=function(m){return this.join(" ")},Yt.prototype.inversed=function(){var m=this.sx,L=this.shy,z=this.shx,J=this.sy,ot=this.tx,vt=this.ty,Lt=1/(m*J-L*z),Bt=J*Lt,Gt=-L*Lt,ce=-z*Lt,ae=m*Lt;return new Yt(Bt,Gt,ce,ae,-Bt*ot-ce*vt,-Gt*ot-ae*vt)},Yt.prototype.applyToPoint=function(m){var L=m.x*this.sx+m.y*this.shx+this.tx,z=m.x*this.shy+m.y*this.sy+this.ty;return new uh(L,z)},Yt.prototype.applyToRectangle=function(m){var L=this.applyToPoint(m),z=this.applyToPoint(new uh(m.x+m.w,m.y+m.h));return new eu(L.x,L.y,z.x-L.x,z.y-L.y)},Yt.prototype.clone=function(){var m=this.sx,L=this.shy,z=this.shx,J=this.sy,ot=this.tx,vt=this.ty;return new Yt(m,L,z,J,ot,vt)},g.Matrix=Yt;var As=g.matrixMult=function(m,L){return L.multiply(m)},tr=new Yt(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=tr;var xn=function(m,L){if(!Lo[m]){var z=(L instanceof Uo?"Sh":"P")+(Object.keys(Pe).length+1).toString(10);L.id=z,Lo[m]=z,Pe[z]=L,ke.publish("addPattern",L)}};g.ShadingPattern=Uo,g.TilingPattern=Bh,g.addShadingPattern=function(m,L){return H("addShadingPattern()"),xn(m,L),this},g.beginTilingPattern=function(m){H("beginTilingPattern()"),If(m.boundingBox[0],m.boundingBox[1],m.boundingBox[2]-m.boundingBox[0],m.boundingBox[3]-m.boundingBox[1],m.matrix)},g.endTilingPattern=function(m,L){H("endTilingPattern()"),L.stream=Nt[j].join(`
`),xn(m,L),ke.publish("endTilingPattern",L),Zs.pop().restore()};var Si=g.__private__.newObject=function(){var m=bi();return On(m,!0),m},bi=g.__private__.newObjectDeferred=function(){return Q++,st[Q]=function(){return gt},Q},On=function(m,L){return L=typeof L=="boolean"&&L,st[m]=gt,L&&V(m+" 0 obj"),m},Ql=g.__private__.newAdditionalObject=function(){var m={objId:bi(),content:""};return Et.push(m),m},Ir=bi(),_s=bi(),xs=g.__private__.decodeColorString=function(m){var L=m.split(" ");if(L.length!==2||L[1]!=="g"&&L[1]!=="G")L.length===5&&(L[4]==="k"||L[4]==="K")&&(L=[(1-L[0])*(1-L[3]),(1-L[1])*(1-L[3]),(1-L[2])*(1-L[3]),"r"]);else{var z=parseFloat(L[0]);L=[z,z,z,"r"]}for(var J="#",ot=0;ot<3;ot++)J+=("0"+Math.floor(255*parseFloat(L[ot])).toString(16)).slice(-2);return J},Ss=g.__private__.encodeColorString=function(m){var L;typeof m=="string"&&(m={ch1:m});var z=m.ch1,J=m.ch2,ot=m.ch3,vt=m.ch4,Lt=m.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof z=="string"&&z.charAt(0)!=="#"){var Bt=new tv(z);if(Bt.ok)z=Bt.toHex();else if(!/^\d*\.?\d*$/.test(z))throw new Error('Invalid color "'+z+'" passed to jsPDF.encodeColorString.')}if(typeof z=="string"&&/^#[0-9A-Fa-f]{3}$/.test(z)&&(z="#"+z[1]+z[1]+z[2]+z[2]+z[3]+z[3]),typeof z=="string"&&/^#[0-9A-Fa-f]{6}$/.test(z)){var Gt=parseInt(z.substr(1),16);z=Gt>>16&255,J=Gt>>8&255,ot=255&Gt}if(J===void 0||vt===void 0&&z===J&&J===ot)if(typeof z=="string")L=z+" "+Lt[0];else switch(m.precision){case 2:L=ct(z/255)+" "+Lt[0];break;case 3:default:L=I(z/255)+" "+Lt[0]}else if(vt===void 0||We(vt)==="object"){if(vt&&!isNaN(vt.a)&&vt.a===0)return L=["1.","1.","1.",Lt[1]].join(" ");if(typeof z=="string")L=[z,J,ot,Lt[1]].join(" ");else switch(m.precision){case 2:L=[ct(z/255),ct(J/255),ct(ot/255),Lt[1]].join(" ");break;default:case 3:L=[I(z/255),I(J/255),I(ot/255),Lt[1]].join(" ")}}else if(typeof z=="string")L=[z,J,ot,vt,Lt[2]].join(" ");else switch(m.precision){case 2:L=[ct(z),ct(J),ct(ot),ct(vt),Lt[2]].join(" ");break;case 3:default:L=[I(z),I(J),I(ot),I(vt),Lt[2]].join(" ")}return L},er=g.__private__.getFilters=function(){return r},es=g.__private__.putStream=function(m){var L=(m=m||{}).data||"",z=m.filters||er(),J=m.alreadyAppliedFilters||[],ot=m.addLength1||!1,vt=L.length,Lt=m.objectId,Bt=function(Zi){return Zi};if(d!==null&&Lt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Bt=Qi.encryptor(Lt,0));var Gt={};z===!0&&(z=["FlateEncode"]);var ce=m.additionalKeyValues||[],ae=(Gt=Kt.API.processDataByFilters!==void 0?Kt.API.processDataByFilters(L,z):{data:L,reverseChain:[]}).reverseChain+(Array.isArray(J)?J.join(" "):J.toString());if(Gt.data.length!==0&&(ce.push({key:"Length",value:Gt.data.length}),ot===!0&&ce.push({key:"Length1",value:vt})),ae.length!=0)if(ae.split("/").length-1==1)ce.push({key:"Filter",value:ae});else{ce.push({key:"Filter",value:"["+ae+"]"});for(var xe=0;xe<ce.length;xe+=1)if(ce[xe].key==="DecodeParms"){for(var Qe=[],ri=0;ri<Gt.reverseChain.split("/").length-1;ri+=1)Qe.push("null");Qe.push(ce[xe].value),ce[xe].value="["+Qe.join(" ")+"]"}}V("<<");for(var vi=0;vi<ce.length;vi++)V("/"+ce[vi].key+" "+ce[vi].value);V(">>"),Gt.data.length!==0&&(V("stream"),V(Bt(Gt.data)),V("endstream"))},ir=g.__private__.putPage=function(m){var L=m.number,z=m.data,J=m.objId,ot=m.contentsObjId;On(J,!0),V("<</Type /Page"),V("/Parent "+m.rootDictionaryObjId+" 0 R"),V("/Resources "+m.resourceDictionaryObjId+" 0 R"),V("/MediaBox ["+parseFloat(X(m.mediaBox.bottomLeftX))+" "+parseFloat(X(m.mediaBox.bottomLeftY))+" "+X(m.mediaBox.topRightX)+" "+X(m.mediaBox.topRightY)+"]"),m.cropBox!==null&&V("/CropBox ["+X(m.cropBox.bottomLeftX)+" "+X(m.cropBox.bottomLeftY)+" "+X(m.cropBox.topRightX)+" "+X(m.cropBox.topRightY)+"]"),m.bleedBox!==null&&V("/BleedBox ["+X(m.bleedBox.bottomLeftX)+" "+X(m.bleedBox.bottomLeftY)+" "+X(m.bleedBox.topRightX)+" "+X(m.bleedBox.topRightY)+"]"),m.trimBox!==null&&V("/TrimBox ["+X(m.trimBox.bottomLeftX)+" "+X(m.trimBox.bottomLeftY)+" "+X(m.trimBox.topRightX)+" "+X(m.trimBox.topRightY)+"]"),m.artBox!==null&&V("/ArtBox ["+X(m.artBox.bottomLeftX)+" "+X(m.artBox.bottomLeftY)+" "+X(m.artBox.topRightX)+" "+X(m.artBox.topRightY)+"]"),typeof m.userUnit=="number"&&m.userUnit!==1&&V("/UserUnit "+m.userUnit),ke.publish("putPage",{objId:J,pageContext:re[L],pageNumber:L,page:z}),V("/Contents "+ot+" 0 R"),V(">>"),V("endobj");var vt=z.join(`
`);return D===E.ADVANCED&&(vt+=`
Q`),On(ot,!0),es({data:vt,filters:er(),objectId:ot}),V("endobj"),J},Eo=g.__private__.putPages=function(){var m,L,z=[];for(m=1;m<=si;m++)re[m].objId=bi(),re[m].contentsObjId=bi();for(m=1;m<=si;m++)z.push(ir({number:m,data:Nt[m],objId:re[m].objId,contentsObjId:re[m].contentsObjId,mediaBox:re[m].mediaBox,cropBox:re[m].cropBox,bleedBox:re[m].bleedBox,trimBox:re[m].trimBox,artBox:re[m].artBox,userUnit:re[m].userUnit,rootDictionaryObjId:Ir,resourceDictionaryObjId:_s}));On(Ir,!0),V("<</Type /Pages");var J="/Kids [";for(L=0;L<si;L++)J+=z[L]+" 0 R ";V(J+"]"),V("/Count "+si),V(">>"),V("endobj"),ke.publish("postPutPages")},Zl=function(m){ke.publish("putFont",{font:m,out:V,newObject:Si,putStream:es}),m.isAlreadyPutted!==!0&&(m.objectNumber=Si(),V("<<"),V("/Type /Font"),V("/BaseFont /"+jh(m.postScriptName)),V("/Subtype /Type1"),typeof m.encoding=="string"&&V("/Encoding /"+m.encoding),V("/FirstChar 32"),V("/LastChar 255"),V(">>"),V("endobj"))},th=function(){for(var m in He)He.hasOwnProperty(m)&&(p===!1||p===!0&&b.hasOwnProperty(m))&&Zl(He[m])},eh=function(m){m.objectNumber=Si();var L=[];L.push({key:"Type",value:"/XObject"}),L.push({key:"Subtype",value:"/Form"}),L.push({key:"BBox",value:"["+[X(m.x),X(m.y),X(m.x+m.width),X(m.y+m.height)].join(" ")+"]"}),L.push({key:"Matrix",value:"["+m.matrix.toString()+"]"});var z=m.pages[1].join(`
`);es({data:z,additionalKeyValues:L,objectId:m.objectNumber}),V("endobj")},ih=function(){for(var m in zi)zi.hasOwnProperty(m)&&eh(zi[m])},pf=function(m,L){var z,J=[],ot=1/(L-1);for(z=0;z<1;z+=ot)J.push(z);if(J.push(1),m[0].offset!=0){var vt={offset:0,color:m[0].color};m.unshift(vt)}if(m[m.length-1].offset!=1){var Lt={offset:1,color:m[m.length-1].color};m.push(Lt)}for(var Bt="",Gt=0,ce=0;ce<J.length;ce++){for(z=J[ce];z>m[Gt+1].offset;)Gt++;var ae=m[Gt].offset,xe=(z-ae)/(m[Gt+1].offset-ae),Qe=m[Gt].color,ri=m[Gt+1].color;Bt+=Y(Math.round((1-xe)*Qe[0]+xe*ri[0]).toString(16))+Y(Math.round((1-xe)*Qe[1]+xe*ri[1]).toString(16))+Y(Math.round((1-xe)*Qe[2]+xe*ri[2]).toString(16))}return Bt.trim()},Cg=function(m,L){L||(L=21);var z=Si(),J=pf(m.colors,L),ot=[];ot.push({key:"FunctionType",value:"0"}),ot.push({key:"Domain",value:"[0.0 1.0]"}),ot.push({key:"Size",value:"["+L+"]"}),ot.push({key:"BitsPerSample",value:"8"}),ot.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ot.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),es({data:J,additionalKeyValues:ot,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:z}),V("endobj"),m.objectNumber=Si(),V("<< /ShadingType "+m.type),V("/ColorSpace /DeviceRGB");var vt="/Coords ["+X(parseFloat(m.coords[0]))+" "+X(parseFloat(m.coords[1]))+" ";m.type===2?vt+=X(parseFloat(m.coords[2]))+" "+X(parseFloat(m.coords[3])):vt+=X(parseFloat(m.coords[2]))+" "+X(parseFloat(m.coords[3]))+" "+X(parseFloat(m.coords[4]))+" "+X(parseFloat(m.coords[5])),V(vt+="]"),m.matrix&&V("/Matrix ["+m.matrix.toString()+"]"),V("/Function "+z+" 0 R"),V("/Extend [true true]"),V(">>"),V("endobj")},Pg=function(m,L){var z=bi(),J=Si();L.push({resourcesOid:z,objectOid:J}),m.objectNumber=J;var ot=[];ot.push({key:"Type",value:"/Pattern"}),ot.push({key:"PatternType",value:"1"}),ot.push({key:"PaintType",value:"1"}),ot.push({key:"TilingType",value:"1"}),ot.push({key:"BBox",value:"["+m.boundingBox.map(X).join(" ")+"]"}),ot.push({key:"XStep",value:X(m.xStep)}),ot.push({key:"YStep",value:X(m.yStep)}),ot.push({key:"Resources",value:z+" 0 R"}),m.matrix&&ot.push({key:"Matrix",value:"["+m.matrix.toString()+"]"}),es({data:m.stream,additionalKeyValues:ot,objectId:m.objectNumber}),V("endobj")},nh=function(m){var L;for(L in Pe)Pe.hasOwnProperty(L)&&(Pe[L]instanceof Uo?Cg(Pe[L]):Pe[L]instanceof Bh&&Pg(Pe[L],m))},gf=function(m){for(var L in m.objectNumber=Si(),V("<<"),m)switch(L){case"opacity":V("/ca "+ct(m[L]));break;case"stroke-opacity":V("/CA "+ct(m[L]))}V(">>"),V("endobj")},kg=function(){var m;for(m in ni)ni.hasOwnProperty(m)&&gf(ni[m])},Vc=function(){for(var m in V("/XObject <<"),zi)zi.hasOwnProperty(m)&&zi[m].objectNumber>=0&&V("/"+m+" "+zi[m].objectNumber+" 0 R");ke.publish("putXobjectDict"),V(">>")},Tg=function(){Qi.oid=Si(),V("<<"),V("/Filter /Standard"),V("/V "+Qi.v),V("/R "+Qi.r),V("/U <"+Qi.toHexString(Qi.U)+">"),V("/O <"+Qi.toHexString(Qi.O)+">"),V("/P "+Qi.P),V(">>"),V("endobj")},mf=function(){for(var m in V("/Font <<"),He)He.hasOwnProperty(m)&&(p===!1||p===!0&&b.hasOwnProperty(m))&&V("/"+m+" "+He[m].objectNumber+" 0 R");V(">>")},Ig=function(){if(Object.keys(Pe).length>0){for(var m in V("/Shading <<"),Pe)Pe.hasOwnProperty(m)&&Pe[m]instanceof Uo&&Pe[m].objectNumber>=0&&V("/"+m+" "+Pe[m].objectNumber+" 0 R");ke.publish("putShadingPatternDict"),V(">>")}},sh=function(m){if(Object.keys(Pe).length>0){for(var L in V("/Pattern <<"),Pe)Pe.hasOwnProperty(L)&&Pe[L]instanceof g.TilingPattern&&Pe[L].objectNumber>=0&&Pe[L].objectNumber<m&&V("/"+L+" "+Pe[L].objectNumber+" 0 R");ke.publish("putTilingPatternDict"),V(">>")}},Fg=function(){if(Object.keys(ni).length>0){var m;for(m in V("/ExtGState <<"),ni)ni.hasOwnProperty(m)&&ni[m].objectNumber>=0&&V("/"+m+" "+ni[m].objectNumber+" 0 R");ke.publish("putGStateDict"),V(">>")}},hi=function(m){On(m.resourcesOid,!0),V("<<"),V("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),mf(),Ig(),sh(m.objectOid),Fg(),Vc(),V(">>"),V("endobj")},bf=function(){var m=[];th(),kg(),ih(),nh(m),ke.publish("putResources"),m.forEach(hi),hi({resourcesOid:_s,objectOid:Number.MAX_SAFE_INTEGER}),ke.publish("postPutResources")},vf=function(){ke.publish("putAdditionalObjects");for(var m=0;m<Et.length;m++){var L=Et[m];On(L.objId,!0),V(L.content),V("endobj")}ke.publish("postPutAdditionalObjects")},yf=function(m){Ke[m.fontName]=Ke[m.fontName]||{},Ke[m.fontName][m.fontStyle]=m.id},Gc=function(m,L,z,J,ot){var vt={id:"F"+(Object.keys(He).length+1).toString(10),postScriptName:m,fontName:L,fontStyle:z,encoding:J,isStandardFont:ot||!1,metadata:{}};return ke.publish("addFont",{font:vt,instance:this}),He[vt.id]=vt,yf(vt),vt.id},Mg=function(m){for(var L=0,z=Ct.length;L<z;L++){var J=Gc.call(this,m[L][0],m[L][1],m[L][2],Ct[L][3],!0);p===!1&&(b[J]=!0);var ot=m[L][0].split("-");yf({id:J,fontName:ot[0],fontStyle:ot[1]||""})}ke.publish("addFonts",{fonts:He,dictionary:Ke})},Ls=function(m){return m.foo=function(){try{return m.apply(this,arguments)}catch(J){var L=J.stack||"";~L.indexOf(" at ")&&(L=L.split(" at ")[1]);var z="Error in function "+L.split(`
`)[0].split("<")[0]+": "+J.message;if(!Qt.console)throw new Error(z);Qt.console.error(z,J),Qt.alert&&alert(z)}},m.foo.bar=m,m.foo},rh=function(m,L){var z,J,ot,vt,Lt,Bt,Gt,ce,ae;if(ot=(L=L||{}).sourceEncoding||"Unicode",Lt=L.outputEncoding,(L.autoencode||Lt)&&He[ye].metadata&&He[ye].metadata[ot]&&He[ye].metadata[ot].encoding&&(vt=He[ye].metadata[ot].encoding,!Lt&&He[ye].encoding&&(Lt=He[ye].encoding),!Lt&&vt.codePages&&(Lt=vt.codePages[0]),typeof Lt=="string"&&(Lt=vt[Lt]),Lt)){for(Gt=!1,Bt=[],z=0,J=m.length;z<J;z++)(ce=Lt[m.charCodeAt(z)])?Bt.push(String.fromCharCode(ce)):Bt.push(m[z]),Bt[z].charCodeAt(0)>>8&&(Gt=!0);m=Bt.join("")}for(z=m.length;Gt===void 0&&z!==0;)m.charCodeAt(z-1)>>8&&(Gt=!0),z--;if(!Gt)return m;for(Bt=L.noBOM?[]:[254,255],z=0,J=m.length;z<J;z++){if((ae=(ce=m.charCodeAt(z))>>8)>>8)throw new Error("Character at position "+z+" of string '"+m+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Bt.push(ae),Bt.push(ce-(ae<<8))}return String.fromCharCode.apply(void 0,Bt)},Sn=g.__private__.pdfEscape=g.pdfEscape=function(m,L){return rh(m,L).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Xc=g.__private__.beginPage=function(m){Nt[++si]=[],re[si]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(m[0]),topRightY:Number(m[1])}},Af(si),yt(Nt[j])},wf=function(m,L){var z,J,ot;switch(e=L||e,typeof m=="string"&&(z=A(m.toLowerCase()),Array.isArray(z)&&(J=z[0],ot=z[1])),Array.isArray(m)&&(J=m[0]*jt,ot=m[1]*jt),isNaN(J)&&(J=n[0],ot=n[1]),(J>14400||ot>14400)&&(Ue.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),J=Math.min(14400,J),ot=Math.min(14400,ot)),n=[J,ot],e.substr(0,1)){case"l":ot>J&&(n=[ot,J]);break;case"p":J>ot&&(n=[ot,J])}Xc(n),Ef(Jc),V(Ns),Zc!==0&&V(Zc+" J"),tu!==0&&V(tu+" j"),ke.publish("addPage",{pageNumber:si})},Rg=function(m){m>0&&m<=si&&(Nt.splice(m,1),re.splice(m,1),si--,j>si&&(j=si),this.setPage(j))},Af=function(m){m>0&&m<=si&&(j=m)},Dg=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return Nt.length-1},_f=function(m,L,z){var J,ot=void 0;return z=z||{},m=m!==void 0?m:He[ye].fontName,L=L!==void 0?L:He[ye].fontStyle,J=m.toLowerCase(),Ke[J]!==void 0&&Ke[J][L]!==void 0?ot=Ke[J][L]:Ke[m]!==void 0&&Ke[m][L]!==void 0?ot=Ke[m][L]:z.disableWarning===!1&&Ue.warn("Unable to look up font label for font '"+m+"', '"+L+"'. Refer to getFontList() for available fonts."),ot||z.noFallback||(ot=Ke.times[L])==null&&(ot=Ke.times.normal),ot},Og=g.__private__.putInfo=function(){var m=Si(),L=function(J){return J};for(var z in d!==null&&(L=Qi.encryptor(m,0)),V("<<"),V("/Producer ("+Sn(L("jsPDF "+Kt.version))+")"),Zt)Zt.hasOwnProperty(z)&&Zt[z]&&V("/"+z.substr(0,1).toUpperCase()+z.substr(1)+" ("+Sn(L(Zt[z]))+")");V("/CreationDate ("+Sn(L(ht))+")"),V(">>"),V("endobj")},$c=g.__private__.putCatalog=function(m){var L=(m=m||{}).rootDictionaryObjId||Ir;switch(Si(),V("<<"),V("/Type /Catalog"),V("/Pages "+L+" 0 R"),Ot||(Ot="fullwidth"),Ot){case"fullwidth":V("/OpenAction [3 0 R /FitH null]");break;case"fullheight":V("/OpenAction [3 0 R /FitV null]");break;case"fullpage":V("/OpenAction [3 0 R /Fit]");break;case"original":V("/OpenAction [3 0 R /XYZ null null 1]");break;default:var z=""+Ot;z.substr(z.length-1)==="%"&&(Ot=parseInt(Ot)/100),typeof Ot=="number"&&V("/OpenAction [3 0 R /XYZ null null "+ct(Ot)+"]")}switch(be||(be="continuous"),be){case"continuous":V("/PageLayout /OneColumn");break;case"single":V("/PageLayout /SinglePage");break;case"two":case"twoleft":V("/PageLayout /TwoColumnLeft");break;case"tworight":V("/PageLayout /TwoColumnRight")}se&&V("/PageMode /"+se),ke.publish("putCatalog"),V(">>"),V("endobj")},jg=g.__private__.putTrailer=function(){V("trailer"),V("<<"),V("/Size "+(Q+1)),V("/Root "+Q+" 0 R"),V("/Info "+(Q-1)+" 0 R"),d!==null&&V("/Encrypt "+Qi.oid+" 0 R"),V("/ID [ <"+lt+"> <"+lt+"> ]"),V(">>")},Bg=g.__private__.putHeader=function(){V("%PDF-"+y),V("%ºß¬à")},qg=g.__private__.putXRef=function(){var m="0000000000";V("xref"),V("0 "+(Q+1)),V("0000000000 65535 f ");for(var L=1;L<=Q;L++)typeof st[L]=="function"?V((m+st[L]()).slice(-10)+" 00000 n "):st[L]!==void 0?V((m+st[L]).slice(-10)+" 00000 n "):V("0000000000 00000 n ")},Fr=g.__private__.buildDocument=function(){Jt(),yt(pt),ke.publish("buildDocument"),Bg(),Eo(),vf(),bf(),d!==null&&Tg(),Og(),$c();var m=gt;return qg(),jg(),V("startxref"),V(""+m),V("%%EOF"),yt(Nt[j]),pt.join(`
`)},ah=g.__private__.getBlob=function(m){return new Blob([Ut(m)],{type:"application/pdf"})},oh=g.output=g.__private__.output=Ls(function(m,L){switch(typeof(L=L||{})=="string"?L={filename:L}:L.filename=L.filename||"generated.pdf",m){case void 0:return Fr();case"save":g.save(L.filename);break;case"arraybuffer":return Ut(Fr());case"blob":return ah(Fr());case"bloburi":case"bloburl":if(Qt.URL!==void 0&&typeof Qt.URL.createObjectURL=="function")return Qt.URL&&Qt.URL.createObjectURL(ah(Fr()))||void 0;Ue.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var z="",J=Fr();try{z=t2(J)}catch{z=t2(unescape(encodeURIComponent(J)))}return"data:application/pdf;filename="+L.filename+";base64,"+z;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Qt)==="[object Window]"){var ot="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",vt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';L.pdfObjectUrl&&(ot=L.pdfObjectUrl,vt="");var Lt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ot+'"'+vt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(L)+");<\/script></body></html>",Bt=Qt.open();return Bt!==null&&Bt.document.write(Lt),Bt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Qt)==="[object Window]"){var Gt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(L.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+L.filename+'" width="500px" height="400px" /></body></html>',ce=Qt.open();if(ce!==null){ce.document.write(Gt);var ae=this;ce.document.documentElement.querySelector("#pdfViewer").onload=function(){ce.document.title=L.filename,ce.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ae.output("bloburl"))}}return ce}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Qt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var xe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",L)+'"></iframe></body></html>',Qe=Qt.open();if(Qe!==null&&(Qe.document.write(xe),Qe.document.title=L.filename),Qe||typeof safari>"u")return Qe;break;case"datauri":case"dataurl":return Qt.document.location.href=this.output("datauristring",L);default:return null}}),xf=function(m){return Array.isArray(No)===!0&&No.indexOf(m)>-1};switch(i){case"pt":jt=1;break;case"mm":jt=72/25.4;break;case"cm":jt=72/2.54;break;case"in":jt=72;break;case"px":jt=xf("px_scaling")==1?.75:96/72;break;case"pc":case"em":jt=12;break;case"ex":jt=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);jt=i}var Qi=null;wt(),it();var Hg=function(m){return d!==null?Qi.encryptor(m,0):function(L){return L}},Sf=g.__private__.getPageInfo=g.getPageInfo=function(m){if(isNaN(m)||m%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:re[m].objId,pageNumber:m,pageContext:re[m]}},ee=g.__private__.getPageInfoByObjId=function(m){if(isNaN(m)||m%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var L in re)if(re[L].objId===m)break;return Sf(L)},zg=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:re[j].objId,pageNumber:j,pageContext:re[j]}};g.addPage=function(){return wf.apply(this,arguments),this},g.setPage=function(){return Af.apply(this,arguments),yt.call(this,Nt[j]),this},g.insertPage=function(m){return this.addPage(),this.movePage(j,m),this},g.movePage=function(m,L){var z,J;if(m>L){z=Nt[m],J=re[m];for(var ot=m;ot>L;ot--)Nt[ot]=Nt[ot-1],re[ot]=re[ot-1];Nt[L]=z,re[L]=J,this.setPage(L)}else if(m<L){z=Nt[m],J=re[m];for(var vt=m;vt<L;vt++)Nt[vt]=Nt[vt+1],re[vt]=re[vt+1];Nt[L]=z,re[L]=J,this.setPage(L)}return this},g.deletePage=function(){return Rg.apply(this,arguments),this},g.__private__.text=g.text=function(m,L,z,J,ot){var vt,Lt,Bt,Gt,ce,ae,xe,Qe,ri,vi=(J=J||{}).scope||this;if(typeof m=="number"&&typeof L=="number"&&(typeof z=="string"||Array.isArray(z))){var Zi=z;z=L,L=m,m=Zi}if(arguments[3]instanceof Yt?(H("The transform parameter of text() with a Matrix value"),ri=ot):(Bt=arguments[4],Gt=arguments[5],We(xe=arguments[3])==="object"&&xe!==null||(typeof Bt=="string"&&(Gt=Bt,Bt=null),typeof xe=="string"&&(Gt=xe,xe=null),typeof xe=="number"&&(Bt=xe,xe=null),J={flags:xe,angle:Bt,align:Gt})),isNaN(L)||isNaN(z)||m==null)throw new Error("Invalid arguments passed to jsPDF.text");if(m.length===0)return vi;var Fi="",Es=!1,jn=typeof J.lineHeightFactor=="number"?J.lineHeightFactor:Po,rr=vi.internal.scaleFactor;function Ff(Ve){return Ve=Ve.split("	").join(Array(J.TabLen||9).join(" ")),Sn(Ve,xe)}function ru(Ve){for(var Ge,ui=Ve.concat(),Li=[],jr=ui.length;jr--;)typeof(Ge=ui.shift())=="string"?Li.push(Ge):Array.isArray(Ve)&&(Ge.length===1||Ge[1]===void 0&&Ge[2]===void 0)?Li.push(Ge[0]):Li.push([Ge[0],Ge[1],Ge[2]]);return Li}function au(Ve,Ge){var ui;if(typeof Ve=="string")ui=Ge(Ve)[0];else if(Array.isArray(Ve)){for(var Li,jr,pu=Ve.concat(),_h=[],jf=pu.length;jf--;)typeof(Li=pu.shift())=="string"?_h.push(Ge(Li)[0]):Array.isArray(Li)&&typeof Li[0]=="string"&&(jr=Ge(Li[0],Li[1],Li[2]),_h.push([jr[0],jr[1],jr[2]]));ui=_h}return ui}var fh=!1,ou=!0;if(typeof m=="string")fh=!0;else if(Array.isArray(m)){var lu=m.concat();Lt=[];for(var ph,Ui=lu.length;Ui--;)(typeof(ph=lu.shift())!="string"||Array.isArray(ph)&&typeof ph[0]!="string")&&(ou=!1);fh=ou}if(fh===!1)throw new Error('Type of text must be string or Array. "'+m+'" is not recognized.');typeof m=="string"&&(m=m.match(/[\r?\n]/)?m.split(/\r\n|\r|\n/g):[m]);var gh=Pt/vi.internal.scaleFactor,mh=gh*(jn-1);switch(J.baseline){case"bottom":z-=mh;break;case"top":z+=gh-mh;break;case"hanging":z+=gh-2*mh;break;case"middle":z+=gh/2-mh}if((ae=J.maxWidth||0)>0&&(typeof m=="string"?m=vi.splitTextToSize(m,ae):Object.prototype.toString.call(m)==="[object Array]"&&(m=m.reduce(function(Ve,Ge){return Ve.concat(vi.splitTextToSize(Ge,ae))},[]))),vt={text:m,x:L,y:z,options:J,mutex:{pdfEscape:Sn,activeFontKey:ye,fonts:He,activeFontSize:Pt}},ke.publish("preProcessText",vt),m=vt.text,Bt=(J=vt.options).angle,!(ri instanceof Yt)&&Bt&&typeof Bt=="number"){Bt*=Math.PI/180,J.rotationDirection===0&&(Bt=-Bt),D===E.ADVANCED&&(Bt=-Bt);var bh=Math.cos(Bt),hu=Math.sin(Bt);ri=new Yt(bh,hu,-hu,bh,0,0)}else Bt&&Bt instanceof Yt&&(ri=Bt);D!==E.ADVANCED||ri||(ri=tr),(ce=J.charSpace||ch)!==void 0&&(Fi+=X(O(ce))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Qe=J.horizontalScale)!==void 0&&(Fi+=X(100*Qe)+` Tz
`),J.lang;var Ln=-1,Qg=J.renderingMode!==void 0?J.renderingMode:J.stroke,cu=vi.internal.getCurrentPageInfo().pageContext;switch(Qg){case 0:case!1:case"fill":Ln=0;break;case 1:case!0:case"stroke":Ln=1;break;case 2:case"fillThenStroke":Ln=2;break;case 3:case"invisible":Ln=3;break;case 4:case"fillAndAddForClipping":Ln=4;break;case 5:case"strokeAndAddPathForClipping":Ln=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ln=6;break;case 7:case"addToPathForClipping":Ln=7}var Mf=cu.usedRenderingMode!==void 0?cu.usedRenderingMode:-1;Ln!==-1?Fi+=Ln+` Tr
`:Mf!==-1&&(Fi+=`0 Tr
`),Ln!==-1&&(cu.usedRenderingMode=Ln),Gt=J.align||"left";var is,vh=Pt*jn,Rf=vi.internal.pageSize.getWidth(),Df=He[ye];ce=J.charSpace||ch,ae=J.maxWidth||0,xe=Object.assign({autoencode:!0,noBOM:!0},J.flags);var Ea=[],Io=function(Ve){return vi.getStringUnitWidth(Ve,{font:Df,charSpace:ce,fontSize:Pt,doKerning:!1})*Pt/rr};if(Object.prototype.toString.call(m)==="[object Array]"){var Nn;Lt=ru(m),Gt!=="left"&&(is=Lt.map(Io));var fn,Ca=0;if(Gt==="right"){L-=is[0],m=[],Ui=Lt.length;for(var Rr=0;Rr<Ui;Rr++)Rr===0?(fn=sr(L),Nn=Mr(z)):(fn=O(Ca-is[Rr]),Nn=-vh),m.push([Lt[Rr],fn,Nn]),Ca=is[Rr]}else if(Gt==="center"){L-=is[0]/2,m=[],Ui=Lt.length;for(var Dr=0;Dr<Ui;Dr++)Dr===0?(fn=sr(L),Nn=Mr(z)):(fn=O((Ca-is[Dr])/2),Nn=-vh),m.push([Lt[Dr],fn,Nn]),Ca=is[Dr]}else if(Gt==="left"){m=[],Ui=Lt.length;for(var yh=0;yh<Ui;yh++)m.push(Lt[yh])}else if(Gt==="justify"&&Df.encoding==="Identity-H"){m=[],Ui=Lt.length,ae=ae!==0?ae:Rf;for(var Or=0,ci=0;ci<Ui;ci++)if(Nn=ci===0?Mr(z):-vh,fn=ci===0?sr(L):Or,ci<Ui-1){var uu=O((ae-is[ci])/(Lt[ci].split(" ").length-1)),pn=Lt[ci].split(" ");m.push([pn[0]+" ",fn,Nn]),Or=0;for(var ns=1;ns<pn.length;ns++){var wh=(Io(pn[ns-1]+" "+pn[ns])-Io(pn[ns]))*rr+uu;ns==pn.length-1?m.push([pn[ns],wh,0]):m.push([pn[ns]+" ",wh,0]),Or-=wh}}else m.push([Lt[ci],fn,Nn]);m.push(["",Or,0])}else{if(Gt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(m=[],Ui=Lt.length,ae=ae!==0?ae:Rf,ci=0;ci<Ui;ci++)Nn=ci===0?Mr(z):-vh,fn=ci===0?sr(L):0,ci<Ui-1?Ea.push(X(O((ae-is[ci])/(Lt[ci].split(" ").length-1)))):Ea.push(0),m.push([Lt[ci],fn,Nn])}}var Of=typeof J.R2L=="boolean"?J.R2L:Vt;Of===!0&&(m=au(m,function(Ve,Ge,ui){return[Ve.split("").reverse().join(""),Ge,ui]})),vt={text:m,x:L,y:z,options:J,mutex:{pdfEscape:Sn,activeFontKey:ye,fonts:He,activeFontSize:Pt}},ke.publish("postProcessText",vt),m=vt.text,Es=vt.mutex.isHex||!1;var du=He[ye].encoding;du!=="WinAnsiEncoding"&&du!=="StandardEncoding"||(m=au(m,function(Ve,Ge,ui){return[Ff(Ve),Ge,ui]})),Lt=ru(m),m=[];for(var Fo,Mo,Pa,Ro=0,Ah=1,Do=Array.isArray(Lt[0])?Ah:Ro,ka="",fu=function(Ve,Ge,ui){var Li="";return ui instanceof Yt?(ui=typeof J.angle=="number"?As(ui,new Yt(1,0,0,1,Ve,Ge)):As(new Yt(1,0,0,1,Ve,Ge),ui),D===E.ADVANCED&&(ui=As(new Yt(1,0,0,-1,0,0),ui)),Li=ui.join(" ")+` Tm
`):Li=X(Ve)+" "+X(Ge)+` Td
`,Li},ss=0;ss<Lt.length;ss++){switch(ka="",Do){case Ah:Pa=(Es?"<":"(")+Lt[ss][0]+(Es?">":")"),Fo=parseFloat(Lt[ss][1]),Mo=parseFloat(Lt[ss][2]);break;case Ro:Pa=(Es?"<":"(")+Lt[ss]+(Es?">":")"),Fo=sr(L),Mo=Mr(z)}Ea!==void 0&&Ea[ss]!==void 0&&(ka=Ea[ss]+` Tw
`),ss===0?m.push(ka+fu(Fo,Mo,ri)+Pa):Do===Ro?m.push(ka+Pa):Do===Ah&&m.push(ka+fu(Fo,Mo,ri)+Pa)}m=Do===Ro?m.join(` Tj
T* `):m.join(` Tj
`),m+=` Tj
`;var rs=`BT
/`;return rs+=ye+" "+Pt+` Tf
`,rs+=X(Pt*jn)+` TL
`,rs+=ko+`
`,rs+=Fi,rs+=m,V(rs+="ET"),b[ye]=!0,vi};var Ug=g.__private__.clip=g.clip=function(m){return V(m==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return Ug("evenodd")},g.__private__.discardPath=g.discardPath=function(){return V("n"),this};var nr=g.__private__.isValidStyle=function(m){var L=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(m)!==-1&&(L=!0),L};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(m){return nr(m)&&(u=m),this};var Lf=g.__private__.getStyle=g.getStyle=function(m){var L=u;switch(m){case"D":case"S":L="S";break;case"F":L="f";break;case"FD":case"DF":L="B";break;case"f":case"f*":case"B":case"B*":L=m}return L},Nf=g.close=function(){return V("h"),this};g.stroke=function(){return V("S"),this},g.fill=function(m){return lh("f",m),this},g.fillEvenOdd=function(m){return lh("f*",m),this},g.fillStroke=function(m){return lh("B",m),this},g.fillStrokeEvenOdd=function(m){return lh("B*",m),this};var lh=function(m,L){We(L)==="object"?Vg(L,m):V(m)},Yc=function(m){m===null||D===E.ADVANCED&&m===void 0||(m=Lf(m),V(m))};function Wg(m,L,z,J,ot){var vt=new Bh(L||this.boundingBox,z||this.xStep,J||this.yStep,this.gState,ot||this.matrix);vt.stream=this.stream;var Lt=m+"$$"+this.cloneIndex+++"$$";return xn(Lt,vt),vt}var Vg=function(m,L){var z=Lo[m.key],J=Pe[z];if(J instanceof Uo)V("q"),V(Gg(L)),J.gState&&g.setGState(J.gState),V(m.matrix.toString()+" cm"),V("/"+z+" sh"),V("Q");else if(J instanceof Bh){var ot=new Yt(1,0,0,-1,0,Na());m.matrix&&(ot=ot.multiply(m.matrix||tr),z=Wg.call(J,m.key,m.boundingBox,m.xStep,m.yStep,ot).id),V("q"),V("/Pattern cs"),V("/"+z+" scn"),J.gState&&g.setGState(J.gState),V(L),V("Q")}},Gg=function(m){switch(m){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Kc=g.moveTo=function(m,L){return V(X(O(m))+" "+X(W(L))+" m"),this},Co=g.lineTo=function(m,L){return V(X(O(m))+" "+X(W(L))+" l"),this},Sa=g.curveTo=function(m,L,z,J,ot,vt){return V([X(O(m)),X(W(L)),X(O(z)),X(W(J)),X(O(ot)),X(W(vt)),"c"].join(" ")),this};g.__private__.line=g.line=function(m,L,z,J,ot){if(isNaN(m)||isNaN(L)||isNaN(z)||isNaN(J)||!nr(ot))throw new Error("Invalid arguments passed to jsPDF.line");return D===E.COMPAT?this.lines([[z-m,J-L]],m,L,[1,1],ot||"S"):this.lines([[z-m,J-L]],m,L,[1,1]).stroke()},g.__private__.lines=g.lines=function(m,L,z,J,ot,vt){var Lt,Bt,Gt,ce,ae,xe,Qe,ri,vi,Zi,Fi,Es;if(typeof m=="number"&&(Es=z,z=L,L=m,m=Es),J=J||[1,1],vt=vt||!1,isNaN(L)||isNaN(z)||!Array.isArray(m)||!Array.isArray(J)||!nr(ot)||typeof vt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Kc(L,z),Lt=J[0],Bt=J[1],ce=m.length,Zi=L,Fi=z,Gt=0;Gt<ce;Gt++)(ae=m[Gt]).length===2?(Zi=ae[0]*Lt+Zi,Fi=ae[1]*Bt+Fi,Co(Zi,Fi)):(xe=ae[0]*Lt+Zi,Qe=ae[1]*Bt+Fi,ri=ae[2]*Lt+Zi,vi=ae[3]*Bt+Fi,Zi=ae[4]*Lt+Zi,Fi=ae[5]*Bt+Fi,Sa(xe,Qe,ri,vi,Zi,Fi));return vt&&Nf(),Yc(ot),this},g.path=function(m){for(var L=0;L<m.length;L++){var z=m[L],J=z.c;switch(z.op){case"m":Kc(J[0],J[1]);break;case"l":Co(J[0],J[1]);break;case"c":Sa.apply(this,J);break;case"h":Nf()}}return this},g.__private__.rect=g.rect=function(m,L,z,J,ot){if(isNaN(m)||isNaN(L)||isNaN(z)||isNaN(J)||!nr(ot))throw new Error("Invalid arguments passed to jsPDF.rect");return D===E.COMPAT&&(J=-J),V([X(O(m)),X(W(L)),X(O(z)),X(O(J)),"re"].join(" ")),Yc(ot),this},g.__private__.triangle=g.triangle=function(m,L,z,J,ot,vt,Lt){if(isNaN(m)||isNaN(L)||isNaN(z)||isNaN(J)||isNaN(ot)||isNaN(vt)||!nr(Lt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[z-m,J-L],[ot-z,vt-J],[m-ot,L-vt]],m,L,[1,1],Lt,!0),this},g.__private__.roundedRect=g.roundedRect=function(m,L,z,J,ot,vt,Lt){if(isNaN(m)||isNaN(L)||isNaN(z)||isNaN(J)||isNaN(ot)||isNaN(vt)||!nr(Lt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Bt=4/3*(Math.SQRT2-1);return ot=Math.min(ot,.5*z),vt=Math.min(vt,.5*J),this.lines([[z-2*ot,0],[ot*Bt,0,ot,vt-vt*Bt,ot,vt],[0,J-2*vt],[0,vt*Bt,-ot*Bt,vt,-ot,vt],[2*ot-z,0],[-ot*Bt,0,-ot,-vt*Bt,-ot,-vt],[0,2*vt-J],[0,-vt*Bt,ot*Bt,-vt,ot,-vt]],m+ot,L,[1,1],Lt,!0),this},g.__private__.ellipse=g.ellipse=function(m,L,z,J,ot){if(isNaN(m)||isNaN(L)||isNaN(z)||isNaN(J)||!nr(ot))throw new Error("Invalid arguments passed to jsPDF.ellipse");var vt=4/3*(Math.SQRT2-1)*z,Lt=4/3*(Math.SQRT2-1)*J;return Kc(m+z,L),Sa(m+z,L-Lt,m+vt,L-J,m,L-J),Sa(m-vt,L-J,m-z,L-Lt,m-z,L),Sa(m-z,L+Lt,m-vt,L+J,m,L+J),Sa(m+vt,L+J,m+z,L+Lt,m+z,L),Yc(ot),this},g.__private__.circle=g.circle=function(m,L,z,J){if(isNaN(m)||isNaN(L)||isNaN(z)||!nr(J))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(m,L,z,z,J)},g.setFont=function(m,L,z){return z&&(L=K(L,z)),ye=_f(m,L,{disableWarning:!1}),this};var Xg=g.__private__.getFont=g.getFont=function(){return He[_f.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var m,L,z={};for(m in Ke)if(Ke.hasOwnProperty(m))for(L in z[m]=[],Ke[m])Ke[m].hasOwnProperty(L)&&z[m].push(L);return z},g.addFont=function(m,L,z,J,ot){var vt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&vt.indexOf(arguments[3])!==-1?ot=arguments[3]:arguments[3]&&vt.indexOf(arguments[3])==-1&&(z=K(z,J)),ot=ot||"Identity-H",Gc.call(this,m,L,z,ot)};var Po,Jc=o.lineWidth||.200025,hh=g.__private__.getLineWidth=g.getLineWidth=function(){return Jc},Ef=g.__private__.setLineWidth=g.setLineWidth=function(m){return Jc=m,V(X(O(m))+" w"),this};g.__private__.setLineDash=Kt.API.setLineDash=Kt.API.setLineDashPattern=function(m,L){if(m=m||[],L=L||0,isNaN(L)||!Array.isArray(m))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return m=m.map(function(z){return X(O(z))}).join(" "),L=X(O(L)),V("["+m+"] "+L+" d"),this};var Cf=g.__private__.getLineHeight=g.getLineHeight=function(){return Pt*Po};g.__private__.getLineHeight=g.getLineHeight=function(){return Pt*Po};var Pf=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(m){return typeof(m=m||1.15)=="number"&&(Po=m),this},kf=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return Po};Pf(o.lineHeight);var sr=g.__private__.getHorizontalCoordinate=function(m){return O(m)},Mr=g.__private__.getVerticalCoordinate=function(m){return D===E.ADVANCED?m:re[j].mediaBox.topRightY-re[j].mediaBox.bottomLeftY-O(m)},$g=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(m){return X(sr(m))},La=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(m){return X(Mr(m))},Ns=o.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return xs(Ns)},g.__private__.setStrokeColor=g.setDrawColor=function(m,L,z,J){return Ns=Ss({ch1:m,ch2:L,ch3:z,ch4:J,pdfColorType:"draw",precision:2}),V(Ns),this};var Qc=o.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return xs(Qc)},g.__private__.setFillColor=g.setFillColor=function(m,L,z,J){return Qc=Ss({ch1:m,ch2:L,ch3:z,ch4:J,pdfColorType:"fill",precision:2}),V(Qc),this};var ko=o.textColor||"0 g",Yg=g.__private__.getTextColor=g.getTextColor=function(){return xs(ko)};g.__private__.setTextColor=g.setTextColor=function(m,L,z,J){return ko=Ss({ch1:m,ch2:L,ch3:z,ch4:J,pdfColorType:"text",precision:3}),this};var ch=o.charSpace,Kg=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(ch||0)};g.__private__.setCharSpace=g.setCharSpace=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ch=m,this};var Zc=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(m){var L=g.CapJoinStyles[m];if(L===void 0)throw new Error("Line cap style of '"+m+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Zc=L,V(L+" J"),this};var tu=0;g.__private__.setLineJoin=g.setLineJoin=function(m){var L=g.CapJoinStyles[m];if(L===void 0)throw new Error("Line join style of '"+m+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return tu=L,V(L+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(m){if(m=m||0,isNaN(m))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return V(X(O(m))+" M"),this},g.GState=Qp,g.setGState=function(m){(m=typeof m=="string"?ni[ws[m]]:Tf(null,m)).equals(Tr)||(V("/"+m.id+" gs"),Tr=m)};var Tf=function(m,L){if(!m||!ws[m]){var z=!1;for(var J in ni)if(ni.hasOwnProperty(J)&&ni[J].equals(L)){z=!0;break}if(z)L=ni[J];else{var ot="GS"+(Object.keys(ni).length+1).toString(10);ni[ot]=L,L.id=ot}return m&&(ws[m]=L.id),ke.publish("addGState",L),L}};g.addGState=function(m,L){return Tf(m,L),this},g.saveGraphicsState=function(){return V("q"),Js.push({key:ye,size:Pt,color:ko}),this},g.restoreGraphicsState=function(){V("Q");var m=Js.pop();return ye=m.key,Pt=m.size,ko=m.color,Tr=null,this},g.setCurrentTransformationMatrix=function(m){return V(m.toString()+" cm"),this},g.comment=function(m){return V("#"+m),this};var uh=function(m,L){var z=m||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return z},set:function(vt){isNaN(vt)||(z=parseFloat(vt))}});var J=L||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return J},set:function(vt){isNaN(vt)||(J=parseFloat(vt))}});var ot="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ot},set:function(vt){ot=vt.toString()}}),this},eu=function(m,L,z,J){uh.call(this,m,L),this.type="rect";var ot=z||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ot},set:function(Lt){isNaN(Lt)||(ot=parseFloat(Lt))}});var vt=J||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return vt},set:function(Lt){isNaN(Lt)||(vt=parseFloat(Lt))}}),this},iu=function(){this.page=si,this.currentPage=j,this.pages=Nt.slice(0),this.pagesContext=re.slice(0),this.x=Ji,this.y=Ne,this.matrix=ys,this.width=To(j),this.height=Na(j),this.outputDestination=It,this.id="",this.objectNumber=-1};iu.prototype.restore=function(){si=this.page,j=this.currentPage,re=this.pagesContext,Nt=this.pages,Ji=this.x,Ne=this.y,ys=this.matrix,nu(j,this.width),su(j,this.height),It=this.outputDestination};var If=function(m,L,z,J,ot){Zs.push(new iu),si=j=0,Nt=[],Ji=m,Ne=L,ys=ot,Xc([z,J])},Jg=function(m){if(Qs[m])Zs.pop().restore();else{var L=new iu,z="Xo"+(Object.keys(zi).length+1).toString(10);L.id=z,Qs[m]=z,zi[z]=L,ke.publish("addFormObject",L),Zs.pop().restore()}};for(var dh in g.beginFormObject=function(m,L,z,J,ot){return If(m,L,z,J,ot),this},g.endFormObject=function(m){return Jg(m),this},g.doFormObject=function(m,L){var z=zi[Qs[m]];return V("q"),V(L.toString()+" cm"),V("/"+z.id+" Do"),V("Q"),this},g.getFormObject=function(m){var L=zi[Qs[m]];return{x:L.x,y:L.y,width:L.width,height:L.height,matrix:L.matrix}},g.save=function(m,L){return m=m||"generated.pdf",(L=L||{}).returnPromise=L.returnPromise||!1,L.returnPromise===!1?(zo(ah(Fr()),m),typeof zo.unload=="function"&&Qt.setTimeout&&setTimeout(zo.unload,911),this):new Promise(function(z,J){try{var ot=zo(ah(Fr()),m);typeof zo.unload=="function"&&Qt.setTimeout&&setTimeout(zo.unload,911),z(ot)}catch(vt){J(vt.message)}})},Kt.API)Kt.API.hasOwnProperty(dh)&&(dh==="events"&&Kt.API.events.length?function(m,L){var z,J,ot;for(ot=L.length-1;ot!==-1;ot--)z=L[ot][0],J=L[ot][1],m.subscribe.apply(m,[z].concat(typeof J=="function"?[J]:J))}(ke,Kt.API.events):g[dh]=Kt.API[dh]);var To=g.getPageWidth=function(m){return(re[m=m||j].mediaBox.topRightX-re[m].mediaBox.bottomLeftX)/jt},nu=g.setPageWidth=function(m,L){re[m].mediaBox.topRightX=L*jt+re[m].mediaBox.bottomLeftX},Na=g.getPageHeight=function(m){return(re[m=m||j].mediaBox.topRightY-re[m].mediaBox.bottomLeftY)/jt},su=g.setPageHeight=function(m,L){re[m].mediaBox.topRightY=L*jt+re[m].mediaBox.bottomLeftY};return g.internal={pdfEscape:Sn,getStyle:Lf,getFont:Xg,getFontSize:Rt,getCharSpace:Kg,getTextColor:Yg,getLineHeight:Cf,getLineHeightFactor:kf,getLineWidth:hh,write:he,getHorizontalCoordinate:sr,getVerticalCoordinate:Mr,getCoordinateString:$g,getVerticalCoordinateString:La,collections:{},newObject:Si,newAdditionalObject:Ql,newObjectDeferred:bi,newObjectDeferredBegin:On,getFilters:er,putStream:es,events:ke,scaleFactor:jt,pageSize:{getWidth:function(){return To(j)},setWidth:function(m){nu(j,m)},getHeight:function(){return Na(j)},setHeight:function(m){su(j,m)}},encryptionOptions:d,encryption:Qi,getEncryptor:Hg,output:oh,getNumberOfPages:Dg,pages:Nt,out:V,f2:ct,f3:I,getPageInfo:Sf,getPageInfoByObjId:ee,getCurrentPageInfo:zg,getPDFVersion:w,Point:uh,Rectangle:eu,Matrix:Yt,hasHotfix:xf},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return To(j)},set:function(m){nu(j,m)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return Na(j)},set:function(m){su(j,m)},enumerable:!0,configurable:!0}),Mg.call(g,Ct),ye="F1",wf(n,e),ke.publish("initialized"),g}Oh.prototype.lsbFirstWord=function(o){return String.fromCharCode(o>>0&255,o>>8&255,o>>16&255,o>>24&255)},Oh.prototype.toHexString=function(o){return o.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Oh.prototype.hexToBytes=function(o){for(var t=[],e=0;e<o.length;e+=2)t.push(String.fromCharCode(parseInt(o.substr(e,2),16)));return t.join("")},Oh.prototype.processOwnerPassword=function(o,t){return i2(e2(t).substr(0,5),o)},Oh.prototype.encryptor=function(o,t){var e=e2(this.encryptionKey+String.fromCharCode(255&o,o>>8&255,o>>16&255,255&t,t>>8&255)).substr(0,10);return function(i){return i2(e,i)}},Qp.prototype.equals=function(o){var t,e="id,objectNumber,equals";if(!o||We(o)!==We(this))return!1;var i=0;for(t in this)if(!(e.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!o.hasOwnProperty(t)||this[t]!==o[t])return!1;i++}for(t in o)o.hasOwnProperty(t)&&e.indexOf(t)<0&&i--;return i===0},Kt.API={events:[]},Kt.version="2.5.2";var li=Kt.API,A2=1,Jl=function(o){return o.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Eh=function(o){return o.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},oe=function(o){return o.toFixed(2)},Ba=function(o){return o.toFixed(5)};li.__acroform__={};var Dn=function(o,t){o.prototype=Object.create(t.prototype),o.prototype.constructor=o},Em=function(o){return o*A2},lr=function(o){var t=new sv,e=zt.internal.getHeight(o)||0,i=zt.internal.getWidth(o)||0;return t.BBox=[0,0,Number(oe(i)),Number(oe(e))],t},_A=li.__acroform__.setBit=function(o,t){if(o=o||0,t=t||0,isNaN(o)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return o|=1<<t},xA=li.__acroform__.clearBit=function(o,t){if(o=o||0,t=t||0,isNaN(o)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return o&=~(1<<t)},SA=li.__acroform__.getBit=function(o,t){if(isNaN(o)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return o&1<<t?1:0},fi=li.__acroform__.getBitForPdf=function(o,t){if(isNaN(o)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return SA(o,t-1)},pi=li.__acroform__.setBitForPdf=function(o,t){if(isNaN(o)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return _A(o,t-1)},gi=li.__acroform__.clearBitForPdf=function(o,t){if(isNaN(o)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return xA(o,t-1)},LA=li.__acroform__.calculateCoordinates=function(o,t){var e=t.internal.getHorizontalCoordinate,i=t.internal.getVerticalCoordinate,n=o[0],s=o[1],r=o[2],a=o[3],l={};return l.lowerLeft_X=e(n)||0,l.lowerLeft_Y=i(s+a)||0,l.upperRight_X=e(n+r)||0,l.upperRight_Y=i(s)||0,[Number(oe(l.lowerLeft_X)),Number(oe(l.lowerLeft_Y)),Number(oe(l.upperRight_X)),Number(oe(l.upperRight_Y))]},NA=function(o){if(o.appearanceStreamContent)return o.appearanceStreamContent;if(o.V||o.DV){var t=[],e=o._V||o.DV,i=n2(o,e),n=o.scope.internal.getFont(o.fontName,o.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(o.scope.__private__.encodeColorString(o.color)),t.push("/"+n+" "+oe(i.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=lr(o);return s.scope=o.scope,s.stream=t.join(`
`),s}},n2=function(o,t){var e=o.fontSize===0?o.maxFontSize:o.fontSize,i={text:"",fontSize:""},n=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");n=o.multiline?n.map(function(I){return I.split(`
`)}):n.map(function(I){return[I]});var s=e,r=zt.internal.getHeight(o)||0;r=r<0?-r:r;var a=zt.internal.getWidth(o)||0;a=a<0?-a:a;var l=function(I,O,$){if(I+1<n.length){var W=O+" "+n[I+1][0];return cp(W,o,$).width<=a-4}return!1};s++;t:for(;s>0;){t="",s--;var u,d,p=cp("3",o,s).height,b=o.multiline?r-s:(r-p)/2,g=b+=2,y=0,w=0,S=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+cp(t,o,s=12).width+", FieldWidth:"+a+`
`;break}for(var A="",E=0,D=0;D<n.length;D++)if(n.hasOwnProperty(D)){var q=!1;if(n[D].length!==1&&S!==n[D].length-1){if((p+2)*(E+2)+2>r)continue t;A+=n[D][S],q=!0,w=D,D--}else{A=(A+=n[D][S]+" ").substr(A.length-1)==" "?A.substr(0,A.length-1):A;var G=parseInt(D),K=l(G,A,s),X=D>=n.length-1;if(K&&!X){A+=" ",S=0;continue}if(K||X){if(X)w=G;else if(o.multiline&&(p+2)*(E+2)+2>r)continue t}else{if(!o.multiline||(p+2)*(E+2)+2>r)continue t;w=G}}for(var H="",et=y;et<=w;et++){var ct=n[et];if(o.multiline){if(et===w){H+=ct[S]+" ",S=(S+1)%ct.length;continue}if(et===y){H+=ct[ct.length-1]+" ";continue}}H+=ct[0]+" "}switch(H=H.substr(H.length-1)==" "?H.substr(0,H.length-1):H,d=cp(H,o,s).width,o.textAlign){case"right":u=a-d-2;break;case"center":u=(a-d)/2;break;case"left":default:u=2}t+=oe(u)+" "+oe(g)+` Td
`,t+="("+Jl(H)+`) Tj
`,t+=-oe(u)+` 0 Td
`,g=-(s+2),d=0,y=q?w:w+1,E++,A=""}break}return i.text=t,i.fontSize=s,i},cp=function(o,t,e){var i=t.scope.internal.getFont(t.fontName,t.fontStyle),n=t.scope.getStringUnitWidth(o,{font:i,fontSize:parseFloat(e),charSpace:0})*parseFloat(e);return{height:t.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(e),charSpace:0})*parseFloat(e)*1.5,width:n}},EA={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},CA=function(o,t){var e={type:"reference",object:o};t.internal.getPageInfo(o.page).pageContext.annotations.find(function(i){return i.type===e.type&&i.object===e.object})===void 0&&t.internal.getPageInfo(o.page).pageContext.annotations.push(e)},PA=function(o,t){for(var e in o)if(o.hasOwnProperty(e)){var i=e,n=o[e];t.internal.newObjectDeferredBegin(n.objId,!0),We(n)==="object"&&typeof n.putStream=="function"&&n.putStream(),delete o[i]}},kA=function(o,t){if(t.scope=o,o.internal!==void 0&&(o.internal.acroformPlugin===void 0||o.internal.acroformPlugin.isInitialized===!1)){if(Ys.FieldNum=0,o.internal.acroformPlugin=JSON.parse(JSON.stringify(EA)),o.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");A2=o.internal.scaleFactor,o.internal.acroformPlugin.acroFormDictionaryRoot=new rv,o.internal.acroformPlugin.acroFormDictionaryRoot.scope=o,o.internal.acroformPlugin.acroFormDictionaryRoot._eventID=o.internal.events.subscribe("postPutResources",function(){(function(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})(o)}),o.internal.events.subscribe("buildDocument",function(){(function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in i)if(i.hasOwnProperty(n)){var s=i[n];s.objId=void 0,s.hasAnnotation&&CA(s,e)}})(o)}),o.internal.events.subscribe("putCatalog",function(){(function(e){if(e.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(o)}),o.internal.events.subscribe("postPutPages",function(e){(function(i,n){var s=!i;for(var r in i||(n.internal.newObjectDeferredBegin(n.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),n.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||n.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(r)){var a=i[r],l=[],u=a.Rect;if(a.Rect&&(a.Rect=LA(a.Rect,n)),n.internal.newObjectDeferredBegin(a.objId,!0),a.DA=zt.createDefaultAppearanceStream(a),We(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=u,a.hasAppearanceStream&&!a.appearanceStreamContent){var d=NA(a);l.push({key:"AP",value:"<</N "+d+">>"}),n.internal.acroformPlugin.xForms.push(d)}if(a.appearanceStreamContent){var p="";for(var b in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(b)){var g=a.appearanceStreamContent[b];if(p+="/"+b+" ",p+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var r in g)if(g.hasOwnProperty(r)){var y=g[r];typeof y=="function"&&(y=y.call(n,a)),p+="/"+r+" "+y+" ",n.internal.acroformPlugin.xForms.indexOf(y)>=0||n.internal.acroformPlugin.xForms.push(y)}}else typeof(y=g)=="function"&&(y=y.call(n,a)),p+="/"+r+" "+y,n.internal.acroformPlugin.xForms.indexOf(y)>=0||n.internal.acroformPlugin.xForms.push(y);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}n.internal.putStream({additionalKeyValues:l,objectId:a.objId}),n.internal.out("endobj")}s&&PA(n.internal.acroformPlugin.xForms,n)})(e,o)}),o.internal.acroformPlugin.isInitialized=!0}},nv=li.__acroform__.arrayToPdfArray=function(o,t,e){var i=function(r){return r};if(Array.isArray(o)){for(var n="[",s=0;s<o.length;s++)switch(s!==0&&(n+=" "),We(o[s])){case"boolean":case"number":case"object":n+=o[s].toString();break;case"string":o[s].substr(0,1)!=="/"?(t!==void 0&&e&&(i=e.internal.getEncryptor(t)),n+="("+Jl(i(o[s].toString()))+")"):n+=o[s].toString()}return n+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},P1=function(o,t,e){var i=function(n){return n};return t!==void 0&&e&&(i=e.internal.getEncryptor(t)),(o=o||"").toString(),o="("+Jl(i(o))+")"},Cr=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(o){this._objId=o}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Cr.prototype.toString=function(){return this.objId+" 0 R"},Cr.prototype.putStream=function(){var o=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:o,objectId:this.objId}),this.scope.internal.out("endobj")},Cr.prototype.getKeyValueListForStream=function(){var o=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var e in t)if(Object.getOwnPropertyDescriptor(this,t[e]).configurable===!1){var i=t[e],n=this[i];n&&(Array.isArray(n)?o.push({key:i,value:nv(n,this.objId,this.scope)}):n instanceof Cr?(n.scope=this.scope,o.push({key:i,value:n.objId+" 0 R"})):typeof n!="function"&&o.push({key:i,value:n}))}return o};var sv=function(){Cr.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var o,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){o=e.trim()},get:function(){return o||null}})};Dn(sv,Cr);var rv=function(){Cr.call(this);var o,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(o){var e=function(i){return i};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+Jl(e(o))+")"}},set:function(e){o=e}})};Dn(rv,Cr);var Ys=function o(){Cr.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute F supplied.');t=A}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!fi(t,3)},set:function(A){A?this.F=pi(t,3):this.F=gi(t,3)}});var e=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return e},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute Ff supplied.');e=A}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(A){i=A!==void 0?A:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(A){i[0]=A}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(A){i[1]=A}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(A){i[2]=A}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(A){i[3]=A}});var n="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return n},set:function(A){switch(A){case"/Btn":case"/Tx":case"/Ch":case"/Sig":n=A;break;default:throw new Error('Invalid value "'+A+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Zp)return;s="FieldObject"+o.FieldNum++}var A=function(E){return E};return this.scope&&(A=this.scope.internal.getEncryptor(this.objId)),"("+Jl(A(s))+")"},set:function(A){s=A.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(A){s=A}});var r="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return r},set:function(A){r=A}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(A){a=A}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(A){l=A}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/A2:u},set:function(A){u=A}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(A){d=A}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Zp||this instanceof zl))return P1(p,this.objId,this.scope)},set:function(A){A=A.toString(),p=A}});var b=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof Hi?b:P1(b,this.objId,this.scope)},set:function(A){A=A.toString(),b=this instanceof Hi?A:A.substr(0,1)==="("?Eh(A.substr(1,A.length-2)):Eh(A)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Hi?Eh(b.substr(1,b.length-1)):b},set:function(A){A=A.toString(),b=this instanceof Hi?"/"+A:A}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(A){this.V=A}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Hi?g:P1(g,this.objId,this.scope)},set:function(A){A=A.toString(),g=this instanceof Hi?A:A.substr(0,1)==="("?Eh(A.substr(1,A.length-2)):Eh(A)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Hi?Eh(g.substr(1,g.length-1)):g},set:function(A){A=A.toString(),g=this instanceof Hi?"/"+A:A}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(A){A=!!A,w=A}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(A){y=A}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,1)},set:function(A){A?this.Ff=pi(this.Ff,1):this.Ff=gi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,2)},set:function(A){A?this.Ff=pi(this.Ff,2):this.Ff=gi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,3)},set:function(A){A?this.Ff=pi(this.Ff,3):this.Ff=gi(this.Ff,3)}});var S=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(S!==null)return S},set:function(A){if([0,1,2].indexOf(A)===-1)throw new Error('Invalid value "'+A+'" for attribute Q supplied.');S=A}}),Object.defineProperty(this,"textAlign",{get:function(){var A;switch(S){case 0:default:A="left";break;case 1:A="center";break;case 2:A="right"}return A},configurable:!0,enumerable:!0,set:function(A){switch(A){case"right":case 2:S=2;break;case"center":case 1:S=1;break;case"left":case 0:default:S=0}}})};Dn(Ys,Cr);var Uh=function(){Ys.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var o=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return o},set:function(e){o=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return o},set:function(e){o=e}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return nv(t,this.objId,this.scope)},set:function(e){var i,n;n=[],typeof(i=e)=="string"&&(n=function(s,r,a){a||(a=1);for(var l,u=[];l=r.exec(s);)u.push(l[a]);return u}(i,/\((.*?)\)/g)),t=n}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,i){for(i=i||!1,e=(e=e||"").toString();t.indexOf(e)!==-1&&(t.splice(t.indexOf(e),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,18)},set:function(e){e?this.Ff=pi(this.Ff,18):this.Ff=gi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,19)},set:function(e){this.combo===!0&&(e?this.Ff=pi(this.Ff,19):this.Ff=gi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,20)},set:function(e){e?(this.Ff=pi(this.Ff,20),t.sort()):this.Ff=gi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,22)},set:function(e){e?this.Ff=pi(this.Ff,22):this.Ff=gi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,23)},set:function(e){e?this.Ff=pi(this.Ff,23):this.Ff=gi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,27)},set:function(e){e?this.Ff=pi(this.Ff,27):this.Ff=gi(this.Ff,27)}}),this.hasAppearanceStream=!1};Dn(Uh,Ys);var Wh=function(){Uh.call(this),this.fontName="helvetica",this.combo=!1};Dn(Wh,Uh);var Vh=function(){Wh.call(this),this.combo=!0};Dn(Vh,Wh);var Up=function(){Vh.call(this),this.edit=!0};Dn(Up,Vh);var Hi=function(){Ys.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,15)},set:function(e){e?this.Ff=pi(this.Ff,15):this.Ff=gi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,16)},set:function(e){e?this.Ff=pi(this.Ff,16):this.Ff=gi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,17)},set:function(e){e?this.Ff=pi(this.Ff,17):this.Ff=gi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,26)},set:function(e){e?this.Ff=pi(this.Ff,26):this.Ff=gi(this.Ff,26)}});var o,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(s){return s};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var i,n=[];for(i in n.push("<<"),t)n.push("/"+i+" ("+Jl(e(t[i]))+")");return n.push(">>"),n.join(`
`)}},set:function(e){We(e)==="object"&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){typeof e=="string"&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return o},set:function(e){o=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return o.substr(1,o.length-1)},set:function(e){o="/"+e}})};Dn(Hi,Ys);var Wp=function(){Hi.call(this),this.pushButton=!0};Dn(Wp,Hi);var Gh=function(){Hi.call(this),this.radio=!0,this.pushButton=!1;var o=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return o},set:function(t){o=t!==void 0?t:[]}})};Dn(Gh,Hi);var Zp=function(){var o,t;Ys.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return o},set:function(n){o=n}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(n){t=n}});var e,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(a){return a};this.scope&&(n=this.scope.internal.getEncryptor(this.objId));var s,r=[];for(s in r.push("<<"),i)r.push("/"+s+" ("+Jl(n(i[s]))+")");return r.push(">>"),r.join(`
`)},set:function(n){We(n)==="object"&&(i=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(n){typeof n=="string"&&(i.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=zt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Dn(Zp,Ys),Gh.prototype.setAppearance=function(o){if(!("createAppearanceStream"in o)||!("getCA"in o))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var e=this.Kids[t];e.appearanceStreamContent=o.createAppearanceStream(e.optionName),e.caption=o.getCA()}},Gh.prototype.createOption=function(o){var t=new Zp;return t.Parent=this,t.optionName=o,this.Kids.push(t),TA.call(this.scope,t),t};var Vp=function(){Hi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=zt.CheckBox.createAppearanceStream()};Dn(Vp,Hi);var zl=function(){Ys.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,13)},set:function(t){t?this.Ff=pi(this.Ff,13):this.Ff=gi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,21)},set:function(t){t?this.Ff=pi(this.Ff,21):this.Ff=gi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,23)},set:function(t){t?this.Ff=pi(this.Ff,23):this.Ff=gi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,24)},set:function(t){t?this.Ff=pi(this.Ff,24):this.Ff=gi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,25)},set:function(t){t?this.Ff=pi(this.Ff,25):this.Ff=gi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,26)},set:function(t){t?this.Ff=pi(this.Ff,26):this.Ff=gi(this.Ff,26)}});var o=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return o},set:function(t){o=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return o},set:function(t){Number.isInteger(t)&&(o=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Dn(zl,Ys);var Gp=function(){zl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!fi(this.Ff,14)},set:function(o){o?this.Ff=pi(this.Ff,14):this.Ff=gi(this.Ff,14)}}),this.password=!0};Dn(Gp,zl);var zt={CheckBox:{createAppearanceStream:function(){return{N:{On:zt.CheckBox.YesNormal},D:{On:zt.CheckBox.YesPushDown,Off:zt.CheckBox.OffPushDown}}},YesPushDown:function(o){var t=lr(o);t.scope=o.scope;var e=[],i=o.scope.internal.getFont(o.fontName,o.fontStyle).id,n=o.scope.__private__.encodeColorString(o.color),s=n2(o,o.caption);return e.push("0.749023 g"),e.push("0 0 "+oe(zt.internal.getWidth(o))+" "+oe(zt.internal.getHeight(o))+" re"),e.push("f"),e.push("BMC"),e.push("q"),e.push("0 0 1 rg"),e.push("/"+i+" "+oe(s.fontSize)+" Tf "+n),e.push("BT"),e.push(s.text),e.push("ET"),e.push("Q"),e.push("EMC"),t.stream=e.join(`
`),t},YesNormal:function(o){var t=lr(o);t.scope=o.scope;var e=o.scope.internal.getFont(o.fontName,o.fontStyle).id,i=o.scope.__private__.encodeColorString(o.color),n=[],s=zt.internal.getHeight(o),r=zt.internal.getWidth(o),a=n2(o,o.caption);return n.push("1 g"),n.push("0 0 "+oe(r)+" "+oe(s)+" re"),n.push("f"),n.push("q"),n.push("0 0 1 rg"),n.push("0 0 "+oe(r-1)+" "+oe(s-1)+" re"),n.push("W"),n.push("n"),n.push("0 g"),n.push("BT"),n.push("/"+e+" "+oe(a.fontSize)+" Tf "+i),n.push(a.text),n.push("ET"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(o){var t=lr(o);t.scope=o.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+oe(zt.internal.getWidth(o))+" "+oe(zt.internal.getHeight(o))+" re"),e.push("f"),t.stream=e.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(o){var t={D:{Off:zt.RadioButton.Circle.OffPushDown},N:{}};return t.N[o]=zt.RadioButton.Circle.YesNormal,t.D[o]=zt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(o){var t=lr(o);t.scope=o.scope;var e=[],i=zt.internal.getWidth(o)<=zt.internal.getHeight(o)?zt.internal.getWidth(o)/4:zt.internal.getHeight(o)/4;i=Number((.9*i).toFixed(5));var n=zt.internal.Bezier_C,s=Number((i*n).toFixed(5));return e.push("q"),e.push("1 0 0 1 "+Ba(zt.internal.getWidth(o)/2)+" "+Ba(zt.internal.getHeight(o)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),e.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),e.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),e.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(o){var t=lr(o);t.scope=o.scope;var e=[],i=zt.internal.getWidth(o)<=zt.internal.getHeight(o)?zt.internal.getWidth(o)/4:zt.internal.getHeight(o)/4;i=Number((.9*i).toFixed(5));var n=Number((2*i).toFixed(5)),s=Number((n*zt.internal.Bezier_C).toFixed(5)),r=Number((i*zt.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+Ba(zt.internal.getWidth(o)/2)+" "+Ba(zt.internal.getHeight(o)/2)+" cm"),e.push(n+" 0 m"),e.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),e.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),e.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),e.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),e.push("f"),e.push("Q"),e.push("0 g"),e.push("q"),e.push("1 0 0 1 "+Ba(zt.internal.getWidth(o)/2)+" "+Ba(zt.internal.getHeight(o)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+r+" "+r+" "+i+" 0 "+i+" c"),e.push("-"+r+" "+i+" -"+i+" "+r+" -"+i+" 0 c"),e.push("-"+i+" -"+r+" -"+r+" -"+i+" 0 -"+i+" c"),e.push(r+" -"+i+" "+i+" -"+r+" "+i+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},OffPushDown:function(o){var t=lr(o);t.scope=o.scope;var e=[],i=zt.internal.getWidth(o)<=zt.internal.getHeight(o)?zt.internal.getWidth(o)/4:zt.internal.getHeight(o)/4;i=Number((.9*i).toFixed(5));var n=Number((2*i).toFixed(5)),s=Number((n*zt.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+Ba(zt.internal.getWidth(o)/2)+" "+Ba(zt.internal.getHeight(o)/2)+" cm"),e.push(n+" 0 m"),e.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),e.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),e.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),e.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t}},Cross:{createAppearanceStream:function(o){var t={D:{Off:zt.RadioButton.Cross.OffPushDown},N:{}};return t.N[o]=zt.RadioButton.Cross.YesNormal,t.D[o]=zt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(o){var t=lr(o);t.scope=o.scope;var e=[],i=zt.internal.calculateCross(o);return e.push("q"),e.push("1 1 "+oe(zt.internal.getWidth(o)-2)+" "+oe(zt.internal.getHeight(o)-2)+" re"),e.push("W"),e.push("n"),e.push(oe(i.x1.x)+" "+oe(i.x1.y)+" m"),e.push(oe(i.x2.x)+" "+oe(i.x2.y)+" l"),e.push(oe(i.x4.x)+" "+oe(i.x4.y)+" m"),e.push(oe(i.x3.x)+" "+oe(i.x3.y)+" l"),e.push("s"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(o){var t=lr(o);t.scope=o.scope;var e=zt.internal.calculateCross(o),i=[];return i.push("0.749023 g"),i.push("0 0 "+oe(zt.internal.getWidth(o))+" "+oe(zt.internal.getHeight(o))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+oe(zt.internal.getWidth(o)-2)+" "+oe(zt.internal.getHeight(o)-2)+" re"),i.push("W"),i.push("n"),i.push(oe(e.x1.x)+" "+oe(e.x1.y)+" m"),i.push(oe(e.x2.x)+" "+oe(e.x2.y)+" l"),i.push(oe(e.x4.x)+" "+oe(e.x4.y)+" m"),i.push(oe(e.x3.x)+" "+oe(e.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(o){var t=lr(o);t.scope=o.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+oe(zt.internal.getWidth(o))+" "+oe(zt.internal.getHeight(o))+" re"),e.push("f"),t.stream=e.join(`
`),t}}},createDefaultAppearanceStream:function(o){var t=o.scope.internal.getFont(o.fontName,o.fontStyle).id,e=o.scope.__private__.encodeColorString(o.color);return"/"+t+" "+o.fontSize+" Tf "+e}};zt.internal={Bezier_C:.551915024494,calculateCross:function(o){var t=zt.internal.getWidth(o),e=zt.internal.getHeight(o),i=Math.min(t,e);return{x1:{x:(t-i)/2,y:(e-i)/2+i},x2:{x:(t-i)/2+i,y:(e-i)/2},x3:{x:(t-i)/2,y:(e-i)/2},x4:{x:(t-i)/2+i,y:(e-i)/2+i}}}},zt.internal.getWidth=function(o){var t=0;return We(o)==="object"&&(t=Em(o.Rect[2])),t},zt.internal.getHeight=function(o){var t=0;return We(o)==="object"&&(t=Em(o.Rect[3])),t};var TA=li.addField=function(o){if(kA(this,o),!(o instanceof Ys))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=o).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),o.page=o.scope.internal.getCurrentPageInfo().pageNumber,this};li.AcroFormChoiceField=Uh,li.AcroFormListBox=Wh,li.AcroFormComboBox=Vh,li.AcroFormEditBox=Up,li.AcroFormButton=Hi,li.AcroFormPushButton=Wp,li.AcroFormRadioButton=Gh,li.AcroFormCheckBox=Vp,li.AcroFormTextField=zl,li.AcroFormPasswordField=Gp,li.AcroFormAppearance=zt,li.AcroForm={ChoiceField:Uh,ListBox:Wh,ComboBox:Vh,EditBox:Up,Button:Hi,PushButton:Wp,RadioButton:Gh,CheckBox:Vp,TextField:zl,PasswordField:Gp,Appearance:zt},Kt.AcroForm={ChoiceField:Uh,ListBox:Wh,ComboBox:Vh,EditBox:Up,Button:Hi,PushButton:Wp,RadioButton:Gh,CheckBox:Vp,TextField:zl,PasswordField:Gp,Appearance:zt};function av(o){return o.reduce(function(t,e,i){return t[e]=i,t},{})}(function(o){o.__addimage__={};var t="UNKNOWN",e={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=o.__addimage__.getImageFileTypeByImageData=function(I,O){var $,W,ht,lt,at,it=t;if((O=O||t)==="RGBA"||I.data!==void 0&&I.data instanceof Uint8ClampedArray&&"height"in I&&"width"in I)return"RGBA";if(K(I))for(at in e)for(ht=e[at],$=0;$<ht.length;$+=1){for(lt=!0,W=0;W<ht[$].length;W+=1)if(ht[$][W]!==void 0&&ht[$][W]!==I[W]){lt=!1;break}if(lt===!0){it=at;break}}else for(at in e)for(ht=e[at],$=0;$<ht.length;$+=1){for(lt=!0,W=0;W<ht[$].length;W+=1)if(ht[$][W]!==void 0&&ht[$][W]!==I.charCodeAt(W)){lt=!1;break}if(lt===!0){it=at;break}}return it===t&&O!==t&&(it=O),it},n=function I(O){for(var $=this.internal.write,W=this.internal.putStream,ht=(0,this.internal.getFilters)();ht.indexOf("FlateEncode")!==-1;)ht.splice(ht.indexOf("FlateEncode"),1);O.objectId=this.internal.newObject();var lt=[];if(lt.push({key:"Type",value:"/XObject"}),lt.push({key:"Subtype",value:"/Image"}),lt.push({key:"Width",value:O.width}),lt.push({key:"Height",value:O.height}),O.colorSpace===S.INDEXED?lt.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(O.palette.length/3-1)+" "+("sMask"in O&&O.sMask!==void 0?O.objectId+2:O.objectId+1)+" 0 R]"}):(lt.push({key:"ColorSpace",value:"/"+O.colorSpace}),O.colorSpace===S.DEVICE_CMYK&&lt.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),lt.push({key:"BitsPerComponent",value:O.bitsPerComponent}),"decodeParameters"in O&&O.decodeParameters!==void 0&&lt.push({key:"DecodeParms",value:"<<"+O.decodeParameters+">>"}),"transparency"in O&&Array.isArray(O.transparency)){for(var at="",it=0,mt=O.transparency.length;it<mt;it++)at+=O.transparency[it]+" "+O.transparency[it]+" ";lt.push({key:"Mask",value:"["+at+"]"})}O.sMask!==void 0&&lt.push({key:"SMask",value:O.objectId+1+" 0 R"});var ut=O.filter!==void 0?["/"+O.filter]:void 0;if(W({data:O.data,additionalKeyValues:lt,alreadyAppliedFilters:ut,objectId:O.objectId}),$("endobj"),"sMask"in O&&O.sMask!==void 0){var wt="/Predictor "+O.predictor+" /Colors 1 /BitsPerComponent "+O.bitsPerComponent+" /Columns "+O.width,C={width:O.width,height:O.height,colorSpace:"DeviceGray",bitsPerComponent:O.bitsPerComponent,decodeParameters:wt,data:O.sMask};"filter"in O&&(C.filter=O.filter),I.call(this,C)}if(O.colorSpace===S.INDEXED){var j=this.internal.newObject();W({data:H(new Uint8Array(O.palette)),objectId:j}),$("endobj")}},s=function(){var I=this.internal.collections.addImage_images;for(var O in I)n.call(this,I[O])},r=function(){var I,O=this.internal.collections.addImage_images,$=this.internal.write;for(var W in O)$("/I"+(I=O[W]).index,I.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",r))},l=function(){var I=this.internal.collections.addImage_images;return a.call(this),I},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(I){return typeof o["process"+I.toUpperCase()]=="function"},p=function(I){return We(I)==="object"&&I.nodeType===1},b=function(I,O){if(I.nodeName==="IMG"&&I.hasAttribute("src")){var $=""+I.getAttribute("src");if($.indexOf("data:image/")===0)return Wu(unescape($).split("base64,").pop());var W=o.loadFile($,!0);if(W!==void 0)return W}if(I.nodeName==="CANVAS"){if(I.width===0||I.height===0)throw new Error("Given canvas must have data. Canvas width: "+I.width+", height: "+I.height);var ht;switch(O){case"PNG":ht="image/png";break;case"WEBP":ht="image/webp";break;case"JPEG":case"JPG":default:ht="image/jpeg"}return Wu(I.toDataURL(ht,1).split("base64,").pop())}},g=function(I){var O=this.internal.collections.addImage_images;if(O){for(var $ in O)if(I===O[$].alias)return O[$]}},y=function(I,O,$){return I||O||(I=-96,O=-96),I<0&&(I=-1*$.width*72/I/this.internal.scaleFactor),O<0&&(O=-1*$.height*72/O/this.internal.scaleFactor),I===0&&(I=O*$.width/$.height),O===0&&(O=I*$.height/$.width),[I,O]},w=function(I,O,$,W,ht,lt){var at=y.call(this,$,W,ht),it=this.internal.getCoordinateString,mt=this.internal.getVerticalCoordinateString,ut=l.call(this);if($=at[0],W=at[1],ut[ht.index]=ht,lt){lt*=Math.PI/180;var wt=Math.cos(lt),C=Math.sin(lt),j=function(Y){return Y.toFixed(4)},U=[j(wt),j(C),j(-1*C),j(wt),0,0,"cm"]}this.internal.write("q"),lt?(this.internal.write([1,"0","0",1,it(I),mt(O+W),"cm"].join(" ")),this.internal.write(U.join(" ")),this.internal.write([it($),"0","0",it(W),"0","0","cm"].join(" "))):this.internal.write([it($),"0","0",it(W),it(I),mt(O+W),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ht.index+" Do"),this.internal.write("Q")},S=o.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};o.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var A=o.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},E=o.__addimage__.sHashCode=function(I){var O,$,W=0;if(typeof I=="string")for($=I.length,O=0;O<$;O++)W=(W<<5)-W+I.charCodeAt(O),W|=0;else if(K(I))for($=I.byteLength/2,O=0;O<$;O++)W=(W<<5)-W+I[O],W|=0;return W},D=o.__addimage__.validateStringAsBase64=function(I){(I=I||"").toString().trim();var O=!0;return I.length===0&&(O=!1),I.length%4!=0&&(O=!1),/^[A-Za-z0-9+/]+$/.test(I.substr(0,I.length-2))===!1&&(O=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(I.substr(-2))===!1&&(O=!1),O},q=o.__addimage__.extractImageFromDataUrl=function(I){var O=(I=I||"").split("base64,"),$=null;if(O.length===2){var W=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(O[0]);Array.isArray(W)&&($={mimeType:W[1],charset:W[2],data:O[1]})}return $},G=o.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};o.__addimage__.isArrayBuffer=function(I){return G()&&I instanceof ArrayBuffer};var K=o.__addimage__.isArrayBufferView=function(I){return G()&&typeof Uint32Array<"u"&&(I instanceof Int8Array||I instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&I instanceof Uint8ClampedArray||I instanceof Int16Array||I instanceof Uint16Array||I instanceof Int32Array||I instanceof Uint32Array||I instanceof Float32Array||I instanceof Float64Array)},X=o.__addimage__.binaryStringToUint8Array=function(I){for(var O=I.length,$=new Uint8Array(O),W=0;W<O;W++)$[W]=I.charCodeAt(W);return $},H=o.__addimage__.arrayBufferToBinaryString=function(I){for(var O="",$=K(I)?I:new Uint8Array(I),W=0;W<$.length;W+=8192)O+=String.fromCharCode.apply(null,$.subarray(W,W+8192));return O};o.addImage=function(){var I,O,$,W,ht,lt,at,it,mt;if(typeof arguments[1]=="number"?(O=t,$=arguments[1],W=arguments[2],ht=arguments[3],lt=arguments[4],at=arguments[5],it=arguments[6],mt=arguments[7]):(O=arguments[1],$=arguments[2],W=arguments[3],ht=arguments[4],lt=arguments[5],at=arguments[6],it=arguments[7],mt=arguments[8]),We(I=arguments[0])==="object"&&!p(I)&&"imageData"in I){var ut=I;I=ut.imageData,O=ut.format||O||t,$=ut.x||$||0,W=ut.y||W||0,ht=ut.w||ut.width||ht,lt=ut.h||ut.height||lt,at=ut.alias||at,it=ut.compression||it,mt=ut.rotation||ut.angle||mt}var wt=this.internal.getFilters();if(it===void 0&&wt.indexOf("FlateEncode")!==-1&&(it="SLOW"),isNaN($)||isNaN(W))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var C=et.call(this,I,O,at,it);return w.call(this,$,W,ht,lt,C,mt),this};var et=function(I,O,$,W){var ht,lt,at;if(typeof I=="string"&&i(I)===t){I=unescape(I);var it=ct(I,!1);(it!==""||(it=o.loadFile(I,!0))!==void 0)&&(I=it)}if(p(I)&&(I=b(I,O)),O=i(I,O),!d(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(((at=$)==null||at.length===0)&&($=function(mt){return typeof mt=="string"||K(mt)?E(mt):K(mt.data)?E(mt.data):null}(I)),(ht=g.call(this,$))||(G()&&(I instanceof Uint8Array||O==="RGBA"||(lt=I,I=X(I))),ht=this["process"+O.toUpperCase()](I,u.call(this),$,function(mt){return mt&&typeof mt=="string"&&(mt=mt.toUpperCase()),mt in o.image_compression?mt:A.NONE}(W),lt)),!ht)throw new Error("An unknown error occurred whilst processing the image.");return ht},ct=o.__addimage__.convertBase64ToBinaryString=function(I,O){var $;O=typeof O!="boolean"||O;var W,ht="";if(typeof I=="string"){W=($=q(I))!==null?$.data:I;try{ht=Wu(W)}catch(lt){if(O)throw D(W)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+lt.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ht};o.getImageProperties=function(I){var O,$,W="";if(p(I)&&(I=b(I)),typeof I=="string"&&i(I)===t&&((W=ct(I,!1))===""&&(W=o.loadFile(I)||""),I=W),$=i(I),!d($))throw new Error("addImage does not support files of type '"+$+"', please ensure that a plugin for '"+$+"' support is added.");if(!G()||I instanceof Uint8Array||(I=X(I)),!(O=this["process"+$.toUpperCase()](I)))throw new Error("An unknown error occurred whilst processing the image");return O.fileType=$,O}})(Kt.API),function(o){var t=function(e){if(e!==void 0&&e!="")return!0};Kt.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),o.events.push(["putPage",function(e){for(var i,n,s,r=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(e.objId),u=e.pageContext.annotations,d=!1,p=0;p<u.length&&!d;p++)switch((i=u[p]).type){case"link":(t(i.options.url)||t(i.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var b=0;b<u.length;b++){i=u[b];var g=this.internal.pdfEscape,y=this.internal.getEncryptor(e.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),S=this.internal.newAdditionalObject(),A=this.internal.getEncryptor(w.objId),E=i.title||"Note";s="<</Type /Annot /Subtype /Text "+(n="/Rect ["+r(i.bounds.x)+" "+a(i.bounds.y+i.bounds.h)+" "+r(i.bounds.x+i.bounds.w)+" "+a(i.bounds.y)+"] ")+"/Contents ("+g(A(i.contents))+")",s+=" /Popup "+S.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+g(A(E))+") >>",w.content=s;var D=w.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(n="/Rect ["+r(i.bounds.x+30)+" "+a(i.bounds.y+i.bounds.h)+" "+r(i.bounds.x+i.bounds.w+30)+" "+a(i.bounds.y)+"] ")+" /Parent "+D,i.open&&(s+=" /Open true"),s+=" >>",S.content=s,this.internal.write(w.objId,"0 R",S.objId,"0 R");break;case"freetext":n="/Rect ["+r(i.bounds.x)+" "+a(i.bounds.y)+" "+r(i.bounds.x+i.bounds.w)+" "+a(i.bounds.y+i.bounds.h)+"] ";var q=i.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+n+"/Contents ("+g(y(i.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+q+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(i.options.name){var G=this.annotations._nameMap[i.options.name];i.options.pageNumber=G.page,i.options.top=G.y}else i.options.top||(i.options.top=0);if(n="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",s="",i.options.url)s="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /A <</S /URI /URI ("+g(y(i.options.url))+") >>";else if(i.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,s+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var K=a(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),s+=" /XYZ "+i.options.left+" "+K+" "+i.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),o.createAnnotation=function(e){var i=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":i.pageContext.annotations.push(e)}},o.link=function(e,i,n,s,r){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(e),y:u(i),w:l(e+n),h:u(i+s)},options:r,type:"link"})},o.textWithLink=function(e,i,n,s){var r,a,l=this.getTextWidth(e),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var d=this.splitTextToSize(e,a).length;r=Math.ceil(u*d)}else a=l,r=u;return this.text(e,i,n,s),n+=.2*u,s.align==="center"&&(i-=l/2),s.align==="right"&&(i-=l),this.link(i,n-u,a,r,s),l},o.getTextWidth=function(e){var i=this.internal.getFontSize();return this.getStringUnitWidth(e)*i/this.internal.scaleFactor}}(Kt.API),function(o){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},e={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},n=[1570,1571,1573,1575];o.__arabicParser__={};var s=o.__arabicParser__.isInArabicSubstitutionA=function(w){return t[w.charCodeAt(0)]!==void 0},r=o.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},a=o.__arabicParser__.isArabicEndLetter=function(w){return r(w)&&s(w)&&t[w.charCodeAt(0)].length<=2},l=o.__arabicParser__.isArabicAlfLetter=function(w){return r(w)&&n.indexOf(w.charCodeAt(0))>=0};o.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return r(w)&&s(w)&&t[w.charCodeAt(0)].length>=1};var u=o.__arabicParser__.arabicLetterHasFinalForm=function(w){return r(w)&&s(w)&&t[w.charCodeAt(0)].length>=2};o.__arabicParser__.arabicLetterHasInitialForm=function(w){return r(w)&&s(w)&&t[w.charCodeAt(0)].length>=3};var d=o.__arabicParser__.arabicLetterHasMedialForm=function(w){return r(w)&&s(w)&&t[w.charCodeAt(0)].length==4},p=o.__arabicParser__.resolveLigatures=function(w){var S=0,A=e,E="",D=0;for(S=0;S<w.length;S+=1)A[w.charCodeAt(S)]!==void 0?(D++,typeof(A=A[w.charCodeAt(S)])=="number"&&(E+=String.fromCharCode(A),A=e,D=0),S===w.length-1&&(A=e,E+=w.charAt(S-(D-1)),S-=D-1,D=0)):(A=e,E+=w.charAt(S-D),S-=D,D=0);return E};o.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&i[w.charCodeAt(0)]!==void 0};var b=o.__arabicParser__.getCorrectForm=function(w,S,A){return r(w)?s(w)===!1?-1:!u(w)||!r(S)&&!r(A)||!r(A)&&a(S)||a(w)&&!r(S)||a(w)&&l(S)||a(w)&&a(S)?0:d(w)&&r(S)&&!a(S)&&r(A)&&u(A)?3:a(w)||!r(A)?1:2:-1},g=function(w){var S=0,A=0,E=0,D="",q="",G="",K=(w=w||"").split("\\s+"),X=[];for(S=0;S<K.length;S+=1){for(X.push(""),A=0;A<K[S].length;A+=1)D=K[S][A],q=K[S][A-1],G=K[S][A+1],r(D)?(E=b(D,q,G),X[S]+=E!==-1?String.fromCharCode(t[D.charCodeAt(0)][E]):D):X[S]+=D;X[S]=p(X[S])}return X.join(" ")},y=o.__arabicParser__.processArabic=o.processArabic=function(){var w,S=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,A=[];if(Array.isArray(S)){var E=0;for(A=[],E=0;E<S.length;E+=1)Array.isArray(S[E])?A.push([g(S[E][0]),S[E][1],S[E][2]]):A.push([g(S[E])]);w=A}else w=g(S);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};o.events.push(["preProcessText",y])}(Kt.API),Kt.API.autoPrint=function(o){var t;switch((o=o||{}).variant=o.variant||"non-conform",o.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(o){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(a){e=a}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(a){n=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var r={};Object.defineProperty(this,"style",{get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,i){var n;if((e=e||"2d")!=="2d")return null;for(n in i)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=i[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},o.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Kt.API),function(o){var t={left:0,top:0,bottom:0,right:0},e=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),n.call(this))},n=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(w){l=w}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(w){u=w}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(w){d=w}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(w){p=w}});var b=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return b},set:function(w){b=w}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(w){g=w}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(w){y=w}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},o.setHeaderFunction=function(l){return i.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},o.getTextDimensions=function(l,u){i.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),p=u.font||this.getFont(),b=u.scaleFactor||this.internal.scaleFactor,g=0,y=0,w=0,S=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var A=u.maxWidth;A>0?typeof l=="string"?l=this.splitTextToSize(l,A):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(D,q){return D.concat(S.splitTextToSize(q,A))},[])):l=Array.isArray(l)?l:[l];for(var E=0;E<l.length;E++)g<(w=this.getStringUnitWidth(l[E],{font:p})*d)&&(g=w);return g!==0&&(y=l.length),{w:g/=b,h:Math.max((y*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/b,0)}},o.cellAddPage=function(){i.call(this),this.addPage();var l=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var r=o.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,p=this.internal.__cell__.margins||t,b=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,g&&b&&(this.printHeaderRow(l.lineNumber,!0),l.y+=b[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,e===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};o.table=function(l,u,d,p,b){if(i.call(this),!d)throw new Error("No data for PDF table.");var g,y,w,S,A=[],E=[],D=[],q={},G={},K=[],X=[],H=(b=b||{}).autoSize||!1,et=b.printHeaders!==!1,ct=b.css&&b.css["font-size"]!==void 0?16*b.css["font-size"]:b.fontSize||12,I=b.margins||Object.assign({width:this.getPageWidth()},t),O=typeof b.padding=="number"?b.padding:3,$=b.headerBackgroundColor||"#c8c8c8",W=b.headerTextColor||"#000";if(n.call(this),this.internal.__cell__.printHeaders=et,this.internal.__cell__.margins=I,this.internal.__cell__.table_font_size=ct,this.internal.__cell__.padding=O,this.internal.__cell__.headerBackgroundColor=$,this.internal.__cell__.headerTextColor=W,this.setFontSize(ct),p==null)E=A=Object.keys(d[0]),D=A.map(function(){return"left"});else if(Array.isArray(p)&&We(p[0])==="object")for(A=p.map(function(ut){return ut.name}),E=p.map(function(ut){return ut.prompt||ut.name||""}),D=p.map(function(ut){return ut.align||"left"}),g=0;g<p.length;g+=1)G[p[g].name]=p[g].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(E=A=p,D=A.map(function(){return"left"}));if(H||Array.isArray(p)&&typeof p[0]=="string")for(g=0;g<A.length;g+=1){for(q[S=A[g]]=d.map(function(ut){return ut[S]}),this.setFont(void 0,"bold"),K.push(this.getTextDimensions(E[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=q[S],this.setFont(void 0,"normal"),w=0;w<y.length;w+=1)K.push(this.getTextDimensions(y[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);G[S]=Math.max.apply(null,K)+O+O,K=[]}if(et){var ht={};for(g=0;g<A.length;g+=1)ht[A[g]]={},ht[A[g]].text=E[g],ht[A[g]].align=D[g];var lt=a.call(this,ht,G);X=A.map(function(ut){return new s(l,u,G[ut],lt,ht[ut].text,void 0,ht[ut].align)}),this.setTableHeaderRow(X),this.printHeaderRow(1,!1)}var at=p.reduce(function(ut,wt){return ut[wt.name]=wt.align,ut},{});for(g=0;g<d.length;g+=1){"rowStart"in b&&b.rowStart instanceof Function&&b.rowStart({row:g,data:d[g]},this);var it=a.call(this,d[g],G);for(w=0;w<A.length;w+=1){var mt=d[g][A[w]];"cellStart"in b&&b.cellStart instanceof Function&&b.cellStart({row:g,col:w,data:mt},this),r.call(this,new s(l,u,G[A[w]],it,mt,g+2,at[A[w]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var a=function(l,u){var d=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,b=this.internal.scaleFactor;return Object.keys(l).map(function(g){var y=l[g];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,u[g]-d-d)},this).map(function(g){return this.getLineHeightFactor()*g.length*p/b+d+d},this).reduce(function(g,y){return Math.max(g,y)},0)};o.setTableHeaderRow=function(l){i.call(this),this.internal.__cell__.tableHeaderRow=l},o.printHeaderRow=function(l,u){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(e=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var b=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){d=this.internal.__cell__.tableHeaderRow[g].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,b.push(d)),d.lineNumber=l;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),r.call(this,d),this.setTextColor(y)}b.length>0&&this.setTableHeaderRow(b),this.setFont(void 0,"normal"),e=!1}}(Kt.API);var ov={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},lv=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],s2=av(lv),hv=[100,200,300,400,500,600,700,800,900],IA=av(hv);function r2(o){var t=o.family.replace(/"|'/g,"").toLowerCase(),e=function(s){return ov[s=s||"normal"]?s:"normal"}(o.style),i=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(o.weight),n=function(s){return typeof s2[s=s||"normal"]=="number"?s:"normal"}(o.stretch);return{family:t,style:e,weight:i,stretch:n,src:o.src||[],ref:o.ref||{name:t,style:[n,e,i].join(" ")}}}function Cm(o,t,e,i){var n;for(n=e;n>=0&&n<t.length;n+=i)if(o[t[n]])return o[t[n]];for(n=e;n>=0&&n<t.length;n-=i)if(o[t[n]])return o[t[n]]}var FA={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Pm={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function km(o){return[o.stretch,o.style,o.weight,o.family].join(" ")}function MA(o,t,e){for(var i=(e=e||{}).defaultFontFamily||"times",n=Object.assign({},FA,e.genericFontFamilies||{}),s=null,r=null,a=0;a<t.length;++a)if(n[(s=r2(t[a])).family]&&(s.family=n[s.family]),o.hasOwnProperty(s.family)){r=o[s.family];break}if(!(r=r||o[i]))throw new Error("Could not find a font-family for the rule '"+km(s)+"' and default family '"+i+"'.");if(r=function(l,u){if(u[l])return u[l];var d=s2[l],p=d<=s2.normal?-1:1,b=Cm(u,lv,d,p);if(!b)throw new Error("Could not find a matching font-stretch value for "+l);return b}(s.stretch,r),r=function(l,u){if(u[l])return u[l];for(var d=ov[l],p=0;p<d.length;++p)if(u[d[p]])return u[d[p]];throw new Error("Could not find a matching font-style for "+l)}(s.style,r),!(r=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var d=IA[l],p=Cm(u,hv,d,l<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+l);return p}(s.weight,r)))throw new Error("Failed to resolve a font for the rule '"+km(s)+"'.");return r}function Tm(o){return o.trimLeft()}function RA(o,t){for(var e=0;e<o.length;){if(o.charAt(e)===t)return[o.substring(0,e),o.substring(e+1)];e+=1}return null}function DA(o){var t=o.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],o.substring(t[0].length)]}var up,Im,Fm,k1=["times"];(function(o){var t,e,i,n,s,r,a,l,u,d=function(C){return C=C||{},this.isStrokeTransparent=C.isStrokeTransparent||!1,this.strokeOpacity=C.strokeOpacity||1,this.strokeStyle=C.strokeStyle||"#000000",this.fillStyle=C.fillStyle||"#000000",this.isFillTransparent=C.isFillTransparent||!1,this.fillOpacity=C.fillOpacity||1,this.font=C.font||"10px sans-serif",this.textBaseline=C.textBaseline||"alphabetic",this.textAlign=C.textAlign||"left",this.lineWidth=C.lineWidth||1,this.lineJoin=C.lineJoin||"miter",this.lineCap=C.lineCap||"butt",this.path=C.path||[],this.transform=C.transform!==void 0?C.transform.clone():new l,this.globalCompositeOperation=C.globalCompositeOperation||"normal",this.globalAlpha=C.globalAlpha||1,this.clip_path=C.clip_path||[],this.currentPoint=C.currentPoint||new r,this.miterLimit=C.miterLimit||10,this.lastPoint=C.lastPoint||new r,this.lineDashOffset=C.lineDashOffset||0,this.lineDash=C.lineDash||[],this.margin=C.margin||[0,0,0,0],this.prevPageLastElemOffset=C.prevPageLastElemOffset||0,this.ignoreClearRect=typeof C.ignoreClearRect!="boolean"||C.ignoreClearRect,this};o.events.push(["initialized",function(){this.context2d=new p(this),t=this.internal.f2,e=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,n=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,r=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,u=new d}]);var p=function(C){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var j=C;Object.defineProperty(this,"pdf",{get:function(){return j}});var U=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return U},set:function(yt){U=!!yt}});var Y=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Y},set:function(yt){Y=!!yt}});var Q=0;Object.defineProperty(this,"posX",{get:function(){return Q},set:function(yt){isNaN(yt)||(Q=yt)}});var st=0;Object.defineProperty(this,"posY",{get:function(){return st},set:function(yt){isNaN(yt)||(st=yt)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(yt){var V;typeof yt=="number"?V=[yt,yt,yt,yt]:((V=new Array(4))[0]=yt[0],V[1]=yt.length>=2?yt[1]:V[0],V[2]=yt.length>=3?yt[2]:V[0],V[3]=yt.length>=4?yt[3]:V[1]),u.margin=V}});var pt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return pt},set:function(yt){pt=yt}});var gt=0;Object.defineProperty(this,"lastBreak",{get:function(){return gt},set:function(yt){gt=yt}});var Et=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Et},set:function(yt){Et=yt}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(yt){yt instanceof d&&(u=yt)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(yt){u.path=yt}});var Nt=[];Object.defineProperty(this,"ctxStack",{get:function(){return Nt},set:function(yt){Nt=yt}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(yt){var V;V=b(yt),this.ctx.fillStyle=V.style,this.ctx.isFillTransparent=V.a===0,this.ctx.fillOpacity=V.a,this.pdf.setFillColor(V.r,V.g,V.b,{a:V.a}),this.pdf.setTextColor(V.r,V.g,V.b,{a:V.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(yt){var V=b(yt);this.ctx.strokeStyle=V.style,this.ctx.isStrokeTransparent=V.a===0,this.ctx.strokeOpacity=V.a,V.a===0?this.pdf.setDrawColor(255,255,255):(V.a,this.pdf.setDrawColor(V.r,V.g,V.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(yt){["butt","round","square"].indexOf(yt)!==-1&&(this.ctx.lineCap=yt,this.pdf.setLineCap(yt))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(yt){isNaN(yt)||(this.ctx.lineWidth=yt,this.pdf.setLineWidth(yt))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(yt){["bevel","round","miter"].indexOf(yt)!==-1&&(this.ctx.lineJoin=yt,this.pdf.setLineJoin(yt))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(yt){isNaN(yt)||(this.ctx.miterLimit=yt,this.pdf.setMiterLimit(yt))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(yt){this.ctx.textBaseline=yt}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(yt){["right","end","center","left","start"].indexOf(yt)!==-1&&(this.ctx.textAlign=yt)}});var Dt=null;function It(yt,V){if(Dt===null){var he=function(Ut){var Ct=[];return Object.keys(Ut).forEach(function(Pt){Ut[Pt].forEach(function(Ot){var Rt=null;switch(Ot){case"bold":Rt={family:Pt,weight:"bold"};break;case"italic":Rt={family:Pt,style:"italic"};break;case"bolditalic":Rt={family:Pt,weight:"bold",style:"italic"};break;case"":case"normal":Rt={family:Pt}}Rt!==null&&(Rt.ref={name:Pt,style:Ot},Ct.push(Rt))})}),Ct}(yt.getFontList());Dt=function(Ut){for(var Ct={},Pt=0;Pt<Ut.length;++Pt){var Ot=r2(Ut[Pt]),Rt=Ot.family,Vt=Ot.stretch,se=Ot.style,fe=Ot.weight;Ct[Rt]=Ct[Rt]||{},Ct[Rt][Vt]=Ct[Rt][Vt]||{},Ct[Rt][Vt][se]=Ct[Rt][Vt][se]||{},Ct[Rt][Vt][se][fe]=Ot}return Ct}(he.concat(V))}return Dt}var Jt=null;Object.defineProperty(this,"fontFaces",{get:function(){return Jt},set:function(yt){Dt=null,Jt=yt}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(yt){var V;if(this.ctx.font=yt,(V=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(yt))!==null){var he=V[1],Ut=(V[2],V[3]),Ct=V[4],Pt=(V[5],V[6]),Ot=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ct)[2];Ct=Math.floor(Ot==="px"?parseFloat(Ct)*this.pdf.internal.scaleFactor:Ot==="em"?parseFloat(Ct)*this.pdf.getFontSize():parseFloat(Ct)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ct);var Rt=function(Zt){var ye,jt,Ji=[],Ne=Zt.trim();if(Ne==="")return k1;if(Ne in Pm)return[Pm[Ne]];for(;Ne!=="";){switch(jt=null,ye=(Ne=Tm(Ne)).charAt(0)){case'"':case"'":jt=RA(Ne.substring(1),ye);break;default:jt=DA(Ne)}if(jt===null||(Ji.push(jt[0]),(Ne=Tm(jt[1]))!==""&&Ne.charAt(0)!==","))return k1;Ne=Ne.replace(/^,/,"")}return Ji}(Pt);if(this.fontFaces){var Vt=MA(It(this.pdf,this.fontFaces),Rt.map(function(Zt){return{family:Zt,stretch:"normal",weight:Ut,style:he}}));this.pdf.setFont(Vt.ref.name,Vt.ref.style)}else{var se="";(Ut==="bold"||parseInt(Ut,10)>=700||he==="bold")&&(se="bold"),he==="italic"&&(se+="italic"),se.length===0&&(se="normal");for(var fe="",be={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Se=0;Se<Rt.length;Se++){if(this.pdf.internal.getFont(Rt[Se],se,{noFallback:!0,disableWarning:!0})!==void 0){fe=Rt[Se];break}if(se==="bolditalic"&&this.pdf.internal.getFont(Rt[Se],"bold",{noFallback:!0,disableWarning:!0})!==void 0)fe=Rt[Se],se="bold";else if(this.pdf.internal.getFont(Rt[Se],"normal",{noFallback:!0,disableWarning:!0})!==void 0){fe=Rt[Se],se="normal";break}}if(fe===""){for(var Oe=0;Oe<Rt.length;Oe++)if(be[Rt[Oe]]){fe=be[Rt[Oe]];break}}fe=fe===""?"Times":fe,this.pdf.setFont(fe,se)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(yt){this.ctx.globalCompositeOperation=yt}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(yt){this.ctx.globalAlpha=yt}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(yt){this.ctx.lineDashOffset=yt,wt.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(yt){this.ctx.lineDash=yt,wt.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(yt){this.ctx.ignoreClearRect=!!yt}})};p.prototype.setLineDash=function(C){this.lineDash=C},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){q.call(this,"fill",!1)},p.prototype.stroke=function(){q.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(C,j){if(isNaN(C)||isNaN(j))throw Ue.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var U=this.ctx.transform.applyToPoint(new r(C,j));this.path.push({type:"mt",x:U.x,y:U.y}),this.ctx.lastPoint=new r(C,j)},p.prototype.closePath=function(){var C=new r(0,0),j=0;for(j=this.path.length-1;j!==-1;j--)if(this.path[j].type==="begin"&&We(this.path[j+1])==="object"&&typeof this.path[j+1].x=="number"){C=new r(this.path[j+1].x,this.path[j+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new r(C.x,C.y)},p.prototype.lineTo=function(C,j){if(isNaN(C)||isNaN(j))throw Ue.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var U=this.ctx.transform.applyToPoint(new r(C,j));this.path.push({type:"lt",x:U.x,y:U.y}),this.ctx.lastPoint=new r(U.x,U.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),q.call(this,null,!0)},p.prototype.quadraticCurveTo=function(C,j,U,Y){if(isNaN(U)||isNaN(Y)||isNaN(C)||isNaN(j))throw Ue.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Q=this.ctx.transform.applyToPoint(new r(U,Y)),st=this.ctx.transform.applyToPoint(new r(C,j));this.path.push({type:"qct",x1:st.x,y1:st.y,x:Q.x,y:Q.y}),this.ctx.lastPoint=new r(Q.x,Q.y)},p.prototype.bezierCurveTo=function(C,j,U,Y,Q,st){if(isNaN(Q)||isNaN(st)||isNaN(C)||isNaN(j)||isNaN(U)||isNaN(Y))throw Ue.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var pt=this.ctx.transform.applyToPoint(new r(Q,st)),gt=this.ctx.transform.applyToPoint(new r(C,j)),Et=this.ctx.transform.applyToPoint(new r(U,Y));this.path.push({type:"bct",x1:gt.x,y1:gt.y,x2:Et.x,y2:Et.y,x:pt.x,y:pt.y}),this.ctx.lastPoint=new r(pt.x,pt.y)},p.prototype.arc=function(C,j,U,Y,Q,st){if(isNaN(C)||isNaN(j)||isNaN(U)||isNaN(Y)||isNaN(Q))throw Ue.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(st=!!st,!this.ctx.transform.isIdentity){var pt=this.ctx.transform.applyToPoint(new r(C,j));C=pt.x,j=pt.y;var gt=this.ctx.transform.applyToPoint(new r(0,U)),Et=this.ctx.transform.applyToPoint(new r(0,0));U=Math.sqrt(Math.pow(gt.x-Et.x,2)+Math.pow(gt.y-Et.y,2))}Math.abs(Q-Y)>=2*Math.PI&&(Y=0,Q=2*Math.PI),this.path.push({type:"arc",x:C,y:j,radius:U,startAngle:Y,endAngle:Q,counterclockwise:st})},p.prototype.arcTo=function(C,j,U,Y,Q){throw new Error("arcTo not implemented.")},p.prototype.rect=function(C,j,U,Y){if(isNaN(C)||isNaN(j)||isNaN(U)||isNaN(Y))throw Ue.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(C,j),this.lineTo(C+U,j),this.lineTo(C+U,j+Y),this.lineTo(C,j+Y),this.lineTo(C,j),this.lineTo(C+U,j),this.lineTo(C,j)},p.prototype.fillRect=function(C,j,U,Y){if(isNaN(C)||isNaN(j)||isNaN(U)||isNaN(Y))throw Ue.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var Q={};this.lineCap!=="butt"&&(Q.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Q.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(C,j,U,Y),this.fill(),Q.hasOwnProperty("lineCap")&&(this.lineCap=Q.lineCap),Q.hasOwnProperty("lineJoin")&&(this.lineJoin=Q.lineJoin)}},p.prototype.strokeRect=function(C,j,U,Y){if(isNaN(C)||isNaN(j)||isNaN(U)||isNaN(Y))throw Ue.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(C,j,U,Y),this.stroke())},p.prototype.clearRect=function(C,j,U,Y){if(isNaN(C)||isNaN(j)||isNaN(U)||isNaN(Y))throw Ue.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(C,j,U,Y))},p.prototype.save=function(C){C=typeof C!="boolean"||C;for(var j=this.pdf.internal.getCurrentPageInfo().pageNumber,U=0;U<this.pdf.internal.getNumberOfPages();U++)this.pdf.setPage(U+1),this.pdf.internal.out("q");if(this.pdf.setPage(j),C){this.ctx.fontSize=this.pdf.internal.getFontSize();var Y=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Y}},p.prototype.restore=function(C){C=typeof C!="boolean"||C;for(var j=this.pdf.internal.getCurrentPageInfo().pageNumber,U=0;U<this.pdf.internal.getNumberOfPages();U++)this.pdf.setPage(U+1),this.pdf.internal.out("Q");this.pdf.setPage(j),C&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var b=function(C){var j,U,Y,Q;if(C.isCanvasGradient===!0&&(C=C.getColor()),!C)return{r:0,g:0,b:0,a:0,style:C};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(C))j=0,U=0,Y=0,Q=0;else{var st=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(C);if(st!==null)j=parseInt(st[1]),U=parseInt(st[2]),Y=parseInt(st[3]),Q=1;else if((st=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(C))!==null)j=parseInt(st[1]),U=parseInt(st[2]),Y=parseInt(st[3]),Q=parseFloat(st[4]);else{if(Q=1,typeof C=="string"&&C.charAt(0)!=="#"){var pt=new tv(C);C=pt.ok?pt.toHex():"#000000"}C.length===4?(j=C.substring(1,2),j+=j,U=C.substring(2,3),U+=U,Y=C.substring(3,4),Y+=Y):(j=C.substring(1,3),U=C.substring(3,5),Y=C.substring(5,7)),j=parseInt(j,16),U=parseInt(U,16),Y=parseInt(Y,16)}}return{r:j,g:U,b:Y,a:Q,style:C}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(C,j,U,Y){if(isNaN(j)||isNaN(U)||typeof C!="string")throw Ue.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Y=isNaN(Y)?void 0:Y,!g.call(this)){var Q=it(this.ctx.transform.rotation),st=this.ctx.transform.scaleX;O.call(this,{text:C,x:j,y:U,scale:st,angle:Q,align:this.textAlign,maxWidth:Y})}},p.prototype.strokeText=function(C,j,U,Y){if(isNaN(j)||isNaN(U)||typeof C!="string")throw Ue.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){Y=isNaN(Y)?void 0:Y;var Q=it(this.ctx.transform.rotation),st=this.ctx.transform.scaleX;O.call(this,{text:C,x:j,y:U,scale:st,renderingMode:"stroke",angle:Q,align:this.textAlign,maxWidth:Y})}},p.prototype.measureText=function(C){if(typeof C!="string")throw Ue.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var j=this.pdf,U=this.pdf.internal.scaleFactor,Y=j.internal.getFontSize(),Q=j.getStringUnitWidth(C)*Y/j.internal.scaleFactor,st=function(pt){var gt=(pt=pt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return gt}}),this};return new st({width:Q*=Math.round(96*U/72*1e4)/1e4})},p.prototype.scale=function(C,j){if(isNaN(C)||isNaN(j))throw Ue.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var U=new l(C,0,0,j,0,0);this.ctx.transform=this.ctx.transform.multiply(U)},p.prototype.rotate=function(C){if(isNaN(C))throw Ue.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var j=new l(Math.cos(C),Math.sin(C),-Math.sin(C),Math.cos(C),0,0);this.ctx.transform=this.ctx.transform.multiply(j)},p.prototype.translate=function(C,j){if(isNaN(C)||isNaN(j))throw Ue.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var U=new l(1,0,0,1,C,j);this.ctx.transform=this.ctx.transform.multiply(U)},p.prototype.transform=function(C,j,U,Y,Q,st){if(isNaN(C)||isNaN(j)||isNaN(U)||isNaN(Y)||isNaN(Q)||isNaN(st))throw Ue.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var pt=new l(C,j,U,Y,Q,st);this.ctx.transform=this.ctx.transform.multiply(pt)},p.prototype.setTransform=function(C,j,U,Y,Q,st){C=isNaN(C)?1:C,j=isNaN(j)?0:j,U=isNaN(U)?0:U,Y=isNaN(Y)?1:Y,Q=isNaN(Q)?0:Q,st=isNaN(st)?0:st,this.ctx.transform=new l(C,j,U,Y,Q,st)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(C,j,U,Y,Q,st,pt,gt,Et){var Nt=this.pdf.getImageProperties(C),Dt=1,It=1,Jt=1,yt=1;Y!==void 0&&gt!==void 0&&(Jt=gt/Y,yt=Et/Q,Dt=Nt.width/Y*gt/Y,It=Nt.height/Q*Et/Q),st===void 0&&(st=j,pt=U,j=0,U=0),Y!==void 0&&gt===void 0&&(gt=Y,Et=Q),Y===void 0&&gt===void 0&&(gt=Nt.width,Et=Nt.height);for(var V,he=this.ctx.transform.decompose(),Ut=it(he.rotate.shx),Ct=new l,Pt=(Ct=(Ct=(Ct=Ct.multiply(he.translate)).multiply(he.skew)).multiply(he.scale)).applyToRectangle(new a(st-j*Jt,pt-U*yt,Y*Dt,Q*It)),Ot=S.call(this,Pt),Rt=[],Vt=0;Vt<Ot.length;Vt+=1)Rt.indexOf(Ot[Vt])===-1&&Rt.push(Ot[Vt]);if(D(Rt),this.autoPaging)for(var se=Rt[0],fe=Rt[Rt.length-1],be=se;be<fe+1;be++){this.pdf.setPage(be);var Se=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Oe=be===1?this.posY+this.margin[0]:this.margin[0],Zt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ye=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],jt=be===1?0:Zt+(be-2)*ye;if(this.ctx.clip_path.length!==0){var Ji=this.path;V=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(V,this.posX+this.margin[3],-jt+Oe+this.ctx.prevPageLastElemOffset),G.call(this,"fill",!0),this.path=Ji}var Ne=JSON.parse(JSON.stringify(Pt));Ne=E([Ne],this.posX+this.margin[3],-jt+Oe+this.ctx.prevPageLastElemOffset)[0];var ys=(be>se||be<fe)&&w.call(this);ys&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Se,ye,null).clip().discardPath()),this.pdf.addImage(C,"JPEG",Ne.x,Ne.y,Ne.w,Ne.h,null,null,Ut),ys&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(C,"JPEG",Pt.x,Pt.y,Pt.w,Pt.h,null,null,Ut)};var S=function(C,j,U){var Y=[];j=j||this.pdf.internal.pageSize.width,U=U||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Q=this.posY+this.ctx.prevPageLastElemOffset;switch(C.type){default:case"mt":case"lt":Y.push(Math.floor((C.y+Q)/U)+1);break;case"arc":Y.push(Math.floor((C.y+Q-C.radius)/U)+1),Y.push(Math.floor((C.y+Q+C.radius)/U)+1);break;case"qct":var st=mt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x,C.y);Y.push(Math.floor((st.y+Q)/U)+1),Y.push(Math.floor((st.y+st.h+Q)/U)+1);break;case"bct":var pt=ut(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x2,C.y2,C.x,C.y);Y.push(Math.floor((pt.y+Q)/U)+1),Y.push(Math.floor((pt.y+pt.h+Q)/U)+1);break;case"rect":Y.push(Math.floor((C.y+Q)/U)+1),Y.push(Math.floor((C.y+C.h+Q)/U)+1)}for(var gt=0;gt<Y.length;gt+=1)for(;this.pdf.internal.getNumberOfPages()<Y[gt];)A.call(this);return Y},A=function(){var C=this.fillStyle,j=this.strokeStyle,U=this.font,Y=this.lineCap,Q=this.lineWidth,st=this.lineJoin;this.pdf.addPage(),this.fillStyle=C,this.strokeStyle=j,this.font=U,this.lineCap=Y,this.lineWidth=Q,this.lineJoin=st},E=function(C,j,U){for(var Y=0;Y<C.length;Y++)switch(C[Y].type){case"bct":C[Y].x2+=j,C[Y].y2+=U;case"qct":C[Y].x1+=j,C[Y].y1+=U;case"mt":case"lt":case"arc":default:C[Y].x+=j,C[Y].y+=U}return C},D=function(C){return C.sort(function(j,U){return j-U})},q=function(C,j){for(var U,Y,Q=this.fillStyle,st=this.strokeStyle,pt=this.lineCap,gt=this.lineWidth,Et=Math.abs(gt*this.ctx.transform.scaleX),Nt=this.lineJoin,Dt=JSON.parse(JSON.stringify(this.path)),It=JSON.parse(JSON.stringify(this.path)),Jt=[],yt=0;yt<It.length;yt++)if(It[yt].x!==void 0)for(var V=S.call(this,It[yt]),he=0;he<V.length;he+=1)Jt.indexOf(V[he])===-1&&Jt.push(V[he]);for(var Ut=0;Ut<Jt.length;Ut++)for(;this.pdf.internal.getNumberOfPages()<Jt[Ut];)A.call(this);if(D(Jt),this.autoPaging)for(var Ct=Jt[0],Pt=Jt[Jt.length-1],Ot=Ct;Ot<Pt+1;Ot++){this.pdf.setPage(Ot),this.fillStyle=Q,this.strokeStyle=st,this.lineCap=pt,this.lineWidth=Et,this.lineJoin=Nt;var Rt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Vt=Ot===1?this.posY+this.margin[0]:this.margin[0],se=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],fe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],be=Ot===1?0:se+(Ot-2)*fe;if(this.ctx.clip_path.length!==0){var Se=this.path;U=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(U,this.posX+this.margin[3],-be+Vt+this.ctx.prevPageLastElemOffset),G.call(this,C,!0),this.path=Se}if(Y=JSON.parse(JSON.stringify(Dt)),this.path=E(Y,this.posX+this.margin[3],-be+Vt+this.ctx.prevPageLastElemOffset),j===!1||Ot===0){var Oe=(Ot>Ct||Ot<Pt)&&w.call(this);Oe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Rt,fe,null).clip().discardPath()),G.call(this,C,j),Oe&&this.pdf.restoreGraphicsState()}this.lineWidth=gt}else this.lineWidth=Et,G.call(this,C,j),this.lineWidth=gt;this.path=Dt},G=function(C,j){if((C!=="stroke"||j||!y.call(this))&&(C==="stroke"||j||!g.call(this))){for(var U,Y,Q=[],st=this.path,pt=0;pt<st.length;pt++){var gt=st[pt];switch(gt.type){case"begin":Q.push({begin:!0});break;case"close":Q.push({close:!0});break;case"mt":Q.push({start:gt,deltas:[],abs:[]});break;case"lt":var Et=Q.length;if(st[pt-1]&&!isNaN(st[pt-1].x)&&(U=[gt.x-st[pt-1].x,gt.y-st[pt-1].y],Et>0)){for(;Et>=0;Et--)if(Q[Et-1].close!==!0&&Q[Et-1].begin!==!0){Q[Et-1].deltas.push(U),Q[Et-1].abs.push(gt);break}}break;case"bct":U=[gt.x1-st[pt-1].x,gt.y1-st[pt-1].y,gt.x2-st[pt-1].x,gt.y2-st[pt-1].y,gt.x-st[pt-1].x,gt.y-st[pt-1].y],Q[Q.length-1].deltas.push(U);break;case"qct":var Nt=st[pt-1].x+2/3*(gt.x1-st[pt-1].x),Dt=st[pt-1].y+2/3*(gt.y1-st[pt-1].y),It=gt.x+2/3*(gt.x1-gt.x),Jt=gt.y+2/3*(gt.y1-gt.y),yt=gt.x,V=gt.y;U=[Nt-st[pt-1].x,Dt-st[pt-1].y,It-st[pt-1].x,Jt-st[pt-1].y,yt-st[pt-1].x,V-st[pt-1].y],Q[Q.length-1].deltas.push(U);break;case"arc":Q.push({deltas:[],abs:[],arc:!0}),Array.isArray(Q[Q.length-1].abs)&&Q[Q.length-1].abs.push(gt)}}Y=j?null:C==="stroke"?"stroke":"fill";for(var he=!1,Ut=0;Ut<Q.length;Ut++)if(Q[Ut].arc)for(var Ct=Q[Ut].abs,Pt=0;Pt<Ct.length;Pt++){var Ot=Ct[Pt];Ot.type==="arc"?H.call(this,Ot.x,Ot.y,Ot.radius,Ot.startAngle,Ot.endAngle,Ot.counterclockwise,void 0,j,!he):$.call(this,Ot.x,Ot.y),he=!0}else if(Q[Ut].close===!0)this.pdf.internal.out("h"),he=!1;else if(Q[Ut].begin!==!0){var Rt=Q[Ut].start.x,Vt=Q[Ut].start.y;W.call(this,Q[Ut].deltas,Rt,Vt),he=!0}Y&&et.call(this,Y),j&&ct.call(this)}},K=function(C){var j=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,U=j*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return C-U;case"top":return C+j-U;case"hanging":return C+j-2*U;case"middle":return C+j/2-U;case"ideographic":return C;case"alphabetic":default:return C}},X=function(C){return C+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var C=function(){};return C.colorStops=[],C.addColorStop=function(j,U){this.colorStops.push([j,U])},C.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},C.isCanvasGradient=!0,C},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var H=function(C,j,U,Y,Q,st,pt,gt,Et){for(var Nt=lt.call(this,U,Y,Q,st),Dt=0;Dt<Nt.length;Dt++){var It=Nt[Dt];Dt===0&&(Et?I.call(this,It.x1+C,It.y1+j):$.call(this,It.x1+C,It.y1+j)),ht.call(this,C,j,It.x2,It.y2,It.x3,It.y3,It.x4,It.y4)}gt?ct.call(this):et.call(this,pt)},et=function(C){switch(C){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ct=function(){this.pdf.clip(),this.pdf.discardPath()},I=function(C,j){this.pdf.internal.out(e(C)+" "+i(j)+" m")},O=function(C){var j;switch(C.align){case"right":case"end":j="right";break;case"center":j="center";break;case"left":case"start":default:j="left"}var U=this.pdf.getTextDimensions(C.text),Y=K.call(this,C.y),Q=X.call(this,Y)-U.h,st=this.ctx.transform.applyToPoint(new r(C.x,Y)),pt=this.ctx.transform.decompose(),gt=new l;gt=(gt=(gt=gt.multiply(pt.translate)).multiply(pt.skew)).multiply(pt.scale);for(var Et,Nt,Dt,It=this.ctx.transform.applyToRectangle(new a(C.x,Y,U.w,U.h)),Jt=gt.applyToRectangle(new a(C.x,Q,U.w,U.h)),yt=S.call(this,Jt),V=[],he=0;he<yt.length;he+=1)V.indexOf(yt[he])===-1&&V.push(yt[he]);if(D(V),this.autoPaging)for(var Ut=V[0],Ct=V[V.length-1],Pt=Ut;Pt<Ct+1;Pt++){this.pdf.setPage(Pt);var Ot=Pt===1?this.posY+this.margin[0]:this.margin[0],Rt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Vt=this.pdf.internal.pageSize.height-this.margin[2],se=Vt-this.margin[0],fe=this.pdf.internal.pageSize.width-this.margin[1],be=fe-this.margin[3],Se=Pt===1?0:Rt+(Pt-2)*se;if(this.ctx.clip_path.length!==0){var Oe=this.path;Et=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(Et,this.posX+this.margin[3],-1*Se+Ot),G.call(this,"fill",!0),this.path=Oe}var Zt=E([JSON.parse(JSON.stringify(Jt))],this.posX+this.margin[3],-Se+Ot+this.ctx.prevPageLastElemOffset)[0];C.scale>=.01&&(Nt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Nt*C.scale),Dt=this.lineWidth,this.lineWidth=Dt*C.scale);var ye=this.autoPaging!=="text";if(ye||Zt.y+Zt.h<=Vt){if(ye||Zt.y>=Ot&&Zt.x<=fe){var jt=ye?C.text:this.pdf.splitTextToSize(C.text,C.maxWidth||fe-Zt.x)[0],Ji=E([JSON.parse(JSON.stringify(It))],this.posX+this.margin[3],-Se+Ot+this.ctx.prevPageLastElemOffset)[0],Ne=ye&&(Pt>Ut||Pt<Ct)&&w.call(this);Ne&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],be,se,null).clip().discardPath()),this.pdf.text(jt,Ji.x,Ji.y,{angle:C.angle,align:j,renderingMode:C.renderingMode}),Ne&&this.pdf.restoreGraphicsState()}}else Zt.y<Vt&&(this.ctx.prevPageLastElemOffset+=Vt-Zt.y);C.scale>=.01&&(this.pdf.setFontSize(Nt),this.lineWidth=Dt)}else C.scale>=.01&&(Nt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Nt*C.scale),Dt=this.lineWidth,this.lineWidth=Dt*C.scale),this.pdf.text(C.text,st.x+this.posX,st.y+this.posY,{angle:C.angle,align:j,renderingMode:C.renderingMode,maxWidth:C.maxWidth}),C.scale>=.01&&(this.pdf.setFontSize(Nt),this.lineWidth=Dt)},$=function(C,j,U,Y){U=U||0,Y=Y||0,this.pdf.internal.out(e(C+U)+" "+i(j+Y)+" l")},W=function(C,j,U){return this.pdf.lines(C,j,U,null,null)},ht=function(C,j,U,Y,Q,st,pt,gt){this.pdf.internal.out([t(n(U+C)),t(s(Y+j)),t(n(Q+C)),t(s(st+j)),t(n(pt+C)),t(s(gt+j)),"c"].join(" "))},lt=function(C,j,U,Y){for(var Q=2*Math.PI,st=Math.PI/2;j>U;)j-=Q;var pt=Math.abs(U-j);pt<Q&&Y&&(pt=Q-pt);for(var gt=[],Et=Y?-1:1,Nt=j;pt>1e-5;){var Dt=Nt+Et*Math.min(pt,st);gt.push(at.call(this,C,Nt,Dt)),pt-=Math.abs(Dt-Nt),Nt=Dt}return gt},at=function(C,j,U){var Y=(U-j)/2,Q=C*Math.cos(Y),st=C*Math.sin(Y),pt=Q,gt=-st,Et=pt*pt+gt*gt,Nt=Et+pt*Q+gt*st,Dt=4/3*(Math.sqrt(2*Et*Nt)-Nt)/(pt*st-gt*Q),It=pt-Dt*gt,Jt=gt+Dt*pt,yt=It,V=-Jt,he=Y+j,Ut=Math.cos(he),Ct=Math.sin(he);return{x1:C*Math.cos(j),y1:C*Math.sin(j),x2:It*Ut-Jt*Ct,y2:It*Ct+Jt*Ut,x3:yt*Ut-V*Ct,y3:yt*Ct+V*Ut,x4:C*Math.cos(U),y4:C*Math.sin(U)}},it=function(C){return 180*C/Math.PI},mt=function(C,j,U,Y,Q,st){var pt=C+.5*(U-C),gt=j+.5*(Y-j),Et=Q+.5*(U-Q),Nt=st+.5*(Y-st),Dt=Math.min(C,Q,pt,Et),It=Math.max(C,Q,pt,Et),Jt=Math.min(j,st,gt,Nt),yt=Math.max(j,st,gt,Nt);return new a(Dt,Jt,It-Dt,yt-Jt)},ut=function(C,j,U,Y,Q,st,pt,gt){var Et,Nt,Dt,It,Jt,yt,V,he,Ut,Ct,Pt,Ot,Rt,Vt,se=U-C,fe=Y-j,be=Q-U,Se=st-Y,Oe=pt-Q,Zt=gt-st;for(Nt=0;Nt<41;Nt++)Ut=(V=(Dt=C+(Et=Nt/40)*se)+Et*((Jt=U+Et*be)-Dt))+Et*(Jt+Et*(Q+Et*Oe-Jt)-V),Ct=(he=(It=j+Et*fe)+Et*((yt=Y+Et*Se)-It))+Et*(yt+Et*(st+Et*Zt-yt)-he),Nt==0?(Pt=Ut,Ot=Ct,Rt=Ut,Vt=Ct):(Pt=Math.min(Pt,Ut),Ot=Math.min(Ot,Ct),Rt=Math.max(Rt,Ut),Vt=Math.max(Vt,Ct));return new a(Math.round(Pt),Math.round(Ot),Math.round(Rt-Pt),Math.round(Vt-Ot))},wt=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var C,j,U=(C=this.ctx.lineDash,j=this.ctx.lineDashOffset,JSON.stringify({lineDash:C,lineDashOffset:j}));this.prevLineDash!==U&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=U)}}})(Kt.API),function(o){var t=function(s){var r,a,l,u,d,p,b,g,y,w;for(a=[],l=0,u=(s+=r="\0\0\0\0".slice(s.length%4||4)).length;u>l;l+=4)(d=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(p=(d=((d=((d=((d=(d-(w=d%85))/85)-(y=d%85))/85)-(g=d%85))/85)-(b=d%85))/85)%85,a.push(p+33,b+33,g+33,y+33,w+33)):a.push(122);return function(S,A){for(var E=A;E>0;E--)S.pop()}(a,r.length),String.fromCharCode.apply(String,a)+"~>"},e=function(s){var r,a,l,u,d,p=String,b="length",g=255,y="charCodeAt",w="slice",S="replace";for(s[w](-2),s=s[w](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),l=[],u=0,d=(s+=r="uuuuu"[w](s[b]%5||5))[b];d>u;u+=5)a=52200625*(s[y](u)-33)+614125*(s[y](u+1)-33)+7225*(s[y](u+2)-33)+85*(s[y](u+3)-33)+(s[y](u+4)-33),l.push(g&a>>24,g&a>>16,g&a>>8,g&a);return function(A,E){for(var D=E;D>0;D--)A.pop()}(l,r[b]),p.fromCharCode.apply(p,l)},i=function(s){var r=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),r.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},n=function(s){for(var r=new Uint8Array(s.length),a=s.length;a--;)r[a]=s.charCodeAt(a);return s=(r=Z0(r)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};o.processDataByFilters=function(s,r){var a=0,l=s||"",u=[];for(typeof(r=r||[])=="string"&&(r=[r]),a=0;a<r.length;a+=1)switch(r[a]){case"ASCII85Decode":case"/ASCII85Decode":l=e(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=t(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=i(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=n(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+r[a]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(Kt.API),function(o){o.loadFile=function(t,e,i){return function(n,s,r){s=s!==!1,r=typeof r=="function"?r:function(){};var a=void 0;try{a=function(l,u,d){var p=new XMLHttpRequest,b=0,g=function(y){var w=y.length,S=[],A=String.fromCharCode;for(b=0;b<w;b+=1)S.push(A(255&y.charCodeAt(b)));return S.join("")};if(p.open("GET",l,!u),p.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(p.onload=function(){p.status===200?d(g(this.responseText)):d(void 0)}),p.send(null),u&&p.status===200)return g(p.responseText)}(n,s,r)}catch{}return a}(t,e,i)},o.loadImageFile=o.loadFile}(Kt.API),function(o){function t(){return(Qt.html2canvas?Promise.resolve(Qt.html2canvas):Er(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load html2canvas: "+r))}).then(function(r){return r.default?r.default:r})}function e(){return(Qt.DOMPurify?Promise.resolve(Qt.DOMPurify):Er(()=>import("./purify.es-a-CayzAK.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load dompurify: "+r))}).then(function(r){return r.default?r.default:r})}var i=function(r){var a=We(r);return a==="undefined"?"undefined":a==="string"||r instanceof String?"string":a==="number"||r instanceof Number?"number":a==="function"||r instanceof Function?"function":r&&r.constructor===Array?"array":r&&r.nodeType===1?"element":a==="object"?"object":"unknown"},n=function(r,a){var l=document.createElement(r);for(var u in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[u]=a.style[u];return l},s=function r(a){var l=Object.assign(r.convert(Promise.resolve()),JSON.parse(JSON.stringify(r.template))),u=r.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,r,1,[r])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(r,a){return r.__proto__=a||s.prototype,r},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(r,a){return this.then(function(){switch(a=a||function(l){switch(i(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(r)){case"string":return this.then(e).then(function(l){return this.set({src:n("div",{innerHTML:r,dompurify:l})})});case"element":return this.set({src:r});case"canvas":return this.set({canvas:r});case"img":return this.set({img:r});default:return this.error("Unknown source type.")}})},s.prototype.to=function(r){switch(r){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var r={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(u,d){for(var p=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),b=u.firstChild;b;b=b.nextSibling)d!==!0&&b.nodeType===1&&b.nodeName==="SCRIPT"||p.appendChild(l(b,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(p.width=u.width,p.height=u.height,p.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(p.value=u.value),p.addEventListener("load",function(){p.scrollTop=u.scrollTop,p.scrollLeft=u.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(r.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=n("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=n("div",{className:"html2pdf__container",style:r}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(n("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var r=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(r).then(t).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var r=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(r).then(t).then(function(a){var l=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var b=0;b<u.length;++b){var g=u[b],y=g.src.find(function(w){return w.format==="truetype"});y&&l.addFont(y.url,g.ref.name,g.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,l.context2d.save(!0),a(this.prop.container,p)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var r=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=r})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(r,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(r,a):this.outputPdf(r,a)},s.prototype.outputPdf=function(r,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(r,a)})},s.prototype.outputImg=function(r){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(r){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+r+'" is not supported.'}})},s.prototype.save=function(r){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(r?{filename:r}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(r){if(i(r)!=="object")return this;var a=Object.keys(r||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=r[l]};switch(l){case"margin":return this.setMargin.bind(this,r.margin);case"jsPDF":return function(){return this.opt.jsPDF=r.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,r.pageSize);default:return function(){this.opt[l]=r[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(r,a){return this.then(function(){var l=r in s.template.prop?this.prop[r]:this.opt[r];return a?a(l):l})},s.prototype.setMargin=function(r){return this.then(function(){switch(i(r)){case"number":r=[r,r,r,r];case"array":if(r.length===2&&(r=[r[0],r[1],r[0],r[1]]),r.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=r}).then(this.setPageSize)},s.prototype.setPageSize=function(r){function a(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(r=r||Kt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(r.inner={width:r.width-this.opt.margin[1]-this.opt.margin[3],height:r.height-this.opt.margin[0]-this.opt.margin[2]},r.inner.px={width:a(r.inner.width,r.k),height:a(r.inner.height,r.k)},r.inner.ratio=r.inner.height/r.inner.width),this.prop.pageSize=r})},s.prototype.setProgress=function(r,a,l,u){return r!=null&&(this.progress.val=r),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(r,a,l,u){return this.setProgress(r?this.progress.val+r:null,a||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(r,a){var l=this;return this.thenCore(r,a,function(u,d){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(p){return l.updateProgress(null,u),p}).then(u,d).then(function(p){return l.updateProgress(1),p})})},s.prototype.thenCore=function(r,a,l){l=l||Promise.prototype.then,r&&(r=r.bind(this)),a&&(a=a.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=l.call(u,r,a);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(r,a){return Promise.prototype.then.call(this,r,a)},s.prototype.thenList=function(r){var a=this;return r.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(r){r&&(r=r.bind(this));var a=Promise.prototype.catch.call(this,r);return s.convert(a,this)},s.prototype.catchExternal=function(r){return Promise.prototype.catch.call(this,r)},s.prototype.error=function(r){return this.then(function(){throw new Error(r)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Kt.getPageSize=function(r,a,l){if(We(r)==="object"){var u=r;r=u.orientation,a=u.unit||a,l=u.format||l}a=a||"mm",l=l||"a4",r=(""+(r||"P")).toLowerCase();var d,p=(""+l).toLowerCase(),b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+a}var g,y=0,w=0;if(b.hasOwnProperty(p))y=b[p][1]/d,w=b[p][0]/d;else try{y=l[1],w=l[0]}catch{throw new Error("Invalid format: "+l)}if(r==="p"||r==="portrait")r="p",w>y&&(g=w,w=y,y=g);else{if(r!=="l"&&r!=="landscape")throw"Invalid orientation: "+r;r="l",y>w&&(g=w,w=y,y=g)}return{width:w,height:y,unit:a,k:d,orientation:r}},o.html=function(r,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(r2):null;var l=new s(a);return a.worker?l:l.from(r).doCallback()}}(Kt.API),Kt.API.addJS=function(o){return Fm=o,this.internal.events.subscribe("postPutResources",function(){up=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(up+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Im=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Fm+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){up!==void 0&&Im!==void 0&&this.internal.out("/Names <</JavaScript "+up+" 0 R>>")}),this},function(o){var t;o.events.push(["postPutResources",function(){var e=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var n=e.outline.render().split(/\r\n/),s=0;s<n.length;s++){var r=n[s],a=i.exec(r);if(a!=null){var l=a[1];e.internal.newObjectDeferredBegin(l,!1)}e.internal.write(r)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var p=e.internal.newObject();d.push(p);var b=e.internal.getPageInfo(s+1);e.internal.write("<< /D["+b.objId+" 0 R /XYZ null null null]>> endobj")}var g=e.internal.newObject();for(e.internal.write("<< /Names [ "),s=0;s<d.length;s++)e.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+g+" 0 R"),e.internal.write(">>","endobj")}}]),o.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),o.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(i,n,s){var r={title:n,options:s,children:[]};return i==null&&(i=this.root),i.children.push(r),r},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(i){i.id=e.internal.newObjectDeferred();for(var n=0;n<i.children.length;n++)this.genIds_r(i.children[n])},e.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},e.outline.renderItems=function(i){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<i.children.length;s++){var r=i.children[s];this.objStart(r),this.line("/Title "+this.makeString(r.title)),this.line("/Parent "+this.makeRef(i)),s>0&&this.line("/Prev "+this.makeRef(i.children[s-1])),s<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[s+1])),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1])));var a=this.count=this.count_r({count:0},r);if(a>0&&this.line("/Count "+a),r.options&&r.options.pageNumber){var l=e.internal.getPageInfo(r.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var u=0;u<i.children.length;u++)this.renderItems(i.children[u])},e.outline.line=function(i){this.ctx.val+=i+`\r
`},e.outline.makeRef=function(i){return i.id+" 0 R"},e.outline.makeString=function(i){return"("+e.internal.pdfEscape(i)+")"},e.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},e.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},e.outline.count_r=function(i,n){for(var s=0;s<n.children.length;s++)i.count++,this.count_r(i,n.children[s]);return i.count}}])}(Kt.API),function(o){var t=[192,193,194,195,196,197,198,199];o.processJPEG=function(e,i,n,s,r,a){var l,u=this.decode.DCT_DECODE,d=null;if(typeof e=="string"||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=r||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(l=function(p){for(var b,g=256*p.charCodeAt(4)+p.charCodeAt(5),y=p.length,w={width:0,height:0,numcomponents:1},S=4;S<y;S+=2){if(S+=g,t.indexOf(p.charCodeAt(S+1))!==-1){b=256*p.charCodeAt(S+5)+p.charCodeAt(S+6),w={width:256*p.charCodeAt(S+7)+p.charCodeAt(S+8),height:b,numcomponents:p.charCodeAt(S+9)};break}g=256*p.charCodeAt(S+2)+p.charCodeAt(S+3)}return w}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}d={data:e,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:u,index:i,alias:n}}return d}}(Kt.API);var Ch,dp,Mm,Rm,Dm,OA=function(){var o,t,e;function i(s){var r,a,l,u,d,p,b,g,y,w,S,A,E,D;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(r=this.readUInt32(),y=(function(){var q,G;for(G=[],q=0;q<4;++q)G.push(String.fromCharCode(this.data[this.pos++]));return G}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(r);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,p.delay=1e3*d/u,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(y==="fdAT"&&(this.pos+=4,r-=4),s=(p!=null?p.data:void 0)||this.imgData,A=0;0<=r?A<r:A>r;0<=r?++A:--A)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(r),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((w=l-this.transparency.indexed.length)>0)for(E=0;0<=w?E<w:E>w;0<=w?++E:--E)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(r)[0];break;case 2:this.transparency.rgb=this.read(r)}break;case"tEXt":b=(S=this.read(r)).indexOf(0),g=String.fromCharCode.apply(String,S.slice(0,b)),this.text[g]=String.fromCharCode.apply(String,S.slice(b+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(D=this.colorType)===4||D===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=r}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(s){var r,a;for(a=[],r=0;0<=s?r<s:r>s;0<=s?++r:--r)a.push(this.data[this.pos++]);return a},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(s){var r=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*r),l=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(p,b,g,y){var w,S,A,E,D,q,G,K,X,H,et,ct,I,O,$,W,ht,lt,at,it,mt,ut=Math.ceil((u.width-p)/g),wt=Math.ceil((u.height-b)/y),C=u.width==ut&&u.height==wt;for(O=r*ut,ct=C?a:new Uint8Array(O*wt),q=s.length,I=0,S=0;I<wt&&l<q;){switch(s[l++]){case 0:for(E=ht=0;ht<O;E=ht+=1)ct[S++]=s[l++];break;case 1:for(E=lt=0;lt<O;E=lt+=1)w=s[l++],D=E<r?0:ct[S-r],ct[S++]=(w+D)%256;break;case 2:for(E=at=0;at<O;E=at+=1)w=s[l++],A=(E-E%r)/r,$=I&&ct[(I-1)*O+A*r+E%r],ct[S++]=($+w)%256;break;case 3:for(E=it=0;it<O;E=it+=1)w=s[l++],A=(E-E%r)/r,D=E<r?0:ct[S-r],$=I&&ct[(I-1)*O+A*r+E%r],ct[S++]=(w+Math.floor((D+$)/2))%256;break;case 4:for(E=mt=0;mt<O;E=mt+=1)w=s[l++],A=(E-E%r)/r,D=E<r?0:ct[S-r],I===0?$=W=0:($=ct[(I-1)*O+A*r+E%r],W=A&&ct[(I-1)*O+(A-1)*r+E%r]),G=D+$-W,K=Math.abs(G-D),H=Math.abs(G-$),et=Math.abs(G-W),X=K<=H&&K<=et?D:H<=et?$:W,ct[S++]=(w+X)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!C){var j=((b+I*y)*u.width+p)*r,U=I*O;for(E=0;E<ut;E+=1){for(var Y=0;Y<r;Y+=1)a[j++]=ct[U++];j+=(g-1)*r}}I++}}return s=gA(s),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),a},i.prototype.decodePalette=function(){var s,r,a,l,u,d,p,b,g;for(a=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+a.length),l=0,s=0,r=p=0,b=a.length;p<b;r=p+=3)u[l++]=a[r],u[l++]=a[r+1],u[l++]=a[r+2],u[l++]=(g=d[s++])!=null?g:255;return u},i.prototype.copyToImageData=function(s,r){var a,l,u,d,p,b,g,y,w,S,A;if(l=this.colors,w=null,a=this.hasAlphaChannel,this.palette.length&&(w=(A=this._decodedPalette)!=null?A:this._decodedPalette=this.decodePalette(),l=4,a=!0),y=(u=s.data||s).length,p=w||r,d=b=0,l===1)for(;d<y;)g=w?4*r[d/4]:b,S=p[g++],u[d++]=S,u[d++]=S,u[d++]=S,u[d++]=a?p[g++]:255,b=g;else for(;d<y;)g=w?4*r[d/4]:b,u[d++]=p[g++],u[d++]=p[g++],u[d++]=p[g++],u[d++]=a?p[g++]:255,b=g},i.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var n=function(){if(Object.prototype.toString.call(Qt)==="[object Window]"){try{t=Qt.document.createElement("canvas"),e=t.getContext("2d")}catch{return!1}return!0}return!1};return n(),o=function(s){var r;if(n()===!0)return e.width=s.width,e.height=s.height,e.clearRect(0,0,s.width,s.height),e.putImageData(s,0,0),(r=new Image).src=t.toDataURL(),r;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(s){var r,a,l,u,d,p,b,g;if(this.animation){for(g=[],a=d=0,p=(b=this.animation.frames).length;d<p;a=++d)r=b[a],l=s.createImageData(r.width,r.height),u=this.decodePixels(new Uint8Array(r.data)),this.copyToImageData(l,u),r.imageData=l,g.push(r.image=o(l));return g}},i.prototype.renderFrame=function(s,r){var a,l,u;return a=(l=this.animation.frames)[r],u=l[r-1],r===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},i.prototype.animate=function(s){var r,a,l,u,d,p,b=this;return a=0,p=this.animation,u=p.numFrames,l=p.frames,d=p.numPlays,(r=function(){var g,y;if(g=a++%u,y=l[g],b.renderFrame(s,g),u>1&&a/u<d)return b.animation._timeout=setTimeout(r,y.delay)})()},i.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},i.prototype.render=function(s){var r,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,r=s.getContext("2d"),this.animation?(this.decodeFrames(r),this.animate(r)):(a=r.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),r.putImageData(a,0,0))},i}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function jA(o){var t=0;if(o[t++]!==71||o[t++]!==73||o[t++]!==70||o[t++]!==56||(o[t++]+1&253)!=56||o[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var e=o[t++]|o[t++]<<8,i=o[t++]|o[t++]<<8,n=o[t++],s=n>>7,r=1<<(7&n)+1;o[t++],o[t++];var a=null,l=null;s&&(a=t,l=r,t+=3*r);var u=!0,d=[],p=0,b=null,g=0,y=null;for(this.width=e,this.height=i;u&&t<o.length;)switch(o[t++]){case 33:switch(o[t++]){case 255:if(o[t]!==11||o[t+1]==78&&o[t+2]==69&&o[t+3]==84&&o[t+4]==83&&o[t+5]==67&&o[t+6]==65&&o[t+7]==80&&o[t+8]==69&&o[t+9]==50&&o[t+10]==46&&o[t+11]==48&&o[t+12]==3&&o[t+13]==1&&o[t+16]==0)t+=14,y=o[t++]|o[t++]<<8,t++;else for(t+=12;;){if(!((I=o[t++])>=0))throw Error("Invalid block size");if(I===0)break;t+=I}break;case 249:if(o[t++]!==4||o[t+4]!==0)throw new Error("Invalid graphics extension block.");var w=o[t++];p=o[t++]|o[t++]<<8,b=o[t++],!(1&w)&&(b=null),g=w>>2&7,t++;break;case 254:for(;;){if(!((I=o[t++])>=0))throw Error("Invalid block size");if(I===0)break;t+=I}break;default:throw new Error("Unknown graphic control label: 0x"+o[t-1].toString(16))}break;case 44:var S=o[t++]|o[t++]<<8,A=o[t++]|o[t++]<<8,E=o[t++]|o[t++]<<8,D=o[t++]|o[t++]<<8,q=o[t++],G=q>>6&1,K=1<<(7&q)+1,X=a,H=l,et=!1;q>>7&&(et=!0,X=t,H=K,t+=3*K);var ct=t;for(t++;;){var I;if(!((I=o[t++])>=0))throw Error("Invalid block size");if(I===0)break;t+=I}d.push({x:S,y:A,width:E,height:D,has_local_palette:et,palette_offset:X,palette_size:H,data_offset:ct,data_length:t-ct,transparent_index:b,interlaced:!!G,delay:p,disposal:g});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+o[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return y},this.frameInfo=function(O){if(O<0||O>=d.length)throw new Error("Frame index out of range.");return d[O]},this.decodeAndBlitFrameBGRA=function(O,$){var W=this.frameInfo(O),ht=W.width*W.height,lt=new Uint8Array(ht);Om(o,W.data_offset,lt,ht);var at=W.palette_offset,it=W.transparent_index;it===null&&(it=256);var mt=W.width,ut=e-mt,wt=mt,C=4*(W.y*e+W.x),j=4*((W.y+W.height)*e+W.x),U=C,Y=4*ut;W.interlaced===!0&&(Y+=4*e*7);for(var Q=8,st=0,pt=lt.length;st<pt;++st){var gt=lt[st];if(wt===0&&(wt=mt,(U+=Y)>=j&&(Y=4*ut+4*e*(Q-1),U=C+(mt+ut)*(Q<<1),Q>>=1)),gt===it)U+=4;else{var Et=o[at+3*gt],Nt=o[at+3*gt+1],Dt=o[at+3*gt+2];$[U++]=Dt,$[U++]=Nt,$[U++]=Et,$[U++]=255}--wt}},this.decodeAndBlitFrameRGBA=function(O,$){var W=this.frameInfo(O),ht=W.width*W.height,lt=new Uint8Array(ht);Om(o,W.data_offset,lt,ht);var at=W.palette_offset,it=W.transparent_index;it===null&&(it=256);var mt=W.width,ut=e-mt,wt=mt,C=4*(W.y*e+W.x),j=4*((W.y+W.height)*e+W.x),U=C,Y=4*ut;W.interlaced===!0&&(Y+=4*e*7);for(var Q=8,st=0,pt=lt.length;st<pt;++st){var gt=lt[st];if(wt===0&&(wt=mt,(U+=Y)>=j&&(Y=4*ut+4*e*(Q-1),U=C+(mt+ut)*(Q<<1),Q>>=1)),gt===it)U+=4;else{var Et=o[at+3*gt],Nt=o[at+3*gt+1],Dt=o[at+3*gt+2];$[U++]=Et,$[U++]=Nt,$[U++]=Dt,$[U++]=255}--wt}}}function Om(o,t,e,i){for(var n=o[t++],s=1<<n,r=s+1,a=r+1,l=n+1,u=(1<<l)-1,d=0,p=0,b=0,g=o[t++],y=new Int32Array(4096),w=null;;){for(;d<16&&g!==0;)p|=o[t++]<<d,d+=8,g===1?g=o[t++]:--g;if(d<l)break;var S=p&u;if(p>>=l,d-=l,S!==s){if(S===r)break;for(var A=S<a?S:w,E=0,D=A;D>s;)D=y[D]>>8,++E;var q=D;if(b+E+(A!==S?1:0)>i)return void Ue.log("Warning, gif stream longer than expected.");e[b++]=q;var G=b+=E;for(A!==S&&(e[b++]=q),D=A;E--;)D=y[D],e[--G]=255&D,D>>=8;w!==null&&a<4096&&(y[a++]=w<<8|q,a>=u+1&&l<12&&(++l,u=u<<1|1)),w=S}else a=r+1,u=(1<<(l=n+1))-1,w=null}return b!==i&&Ue.log("Warning, gif stream shorter than expected."),e}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function T1(o){var t,e,i,n,s,r=Math.floor,a=new Array(64),l=new Array(64),u=new Array(64),d=new Array(64),p=new Array(65535),b=new Array(65535),g=new Array(64),y=new Array(64),w=[],S=0,A=7,E=new Array(64),D=new Array(64),q=new Array(64),G=new Array(256),K=new Array(2048),X=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],H=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],et=[0,1,2,3,4,5,6,7,8,9,10,11],ct=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],$=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ht=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function lt(C,j){for(var U=0,Y=0,Q=new Array,st=1;st<=16;st++){for(var pt=1;pt<=C[st];pt++)Q[j[Y]]=[],Q[j[Y]][0]=U,Q[j[Y]][1]=st,Y++,U++;U*=2}return Q}function at(C){for(var j=C[0],U=C[1]-1;U>=0;)j&1<<U&&(S|=1<<A),U--,--A<0&&(S==255?(it(255),it(0)):it(S),A=7,S=0)}function it(C){w.push(C)}function mt(C){it(C>>8&255),it(255&C)}function ut(C,j,U,Y,Q){for(var st,pt=Q[0],gt=Q[240],Et=function(Ct,Pt){var Ot,Rt,Vt,se,fe,be,Se,Oe,Zt,ye,jt=0;for(Zt=0;Zt<8;++Zt){Ot=Ct[jt],Rt=Ct[jt+1],Vt=Ct[jt+2],se=Ct[jt+3],fe=Ct[jt+4],be=Ct[jt+5],Se=Ct[jt+6];var Ji=Ot+(Oe=Ct[jt+7]),Ne=Ot-Oe,ys=Rt+Se,He=Rt-Se,Ke=Vt+be,Js=Vt-be,Pe=se+fe,Lo=se-fe,ni=Ji+Pe,ws=Ji-Pe,Tr=ys+Ke,si=ys-Ke;Ct[jt]=ni+Tr,Ct[jt+4]=ni-Tr;var re=.707106781*(si+ws);Ct[jt+2]=ws+re,Ct[jt+6]=ws-re;var ke=.382683433*((ni=Lo+Js)-(si=He+Ne)),No=.5411961*ni+ke,zi=1.306562965*si+ke,Qs=.707106781*(Tr=Js+He),Zs=Ne+Qs,Yt=Ne-Qs;Ct[jt+5]=Yt+No,Ct[jt+3]=Yt-No,Ct[jt+1]=Zs+zi,Ct[jt+7]=Zs-zi,jt+=8}for(jt=0,Zt=0;Zt<8;++Zt){Ot=Ct[jt],Rt=Ct[jt+8],Vt=Ct[jt+16],se=Ct[jt+24],fe=Ct[jt+32],be=Ct[jt+40],Se=Ct[jt+48];var As=Ot+(Oe=Ct[jt+56]),tr=Ot-Oe,xn=Rt+Se,Si=Rt-Se,bi=Vt+be,On=Vt-be,Ql=se+fe,Ir=se-fe,_s=As+Ql,xs=As-Ql,Ss=xn+bi,er=xn-bi;Ct[jt]=_s+Ss,Ct[jt+32]=_s-Ss;var es=.707106781*(er+xs);Ct[jt+16]=xs+es,Ct[jt+48]=xs-es;var ir=.382683433*((_s=Ir+On)-(er=Si+tr)),Eo=.5411961*_s+ir,Zl=1.306562965*er+ir,th=.707106781*(Ss=On+Si),eh=tr+th,ih=tr-th;Ct[jt+40]=ih+Eo,Ct[jt+24]=ih-Eo,Ct[jt+8]=eh+Zl,Ct[jt+56]=eh-Zl,jt++}for(Zt=0;Zt<64;++Zt)ye=Ct[Zt]*Pt[Zt],g[Zt]=ye>0?ye+.5|0:ye-.5|0;return g}(C,j),Nt=0;Nt<64;++Nt)y[X[Nt]]=Et[Nt];var Dt=y[0]-U;U=y[0],Dt==0?at(Y[0]):(at(Y[b[st=32767+Dt]]),at(p[st]));for(var It=63;It>0&&y[It]==0;)It--;if(It==0)return at(pt),U;for(var Jt,yt=1;yt<=It;){for(var V=yt;y[yt]==0&&yt<=It;)++yt;var he=yt-V;if(he>=16){Jt=he>>4;for(var Ut=1;Ut<=Jt;++Ut)at(gt);he&=15}st=32767+y[yt],at(Q[(he<<4)+b[st]]),at(p[st]),yt++}return It!=63&&at(pt),U}function wt(C){C=Math.min(Math.max(C,1),100),s!=C&&(function(j){for(var U=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Y=0;Y<64;Y++){var Q=r((U[Y]*j+50)/100);Q=Math.min(Math.max(Q,1),255),a[X[Y]]=Q}for(var st=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],pt=0;pt<64;pt++){var gt=r((st[pt]*j+50)/100);gt=Math.min(Math.max(gt,1),255),l[X[pt]]=gt}for(var Et=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Nt=0,Dt=0;Dt<8;Dt++)for(var It=0;It<8;It++)u[Nt]=1/(a[X[Nt]]*Et[Dt]*Et[It]*8),d[Nt]=1/(l[X[Nt]]*Et[Dt]*Et[It]*8),Nt++}(C<50?Math.floor(5e3/C):Math.floor(200-2*C)),s=C)}this.encode=function(C,j){j&&wt(j),w=new Array,S=0,A=7,mt(65496),mt(65504),mt(16),it(74),it(70),it(73),it(70),it(0),it(1),it(1),it(0),mt(1),mt(1),it(0),it(0),function(){mt(65499),mt(132),it(0);for(var Rt=0;Rt<64;Rt++)it(a[Rt]);it(1);for(var Vt=0;Vt<64;Vt++)it(l[Vt])}(),function(Rt,Vt){mt(65472),mt(17),it(8),mt(Vt),mt(Rt),it(3),it(1),it(17),it(0),it(2),it(17),it(1),it(3),it(17),it(1)}(C.width,C.height),function(){mt(65476),mt(418),it(0);for(var Rt=0;Rt<16;Rt++)it(H[Rt+1]);for(var Vt=0;Vt<=11;Vt++)it(et[Vt]);it(16);for(var se=0;se<16;se++)it(ct[se+1]);for(var fe=0;fe<=161;fe++)it(I[fe]);it(1);for(var be=0;be<16;be++)it(O[be+1]);for(var Se=0;Se<=11;Se++)it($[Se]);it(17);for(var Oe=0;Oe<16;Oe++)it(W[Oe+1]);for(var Zt=0;Zt<=161;Zt++)it(ht[Zt])}(),mt(65498),mt(12),it(3),it(1),it(0),it(2),it(17),it(3),it(17),it(0),it(63),it(0);var U=0,Y=0,Q=0;S=0,A=7,this.encode.displayName="_encode_";for(var st,pt,gt,Et,Nt,Dt,It,Jt,yt,V=C.data,he=C.width,Ut=C.height,Ct=4*he,Pt=0;Pt<Ut;){for(st=0;st<Ct;){for(Nt=Ct*Pt+st,It=-1,Jt=0,yt=0;yt<64;yt++)Dt=Nt+(Jt=yt>>3)*Ct+(It=4*(7&yt)),Pt+Jt>=Ut&&(Dt-=Ct*(Pt+1+Jt-Ut)),st+It>=Ct&&(Dt-=st+It-Ct+4),pt=V[Dt++],gt=V[Dt++],Et=V[Dt++],E[yt]=(K[pt]+K[gt+256>>0]+K[Et+512>>0]>>16)-128,D[yt]=(K[pt+768>>0]+K[gt+1024>>0]+K[Et+1280>>0]>>16)-128,q[yt]=(K[pt+1280>>0]+K[gt+1536>>0]+K[Et+1792>>0]>>16)-128;U=ut(E,u,U,t,i),Y=ut(D,d,Y,e,n),Q=ut(q,d,Q,e,n),st+=32}Pt+=8}if(A>=0){var Ot=[];Ot[1]=A+1,Ot[0]=(1<<A+1)-1,at(Ot)}return mt(65497),new Uint8Array(w)},o=o||50,function(){for(var C=String.fromCharCode,j=0;j<256;j++)G[j]=C(j)}(),t=lt(H,et),e=lt(O,$),i=lt(ct,I),n=lt(W,ht),function(){for(var C=1,j=2,U=1;U<=15;U++){for(var Y=C;Y<j;Y++)b[32767+Y]=U,p[32767+Y]=[],p[32767+Y][1]=U,p[32767+Y][0]=Y;for(var Q=-(j-1);Q<=-C;Q++)b[32767+Q]=U,p[32767+Q]=[],p[32767+Q][1]=U,p[32767+Q][0]=j-1+Q;C<<=1,j<<=1}}(),function(){for(var C=0;C<256;C++)K[C]=19595*C,K[C+256>>0]=38470*C,K[C+512>>0]=7471*C+32768,K[C+768>>0]=-11059*C,K[C+1024>>0]=-21709*C,K[C+1280>>0]=32768*C+8421375,K[C+1536>>0]=-27439*C,K[C+1792>>0]=-5329*C}(),wt(o)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ts(o,t){if(this.pos=0,this.buffer=o,this.datav=new DataView(o.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function jm(o){function t(H){if(!H)throw Error("assert :P")}function e(H,et,ct){for(var I=0;4>I;I++)if(H[et+I]!=ct.charCodeAt(I))return!0;return!1}function i(H,et,ct,I,O){for(var $=0;$<O;$++)H[et+$]=ct[I+$]}function n(H,et,ct,I){for(var O=0;O<I;O++)H[et+O]=ct}function s(H){return new Int32Array(H)}function r(H,et){for(var ct=[],I=0;I<H;I++)ct.push(new et);return ct}function a(H,et){var ct=[];return function I(O,$,W){for(var ht=W[$],lt=0;lt<ht&&(O.push(W.length>$+1?[]:new et),!(W.length<$+1));lt++)I(O[lt],$+1,W)}(ct,0,H),ct}var l=function(){var H=this;function et(h,f){for(var v=1<<f-1>>>0;h&v;)v>>>=1;return v?(h&v-1)+v:h}function ct(h,f,v,_,x){t(!(_%v));do h[f+(_-=v)]=x;while(0<_)}function I(h,f,v,_,x){if(t(2328>=x),512>=x)var k=s(512);else if((k=s(x))==null)return 0;return function(T,F,R,B,Z,dt){var ft,rt,xt=F,bt=1<<R,tt=s(16),nt=s(16);for(t(Z!=0),t(B!=null),t(T!=null),t(0<R),rt=0;rt<Z;++rt){if(15<B[rt])return 0;++tt[B[rt]]}if(tt[0]==Z)return 0;for(nt[1]=0,ft=1;15>ft;++ft){if(tt[ft]>1<<ft)return 0;nt[ft+1]=nt[ft]+tt[ft]}for(rt=0;rt<Z;++rt)ft=B[rt],0<B[rt]&&(dt[nt[ft]++]=rt);if(nt[15]==1)return(B=new O).g=0,B.value=dt[0],ct(T,xt,1,bt,B),bt;var At,St=-1,_t=bt-1,qt=0,kt=1,$t=1,Ft=1<<R;for(rt=0,ft=1,Z=2;ft<=R;++ft,Z<<=1){if(kt+=$t<<=1,0>($t-=tt[ft]))return 0;for(;0<tt[ft];--tt[ft])(B=new O).g=ft,B.value=dt[rt++],ct(T,xt+qt,Z,Ft,B),qt=et(qt,ft)}for(ft=R+1,Z=2;15>=ft;++ft,Z<<=1){if(kt+=$t<<=1,0>($t-=tt[ft]))return 0;for(;0<tt[ft];--tt[ft]){if(B=new O,(qt&_t)!=St){for(xt+=Ft,At=1<<(St=ft)-R;15>St&&!(0>=(At-=tt[St]));)++St,At<<=1;bt+=Ft=1<<(At=St-R),T[F+(St=qt&_t)].g=At+R,T[F+St].value=xt-F-St}B.g=ft-R,B.value=dt[rt++],ct(T,xt+(qt>>R),Z,Ft,B),qt=et(qt,ft)}}return kt!=2*nt[15]-1?0:bt}(h,f,v,_,x,k)}function O(){this.value=this.g=0}function $(){this.value=this.g=0}function W(){this.G=r(5,O),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=r(Ui,$)}function ht(h,f,v,_){t(h!=null),t(f!=null),t(2147483648>_),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=f,h.pa=v,h.Jd=f,h.Yc=v+_,h.Zc=4<=_?v+_-4+1:v,st(h)}function lt(h,f){for(var v=0;0<f--;)v|=gt(h,128)<<f;return v}function at(h,f){var v=lt(h,f);return pt(h)?-v:v}function it(h,f,v,_){var x,k=0;for(t(h!=null),t(f!=null),t(4294967288>_),h.Sb=_,h.Ra=0,h.u=0,h.h=0,4<_&&(_=4),x=0;x<_;++x)k+=f[v+x]<<8*x;h.Ra=k,h.bb=_,h.oa=f,h.pa=v}function mt(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<bh-8>>>0,++h.bb,h.u-=8;U(h)&&(h.h=1,h.u=0)}function ut(h,f){if(t(0<=f),!h.h&&f<=mh){var v=j(h)&gh[f];return h.u+=f,mt(h),v}return h.h=1,h.u=0}function wt(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function C(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function j(h){return h.Ra>>>(h.u&bh-1)>>>0}function U(h){return t(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>bh}function Y(h,f){h.u=f,h.h=U(h)}function Q(h){h.u>=hu&&(t(h.u>=hu),mt(h))}function st(h){t(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(t(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function pt(h){return lt(h,1)}function gt(h,f){var v=h.Ca;0>h.b&&st(h);var _=h.b,x=v*f>>>8,k=(h.I>>>_>x)+0;for(k?(v-=x,h.I-=x+1<<_>>>0):v=x+1,_=v,x=0;256<=_;)x+=8,_>>=8;return _=7^x+Ln[_],h.b-=_,h.Ca=(v<<_)-1,k}function Et(h,f,v){h[f+0]=v>>24&255,h[f+1]=v>>16&255,h[f+2]=v>>8&255,h[f+3]=v>>0&255}function Nt(h,f){return h[f+0]<<0|h[f+1]<<8}function Dt(h,f){return Nt(h,f)|h[f+2]<<16}function It(h,f){return Nt(h,f)|Nt(h,f+2)<<16}function Jt(h,f){var v=1<<f;return t(h!=null),t(0<f),h.X=s(v),h.X==null?0:(h.Mb=32-f,h.Xa=f,1)}function yt(h,f){t(h!=null),t(f!=null),t(h.Xa==f.Xa),i(f.X,0,h.X,0,1<<f.Xa)}function V(){this.X=[],this.Xa=this.Mb=0}function he(h,f,v,_){t(v!=null),t(_!=null);var x=v[0],k=_[0];return x==0&&(x=(h*k+f/2)/f),k==0&&(k=(f*x+h/2)/h),0>=x||0>=k?0:(v[0]=x,_[0]=k,1)}function Ut(h,f){return h+(1<<f)-1>>>f}function Ct(h,f){return((4278255360&h)+(4278255360&f)>>>0&4278255360)+((16711935&h)+(16711935&f)>>>0&16711935)>>>0}function Pt(h,f){H[f]=function(v,_,x,k,T,F,R){var B;for(B=0;B<T;++B){var Z=H[h](F[R+B-1],x,k+B);F[R+B]=Ct(v[_+B],Z)}}}function Ot(){this.ud=this.hd=this.jd=0}function Rt(h,f){return((4278124286&(h^f))>>>1)+(h&f)>>>0}function Vt(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function se(h,f){return Vt(h+(h-f+.5>>1))}function fe(h,f,v){return Math.abs(f-v)-Math.abs(h-v)}function be(h,f,v,_,x,k,T){for(_=k[T-1],v=0;v<x;++v)k[T+v]=_=Ct(h[f+v],_)}function Se(h,f,v,_,x){var k;for(k=0;k<v;++k){var T=h[f+k],F=T>>8&255,R=16711935&(R=(R=16711935&T)+((F<<16)+F));_[x+k]=(4278255360&T)+R>>>0}}function Oe(h,f){f.jd=h>>0&255,f.hd=h>>8&255,f.ud=h>>16&255}function Zt(h,f,v,_,x,k){var T;for(T=0;T<_;++T){var F=f[v+T],R=F>>>8,B=F,Z=255&(Z=(Z=F>>>16)+((h.jd<<24>>24)*(R<<24>>24)>>>5));B=255&(B=(B=B+((h.hd<<24>>24)*(R<<24>>24)>>>5))+((h.ud<<24>>24)*(Z<<24>>24)>>>5)),x[k+T]=(4278255360&F)+(Z<<16)+B}}function ye(h,f,v,_,x){H[f]=function(k,T,F,R,B,Z,dt,ft,rt){for(R=dt;R<ft;++R)for(dt=0;dt<rt;++dt)B[Z++]=x(F[_(k[T++])])},H[h]=function(k,T,F,R,B,Z,dt){var ft=8>>k.b,rt=k.Ea,xt=k.K[0],bt=k.w;if(8>ft)for(k=(1<<k.b)-1,bt=(1<<ft)-1;T<F;++T){var tt,nt=0;for(tt=0;tt<rt;++tt)tt&k||(nt=_(R[B++])),Z[dt++]=x(xt[nt&bt]),nt>>=ft}else H["VP8LMapColor"+v](R,B,xt,bt,Z,dt,T,F,rt)}}function jt(h,f,v,_,x){for(v=f+v;f<v;){var k=h[f++];_[x++]=k>>16&255,_[x++]=k>>8&255,_[x++]=k>>0&255}}function Ji(h,f,v,_,x){for(v=f+v;f<v;){var k=h[f++];_[x++]=k>>16&255,_[x++]=k>>8&255,_[x++]=k>>0&255,_[x++]=k>>24&255}}function Ne(h,f,v,_,x){for(v=f+v;f<v;){var k=(T=h[f++])>>16&240|T>>12&15,T=T>>0&240|T>>28&15;_[x++]=k,_[x++]=T}}function ys(h,f,v,_,x){for(v=f+v;f<v;){var k=(T=h[f++])>>16&248|T>>13&7,T=T>>5&224|T>>3&31;_[x++]=k,_[x++]=T}}function He(h,f,v,_,x){for(v=f+v;f<v;){var k=h[f++];_[x++]=k>>0&255,_[x++]=k>>8&255,_[x++]=k>>16&255}}function Ke(h,f,v,_,x,k){if(k==0)for(v=f+v;f<v;)Et(_,((k=h[f++])[0]>>24|k[1]>>8&65280|k[2]<<8&16711680|k[3]<<24)>>>0),x+=32;else i(_,x,h,f,v)}function Js(h,f){H[f][0]=H[h+"0"],H[f][1]=H[h+"1"],H[f][2]=H[h+"2"],H[f][3]=H[h+"3"],H[f][4]=H[h+"4"],H[f][5]=H[h+"5"],H[f][6]=H[h+"6"],H[f][7]=H[h+"7"],H[f][8]=H[h+"8"],H[f][9]=H[h+"9"],H[f][10]=H[h+"10"],H[f][11]=H[h+"11"],H[f][12]=H[h+"12"],H[f][13]=H[h+"13"],H[f][14]=H[h+"0"],H[f][15]=H[h+"0"]}function Pe(h){return h==e1||h==i1||h==Wf||h==n1}function Lo(){this.eb=[],this.size=this.A=this.fb=0}function ni(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ws(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Lo,this.f.kb=new ni,this.sd=null}function Tr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function si(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function re(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function ke(h,f){var v=h.T,_=f.ba.f.RGBA,x=_.eb,k=_.fb+h.ka*_.A,T=os[f.ba.S],F=h.y,R=h.O,B=h.f,Z=h.N,dt=h.ea,ft=h.W,rt=f.cc,xt=f.dc,bt=f.Mc,tt=f.Nc,nt=h.ka,At=h.ka+h.T,St=h.U,_t=St+1>>1;for(nt==0?T(F,R,null,null,B,Z,dt,ft,B,Z,dt,ft,x,k,null,null,St):(T(f.ec,f.fc,F,R,rt,xt,bt,tt,B,Z,dt,ft,x,k-_.A,x,k,St),++v);nt+2<At;nt+=2)rt=B,xt=Z,bt=dt,tt=ft,Z+=h.Rc,ft+=h.Rc,k+=2*_.A,T(F,(R+=2*h.fa)-h.fa,F,R,rt,xt,bt,tt,B,Z,dt,ft,x,k-_.A,x,k,St);return R+=h.fa,h.j+At<h.o?(i(f.ec,f.fc,F,R,St),i(f.cc,f.dc,B,Z,_t),i(f.Mc,f.Nc,dt,ft,_t),v--):1&At||T(F,R,null,null,B,Z,dt,ft,B,Z,dt,ft,x,k+_.A,null,null,St),v}function No(h,f,v){var _=h.F,x=[h.J];if(_!=null){var k=h.U,T=f.ba.S,F=T==Uf||T==Wf;f=f.ba.f.RGBA;var R=[0],B=h.ka;R[0]=h.T,h.Kb&&(B==0?--R[0]:(--B,x[0]-=h.width),h.j+h.ka+h.T==h.o&&(R[0]=h.o-h.j-B));var Z=f.eb;B=f.fb+B*f.A,h=Ge(_,x[0],h.width,k,R,Z,B+(F?0:3),f.A),t(v==R),h&&Pe(T)&&rs(Z,B,F,k,R,f.A)}return 0}function zi(h){var f=h.ma,v=f.ba.S,_=11>v,x=v==Hf||v==zf||v==Uf||v==t1||v==12||Pe(v);if(f.memory=null,f.Ib=null,f.Jb=null,f.Nd=null,!ou(f.Oa,h,x?11:12))return 0;if(x&&Pe(v)&&Lt(),h.da)alert("todo:use_scaling");else{if(_){if(f.Ib=re,h.Kb){if(v=h.U+1>>1,f.memory=s(h.U+2*v),f.memory==null)return 0;f.ec=f.memory,f.fc=0,f.cc=f.ec,f.dc=f.fc+h.U,f.Mc=f.cc,f.Nc=f.dc+v,f.Ib=ke,Lt()}}else alert("todo:EmitYUV");x&&(f.Jb=No,_&&ot())}if(_&&!R2){for(h=0;256>h;++h)kv[h]=89858*(h-128)+Gf>>Vf,Fv[h]=-22014*(h-128)+Gf,Iv[h]=-45773*(h-128),Tv[h]=113618*(h-128)+Gf>>Vf;for(h=mu;h<a1;++h)f=76283*(h-16)+Gf>>Vf,Mv[h-mu]=jn(f,255),Rv[h-mu]=jn(f+8>>4,15);R2=1}return 1}function Qs(h){var f=h.ma,v=h.U,_=h.T;return t(!(1&h.ka)),0>=v||0>=_?0:(v=f.Ib(h,f),f.Jb!=null&&f.Jb(h,f,v),f.Dc+=v,1)}function Zs(h){h.ma.memory=null}function Yt(h,f,v,_){return ut(h,8)!=47?0:(f[0]=ut(h,14)+1,v[0]=ut(h,14)+1,_[0]=ut(h,1),ut(h,3)!=0?0:!h.h)}function As(h,f){if(4>h)return h+1;var v=h-2>>1;return(2+(1&h)<<v)+ut(f,v)+1}function tr(h,f){return 120<f?f-120:1<=(v=((v=mv[f-1])>>4)*h+(8-(15&v)))?v:1;var v}function xn(h,f,v){var _=j(v),x=h[f+=255&_].g-8;return 0<x&&(Y(v,v.u+8),_=j(v),f+=h[f].value,f+=_&(1<<x)-1),Y(v,v.u+h[f].g),h[f].value}function Si(h,f,v){return v.g+=h.g,v.value+=h.value<<f>>>0,t(8>=v.g),h.g}function bi(h,f,v){var _=h.xc;return t((f=_==0?0:h.vc[h.md*(v>>_)+(f>>_)])<h.Wb),h.Ya[f]}function On(h,f,v,_){var x=h.ab,k=h.c*f,T=h.C;f=T+f;var F=v,R=_;for(_=h.Ta,v=h.Ua;0<x--;){var B=h.gc[x],Z=T,dt=f,ft=F,rt=R,xt=(R=_,F=v,B.Ea);switch(t(Z<dt),t(dt<=B.nc),B.hc){case 2:Mf(ft,rt,(dt-Z)*xt,R,F);break;case 0:var bt=Z,tt=dt,nt=R,At=F,St=(Ft=B).Ea;bt==0&&(Qg(ft,rt,null,null,1,nt,At),be(ft,rt+1,0,0,St-1,nt,At+1),rt+=St,At+=St,++bt);for(var _t=1<<Ft.b,qt=_t-1,kt=Ut(St,Ft.b),$t=Ft.K,Ft=Ft.w+(bt>>Ft.b)*kt;bt<tt;){var Ee=$t,Ie=Ft,Le=1;for(cu(ft,rt,nt,At-St,1,nt,At);Le<St;){var we=(Le&~qt)+_t;we>St&&(we=St),(0,Ea[Ee[Ie++]>>8&15])(ft,rt+ +Le,nt,At+Le-St,we-Le,nt,At+Le),Le=we}rt+=St,At+=St,++bt&qt||(Ft+=kt)}dt!=B.nc&&i(R,F-xt,R,F+(dt-Z-1)*xt,xt);break;case 1:for(xt=ft,tt=rt,St=(ft=B.Ea)-(At=ft&~(nt=(rt=1<<B.b)-1)),bt=Ut(ft,B.b),_t=B.K,B=B.w+(Z>>B.b)*bt;Z<dt;){for(qt=_t,kt=B,$t=new Ot,Ft=tt+At,Ee=tt+ft;tt<Ft;)Oe(qt[kt++],$t),Io($t,xt,tt,rt,R,F),tt+=rt,F+=rt;tt<Ee&&(Oe(qt[kt++],$t),Io($t,xt,tt,St,R,F),tt+=St,F+=St),++Z&nt||(B+=bt)}break;case 3:if(ft==R&&rt==F&&0<B.b){for(tt=R,ft=xt=F+(dt-Z)*xt-(At=(dt-Z)*Ut(B.Ea,B.b)),rt=R,nt=F,bt=[],At=(St=At)-1;0<=At;--At)bt[At]=rt[nt+At];for(At=St-1;0<=At;--At)tt[ft+At]=bt[At];is(B,Z,dt,R,xt,R,F)}else is(B,Z,dt,ft,rt,R,F)}F=_,R=v}R!=v&&i(_,v,F,R,k)}function Ql(h,f){var v=h.V,_=h.Ba+h.c*h.C,x=f-h.C;if(t(f<=h.l.o),t(16>=x),0<x){var k=h.l,T=h.Ta,F=h.Ua,R=k.width;if(On(h,x,v,_),x=F=[F],t((v=h.C)<(_=f)),t(k.v<k.va),_>k.o&&(_=k.o),v<k.j){var B=k.j-v;v=k.j,x[0]+=B*R}if(v>=_?v=0:(x[0]+=4*k.v,k.ka=v-k.j,k.U=k.va-k.v,k.T=_-v,v=1),v){if(F=F[0],11>(v=h.ca).S){var Z=v.f.RGBA,dt=(_=v.S,x=k.U,k=k.T,B=Z.eb,Z.A),ft=k;for(Z=Z.fb+h.Ma*Z.A;0<ft--;){var rt=T,xt=F,bt=x,tt=B,nt=Z;switch(_){case qf:Nn(rt,xt,bt,tt,nt);break;case Hf:fn(rt,xt,bt,tt,nt);break;case e1:fn(rt,xt,bt,tt,nt),rs(tt,nt,0,bt,1,0);break;case L2:Dr(rt,xt,bt,tt,nt);break;case zf:Ke(rt,xt,bt,tt,nt,1);break;case i1:Ke(rt,xt,bt,tt,nt,1),rs(tt,nt,0,bt,1,0);break;case Uf:Ke(rt,xt,bt,tt,nt,0);break;case Wf:Ke(rt,xt,bt,tt,nt,0),rs(tt,nt,1,bt,1,0);break;case t1:Ca(rt,xt,bt,tt,nt);break;case n1:Ca(rt,xt,bt,tt,nt),Ve(tt,nt,bt,1,0);break;case N2:Rr(rt,xt,bt,tt,nt);break;default:t(0)}F+=R,Z+=dt}h.Ma+=k}else alert("todo:EmitRescaledRowsYUVA");t(h.Ma<=v.height)}}h.C=f,t(h.C<=h.i)}function Ir(h){var f;if(0<h.ua)return 0;for(f=0;f<h.Wb;++f){var v=h.Ya[f].G,_=h.Ya[f].H;if(0<v[1][_[1]+0].g||0<v[2][_[2]+0].g||0<v[3][_[3]+0].g)return 0}return 1}function _s(h,f,v,_,x,k){if(h.Z!=0){var T=h.qd,F=h.rd;for(t(Ia[h.Z]!=null);f<v;++f)Ia[h.Z](T,F,_,x,_,x,k),T=_,F=x,x+=k;h.qd=T,h.rd=F}}function xs(h,f){var v=h.l.ma,_=v.Z==0||v.Z==1?h.l.j:h.C;if(_=h.C<_?_:h.C,t(f<=h.l.o),f>_){var x=h.l.width,k=v.ca,T=v.tb+x*_,F=h.V,R=h.Ba+h.c*_,B=h.gc;t(h.ab==1),t(B[0].hc==3),Rf(B[0],_,f,F,R,k,T),_s(v,_,f,k,T,x)}h.C=h.Ma=f}function Ss(h,f,v,_,x,k,T){var F=h.$/_,R=h.$%_,B=h.m,Z=h.s,dt=v+h.$,ft=dt;x=v+_*x;var rt=v+_*k,xt=280+Z.ua,bt=h.Pb?F:16777216,tt=0<Z.ua?Z.Wa:null,nt=Z.wc,At=dt<rt?bi(Z,R,F):null;t(h.C<k),t(rt<=x);var St=!1;t:for(;;){for(;St||dt<rt;){var _t=0;if(F>=bt){var qt=dt-v;t((bt=h).Pb),bt.wd=bt.m,bt.xd=qt,0<bt.s.ua&&yt(bt.s.Wa,bt.s.vb),bt=F+vv}if(R&nt||(At=bi(Z,R,F)),t(At!=null),At.Qb&&(f[dt]=At.qb,St=!0),!St)if(Q(B),At.jc){_t=B,qt=f;var kt=dt,$t=At.pd[j(_t)&Ui-1];t(At.jc),256>$t.g?(Y(_t,_t.u+$t.g),qt[kt]=$t.value,_t=0):(Y(_t,_t.u+$t.g-256),t(256<=$t.value),_t=$t.value),_t==0&&(St=!0)}else _t=xn(At.G[0],At.H[0],B);if(B.h)break;if(St||256>_t){if(!St)if(At.nd)f[dt]=(At.qb|_t<<8)>>>0;else{if(Q(B),St=xn(At.G[1],At.H[1],B),Q(B),qt=xn(At.G[2],At.H[2],B),kt=xn(At.G[3],At.H[3],B),B.h)break;f[dt]=(kt<<24|St<<16|_t<<8|qt)>>>0}if(St=!1,++dt,++R>=_&&(R=0,++F,T!=null&&F<=k&&!(F%16)&&T(h,F),tt!=null))for(;ft<dt;)_t=f[ft++],tt.X[(506832829*_t&4294967295)>>>tt.Mb]=_t}else if(280>_t){if(_t=As(_t-256,B),qt=xn(At.G[4],At.H[4],B),Q(B),qt=tr(_,qt=As(qt,B)),B.h)break;if(dt-v<qt||x-dt<_t)break t;for(kt=0;kt<_t;++kt)f[dt+kt]=f[dt+kt-qt];for(dt+=_t,R+=_t;R>=_;)R-=_,++F,T!=null&&F<=k&&!(F%16)&&T(h,F);if(t(dt<=x),R&nt&&(At=bi(Z,R,F)),tt!=null)for(;ft<dt;)_t=f[ft++],tt.X[(506832829*_t&4294967295)>>>tt.Mb]=_t}else{if(!(_t<xt))break t;for(St=_t-280,t(tt!=null);ft<dt;)_t=f[ft++],tt.X[(506832829*_t&4294967295)>>>tt.Mb]=_t;_t=dt,t(!(St>>>(qt=tt).Xa)),f[_t]=qt.X[St],St=!0}St||t(B.h==U(B))}if(h.Pb&&B.h&&dt<x)t(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&yt(h.s.vb,h.s.Wa);else{if(B.h)break t;T!=null&&T(h,F>k?k:F),h.a=0,h.$=dt-v}return 1}return h.a=3,0}function er(h){t(h!=null),h.vc=null,h.yc=null,h.Ya=null;var f=h.Wa;f!=null&&(f.X=null),h.vb=null,t(h!=null)}function es(){var h=new Jg;return h==null?null:(h.a=0,h.xb=P2,Js("Predictor","VP8LPredictors"),Js("Predictor","VP8LPredictors_C"),Js("PredictorAdd","VP8LPredictorsAdd"),Js("PredictorAdd","VP8LPredictorsAdd_C"),Mf=Se,Io=Zt,Nn=jt,fn=Ji,Ca=Ne,Rr=ys,Dr=He,H.VP8LMapColor32b=vh,H.VP8LMapColor8b=Df,h)}function ir(h,f,v,_,x){var k=1,T=[h],F=[f],R=_.m,B=_.s,Z=null,dt=0;t:for(;;){if(v)for(;k&&ut(R,1);){var ft=T,rt=F,xt=_,bt=1,tt=xt.m,nt=xt.gc[xt.ab],At=ut(tt,2);if(xt.Oc&1<<At)k=0;else{switch(xt.Oc|=1<<At,nt.hc=At,nt.Ea=ft[0],nt.nc=rt[0],nt.K=[null],++xt.ab,t(4>=xt.ab),At){case 0:case 1:nt.b=ut(tt,3)+2,bt=ir(Ut(nt.Ea,nt.b),Ut(nt.nc,nt.b),0,xt,nt.K),nt.K=nt.K[0];break;case 3:var St,_t=ut(tt,8)+1,qt=16<_t?0:4<_t?1:2<_t?2:3;if(ft[0]=Ut(nt.Ea,qt),nt.b=qt,St=bt=ir(_t,1,0,xt,nt.K)){var kt,$t=_t,Ft=nt,Ee=1<<(8>>Ft.b),Ie=s(Ee);if(Ie==null)St=0;else{var Le=Ft.K[0],we=Ft.w;for(Ie[0]=Ft.K[0][0],kt=1;kt<1*$t;++kt)Ie[kt]=Ct(Le[we+kt],Ie[kt-1]);for(;kt<4*Ee;++kt)Ie[kt]=0;Ft.K[0]=null,Ft.K[0]=Ie,St=1}}bt=St;break;case 2:break;default:t(0)}k=bt}}if(T=T[0],F=F[0],k&&ut(R,1)&&!(k=1<=(dt=ut(R,4))&&11>=dt)){_.a=3;break t}var ze;if(ze=k)e:{var je,ue,yi,En=_,wi=T,Cn=F,Fe=dt,qn=v,Hn=En.m,Mi=En.s,Wi=[null],gn=1,ls=0,ar=bv[Fe];i:for(;;){if(qn&&ut(Hn,1)){var Ri=ut(Hn,3)+2,qr=Ut(wi,Ri),Oo=Ut(Cn,Ri),xh=qr*Oo;if(!ir(qr,Oo,0,En,Wi))break i;for(Wi=Wi[0],Mi.xc=Ri,je=0;je<xh;++je){var Fa=Wi[je]>>8&65535;Wi[je]=Fa,Fa>=gn&&(gn=Fa+1)}}if(Hn.h)break i;for(ue=0;5>ue;++ue){var ai=E2[ue];!ue&&0<Fe&&(ai+=1<<Fe),ls<ai&&(ls=ai)}var o1=r(gn*ar,O),j2=gn,B2=r(j2,W);if(B2==null)var $f=null;else t(65536>=j2),$f=B2;var bu=s(ls);if($f==null||bu==null||o1==null){En.a=1;break i}var Yf=o1;for(je=yi=0;je<gn;++je){var Ps=$f[je],Sh=Ps.G,Lh=Ps.H,q2=0,Kf=1,H2=0;for(ue=0;5>ue;++ue){ai=E2[ue],Sh[ue]=Yf,Lh[ue]=yi,!ue&&0<Fe&&(ai+=1<<Fe);s:{var Jf,l1=ai,Qf=En,vu=bu,jv=Yf,Bv=yi,h1=0,Ma=Qf.m,qv=ut(Ma,1);if(n(vu,0,0,l1),qv){var Hv=ut(Ma,1)+1,zv=ut(Ma,1),z2=ut(Ma,zv==0?1:8);vu[z2]=1,Hv==2&&(vu[z2=ut(Ma,8)]=1);var Zf=1}else{var U2=s(19),W2=ut(Ma,4)+4;if(19<W2){Qf.a=3;var tp=0;break s}for(Jf=0;Jf<W2;++Jf)U2[gv[Jf]]=ut(Ma,3);var c1=void 0,yu=void 0,V2=Qf,Uv=U2,ep=l1,G2=vu,u1=0,Ra=V2.m,X2=8,$2=r(128,O);n:for(;I($2,0,7,Uv,19);){if(ut(Ra,1)){var Wv=2+2*ut(Ra,3);if((c1=2+ut(Ra,Wv))>ep)break n}else c1=ep;for(yu=0;yu<ep&&c1--;){Q(Ra);var Y2=$2[0+(127&j(Ra))];Y(Ra,Ra.u+Y2.g);var Nh=Y2.value;if(16>Nh)G2[yu++]=Nh,Nh!=0&&(X2=Nh);else{var Vv=Nh==16,K2=Nh-16,Gv=fv[K2],J2=ut(Ra,dv[K2])+Gv;if(yu+J2>ep)break n;for(var Xv=Vv?X2:0;0<J2--;)G2[yu++]=Xv}}u1=1;break n}u1||(V2.a=3),Zf=u1}(Zf=Zf&&!Ma.h)&&(h1=I(jv,Bv,8,vu,l1)),Zf&&h1!=0?tp=h1:(Qf.a=3,tp=0)}if(tp==0)break i;if(Kf&&pv[ue]==1&&(Kf=Yf[yi].g==0),q2+=Yf[yi].g,yi+=tp,3>=ue){var wu,d1=bu[0];for(wu=1;wu<ai;++wu)bu[wu]>d1&&(d1=bu[wu]);H2+=d1}}if(Ps.nd=Kf,Ps.Qb=0,Kf&&(Ps.qb=(Sh[3][Lh[3]+0].value<<24|Sh[1][Lh[1]+0].value<<16|Sh[2][Lh[2]+0].value)>>>0,q2==0&&256>Sh[0][Lh[0]+0].value&&(Ps.Qb=1,Ps.qb+=Sh[0][Lh[0]+0].value<<8)),Ps.jc=!Ps.Qb&&6>H2,Ps.jc){var ip,Hr=Ps;for(ip=0;ip<Ui;++ip){var Da=ip,Oa=Hr.pd[Da],np=Hr.G[0][Hr.H[0]+Da];256<=np.value?(Oa.g=np.g+256,Oa.value=np.value):(Oa.g=0,Oa.value=0,Da>>=Si(np,8,Oa),Da>>=Si(Hr.G[1][Hr.H[1]+Da],16,Oa),Da>>=Si(Hr.G[2][Hr.H[2]+Da],0,Oa),Si(Hr.G[3][Hr.H[3]+Da],24,Oa))}}}Mi.vc=Wi,Mi.Wb=gn,Mi.Ya=$f,Mi.yc=o1,ze=1;break e}ze=0}if(!(k=ze)){_.a=3;break t}if(0<dt){if(B.ua=1<<dt,!Jt(B.Wa,dt)){_.a=1,k=0;break t}}else B.ua=0;var f1=_,Q2=T,$v=F,p1=f1.s,g1=p1.xc;if(f1.c=Q2,f1.i=$v,p1.md=Ut(Q2,g1),p1.wc=g1==0?-1:(1<<g1)-1,v){_.xb=Lv;break t}if((Z=s(T*F))==null){_.a=1,k=0;break t}k=(k=Ss(_,Z,0,T,F,F,null))&&!R.h;break t}return k?(x!=null?x[0]=Z:(t(Z==null),t(v)),_.$=0,v||er(B)):er(B),k}function Eo(h,f){var v=h.c*h.i,_=v+f+16*f;return t(h.c<=f),h.V=s(_),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+v+f,1)}function Zl(h,f){var v=h.C,_=f-v,x=h.V,k=h.Ba+h.c*v;for(t(f<=h.l.o);0<_;){var T=16<_?16:_,F=h.l.ma,R=h.l.width,B=R*T,Z=F.ca,dt=F.tb+R*v,ft=h.Ta,rt=h.Ua;On(h,T,x,k),ui(ft,rt,Z,dt,B),_s(F,v,v+T,Z,dt,R),_-=T,x+=T*h.c,v+=T}t(v==f),h.C=h.Ma=f}function th(){this.ub=this.yd=this.td=this.Rb=0}function eh(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ih(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function pf(){this.Yb=function(){var h=[];return function f(v,_,x){for(var k=x[_],T=0;T<k&&(v.push(x.length>_+1?[]:0),!(x.length<_+1));T++)f(v[T],_+1,x)}(h,0,[3,11]),h}()}function Cg(){this.jb=s(3),this.Wc=a([4,8],pf),this.Xc=a([4,17],pf)}function Pg(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function nh(){this.ld=this.La=this.dd=this.tc=0}function gf(){this.Na=this.la=0}function kg(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Vc(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Tg(){this.uc=this.M=this.Nb=0,this.wa=Array(new nh),this.Y=0,this.ya=Array(new Vc),this.aa=0,this.l=new sh}function mf(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Ig(){this.cb=this.a=0,this.sc="",this.m=new wt,this.Od=new th,this.Kc=new eh,this.ed=new Pg,this.Qa=new ih,this.Ic=this.$c=this.Aa=0,this.D=new Tg,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=r(8,wt),this.ia=0,this.pb=r(4,kg),this.Pa=new Cg,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new mf),this.Hd=0,this.rb=Array(new gf),this.sb=0,this.wa=Array(new nh),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Vc),this.L=this.aa=0,this.gd=a([4,2],nh),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function sh(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Fg(){var h=new Ig;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,gu||(gu=yf)),h}function hi(h,f,v){return h.a==0&&(h.a=f,h.sc=v,h.cb=0),0}function bf(h,f,v){return 3<=v&&h[f+0]==157&&h[f+1]==1&&h[f+2]==42}function vf(h,f){if(h==null)return 0;if(h.a=0,h.sc="OK",f==null)return hi(h,2,"null VP8Io passed to VP8GetHeaders()");var v=f.data,_=f.w,x=f.ha;if(4>x)return hi(h,7,"Truncated header.");var k=v[_+0]|v[_+1]<<8|v[_+2]<<16,T=h.Od;if(T.Rb=!(1&k),T.td=k>>1&7,T.yd=k>>4&1,T.ub=k>>5,3<T.td)return hi(h,3,"Incorrect keyframe parameters.");if(!T.yd)return hi(h,4,"Frame not displayable.");_+=3,x-=3;var F=h.Kc;if(T.Rb){if(7>x)return hi(h,7,"cannot parse picture header");if(!bf(v,_,x))return hi(h,3,"Bad code word");F.c=16383&(v[_+4]<<8|v[_+3]),F.Td=v[_+4]>>6,F.i=16383&(v[_+6]<<8|v[_+5]),F.Ud=v[_+6]>>6,_+=7,x-=7,h.za=F.c+15>>4,h.Ub=F.i+15>>4,f.width=F.c,f.height=F.i,f.Da=0,f.j=0,f.v=0,f.va=f.width,f.o=f.height,f.da=0,f.ib=f.width,f.hb=f.height,f.U=f.width,f.T=f.height,n((k=h.Pa).jb,0,255,k.jb.length),t((k=h.Qa)!=null),k.Cb=0,k.Bb=0,k.Fb=1,n(k.Zb,0,0,k.Zb.length),n(k.Lb,0,0,k.Lb)}if(T.ub>x)return hi(h,7,"bad partition length");ht(k=h.m,v,_,T.ub),_+=T.ub,x-=T.ub,T.Rb&&(F.Ld=pt(k),F.Kd=pt(k)),F=h.Qa;var R,B=h.Pa;if(t(k!=null),t(F!=null),F.Cb=pt(k),F.Cb){if(F.Bb=pt(k),pt(k)){for(F.Fb=pt(k),R=0;4>R;++R)F.Zb[R]=pt(k)?at(k,7):0;for(R=0;4>R;++R)F.Lb[R]=pt(k)?at(k,6):0}if(F.Bb)for(R=0;3>R;++R)B.jb[R]=pt(k)?lt(k,8):255}else F.Bb=0;if(k.Ka)return hi(h,3,"cannot parse segment header");if((F=h.ed).zd=pt(k),F.Tb=lt(k,6),F.wb=lt(k,3),F.Pc=pt(k),F.Pc&&pt(k)){for(B=0;4>B;++B)pt(k)&&(F.vd[B]=at(k,6));for(B=0;4>B;++B)pt(k)&&(F.od[B]=at(k,6))}if(h.L=F.Tb==0?0:F.zd?1:2,k.Ka)return hi(h,3,"cannot parse filter header");var Z=x;if(x=R=_,_=R+Z,F=Z,h.Xb=(1<<lt(h.m,2))-1,Z<3*(B=h.Xb))v=7;else{for(R+=3*B,F-=3*B,Z=0;Z<B;++Z){var dt=v[x+0]|v[x+1]<<8|v[x+2]<<16;dt>F&&(dt=F),ht(h.Jc[+Z],v,R,dt),R+=dt,F-=dt,x+=3}ht(h.Jc[+B],v,R,F),v=R<_?0:5}if(v!=0)return hi(h,v,"cannot parse partitions");for(v=lt(R=h.m,7),x=pt(R)?at(R,4):0,_=pt(R)?at(R,4):0,F=pt(R)?at(R,4):0,B=pt(R)?at(R,4):0,R=pt(R)?at(R,4):0,Z=h.Qa,dt=0;4>dt;++dt){if(Z.Cb){var ft=Z.Zb[dt];Z.Fb||(ft+=v)}else{if(0<dt){h.pb[dt]=h.pb[0];continue}ft=v}var rt=h.pb[dt];rt.Sc[0]=s1[jn(ft+x,127)],rt.Sc[1]=r1[jn(ft+0,127)],rt.Eb[0]=2*s1[jn(ft+_,127)],rt.Eb[1]=101581*r1[jn(ft+F,127)]>>16,8>rt.Eb[1]&&(rt.Eb[1]=8),rt.Qc[0]=s1[jn(ft+B,117)],rt.Qc[1]=r1[jn(ft+R,127)],rt.lc=ft+R}if(!T.Rb)return hi(h,4,"Not a key frame.");for(pt(k),T=h.Pa,v=0;4>v;++v){for(x=0;8>x;++x)for(_=0;3>_;++_)for(F=0;11>F;++F)B=gt(k,xv[v][x][_][F])?lt(k,8):Av[v][x][_][F],T.Wc[v][x].Yb[_][F]=B;for(x=0;17>x;++x)T.Xc[v][x]=T.Wc[v][Sv[x]]}return h.kc=pt(k),h.kc&&(h.Bd=lt(k,8)),h.cb=1}function yf(h,f,v,_,x,k,T){var F=f[x].Yb[v];for(v=0;16>x;++x){if(!gt(h,F[v+0]))return x;for(;!gt(h,F[v+1]);)if(F=f[++x].Yb[0],v=0,x==16)return 16;var R=f[x+1].Yb;if(gt(h,F[v+2])){var B=h,Z=0;if(gt(B,(ft=F)[(dt=v)+3]))if(gt(B,ft[dt+6])){for(F=0,dt=2*(Z=gt(B,ft[dt+8]))+(ft=gt(B,ft[dt+9+Z])),Z=0,ft=yv[dt];ft[F];++F)Z+=Z+gt(B,ft[F]);Z+=3+(8<<dt)}else gt(B,ft[dt+7])?(Z=7+2*gt(B,165),Z+=gt(B,145)):Z=5+gt(B,159);else Z=gt(B,ft[dt+4])?3+gt(B,ft[dt+5]):2;F=R[2]}else Z=1,F=R[1];R=T+wv[x],0>(B=h).b&&st(B);var dt,ft=B.b,rt=(dt=B.Ca>>1)-(B.I>>ft)>>31;--B.b,B.Ca+=rt,B.Ca|=1,B.I-=(dt+1&rt)<<ft,k[R]=((Z^rt)-rt)*_[(0<x)+0]}return 16}function Gc(h){var f=h.rb[h.sb-1];f.la=0,f.Na=0,n(h.zc,0,0,h.zc.length),h.ja=0}function Mg(h,f){if(h==null)return 0;if(f==null)return hi(h,2,"NULL VP8Io parameter in VP8Decode().");if(!h.cb&&!vf(h,f))return 0;if(t(h.cb),f.ac==null||f.ac(f)){f.ob&&(h.L=0);var v=Xf[h.L];if(h.L==2?(h.yb=0,h.zb=0):(h.yb=f.v-v>>4,h.zb=f.j-v>>4,0>h.yb&&(h.yb=0),0>h.zb&&(h.zb=0)),h.Va=f.o+15+v>>4,h.Hb=f.va+15+v>>4,h.Hb>h.za&&(h.Hb=h.za),h.Va>h.Ub&&(h.Va=h.Ub),0<h.L){var _=h.ed;for(v=0;4>v;++v){var x;if(h.Qa.Cb){var k=h.Qa.Lb[v];h.Qa.Fb||(k+=_.Tb)}else k=_.Tb;for(x=0;1>=x;++x){var T=h.gd[v][x],F=k;if(_.Pc&&(F+=_.vd[0],x&&(F+=_.od[0])),0<(F=0>F?0:63<F?63:F)){var R=F;0<_.wb&&(R=4<_.wb?R>>2:R>>1)>9-_.wb&&(R=9-_.wb),1>R&&(R=1),T.dd=R,T.tc=2*F+R,T.ld=40<=F?2:15<=F?1:0}else T.tc=0;T.La=x}}}v=0}else hi(h,6,"Frame setup failed"),v=h.a;if(v=v==0){if(v){h.$c=0,0<h.Aa||(h.Ic=Ov);t:{v=h.Ic,_=4*(R=h.za);var B=32*R,Z=R+1,dt=0<h.L?R*(0<h.Aa?2:1):0,ft=(h.Aa==2?2:1)*R;if((T=_+832+(x=3*(16*v+Xf[h.L])/2*B)+(k=h.Fa!=null&&0<h.Fa.length?h.Kc.c*h.Kc.i:0))!=T)v=0;else{if(T>h.Vb){if(h.Vb=0,h.Ec=s(T),h.Fc=0,h.Ec==null){v=hi(h,1,"no memory during frame initialization.");break t}h.Vb=T}T=h.Ec,F=h.Fc,h.Ac=T,h.Bc=F,F+=_,h.Gd=r(B,mf),h.Hd=0,h.rb=r(Z+1,gf),h.sb=1,h.wa=dt?r(dt,nh):null,h.Y=0,h.D.Nb=0,h.D.wa=h.wa,h.D.Y=h.Y,0<h.Aa&&(h.D.Y+=R),t(!0),h.oc=T,h.pc=F,F+=832,h.ya=r(ft,Vc),h.aa=0,h.D.ya=h.ya,h.D.aa=h.aa,h.Aa==2&&(h.D.aa+=R),h.R=16*R,h.B=8*R,R=(B=Xf[h.L])*h.R,B=B/2*h.B,h.sa=T,h.ta=F+R,h.qa=h.sa,h.ra=h.ta+16*v*h.R+B,h.Ha=h.qa,h.Ia=h.ra+8*v*h.B+B,h.$c=0,F+=x,h.mb=k?T:null,h.nb=k?F:null,t(F+k<=h.Fc+h.Vb),Gc(h),n(h.Ac,h.Bc,0,_),v=1}}if(v){if(f.ka=0,f.y=h.sa,f.O=h.ta,f.f=h.qa,f.N=h.ra,f.ea=h.Ha,f.Vd=h.Ia,f.fa=h.R,f.Rc=h.B,f.F=null,f.J=0,!jf){for(v=-255;255>=v;++v)Li[255+v]=0>v?-v:v;for(v=-1020;1020>=v;++v)jr[1020+v]=-128>v?-128:127<v?127:v;for(v=-112;112>=v;++v)pu[112+v]=-16>v?-16:15<v?15:v;for(v=-255;510>=v;++v)_h[255+v]=0>v?0:255<v?255:v;jf=1}yh=Og,Or=Rg,uu=Af,pn=Dg,ns=_f,ci=wf,wh=Qc,Of=ko,du=Kg,Fo=Zc,Mo=Yg,Pa=ch,Ro=tu,Ah=Tf,Do=kf,ka=sr,fu=Mr,ss=$g,Cs[0]=nr,Cs[1]=jg,Cs[2]=zg,Cs[3]=Ug,Cs[4]=Lf,Cs[5]=lh,Cs[6]=Nf,Cs[7]=Yc,Cs[8]=Vg,Cs[9]=Wg,Ta[0]=xf,Ta[1]=qg,Ta[2]=Fr,Ta[3]=ah,Ta[4]=Qi,Ta[5]=Hg,Ta[6]=Sf,Br[0]=Sa,Br[1]=Bg,Br[2]=Gg,Br[3]=Kc,Br[4]=Po,Br[5]=Xg,Br[6]=Jc,v=1}else v=0}v&&(v=function(rt,xt){for(rt.M=0;rt.M<rt.Va;++rt.M){var bt,tt=rt.Jc[rt.M&rt.Xb],nt=rt.m,At=rt;for(bt=0;bt<At.za;++bt){var St=nt,_t=At,qt=_t.Ac,kt=_t.Bc+4*bt,$t=_t.zc,Ft=_t.ya[_t.aa+bt];if(_t.Qa.Bb?Ft.$b=gt(St,_t.Pa.jb[0])?2+gt(St,_t.Pa.jb[2]):gt(St,_t.Pa.jb[1]):Ft.$b=0,_t.kc&&(Ft.Ad=gt(St,_t.Bd)),Ft.Za=!gt(St,145)+0,Ft.Za){var Ee=Ft.Ob,Ie=0;for(_t=0;4>_t;++_t){var Le,we=$t[0+_t];for(Le=0;4>Le;++Le){we=_v[qt[kt+Le]][we];for(var ze=C2[gt(St,we[0])];0<ze;)ze=C2[2*ze+gt(St,we[ze])];we=-ze,qt[kt+Le]=we}i(Ee,Ie,qt,kt,4),Ie+=4,$t[0+_t]=we}}else we=gt(St,156)?gt(St,128)?1:3:gt(St,163)?2:0,Ft.Ob[0]=we,n(qt,kt,we,4),n($t,0,we,4);Ft.Dd=gt(St,142)?gt(St,114)?gt(St,183)?1:3:2:0}if(At.m.Ka)return hi(rt,7,"Premature end-of-partition0 encountered.");for(;rt.ja<rt.za;++rt.ja){if(At=tt,St=(nt=rt).rb[nt.sb-1],qt=nt.rb[nt.sb+nt.ja],bt=nt.ya[nt.aa+nt.ja],kt=nt.kc?bt.Ad:0)St.la=qt.la=0,bt.Za||(St.Na=qt.Na=0),bt.Hc=0,bt.Gc=0,bt.ia=0;else{var je,ue;if(St=qt,qt=At,kt=nt.Pa.Xc,$t=nt.ya[nt.aa+nt.ja],Ft=nt.pb[$t.$b],_t=$t.ad,Ee=0,Ie=nt.rb[nt.sb-1],we=Le=0,n(_t,Ee,0,384),$t.Za)var yi=0,En=kt[3];else{ze=s(16);var wi=St.Na+Ie.Na;if(wi=gu(qt,kt[1],wi,Ft.Eb,0,ze,0),St.Na=Ie.Na=(0<wi)+0,1<wi)yh(ze,0,_t,Ee);else{var Cn=ze[0]+3>>3;for(ze=0;256>ze;ze+=16)_t[Ee+ze]=Cn}yi=1,En=kt[0]}var Fe=15&St.la,qn=15&Ie.la;for(ze=0;4>ze;++ze){var Hn=1&qn;for(Cn=ue=0;4>Cn;++Cn)Fe=Fe>>1|(Hn=(wi=gu(qt,En,wi=Hn+(1&Fe),Ft.Sc,yi,_t,Ee))>yi)<<7,ue=ue<<2|(3<wi?3:1<wi?2:_t[Ee+0]!=0),Ee+=16;Fe>>=4,qn=qn>>1|Hn<<7,Le=(Le<<8|ue)>>>0}for(En=Fe,yi=qn>>4,je=0;4>je;je+=2){for(ue=0,Fe=St.la>>4+je,qn=Ie.la>>4+je,ze=0;2>ze;++ze){for(Hn=1&qn,Cn=0;2>Cn;++Cn)wi=Hn+(1&Fe),Fe=Fe>>1|(Hn=0<(wi=gu(qt,kt[2],wi,Ft.Qc,0,_t,Ee)))<<3,ue=ue<<2|(3<wi?3:1<wi?2:_t[Ee+0]!=0),Ee+=16;Fe>>=2,qn=qn>>1|Hn<<5}we|=ue<<4*je,En|=Fe<<4<<je,yi|=(240&qn)<<je}St.la=En,Ie.la=yi,$t.Hc=Le,$t.Gc=we,$t.ia=43690&we?0:Ft.ia,kt=!(Le|we)}if(0<nt.L&&(nt.wa[nt.Y+nt.ja]=nt.gd[bt.$b][bt.Za],nt.wa[nt.Y+nt.ja].La|=!kt),At.Ka)return hi(rt,7,"Premature end-of-file encountered.")}if(Gc(rt),nt=xt,At=1,bt=(tt=rt).D,St=0<tt.L&&tt.M>=tt.zb&&tt.M<=tt.Va,tt.Aa==0)t:{if(bt.M=tt.M,bt.uc=St,au(tt,bt),At=1,bt=(ue=tt.D).Nb,St=(we=Xf[tt.L])*tt.R,qt=we/2*tt.B,ze=16*bt*tt.R,Cn=8*bt*tt.B,kt=tt.sa,$t=tt.ta-St+ze,Ft=tt.qa,_t=tt.ra-qt+Cn,Ee=tt.Ha,Ie=tt.Ia-qt+Cn,qn=(Fe=ue.M)==0,Le=Fe>=tt.Va-1,tt.Aa==2&&au(tt,ue),ue.uc)for(Hn=(wi=tt).D.M,t(wi.D.uc),ue=wi.yb;ue<wi.Hb;++ue){yi=ue,En=Hn;var Mi=(Wi=(ai=wi).D).Nb;je=ai.R;var Wi=Wi.wa[Wi.Y+yi],gn=ai.sa,ls=ai.ta+16*Mi*je+16*yi,ar=Wi.dd,Ri=Wi.tc;if(Ri!=0)if(t(3<=Ri),ai.L==1)0<yi&&ka(gn,ls,je,Ri+4),Wi.La&&ss(gn,ls,je,Ri),0<En&&Do(gn,ls,je,Ri+4),Wi.La&&fu(gn,ls,je,Ri);else{var qr=ai.B,Oo=ai.qa,xh=ai.ra+8*Mi*qr+8*yi,Fa=ai.Ha,ai=ai.Ia+8*Mi*qr+8*yi;Mi=Wi.ld,0<yi&&(Of(gn,ls,je,Ri+4,ar,Mi),Fo(Oo,xh,Fa,ai,qr,Ri+4,ar,Mi)),Wi.La&&(Pa(gn,ls,je,Ri,ar,Mi),Ah(Oo,xh,Fa,ai,qr,Ri,ar,Mi)),0<En&&(wh(gn,ls,je,Ri+4,ar,Mi),du(Oo,xh,Fa,ai,qr,Ri+4,ar,Mi)),Wi.La&&(Mo(gn,ls,je,Ri,ar,Mi),Ro(Oo,xh,Fa,ai,qr,Ri,ar,Mi))}}if(tt.ia&&alert("todo:DitherRow"),nt.put!=null){if(ue=16*Fe,Fe=16*(Fe+1),qn?(nt.y=tt.sa,nt.O=tt.ta+ze,nt.f=tt.qa,nt.N=tt.ra+Cn,nt.ea=tt.Ha,nt.W=tt.Ia+Cn):(ue-=we,nt.y=kt,nt.O=$t,nt.f=Ft,nt.N=_t,nt.ea=Ee,nt.W=Ie),Le||(Fe-=we),Fe>nt.o&&(Fe=nt.o),nt.F=null,nt.J=null,tt.Fa!=null&&0<tt.Fa.length&&ue<Fe&&(nt.J=su(tt,nt,ue,Fe-ue),nt.F=tt.mb,nt.F==null&&nt.F.length==0)){At=hi(tt,3,"Could not decode alpha data.");break t}ue<nt.j&&(we=nt.j-ue,ue=nt.j,t(!(1&we)),nt.O+=tt.R*we,nt.N+=tt.B*(we>>1),nt.W+=tt.B*(we>>1),nt.F!=null&&(nt.J+=nt.width*we)),ue<Fe&&(nt.O+=nt.v,nt.N+=nt.v>>1,nt.W+=nt.v>>1,nt.F!=null&&(nt.J+=nt.v),nt.ka=ue-nt.j,nt.U=nt.va-nt.v,nt.T=Fe-ue,At=nt.put(nt))}bt+1!=tt.Ic||Le||(i(tt.sa,tt.ta-St,kt,$t+16*tt.R,St),i(tt.qa,tt.ra-qt,Ft,_t+8*tt.B,qt),i(tt.Ha,tt.Ia-qt,Ee,Ie+8*tt.B,qt))}if(!At)return hi(rt,6,"Output aborted.")}return 1}(h,f)),f.bc!=null&&f.bc(f),v&=1}return v?(h.cb=0,v):0}function Ls(h,f,v,_,x){x=h[f+v+32*_]+(x>>3),h[f+v+32*_]=-256&x?0>x?0:255:x}function rh(h,f,v,_,x,k){Ls(h,f,0,v,_+x),Ls(h,f,1,v,_+k),Ls(h,f,2,v,_-k),Ls(h,f,3,v,_-x)}function Sn(h){return(20091*h>>16)+h}function Xc(h,f,v,_){var x,k=0,T=s(16);for(x=0;4>x;++x){var F=h[f+0]+h[f+8],R=h[f+0]-h[f+8],B=(35468*h[f+4]>>16)-Sn(h[f+12]),Z=Sn(h[f+4])+(35468*h[f+12]>>16);T[k+0]=F+Z,T[k+1]=R+B,T[k+2]=R-B,T[k+3]=F-Z,k+=4,f++}for(x=k=0;4>x;++x)F=(h=T[k+0]+4)+T[k+8],R=h-T[k+8],B=(35468*T[k+4]>>16)-Sn(T[k+12]),Ls(v,_,0,0,F+(Z=Sn(T[k+4])+(35468*T[k+12]>>16))),Ls(v,_,1,0,R+B),Ls(v,_,2,0,R-B),Ls(v,_,3,0,F-Z),k++,_+=32}function wf(h,f,v,_){var x=h[f+0]+4,k=35468*h[f+4]>>16,T=Sn(h[f+4]),F=35468*h[f+1]>>16;rh(v,_,0,x+T,h=Sn(h[f+1]),F),rh(v,_,1,x+k,h,F),rh(v,_,2,x-k,h,F),rh(v,_,3,x-T,h,F)}function Rg(h,f,v,_,x){Xc(h,f,v,_),x&&Xc(h,f+16,v,_+4)}function Af(h,f,v,_){Or(h,f+0,v,_,1),Or(h,f+32,v,_+128,1)}function Dg(h,f,v,_){var x;for(h=h[f+0]+4,x=0;4>x;++x)for(f=0;4>f;++f)Ls(v,_,f,x,h)}function _f(h,f,v,_){h[f+0]&&pn(h,f+0,v,_),h[f+16]&&pn(h,f+16,v,_+4),h[f+32]&&pn(h,f+32,v,_+128),h[f+48]&&pn(h,f+48,v,_+128+4)}function Og(h,f,v,_){var x,k=s(16);for(x=0;4>x;++x){var T=h[f+0+x]+h[f+12+x],F=h[f+4+x]+h[f+8+x],R=h[f+4+x]-h[f+8+x],B=h[f+0+x]-h[f+12+x];k[0+x]=T+F,k[8+x]=T-F,k[4+x]=B+R,k[12+x]=B-R}for(x=0;4>x;++x)T=(h=k[0+4*x]+3)+k[3+4*x],F=k[1+4*x]+k[2+4*x],R=k[1+4*x]-k[2+4*x],B=h-k[3+4*x],v[_+0]=T+F>>3,v[_+16]=B+R>>3,v[_+32]=T-F>>3,v[_+48]=B-R>>3,_+=64}function $c(h,f,v){var _,x=f-32,k=Bn,T=255-h[x-1];for(_=0;_<v;++_){var F,R=k,B=T+h[f-1];for(F=0;F<v;++F)h[f+F]=R[B+h[x+F]];f+=32}}function jg(h,f){$c(h,f,4)}function Bg(h,f){$c(h,f,8)}function qg(h,f){$c(h,f,16)}function Fr(h,f){var v;for(v=0;16>v;++v)i(h,f+32*v,h,f-32,16)}function ah(h,f){var v;for(v=16;0<v;--v)n(h,f,h[f-1],16),f+=32}function oh(h,f,v){var _;for(_=0;16>_;++_)n(f,v+32*_,h,16)}function xf(h,f){var v,_=16;for(v=0;16>v;++v)_+=h[f-1+32*v]+h[f+v-32];oh(_>>5,h,f)}function Qi(h,f){var v,_=8;for(v=0;16>v;++v)_+=h[f-1+32*v];oh(_>>4,h,f)}function Hg(h,f){var v,_=8;for(v=0;16>v;++v)_+=h[f+v-32];oh(_>>4,h,f)}function Sf(h,f){oh(128,h,f)}function ee(h,f,v){return h+2*f+v+2>>2}function zg(h,f){var v,_=f-32;for(_=new Uint8Array([ee(h[_-1],h[_+0],h[_+1]),ee(h[_+0],h[_+1],h[_+2]),ee(h[_+1],h[_+2],h[_+3]),ee(h[_+2],h[_+3],h[_+4])]),v=0;4>v;++v)i(h,f+32*v,_,0,_.length)}function Ug(h,f){var v=h[f-1],_=h[f-1+32],x=h[f-1+64],k=h[f-1+96];Et(h,f+0,16843009*ee(h[f-1-32],v,_)),Et(h,f+32,16843009*ee(v,_,x)),Et(h,f+64,16843009*ee(_,x,k)),Et(h,f+96,16843009*ee(x,k,k))}function nr(h,f){var v,_=4;for(v=0;4>v;++v)_+=h[f+v-32]+h[f-1+32*v];for(_>>=3,v=0;4>v;++v)n(h,f+32*v,_,4)}function Lf(h,f){var v=h[f-1+0],_=h[f-1+32],x=h[f-1+64],k=h[f-1-32],T=h[f+0-32],F=h[f+1-32],R=h[f+2-32],B=h[f+3-32];h[f+0+96]=ee(_,x,h[f-1+96]),h[f+1+96]=h[f+0+64]=ee(v,_,x),h[f+2+96]=h[f+1+64]=h[f+0+32]=ee(k,v,_),h[f+3+96]=h[f+2+64]=h[f+1+32]=h[f+0+0]=ee(T,k,v),h[f+3+64]=h[f+2+32]=h[f+1+0]=ee(F,T,k),h[f+3+32]=h[f+2+0]=ee(R,F,T),h[f+3+0]=ee(B,R,F)}function Nf(h,f){var v=h[f+1-32],_=h[f+2-32],x=h[f+3-32],k=h[f+4-32],T=h[f+5-32],F=h[f+6-32],R=h[f+7-32];h[f+0+0]=ee(h[f+0-32],v,_),h[f+1+0]=h[f+0+32]=ee(v,_,x),h[f+2+0]=h[f+1+32]=h[f+0+64]=ee(_,x,k),h[f+3+0]=h[f+2+32]=h[f+1+64]=h[f+0+96]=ee(x,k,T),h[f+3+32]=h[f+2+64]=h[f+1+96]=ee(k,T,F),h[f+3+64]=h[f+2+96]=ee(T,F,R),h[f+3+96]=ee(F,R,R)}function lh(h,f){var v=h[f-1+0],_=h[f-1+32],x=h[f-1+64],k=h[f-1-32],T=h[f+0-32],F=h[f+1-32],R=h[f+2-32],B=h[f+3-32];h[f+0+0]=h[f+1+64]=k+T+1>>1,h[f+1+0]=h[f+2+64]=T+F+1>>1,h[f+2+0]=h[f+3+64]=F+R+1>>1,h[f+3+0]=R+B+1>>1,h[f+0+96]=ee(x,_,v),h[f+0+64]=ee(_,v,k),h[f+0+32]=h[f+1+96]=ee(v,k,T),h[f+1+32]=h[f+2+96]=ee(k,T,F),h[f+2+32]=h[f+3+96]=ee(T,F,R),h[f+3+32]=ee(F,R,B)}function Yc(h,f){var v=h[f+0-32],_=h[f+1-32],x=h[f+2-32],k=h[f+3-32],T=h[f+4-32],F=h[f+5-32],R=h[f+6-32],B=h[f+7-32];h[f+0+0]=v+_+1>>1,h[f+1+0]=h[f+0+64]=_+x+1>>1,h[f+2+0]=h[f+1+64]=x+k+1>>1,h[f+3+0]=h[f+2+64]=k+T+1>>1,h[f+0+32]=ee(v,_,x),h[f+1+32]=h[f+0+96]=ee(_,x,k),h[f+2+32]=h[f+1+96]=ee(x,k,T),h[f+3+32]=h[f+2+96]=ee(k,T,F),h[f+3+64]=ee(T,F,R),h[f+3+96]=ee(F,R,B)}function Wg(h,f){var v=h[f-1+0],_=h[f-1+32],x=h[f-1+64],k=h[f-1+96];h[f+0+0]=v+_+1>>1,h[f+2+0]=h[f+0+32]=_+x+1>>1,h[f+2+32]=h[f+0+64]=x+k+1>>1,h[f+1+0]=ee(v,_,x),h[f+3+0]=h[f+1+32]=ee(_,x,k),h[f+3+32]=h[f+1+64]=ee(x,k,k),h[f+3+64]=h[f+2+64]=h[f+0+96]=h[f+1+96]=h[f+2+96]=h[f+3+96]=k}function Vg(h,f){var v=h[f-1+0],_=h[f-1+32],x=h[f-1+64],k=h[f-1+96],T=h[f-1-32],F=h[f+0-32],R=h[f+1-32],B=h[f+2-32];h[f+0+0]=h[f+2+32]=v+T+1>>1,h[f+0+32]=h[f+2+64]=_+v+1>>1,h[f+0+64]=h[f+2+96]=x+_+1>>1,h[f+0+96]=k+x+1>>1,h[f+3+0]=ee(F,R,B),h[f+2+0]=ee(T,F,R),h[f+1+0]=h[f+3+32]=ee(v,T,F),h[f+1+32]=h[f+3+64]=ee(_,v,T),h[f+1+64]=h[f+3+96]=ee(x,_,v),h[f+1+96]=ee(k,x,_)}function Gg(h,f){var v;for(v=0;8>v;++v)i(h,f+32*v,h,f-32,8)}function Kc(h,f){var v;for(v=0;8>v;++v)n(h,f,h[f-1],8),f+=32}function Co(h,f,v){var _;for(_=0;8>_;++_)n(f,v+32*_,h,8)}function Sa(h,f){var v,_=8;for(v=0;8>v;++v)_+=h[f+v-32]+h[f-1+32*v];Co(_>>4,h,f)}function Xg(h,f){var v,_=4;for(v=0;8>v;++v)_+=h[f+v-32];Co(_>>3,h,f)}function Po(h,f){var v,_=4;for(v=0;8>v;++v)_+=h[f-1+32*v];Co(_>>3,h,f)}function Jc(h,f){Co(128,h,f)}function hh(h,f,v){var _=h[f-v],x=h[f+0],k=3*(x-_)+Zg[1020+h[f-2*v]-h[f+v]],T=Bf[112+(k+4>>3)];h[f-v]=Bn[255+_+Bf[112+(k+3>>3)]],h[f+0]=Bn[255+x-T]}function Ef(h,f,v,_){var x=h[f+0],k=h[f+v];return as[255+h[f-2*v]-h[f-v]]>_||as[255+k-x]>_}function Cf(h,f,v,_){return 4*as[255+h[f-v]-h[f+0]]+as[255+h[f-2*v]-h[f+v]]<=_}function Pf(h,f,v,_,x){var k=h[f-3*v],T=h[f-2*v],F=h[f-v],R=h[f+0],B=h[f+v],Z=h[f+2*v],dt=h[f+3*v];return 4*as[255+F-R]+as[255+T-B]>_?0:as[255+h[f-4*v]-k]<=x&&as[255+k-T]<=x&&as[255+T-F]<=x&&as[255+dt-Z]<=x&&as[255+Z-B]<=x&&as[255+B-R]<=x}function kf(h,f,v,_){var x=2*_+1;for(_=0;16>_;++_)Cf(h,f+_,v,x)&&hh(h,f+_,v)}function sr(h,f,v,_){var x=2*_+1;for(_=0;16>_;++_)Cf(h,f+_*v,1,x)&&hh(h,f+_*v,1)}function Mr(h,f,v,_){var x;for(x=3;0<x;--x)kf(h,f+=4*v,v,_)}function $g(h,f,v,_){var x;for(x=3;0<x;--x)sr(h,f+=4,v,_)}function La(h,f,v,_,x,k,T,F){for(k=2*k+1;0<x--;){if(Pf(h,f,v,k,T))if(Ef(h,f,v,F))hh(h,f,v);else{var R=h,B=f,Z=v,dt=R[B-2*Z],ft=R[B-Z],rt=R[B+0],xt=R[B+Z],bt=R[B+2*Z],tt=27*(At=Zg[1020+3*(rt-ft)+Zg[1020+dt-xt]])+63>>7,nt=18*At+63>>7,At=9*At+63>>7;R[B-3*Z]=Bn[255+R[B-3*Z]+At],R[B-2*Z]=Bn[255+dt+nt],R[B-Z]=Bn[255+ft+tt],R[B+0]=Bn[255+rt-tt],R[B+Z]=Bn[255+xt-nt],R[B+2*Z]=Bn[255+bt-At]}f+=_}}function Ns(h,f,v,_,x,k,T,F){for(k=2*k+1;0<x--;){if(Pf(h,f,v,k,T))if(Ef(h,f,v,F))hh(h,f,v);else{var R=h,B=f,Z=v,dt=R[B-Z],ft=R[B+0],rt=R[B+Z],xt=Bf[112+((bt=3*(ft-dt))+4>>3)],bt=Bf[112+(bt+3>>3)],tt=xt+1>>1;R[B-2*Z]=Bn[255+R[B-2*Z]+tt],R[B-Z]=Bn[255+dt+bt],R[B+0]=Bn[255+ft-xt],R[B+Z]=Bn[255+rt-tt]}f+=_}}function Qc(h,f,v,_,x,k){La(h,f,v,1,16,_,x,k)}function ko(h,f,v,_,x,k){La(h,f,1,v,16,_,x,k)}function Yg(h,f,v,_,x,k){var T;for(T=3;0<T;--T)Ns(h,f+=4*v,v,1,16,_,x,k)}function ch(h,f,v,_,x,k){var T;for(T=3;0<T;--T)Ns(h,f+=4,1,v,16,_,x,k)}function Kg(h,f,v,_,x,k,T,F){La(h,f,x,1,8,k,T,F),La(v,_,x,1,8,k,T,F)}function Zc(h,f,v,_,x,k,T,F){La(h,f,1,x,8,k,T,F),La(v,_,1,x,8,k,T,F)}function tu(h,f,v,_,x,k,T,F){Ns(h,f+4*x,x,1,8,k,T,F),Ns(v,_+4*x,x,1,8,k,T,F)}function Tf(h,f,v,_,x,k,T,F){Ns(h,f+4,1,x,8,k,T,F),Ns(v,_+4,1,x,8,k,T,F)}function uh(){this.ba=new ws,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new si,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function eu(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function iu(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function If(){this.ua=0,this.Wa=new V,this.vb=new V,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new W,this.yc=new O}function Jg(){this.xb=this.a=0,this.l=new sh,this.ca=new ws,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new C,this.Pb=0,this.wd=new C,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new If,this.ab=0,this.gc=r(4,iu),this.Oc=0}function dh(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new sh,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function To(h,f,v,_,x,k,T){for(h=h==null?0:h[f+0],f=0;f<T;++f)x[k+f]=h+v[_+f]&255,h=x[k+f]}function nu(h,f,v,_,x,k,T){var F;if(h==null)To(null,null,v,_,x,k,T);else for(F=0;F<T;++F)x[k+F]=h[f+F]+v[_+F]&255}function Na(h,f,v,_,x,k,T){if(h==null)To(null,null,v,_,x,k,T);else{var F,R=h[f+0],B=R,Z=R;for(F=0;F<T;++F)B=Z+(R=h[f+F])-B,Z=v[_+F]+(-256&B?0>B?0:255:B)&255,B=R,x[k+F]=Z}}function su(h,f,v,_){var x=f.width,k=f.o;if(t(h!=null&&f!=null),0>v||0>=_||v+_>k)return null;if(!h.Cc){if(h.ga==null){var T;if(h.ga=new dh,(T=h.ga==null)||(T=f.width*f.o,t(h.Gb.length==0),h.Gb=s(T),h.Uc=0,h.Gb==null?T=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,T=1),T=!T),!T){T=h.ga;var F=h.Fa,R=h.P,B=h.qc,Z=h.mb,dt=h.nb,ft=R+1,rt=B-1,xt=T.l;if(t(F!=null&&Z!=null&&f!=null),Ia[0]=null,Ia[1]=To,Ia[2]=nu,Ia[3]=Na,T.ca=Z,T.tb=dt,T.c=f.width,T.i=f.height,t(0<T.c&&0<T.i),1>=B)f=0;else if(T.$a=F[R+0]>>0&3,T.Z=F[R+0]>>2&3,T.Lc=F[R+0]>>4&3,R=F[R+0]>>6&3,0>T.$a||1<T.$a||4<=T.Z||1<T.Lc||R)f=0;else if(xt.put=Qs,xt.ac=zi,xt.bc=Zs,xt.ma=T,xt.width=f.width,xt.height=f.height,xt.Da=f.Da,xt.v=f.v,xt.va=f.va,xt.j=f.j,xt.o=f.o,T.$a)t:{t(T.$a==1),f=es();e:for(;;){if(f==null){f=0;break t}if(t(T!=null),T.mc=f,f.c=T.c,f.i=T.i,f.l=T.l,f.l.ma=T,f.l.width=T.c,f.l.height=T.i,f.a=0,it(f.m,F,ft,rt),!ir(T.c,T.i,1,f,null)||(f.ab==1&&f.gc[0].hc==3&&Ir(f.s)?(T.ic=1,F=f.c*f.i,f.Ta=null,f.Ua=0,f.V=s(F),f.Ba=0,f.V==null?(f.a=1,f=0):f=1):(T.ic=0,f=Eo(f,T.c)),!f))break e;f=1;break t}T.mc=null,f=0}else f=rt>=T.c*T.i;T=!f}if(T)return null;h.ga.Lc!=1?h.Ga=0:_=k-v}t(h.ga!=null),t(v+_<=k);t:{if(f=(F=h.ga).c,k=F.l.o,F.$a==0){if(ft=h.rc,rt=h.Vc,xt=h.Fa,R=h.P+1+v*f,B=h.mb,Z=h.nb+v*f,t(R<=h.P+h.qc),F.Z!=0)for(t(Ia[F.Z]!=null),T=0;T<_;++T)Ia[F.Z](ft,rt,xt,R,B,Z,f),ft=B,rt=Z,Z+=f,R+=f;else for(T=0;T<_;++T)i(B,Z,xt,R,f),ft=B,rt=Z,Z+=f,R+=f;h.rc=ft,h.Vc=rt}else{if(t(F.mc!=null),f=v+_,t((T=F.mc)!=null),t(f<=T.i),T.C>=f)f=1;else if(F.ic||ot(),F.ic){F=T.V,ft=T.Ba,rt=T.c;var bt=T.i,tt=(xt=1,R=T.$/rt,B=T.$%rt,Z=T.m,dt=T.s,T.$),nt=rt*bt,At=rt*f,St=dt.wc,_t=tt<At?bi(dt,B,R):null;t(tt<=nt),t(f<=bt),t(Ir(dt));e:for(;;){for(;!Z.h&&tt<At;){if(B&St||(_t=bi(dt,B,R)),t(_t!=null),Q(Z),256>(bt=xn(_t.G[0],_t.H[0],Z)))F[ft+tt]=bt,++tt,++B>=rt&&(B=0,++R<=f&&!(R%16)&&xs(T,R));else{if(!(280>bt)){xt=0;break e}bt=As(bt-256,Z);var qt,kt=xn(_t.G[4],_t.H[4],Z);if(Q(Z),!(tt>=(kt=tr(rt,kt=As(kt,Z)))&&nt-tt>=bt)){xt=0;break e}for(qt=0;qt<bt;++qt)F[ft+tt+qt]=F[ft+tt+qt-kt];for(tt+=bt,B+=bt;B>=rt;)B-=rt,++R<=f&&!(R%16)&&xs(T,R);tt<At&&B&St&&(_t=bi(dt,B,R))}t(Z.h==U(Z))}xs(T,R>f?f:R);break e}!xt||Z.h&&tt<nt?(xt=0,T.a=Z.h?5:3):T.$=tt,f=xt}else f=Ss(T,T.V,T.Ba,T.c,T.i,f,Zl);if(!f){_=0;break t}}v+_>=k&&(h.Cc=1),_=1}if(!_)return null;if(h.Cc&&((_=h.ga)!=null&&(_.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+v*x}function m(h,f,v,_,x,k){for(;0<x--;){var T,F=h,R=f+(v?1:0),B=h,Z=f+(v?0:3);for(T=0;T<_;++T){var dt=B[Z+4*T];dt!=255&&(dt*=32897,F[R+4*T+0]=F[R+4*T+0]*dt>>23,F[R+4*T+1]=F[R+4*T+1]*dt>>23,F[R+4*T+2]=F[R+4*T+2]*dt>>23)}f+=k}}function L(h,f,v,_,x){for(;0<_--;){var k;for(k=0;k<v;++k){var T=h[f+2*k+0],F=15&(B=h[f+2*k+1]),R=4369*F,B=(240&B|B>>4)*R>>16;h[f+2*k+0]=(240&T|T>>4)*R>>16&240|(15&T|T<<4)*R>>16>>4&15,h[f+2*k+1]=240&B|F}f+=x}}function z(h,f,v,_,x,k,T,F){var R,B,Z=255;for(B=0;B<x;++B){for(R=0;R<_;++R){var dt=h[f+R];k[T+4*R]=dt,Z&=dt}f+=v,T+=F}return Z!=255}function J(h,f,v,_,x){var k;for(k=0;k<x;++k)v[_+k]=h[f+k]>>8}function ot(){rs=m,Ve=L,Ge=z,ui=J}function vt(h,f,v){H[h]=function(_,x,k,T,F,R,B,Z,dt,ft,rt,xt,bt,tt,nt,At,St){var _t,qt=St-1>>1,kt=F[R+0]|B[Z+0]<<16,$t=dt[ft+0]|rt[xt+0]<<16;t(_!=null);var Ft=3*kt+$t+131074>>2;for(f(_[x+0],255&Ft,Ft>>16,bt,tt),k!=null&&(Ft=3*$t+kt+131074>>2,f(k[T+0],255&Ft,Ft>>16,nt,At)),_t=1;_t<=qt;++_t){var Ee=F[R+_t]|B[Z+_t]<<16,Ie=dt[ft+_t]|rt[xt+_t]<<16,Le=kt+Ee+$t+Ie+524296,we=Le+2*(Ee+$t)>>3;Ft=we+kt>>1,kt=(Le=Le+2*(kt+Ie)>>3)+Ee>>1,f(_[x+2*_t-1],255&Ft,Ft>>16,bt,tt+(2*_t-1)*v),f(_[x+2*_t-0],255&kt,kt>>16,bt,tt+(2*_t-0)*v),k!=null&&(Ft=Le+$t>>1,kt=we+Ie>>1,f(k[T+2*_t-1],255&Ft,Ft>>16,nt,At+(2*_t-1)*v),f(k[T+2*_t+0],255&kt,kt>>16,nt,At+(2*_t+0)*v)),kt=Ee,$t=Ie}1&St||(Ft=3*kt+$t+131074>>2,f(_[x+St-1],255&Ft,Ft>>16,bt,tt+(St-1)*v),k!=null&&(Ft=3*$t+kt+131074>>2,f(k[T+St-1],255&Ft,Ft>>16,nt,At+(St-1)*v)))}}function Lt(){os[qf]=Nv,os[Hf]=k2,os[L2]=Ev,os[zf]=T2,os[Uf]=I2,os[t1]=F2,os[N2]=Cv,os[e1]=k2,os[i1]=T2,os[Wf]=I2,os[n1]=F2}function Bt(h){return h&~Pv?0>h?0:255:h>>M2}function Gt(h,f){return Bt((19077*h>>8)+(26149*f>>8)-14234)}function ce(h,f,v){return Bt((19077*h>>8)-(6419*f>>8)-(13320*v>>8)+8708)}function ae(h,f){return Bt((19077*h>>8)+(33050*f>>8)-17685)}function xe(h,f,v,_,x){_[x+0]=Gt(h,v),_[x+1]=ce(h,f,v),_[x+2]=ae(h,f)}function Qe(h,f,v,_,x){_[x+0]=ae(h,f),_[x+1]=ce(h,f,v),_[x+2]=Gt(h,v)}function ri(h,f,v,_,x){var k=ce(h,f,v);f=k<<3&224|ae(h,f)>>3,_[x+0]=248&Gt(h,v)|k>>5,_[x+1]=f}function vi(h,f,v,_,x){var k=240&ae(h,f)|15;_[x+0]=240&Gt(h,v)|ce(h,f,v)>>4,_[x+1]=k}function Zi(h,f,v,_,x){_[x+0]=255,xe(h,f,v,_,x+1)}function Fi(h,f,v,_,x){Qe(h,f,v,_,x),_[x+3]=255}function Es(h,f,v,_,x){xe(h,f,v,_,x),_[x+3]=255}function jn(h,f){return 0>h?0:h>f?f:h}function rr(h,f,v){H[h]=function(_,x,k,T,F,R,B,Z,dt){for(var ft=Z+(-2&dt)*v;Z!=ft;)f(_[x+0],k[T+0],F[R+0],B,Z),f(_[x+1],k[T+0],F[R+0],B,Z+v),x+=2,++T,++R,Z+=2*v;1&dt&&f(_[x+0],k[T+0],F[R+0],B,Z)}}function Ff(h,f,v){return v==0?h==0?f==0?6:5:f==0?4:0:v}function ru(h,f,v,_,x){switch(h>>>30){case 3:Or(f,v,_,x,0);break;case 2:ci(f,v,_,x);break;case 1:pn(f,v,_,x)}}function au(h,f){var v,_,x=f.M,k=f.Nb,T=h.oc,F=h.pc+40,R=h.oc,B=h.pc+584,Z=h.oc,dt=h.pc+600;for(v=0;16>v;++v)T[F+32*v-1]=129;for(v=0;8>v;++v)R[B+32*v-1]=129,Z[dt+32*v-1]=129;for(0<x?T[F-1-32]=R[B-1-32]=Z[dt-1-32]=129:(n(T,F-32-1,127,21),n(R,B-32-1,127,9),n(Z,dt-32-1,127,9)),_=0;_<h.za;++_){var ft=f.ya[f.aa+_];if(0<_){for(v=-1;16>v;++v)i(T,F+32*v-4,T,F+32*v+12,4);for(v=-1;8>v;++v)i(R,B+32*v-4,R,B+32*v+4,4),i(Z,dt+32*v-4,Z,dt+32*v+4,4)}var rt=h.Gd,xt=h.Hd+_,bt=ft.ad,tt=ft.Hc;if(0<x&&(i(T,F-32,rt[xt].y,0,16),i(R,B-32,rt[xt].f,0,8),i(Z,dt-32,rt[xt].ea,0,8)),ft.Za){var nt=T,At=F-32+16;for(0<x&&(_>=h.za-1?n(nt,At,rt[xt].y[15],4):i(nt,At,rt[xt+1].y,0,4)),v=0;4>v;v++)nt[At+128+v]=nt[At+256+v]=nt[At+384+v]=nt[At+0+v];for(v=0;16>v;++v,tt<<=2)nt=T,At=F+D2[v],Cs[ft.Ob[v]](nt,At),ru(tt,bt,16*+v,nt,At)}else if(nt=Ff(_,x,ft.Ob[0]),Ta[nt](T,F),tt!=0)for(v=0;16>v;++v,tt<<=2)ru(tt,bt,16*+v,T,F+D2[v]);for(v=ft.Gc,nt=Ff(_,x,ft.Dd),Br[nt](R,B),Br[nt](Z,dt),tt=bt,nt=R,At=B,255&(ft=v>>0)&&(170&ft?uu(tt,256,nt,At):ns(tt,256,nt,At)),ft=Z,tt=dt,255&(v>>=8)&&(170&v?uu(bt,320,ft,tt):ns(bt,320,ft,tt)),x<h.Ub-1&&(i(rt[xt].y,0,T,F+480,16),i(rt[xt].f,0,R,B+224,8),i(rt[xt].ea,0,Z,dt+224,8)),v=8*k*h.B,rt=h.sa,xt=h.ta+16*_+16*k*h.R,bt=h.qa,ft=h.ra+8*_+v,tt=h.Ha,nt=h.Ia+8*_+v,v=0;16>v;++v)i(rt,xt+v*h.R,T,F+32*v,16);for(v=0;8>v;++v)i(bt,ft+v*h.B,R,B+32*v,8),i(tt,nt+v*h.B,Z,dt+32*v,8)}}function fh(h,f,v,_,x,k,T,F,R){var B=[0],Z=[0],dt=0,ft=R!=null?R.kd:0,rt=R??new eu;if(h==null||12>v)return 7;rt.data=h,rt.w=f,rt.ha=v,f=[f],v=[v],rt.gb=[rt.gb];t:{var xt=f,bt=v,tt=rt.gb;if(t(h!=null),t(bt!=null),t(tt!=null),tt[0]=0,12<=bt[0]&&!e(h,xt[0],"RIFF")){if(e(h,xt[0]+8,"WEBP")){tt=3;break t}var nt=It(h,xt[0]+4);if(12>nt||4294967286<nt){tt=3;break t}if(ft&&nt>bt[0]-8){tt=7;break t}tt[0]=nt,xt[0]+=12,bt[0]-=12}tt=0}if(tt!=0)return tt;for(nt=0<rt.gb[0],v=v[0];;){t:{var At=h;bt=f,tt=v;var St=B,_t=Z,qt=xt=[0];if((Ft=dt=[dt])[0]=0,8>tt[0])tt=7;else{if(!e(At,bt[0],"VP8X")){if(It(At,bt[0]+4)!=10){tt=3;break t}if(18>tt[0]){tt=7;break t}var kt=It(At,bt[0]+8),$t=1+Dt(At,bt[0]+12);if(2147483648<=$t*(At=1+Dt(At,bt[0]+15))){tt=3;break t}qt!=null&&(qt[0]=kt),St!=null&&(St[0]=$t),_t!=null&&(_t[0]=At),bt[0]+=18,tt[0]-=18,Ft[0]=1}tt=0}}if(dt=dt[0],xt=xt[0],tt!=0)return tt;if(bt=!!(2&xt),!nt&&dt)return 3;if(k!=null&&(k[0]=!!(16&xt)),T!=null&&(T[0]=bt),F!=null&&(F[0]=0),T=B[0],xt=Z[0],dt&&bt&&R==null){tt=0;break}if(4>v){tt=7;break}if(nt&&dt||!nt&&!dt&&!e(h,f[0],"ALPH")){v=[v],rt.na=[rt.na],rt.P=[rt.P],rt.Sa=[rt.Sa];t:{kt=h,tt=f,nt=v;var Ft=rt.gb;St=rt.na,_t=rt.P,qt=rt.Sa,$t=22,t(kt!=null),t(nt!=null),At=tt[0];var Ee=nt[0];for(t(St!=null),t(qt!=null),St[0]=null,_t[0]=null,qt[0]=0;;){if(tt[0]=At,nt[0]=Ee,8>Ee){tt=7;break t}var Ie=It(kt,At+4);if(4294967286<Ie){tt=3;break t}var Le=8+Ie+1&-2;if($t+=Le,0<Ft&&$t>Ft){tt=3;break t}if(!e(kt,At,"VP8 ")||!e(kt,At,"VP8L")){tt=0;break t}if(Ee[0]<Le){tt=7;break t}e(kt,At,"ALPH")||(St[0]=kt,_t[0]=At+8,qt[0]=Ie),At+=Le,Ee-=Le}}if(v=v[0],rt.na=rt.na[0],rt.P=rt.P[0],rt.Sa=rt.Sa[0],tt!=0)break}v=[v],rt.Ja=[rt.Ja],rt.xa=[rt.xa];t:if(Ft=h,tt=f,nt=v,St=rt.gb[0],_t=rt.Ja,qt=rt.xa,kt=tt[0],At=!e(Ft,kt,"VP8 "),$t=!e(Ft,kt,"VP8L"),t(Ft!=null),t(nt!=null),t(_t!=null),t(qt!=null),8>nt[0])tt=7;else{if(At||$t){if(Ft=It(Ft,kt+4),12<=St&&Ft>St-12){tt=3;break t}if(ft&&Ft>nt[0]-8){tt=7;break t}_t[0]=Ft,tt[0]+=8,nt[0]-=8,qt[0]=$t}else qt[0]=5<=nt[0]&&Ft[kt+0]==47&&!(Ft[kt+4]>>5),_t[0]=nt[0];tt=0}if(v=v[0],rt.Ja=rt.Ja[0],rt.xa=rt.xa[0],f=f[0],tt!=0)break;if(4294967286<rt.Ja)return 3;if(F==null||bt||(F[0]=rt.xa?2:1),T=[T],xt=[xt],rt.xa){if(5>v){tt=7;break}F=T,ft=xt,bt=k,h==null||5>v?h=0:5<=v&&h[f+0]==47&&!(h[f+4]>>5)?(nt=[0],Ft=[0],St=[0],it(_t=new C,h,f,v),Yt(_t,nt,Ft,St)?(F!=null&&(F[0]=nt[0]),ft!=null&&(ft[0]=Ft[0]),bt!=null&&(bt[0]=St[0]),h=1):h=0):h=0}else{if(10>v){tt=7;break}F=xt,h==null||10>v||!bf(h,f+3,v-3)?h=0:(ft=h[f+0]|h[f+1]<<8|h[f+2]<<16,bt=16383&(h[f+7]<<8|h[f+6]),h=16383&(h[f+9]<<8|h[f+8]),1&ft||3<(ft>>1&7)||!(ft>>4&1)||ft>>5>=rt.Ja||!bt||!h?h=0:(T&&(T[0]=bt),F&&(F[0]=h),h=1))}if(!h||(T=T[0],xt=xt[0],dt&&(B[0]!=T||Z[0]!=xt)))return 3;R!=null&&(R[0]=rt,R.offset=f-R.w,t(4294967286>f-R.w),t(R.offset==R.ha-v));break}return tt==0||tt==7&&dt&&R==null?(k!=null&&(k[0]|=rt.na!=null&&0<rt.na.length),_!=null&&(_[0]=T),x!=null&&(x[0]=xt),0):tt}function ou(h,f,v){var _=f.width,x=f.height,k=0,T=0,F=_,R=x;if(f.Da=h!=null&&0<h.Da,f.Da&&(F=h.cd,R=h.bd,k=h.v,T=h.j,11>v||(k&=-2,T&=-2),0>k||0>T||0>=F||0>=R||k+F>_||T+R>x))return 0;if(f.v=k,f.j=T,f.va=k+F,f.o=T+R,f.U=F,f.T=R,f.da=h!=null&&0<h.da,f.da){if(!he(F,R,v=[h.ib],k=[h.hb]))return 0;f.ib=v[0],f.hb=k[0]}return f.ob=h!=null&&h.ob,f.Kb=h==null||!h.Sd,f.da&&(f.ob=f.ib<3*_/4&&f.hb<3*x/4,f.Kb=0),1}function lu(h){if(h==null)return 2;if(11>h.S){var f=h.f.RGBA;f.fb+=(h.height-1)*f.A,f.A=-f.A}else f=h.f.kb,h=h.height,f.O+=(h-1)*f.fa,f.fa=-f.fa,f.N+=(h-1>>1)*f.Ab,f.Ab=-f.Ab,f.W+=(h-1>>1)*f.Db,f.Db=-f.Db,f.F!=null&&(f.J+=(h-1)*f.lb,f.lb=-f.lb);return 0}function ph(h,f,v,_){if(_==null||0>=h||0>=f)return 2;if(v!=null){if(v.Da){var x=v.cd,k=v.bd,T=-2&v.v,F=-2&v.j;if(0>T||0>F||0>=x||0>=k||T+x>h||F+k>f)return 2;h=x,f=k}if(v.da){if(!he(h,f,x=[v.ib],k=[v.hb]))return 2;h=x[0],f=k[0]}}_.width=h,_.height=f;t:{var R=_.width,B=_.height;if(h=_.S,0>=R||0>=B||!(h>=qf&&13>h))h=2;else{if(0>=_.Rd&&_.sd==null){T=k=x=f=0;var Z=(F=R*O2[h])*B;if(11>h||(k=(B+1)/2*(f=(R+1)/2),h==12&&(T=(x=R)*B)),(B=s(Z+2*k+T))==null){h=1;break t}_.sd=B,11>h?((R=_.f.RGBA).eb=B,R.fb=0,R.A=F,R.size=Z):((R=_.f.kb).y=B,R.O=0,R.fa=F,R.Fd=Z,R.f=B,R.N=0+Z,R.Ab=f,R.Cd=k,R.ea=B,R.W=0+Z+k,R.Db=f,R.Ed=k,h==12&&(R.F=B,R.J=0+Z+2*k),R.Tc=T,R.lb=x)}if(f=1,x=_.S,k=_.width,T=_.height,x>=qf&&13>x)if(11>x)h=_.f.RGBA,f&=(F=Math.abs(h.A))*(T-1)+k<=h.size,f&=F>=k*O2[x],f&=h.eb!=null;else{h=_.f.kb,F=(k+1)/2,Z=(T+1)/2,R=Math.abs(h.fa),B=Math.abs(h.Ab);var dt=Math.abs(h.Db),ft=Math.abs(h.lb),rt=ft*(T-1)+k;f&=R*(T-1)+k<=h.Fd,f&=B*(Z-1)+F<=h.Cd,f=(f&=dt*(Z-1)+F<=h.Ed)&R>=k&B>=F&dt>=F,f&=h.y!=null,f&=h.f!=null,f&=h.ea!=null,x==12&&(f&=ft>=k,f&=rt<=h.Tc,f&=h.F!=null)}else f=0;h=f?0:2}}return h!=0||v!=null&&v.fd&&(h=lu(_)),h}var Ui=64,gh=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],mh=24,bh=32,hu=8,Ln=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Pt("Predictor0","PredictorAdd0"),H.Predictor0=function(){return 4278190080},H.Predictor1=function(h){return h},H.Predictor2=function(h,f,v){return f[v+0]},H.Predictor3=function(h,f,v){return f[v+1]},H.Predictor4=function(h,f,v){return f[v-1]},H.Predictor5=function(h,f,v){return Rt(Rt(h,f[v+1]),f[v+0])},H.Predictor6=function(h,f,v){return Rt(h,f[v-1])},H.Predictor7=function(h,f,v){return Rt(h,f[v+0])},H.Predictor8=function(h,f,v){return Rt(f[v-1],f[v+0])},H.Predictor9=function(h,f,v){return Rt(f[v+0],f[v+1])},H.Predictor10=function(h,f,v){return Rt(Rt(h,f[v-1]),Rt(f[v+0],f[v+1]))},H.Predictor11=function(h,f,v){var _=f[v+0];return 0>=fe(_>>24&255,h>>24&255,(f=f[v-1])>>24&255)+fe(_>>16&255,h>>16&255,f>>16&255)+fe(_>>8&255,h>>8&255,f>>8&255)+fe(255&_,255&h,255&f)?_:h},H.Predictor12=function(h,f,v){var _=f[v+0];return(Vt((h>>24&255)+(_>>24&255)-((f=f[v-1])>>24&255))<<24|Vt((h>>16&255)+(_>>16&255)-(f>>16&255))<<16|Vt((h>>8&255)+(_>>8&255)-(f>>8&255))<<8|Vt((255&h)+(255&_)-(255&f)))>>>0},H.Predictor13=function(h,f,v){var _=f[v-1];return(se((h=Rt(h,f[v+0]))>>24&255,_>>24&255)<<24|se(h>>16&255,_>>16&255)<<16|se(h>>8&255,_>>8&255)<<8|se(h>>0&255,_>>0&255))>>>0};var Qg=H.PredictorAdd0;H.PredictorAdd1=be,Pt("Predictor2","PredictorAdd2"),Pt("Predictor3","PredictorAdd3"),Pt("Predictor4","PredictorAdd4"),Pt("Predictor5","PredictorAdd5"),Pt("Predictor6","PredictorAdd6"),Pt("Predictor7","PredictorAdd7"),Pt("Predictor8","PredictorAdd8"),Pt("Predictor9","PredictorAdd9"),Pt("Predictor10","PredictorAdd10"),Pt("Predictor11","PredictorAdd11"),Pt("Predictor12","PredictorAdd12"),Pt("Predictor13","PredictorAdd13");var cu=H.PredictorAdd2;ye("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),ye("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var Mf,is=H.ColorIndexInverseTransform,vh=H.MapARGB,Rf=H.VP8LColorIndexInverseTransformAlpha,Df=H.MapAlpha,Ea=H.VP8LPredictorsAdd=[];Ea.length=16,(H.VP8LPredictors=[]).length=16,(H.VP8LPredictorsAdd_C=[]).length=16,(H.VP8LPredictors_C=[]).length=16;var Io,Nn,fn,Ca,Rr,Dr,yh,Or,ci,uu,pn,ns,wh,Of,du,Fo,Mo,Pa,Ro,Ah,Do,ka,fu,ss,rs,Ve,Ge,ui,Li=s(511),jr=s(2041),pu=s(225),_h=s(767),jf=0,Zg=jr,Bf=pu,Bn=_h,as=Li,qf=0,Hf=1,L2=2,zf=3,Uf=4,t1=5,N2=6,e1=7,i1=8,Wf=9,n1=10,dv=[2,3,7],fv=[3,3,11],E2=[280,256,256,256,40],pv=[0,1,1,1,0],gv=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],mv=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],bv=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],vv=8,s1=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],r1=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],gu=null,yv=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],wv=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],C2=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Av=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],_v=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],xv=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Sv=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ta=[],Cs=[],Br=[],Lv=1,P2=2,Ia=[],os=[];vt("UpsampleRgbLinePair",xe,3),vt("UpsampleBgrLinePair",Qe,3),vt("UpsampleRgbaLinePair",Es,4),vt("UpsampleBgraLinePair",Fi,4),vt("UpsampleArgbLinePair",Zi,4),vt("UpsampleRgba4444LinePair",vi,2),vt("UpsampleRgb565LinePair",ri,2);var Nv=H.UpsampleRgbLinePair,Ev=H.UpsampleBgrLinePair,k2=H.UpsampleRgbaLinePair,T2=H.UpsampleBgraLinePair,I2=H.UpsampleArgbLinePair,F2=H.UpsampleRgba4444LinePair,Cv=H.UpsampleRgb565LinePair,Vf=16,Gf=1<<Vf-1,mu=-227,a1=482,M2=6,Pv=(256<<M2)-1,R2=0,kv=s(256),Tv=s(256),Iv=s(256),Fv=s(256),Mv=s(a1-mu),Rv=s(a1-mu);rr("YuvToRgbRow",xe,3),rr("YuvToBgrRow",Qe,3),rr("YuvToRgbaRow",Es,4),rr("YuvToBgraRow",Fi,4),rr("YuvToArgbRow",Zi,4),rr("YuvToRgba4444Row",vi,2),rr("YuvToRgb565Row",ri,2);var D2=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Xf=[0,2,8],Dv=[8,7,6,4,4,2,2,2,1,1,1,1],Ov=1;this.WebPDecodeRGBA=function(h,f,v,_,x){var k=Hf,T=new uh,F=new ws;T.ba=F,F.S=k,F.width=[F.width],F.height=[F.height];var R=F.width,B=F.height,Z=new Tr;if(Z==null||h==null)var dt=2;else t(Z!=null),dt=fh(h,f,v,Z.width,Z.height,Z.Pd,Z.Qd,Z.format,null);if(dt!=0?R=0:(R!=null&&(R[0]=Z.width[0]),B!=null&&(B[0]=Z.height[0]),R=1),R){F.width=F.width[0],F.height=F.height[0],_!=null&&(_[0]=F.width),x!=null&&(x[0]=F.height);t:{if(_=new sh,(x=new eu).data=h,x.w=f,x.ha=v,x.kd=1,f=[0],t(x!=null),((h=fh(x.data,x.w,x.ha,null,null,null,f,null,x))==0||h==7)&&f[0]&&(h=4),(f=h)==0){if(t(T!=null),_.data=x.data,_.w=x.w+x.offset,_.ha=x.ha-x.offset,_.put=Qs,_.ac=zi,_.bc=Zs,_.ma=T,x.xa){if((h=es())==null){T=1;break t}if(function(ft,rt){var xt=[0],bt=[0],tt=[0];e:for(;;){if(ft==null)return 0;if(rt==null)return ft.a=2,0;if(ft.l=rt,ft.a=0,it(ft.m,rt.data,rt.w,rt.ha),!Yt(ft.m,xt,bt,tt)){ft.a=3;break e}if(ft.xb=P2,rt.width=xt[0],rt.height=bt[0],!ir(xt[0],bt[0],1,ft,null))break e;return 1}return t(ft.a!=0),0}(h,_)){if(_=(f=ph(_.width,_.height,T.Oa,T.ba))==0){e:{_=h;i:for(;;){if(_==null){_=0;break e}if(t(_.s.yc!=null),t(_.s.Ya!=null),t(0<_.s.Wb),t((v=_.l)!=null),t((x=v.ma)!=null),_.xb!=0){if(_.ca=x.ba,_.tb=x.tb,t(_.ca!=null),!ou(x.Oa,v,zf)){_.a=2;break i}if(!Eo(_,v.width)||v.da)break i;if((v.da||Pe(_.ca.S))&&ot(),11>_.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),_.ca.f.kb.F!=null&&ot()),_.Pb&&0<_.s.ua&&_.s.vb.X==null&&!Jt(_.s.vb,_.s.Wa.Xa)){_.a=1;break i}_.xb=0}if(!Ss(_,_.V,_.Ba,_.c,_.i,v.o,Ql))break i;x.Dc=_.Ma,_=1;break e}t(_.a!=0),_=0}_=!_}_&&(f=h.a)}else f=h.a}else{if((h=new Fg)==null){T=1;break t}if(h.Fa=x.na,h.P=x.P,h.qc=x.Sa,vf(h,_)){if((f=ph(_.width,_.height,T.Oa,T.ba))==0){if(h.Aa=0,v=T.Oa,t((x=h)!=null),v!=null){if(0<(R=0>(R=v.Md)?0:100<R?255:255*R/100)){for(B=Z=0;4>B;++B)12>(dt=x.pb[B]).lc&&(dt.ia=R*Dv[0>dt.lc?0:dt.lc]>>3),Z|=dt.ia;Z&&(alert("todo:VP8InitRandom"),x.ia=1)}x.Ga=v.Id,100<x.Ga?x.Ga=100:0>x.Ga&&(x.Ga=0)}Mg(h,_)||(f=h.a)}}else f=h.a}f==0&&T.Oa!=null&&T.Oa.fd&&(f=lu(T.ba))}T=f}k=T!=0?null:11>k?F.f.RGBA.eb:F.f.kb.y}else k=null;return k};var O2=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(H,et){for(var ct="",I=0;I<4;I++)ct+=String.fromCharCode(H[et++]);return ct}function d(H,et){return(H[et+0]<<0|H[et+1]<<8|H[et+2]<<16)>>>0}function p(H,et){return(H[et+0]<<0|H[et+1]<<8|H[et+2]<<16|H[et+3]<<24)>>>0}new l;var b=[0],g=[0],y=[],w=new l,S=o,A=function(H,et){var ct={},I=0,O=!1,$=0,W=0;if(ct.frames=[],!function(j,U,Y,Q){for(var st=0;st<Q;st++)if(j[U+st]!=Y.charCodeAt(st))return!0;return!1}(H,et,"RIFF",4)){var ht,lt;for(p(H,et+=4),et+=8;et<H.length;){var at=u(H,et),it=p(H,et+=4);et+=4;var mt=it+(1&it);switch(at){case"VP8 ":case"VP8L":ct.frames[I]===void 0&&(ct.frames[I]={}),(C=ct.frames[I]).src_off=O?W:et-8,C.src_size=$+it+8,I++,O&&(O=!1,$=0,W=0);break;case"VP8X":(C=ct.header={}).feature_flags=H[et];var ut=et+4;C.canvas_width=1+d(H,ut),ut+=3,C.canvas_height=1+d(H,ut),ut+=3;break;case"ALPH":O=!0,$=mt+8,W=et-8;break;case"ANIM":(C=ct.header).bgcolor=p(H,et),ut=et+4,C.loop_count=(ht=H)[(lt=ut)+0]<<0|ht[lt+1]<<8,ut+=2;break;case"ANMF":var wt,C;(C=ct.frames[I]={}).offset_x=2*d(H,et),et+=3,C.offset_y=2*d(H,et),et+=3,C.width=1+d(H,et),et+=3,C.height=1+d(H,et),et+=3,C.duration=d(H,et),et+=3,wt=H[et++],C.dispose=1&wt,C.blend=wt>>1&1}at!="ANMF"&&(et+=mt)}return ct}}(S,0);A.response=S,A.rgbaoutput=!0,A.dataurl=!1;var E=A.header?A.header:null,D=A.frames?A.frames:null;if(E){E.loop_counter=E.loop_count,b=[E.canvas_height],g=[E.canvas_width];for(var q=0;q<D.length&&D[q].blend!=0;q++);}var G=D[0],K=w.WebPDecodeRGBA(S,G.src_off,G.src_size,g,b);G.rgba=K,G.imgwidth=g[0],G.imgheight=b[0];for(var X=0;X<g[0]*b[0]*4;X++)y[X]=K[X];return this.width=g,this.height=b,this.data=y,this}(function(o){var t=function(){return typeof Z0=="function"},e=function(b,g,y,w){var S=4,A=r;switch(w){case o.image_compression.FAST:S=1,A=s;break;case o.image_compression.MEDIUM:S=6,A=a;break;case o.image_compression.SLOW:S=9,A=l}b=i(b,g,y,A);var E=Z0(b,{level:S});return o.__addimage__.arrayBufferToBinaryString(E)},i=function(b,g,y,w){for(var S,A,E,D=b.length/g,q=new Uint8Array(b.length+D),G=d(),K=0;K<D;K+=1){if(E=K*g,S=b.subarray(E,E+g),w)q.set(w(S,y,A),E+K);else{for(var X,H=G.length,et=[];X<H;X+=1)et[X]=G[X](S,y,A);var ct=p(et.concat());q.set(et[ct],E+K)}A=S}return q},n=function(b){var g=Array.apply([],b);return g.unshift(0),g},s=function(b,g){var y,w=[],S=b.length;w[0]=1;for(var A=0;A<S;A+=1)y=b[A-g]||0,w[A+1]=b[A]-y+256&255;return w},r=function(b,g,y){var w,S=[],A=b.length;S[0]=2;for(var E=0;E<A;E+=1)w=y&&y[E]||0,S[E+1]=b[E]-w+256&255;return S},a=function(b,g,y){var w,S,A=[],E=b.length;A[0]=3;for(var D=0;D<E;D+=1)w=b[D-g]||0,S=y&&y[D]||0,A[D+1]=b[D]+256-(w+S>>>1)&255;return A},l=function(b,g,y){var w,S,A,E,D=[],q=b.length;D[0]=4;for(var G=0;G<q;G+=1)w=b[G-g]||0,S=y&&y[G]||0,A=y&&y[G-g]||0,E=u(w,S,A),D[G+1]=b[G]-E+256&255;return D},u=function(b,g,y){if(b===g&&g===y)return b;var w=Math.abs(g-y),S=Math.abs(b-y),A=Math.abs(b+g-y-y);return w<=S&&w<=A?b:S<=A?g:y},d=function(){return[n,s,r,a,l]},p=function(b){var g=b.map(function(y){return y.reduce(function(w,S){return w+Math.abs(S)},0)});return g.indexOf(Math.min.apply(null,g))};o.processPNG=function(b,g,y,w){var S,A,E,D,q,G,K,X,H,et,ct,I,O,$,W,ht=this.decode.FLATE_DECODE,lt="";if(this.__addimage__.isArrayBuffer(b)&&(b=new Uint8Array(b)),this.__addimage__.isArrayBufferView(b)){if(b=(E=new OA(b)).imgData,A=E.bits,S=E.colorSpace,q=E.colors,[4,6].indexOf(E.colorType)!==-1){if(E.bits===8){H=(X=E.pixelBitlength==32?new Uint32Array(E.decodePixels().buffer):E.pixelBitlength==16?new Uint16Array(E.decodePixels().buffer):new Uint8Array(E.decodePixels().buffer)).length,ct=new Uint8Array(H*E.colors),et=new Uint8Array(H);var at,it=E.pixelBitlength-E.bits;for($=0,W=0;$<H;$++){for(O=X[$],at=0;at<it;)ct[W++]=O>>>at&255,at+=E.bits;et[$]=O>>>at&255}}if(E.bits===16){H=(X=new Uint32Array(E.decodePixels().buffer)).length,ct=new Uint8Array(H*(32/E.pixelBitlength)*E.colors),et=new Uint8Array(H*(32/E.pixelBitlength)),I=E.colors>1,$=0,W=0;for(var mt=0;$<H;)O=X[$++],ct[W++]=O>>>0&255,I&&(ct[W++]=O>>>16&255,O=X[$++],ct[W++]=O>>>0&255),et[mt++]=O>>>16&255;A=8}w!==o.image_compression.NONE&&t()?(b=e(ct,E.width*E.colors,E.colors,w),K=e(et,E.width,1,w)):(b=ct,K=et,ht=void 0)}if(E.colorType===3&&(S=this.color_spaces.INDEXED,G=E.palette,E.transparency.indexed)){var ut=E.transparency.indexed,wt=0;for($=0,H=ut.length;$<H;++$)wt+=ut[$];if((wt/=255)===H-1&&ut.indexOf(0)!==-1)D=[ut.indexOf(0)];else if(wt!==H){for(X=E.decodePixels(),et=new Uint8Array(X.length),$=0,H=X.length;$<H;$++)et[$]=ut[X[$]];K=e(et,E.width,1)}}var C=function(j){var U;switch(j){case o.image_compression.FAST:U=11;break;case o.image_compression.MEDIUM:U=13;break;case o.image_compression.SLOW:U=14;break;default:U=12}return U}(w);return ht===this.decode.FLATE_DECODE&&(lt="/Predictor "+C+" "),lt+="/Colors "+q+" /BitsPerComponent "+A+" /Columns "+E.width,(this.__addimage__.isArrayBuffer(b)||this.__addimage__.isArrayBufferView(b))&&(b=this.__addimage__.arrayBufferToBinaryString(b)),(K&&this.__addimage__.isArrayBuffer(K)||this.__addimage__.isArrayBufferView(K))&&(K=this.__addimage__.arrayBufferToBinaryString(K)),{alias:y,data:b,index:g,filter:ht,decodeParameters:lt,transparency:D,palette:G,sMask:K,predictor:C,width:E.width,height:E.height,bitsPerComponent:A,colorSpace:S}}}})(Kt.API),function(o){o.processGIF89A=function(t,e,i,n){var s=new jA(t),r=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:r,height:a},d=new T1(100).encode(u,100);return o.processJPEG.call(this,d,e,i,n)},o.processGIF87A=o.processGIF89A}(Kt.API),Ts.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var o=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(o);for(var t=0;t<o;t++){var e=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:n,green:i,blue:e,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ts.prototype.parseBGR=function(){this.pos=this.offset;try{var o="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[o]()}catch(e){Ue.log("bit decode error:"+e)}},Ts.prototype.bit1=function(){var o,t=Math.ceil(this.width/8),e=t%4;for(o=this.height-1;o>=0;o--){for(var i=this.bottom_up?o:this.height-1-o,n=0;n<t;n++)for(var s=this.datav.getUint8(this.pos++,!0),r=i*this.width*4+8*n*4,a=0;a<8&&8*n+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[r+4*a]=l.blue,this.data[r+4*a+1]=l.green,this.data[r+4*a+2]=l.red,this.data[r+4*a+3]=255}e!==0&&(this.pos+=4-e)}},Ts.prototype.bit4=function(){for(var o=Math.ceil(this.width/2),t=o%4,e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,n=0;n<o;n++){var s=this.datav.getUint8(this.pos++,!0),r=i*this.width*4+2*n*4,a=s>>4,l=15&s,u=this.palette[a];if(this.data[r]=u.blue,this.data[r+1]=u.green,this.data[r+2]=u.red,this.data[r+3]=255,2*n+1>=this.width)break;u=this.palette[l],this.data[r+4]=u.blue,this.data[r+4+1]=u.green,this.data[r+4+2]=u.red,this.data[r+4+3]=255}t!==0&&(this.pos+=4-t)}},Ts.prototype.bit8=function(){for(var o=this.width%4,t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var n=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*i;if(n<this.palette.length){var r=this.palette[n];this.data[s]=r.red,this.data[s+1]=r.green,this.data[s+2]=r.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}o!==0&&(this.pos+=4-o)}},Ts.prototype.bit15=function(){for(var o=this.width%3,t=parseInt("11111",2),e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var r=(s&t)/t*255|0,a=(s>>5&t)/t*255|0,l=(s>>10&t)/t*255|0,u=s>>15?255:0,d=i*this.width*4+4*n;this.data[d]=l,this.data[d+1]=a,this.data[d+2]=r,this.data[d+3]=u}this.pos+=o}},Ts.prototype.bit16=function(){for(var o=this.width%3,t=parseInt("11111",2),e=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var n=this.bottom_up?i:this.height-1-i,s=0;s<this.width;s++){var r=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(r&t)/t*255|0,l=(r>>5&e)/e*255|0,u=(r>>11)/t*255|0,d=n*this.width*4+4*s;this.data[d]=u,this.data[d+1]=l,this.data[d+2]=a,this.data[d+3]=255}this.pos+=o}},Ts.prototype.bit24=function(){for(var o=this.height-1;o>=0;o--){for(var t=this.bottom_up?o:this.height-1-o,e=0;e<this.width;e++){var i=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),r=t*this.width*4+4*e;this.data[r]=s,this.data[r+1]=n,this.data[r+2]=i,this.data[r+3]=255}this.pos+=this.width%4}},Ts.prototype.bit32=function(){for(var o=this.height-1;o>=0;o--)for(var t=this.bottom_up?o:this.height-1-o,e=0;e<this.width;e++){var i=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*e;this.data[a]=s,this.data[a+1]=n,this.data[a+2]=i,this.data[a+3]=r}},Ts.prototype.getData=function(){return this.data},function(o){o.processBMP=function(t,e,i,n){var s=new Ts(t,!1),r=s.width,a=s.height,l={data:s.getData(),width:r,height:a},u=new T1(100).encode(l,100);return o.processJPEG.call(this,u,e,i,n)}}(Kt.API),jm.prototype.getData=function(){return this.data},function(o){o.processWEBP=function(t,e,i,n){var s=new jm(t),r=s.width,a=s.height,l={data:s.getData(),width:r,height:a},u=new T1(100).encode(l,100);return o.processJPEG.call(this,u,e,i,n)}}(Kt.API),Kt.API.processRGBA=function(o,t,e){for(var i=o.data,n=i.length,s=new Uint8Array(n/4*3),r=new Uint8Array(n/4),a=0,l=0,u=0;u<n;u+=4){var d=i[u],p=i[u+1],b=i[u+2],g=i[u+3];s[a++]=d,s[a++]=p,s[a++]=b,r[l++]=g}var y=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(r),data:y,index:t,alias:e,colorSpace:"DeviceRGB",bitsPerComponent:8,width:o.width,height:o.height}},Kt.API.setLanguage=function(o){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[o]!==void 0&&(this.internal.languageSettings.languageCode=o,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ch=Kt.API,dp=Ch.getCharWidthsArray=function(o,t){var e,i,n=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),r=t.charSpace||this.internal.getCharSpace(),a=t.widths?t.widths:n.metadata.Unicode.widths,l=a.fof?a.fof:1,u=t.kerning?t.kerning:n.metadata.Unicode.kerning,d=u.fof?u.fof:1,p=t.doKerning!==!1,b=0,g=o.length,y=0,w=a[0]||l,S=[];for(e=0;e<g;e++)i=o.charCodeAt(e),typeof n.metadata.widthOfString=="function"?S.push((n.metadata.widthOfGlyph(n.metadata.characterToGlyph(i))+r*(1e3/s)||0)/1e3):(b=p&&We(u[i])==="object"&&!isNaN(parseInt(u[i][y],10))?u[i][y]/d:0,S.push((a[i]||w)/l+b)),y=i;return S},Mm=Ch.getStringUnitWidth=function(o,t){var e=(t=t||{}).fontSize||this.internal.getFontSize(),i=t.font||this.internal.getFont(),n=t.charSpace||this.internal.getCharSpace();return Ch.processArabic&&(o=Ch.processArabic(o)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(o,e,n)/e:dp.apply(this,arguments).reduce(function(s,r){return s+r},0)},Rm=function(o,t,e,i){for(var n=[],s=0,r=o.length,a=0;s!==r&&a+t[s]<e;)a+=t[s],s++;n.push(o.slice(0,s));var l=s;for(a=0;s!==r;)a+t[s]>i&&(n.push(o.slice(l,s)),a=0,l=s),a+=t[s],s++;return l!==s&&n.push(o.slice(l,s)),n},Dm=function(o,t,e){e||(e={});var i,n,s,r,a,l,u,d=[],p=[d],b=e.textIndent||0,g=0,y=0,w=o.split(" "),S=dp.apply(this,[" ",e])[0];if(l=e.lineIndent===-1?w[0].length+2:e.lineIndent||0){var A=Array(l).join(" "),E=[];w.map(function(q){(q=q.split(/\s*\n/)).length>1?E=E.concat(q.map(function(G,K){return(K&&G.length?`
`:"")+G})):E.push(q[0])}),w=E,l=Mm.apply(this,[A,e])}for(s=0,r=w.length;s<r;s++){var D=0;if(i=w[s],l&&i[0]==`
`&&(i=i.substr(1),D=1),b+g+(y=(n=dp.apply(this,[i,e])).reduce(function(q,G){return q+G},0))>t||D){if(y>t){for(a=Rm.apply(this,[i,n,t-(b+g),t]),d.push(a.shift()),d=[a.pop()];a.length;)p.push([a.shift()]);y=n.slice(i.length-(d[0]?d[0].length:0)).reduce(function(q,G){return q+G},0)}else d=[i];p.push(d),b=y+l,g=S}else d.push(i),b+=g+y,g=S}return u=l?function(q,G){return(G?A:"")+q.join(" ")}:function(q){return q.join(" ")},p.map(u)},Ch.splitTextToSize=function(o,t,e){var i,n=(e=e||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var p=this.internal.getFont(d.fontName,d.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,e);i=Array.isArray(o)?o:String(o).split(/\r?\n/);var r=1*this.internal.scaleFactor*t/n;s.textIndent=e.textIndent?1*e.textIndent*this.internal.scaleFactor/n:0,s.lineIndent=e.lineIndent;var a,l,u=[];for(a=0,l=i.length;a<l;a++)u=u.concat(Dm.apply(this,[i[a],r,s]));return u},function(o){o.__fontmetrics__=o.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",e={},i={},n=0;n<t.length;n++)e[t[n]]="0123456789abcdef"[n],i["0123456789abcdef"[n]]=t[n];var s=function(p){return"0x"+parseInt(p,10).toString(16)},r=o.__fontmetrics__.compress=function(p){var b,g,y,w,S=["{"];for(var A in p){if(b=p[A],isNaN(parseInt(A,10))?g="'"+A+"'":(A=parseInt(A,10),g=(g=s(A).slice(2)).slice(0,-1)+i[g.slice(-1)]),typeof b=="number")b<0?(y=s(b).slice(3),w="-"):(y=s(b).slice(2),w=""),y=w+y.slice(0,-1)+i[y.slice(-1)];else{if(We(b)!=="object")throw new Error("Don't know what to do with value type "+We(b)+".");y=r(b)}S.push(g+y)}return S.push("}"),S.join("")},a=o.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var b,g,y,w,S={},A=1,E=S,D=[],q="",G="",K=p.length-1,X=1;X<K;X+=1)(w=p[X])=="'"?b?(y=b.join(""),b=void 0):b=[]:b?b.push(w):w=="{"?(D.push([E,y]),E={},y=void 0):w=="}"?((g=D.pop())[0][g[1]]=E,y=void 0,E=g[0]):w=="-"?A=-1:y===void 0?e.hasOwnProperty(w)?(q+=e[w],y=parseInt(q,16)*A,A=1,q=""):q+=w:e.hasOwnProperty(w)?(G+=e[w],E[y]=parseInt(G,16)*A,A=1,y=void 0,G=""):G+=w;return S},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};o.events.push(["addFont",function(p){var b=p.font,g=d.Unicode[b.postScriptName];g&&(b.metadata.Unicode={},b.metadata.Unicode.widths=g.widths,b.metadata.Unicode.kerning=g.kerning);var y=u.Unicode[b.postScriptName];y&&(b.metadata.Unicode.encoding=y,b.encoding=y.codePages[0])}])}(Kt.API),function(o){var t=function(e){for(var i=e.length,n=new Uint8Array(i),s=0;s<i;s++)n[s]=e.charCodeAt(s);return n};o.API.events.push(["addFont",function(e){var i=void 0,n=e.font,s=e.instance;if(!n.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");if(typeof(i=s.existsFileInVFS(n.postScriptName)===!1?s.loadFile(n.postScriptName):s.getFileFromVFS(n.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");(function(r,a){a=/^\x00\x01\x00\x00/.test(a)?t(a):t(Wu(a)),r.metadata=o.API.TTFFont.open(a),r.metadata.Unicode=r.metadata.Unicode||{encoding:{},kerning:{},widths:[]},r.metadata.glyIdsUsed=[0]})(n,i)}}])}(Kt),function(o){function t(){return(Qt.canvg?Promise.resolve(Qt.canvg):Er(()=>import("./index.es-GIirBIWi.js"),__vite__mapDeps([0,1,2,3,4]))).catch(function(e){return Promise.reject(new Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e})}Kt.API.addSvgAsImage=function(e,i,n,s,r,a,l,u){if(isNaN(i)||isNaN(n))throw Ue.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(r))throw Ue.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=r;var p=d.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,d.width,d.height);var b={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return t().then(function(y){return y.fromString(p,e,b)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(b)}).then(function(){g.addImage(d.toDataURL("image/jpeg",1),i,n,s,r,l,u)})}}(),Kt.API.putTotalPages=function(o){var t,e=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(o,"g"),e=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(o,this.internal.getFont()),"g"),e=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var n=0;n<this.internal.pages[i].length;n++)this.internal.pages[i][n]=this.internal.pages[i][n].replace(t,e);return this},Kt.API.viewerPreferences=function(o,t){var e;o=o||{},t=t||!1;var i,n,s,r={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(r),l=[],u=0,d=0,p=0;function b(y,w){var S,A=!1;for(S=0;S<y.length;S+=1)y[S]===w&&(A=!0);return A}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(r)),this.internal.viewerpreferences.isSubscribed=!1),e=this.internal.viewerpreferences.configuration,o==="reset"||t===!0){var g=a.length;for(p=0;p<g;p+=1)e[a[p]].value=e[a[p]].defaultValue,e[a[p]].explicitSet=!1}if(We(o)==="object"){for(n in o)if(s=o[n],b(a,n)&&s!==void 0){if(e[n].type==="boolean"&&typeof s=="boolean")e[n].value=s;else if(e[n].type==="name"&&b(e[n].valueSet,s))e[n].value=s;else if(e[n].type==="integer"&&Number.isInteger(s))e[n].value=s;else if(e[n].type==="array"){for(u=0;u<s.length;u+=1)if(i=!0,s[u].length===1&&typeof s[u][0]=="number")l.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(i=!1);i===!0&&l.push([s[u][0]-1,s[u][1]-1].join(" "))}e[n].value="["+l.join(" ")+"]"}else e[n].value=e[n].defaultValue;e[n].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,w=[];for(y in e)e[y].explicitSet===!0&&(e[y].type==="name"?w.push("/"+y+" /"+e[y].value):w.push("/"+y+" "+e[y].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=e,this},function(o){var t=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',n=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(i)),r=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+r.length+a.length+n.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(n+s+r+a+l),this.internal.write("endstream"),this.internal.write("endobj")},e=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};o.addMetadata=function(i,n){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:n||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",e),this.internal.events.subscribe("postPutResources",t)),this}}(Kt.API),function(o){var t=o.API,e=t.pdfEscape16=function(s,r){for(var a,l=r.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],p=0,b=s.length;p<b;++p){if(a=r.metadata.characterToGlyph(s.charCodeAt(p)),r.metadata.glyIdsUsed.push(a),r.metadata.toUnicode[a]=s.charCodeAt(p),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(r.metadata.widthOfGlyph(a),10)])),a=="0")return d.join("");a=a.toString(16),d.push(u[4-a.length],a)}return d.join("")},i=function(s){var r,a,l,u,d,p,b;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,b=(a=Object.keys(s).sort(function(g,y){return g-y})).length;p<b;p++)r=a[p],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[r]!==void 0&&s[r]!==null&&typeof s[r].toString=="function"&&(u=("0000"+s[r].toString(16)).slice(-4),r=("0000"+(+r).toString(16)).slice(-4),l.push("<"+r+"><"+u+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(r){var a=r.font,l=r.out,u=r.newObject,d=r.putStream;if(a.metadata instanceof o.API.TTFFont&&a.encoding==="Identity-H"){for(var p=a.metadata.Unicode.widths,b=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),g="",y=0;y<b.length;y++)g+=String.fromCharCode(b[y]);var w=u();d({data:g,addLength1:!0,objectId:w}),l("endobj");var S=u();d({data:i(a.metadata.toUnicode),addLength1:!0,objectId:S}),l("endobj");var A=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+jh(a.fontName)),l("/FontFile2 "+w+" 0 R"),l("/FontBBox "+o.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var E=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+jh(a.fontName)),l("/FontDescriptor "+A+" 0 R"),l("/W "+o.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+S+" 0 R"),l("/BaseFont /"+jh(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+E+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(r){var a=r.font,l=r.out,u=r.newObject,d=r.putStream;if(a.metadata instanceof o.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var p=a.metadata.rawData,b="",g=0;g<p.length;g++)b+=String.fromCharCode(p[g]);var y=u();d({data:b,addLength1:!0,objectId:y}),l("endobj");var w=u();d({data:i(a.metadata.toUnicode),addLength1:!0,objectId:w}),l("endobj");var S=u();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+y+" 0 R"),l("/Flags 96"),l("/FontBBox "+o.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+jh(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=u();for(var A=0;A<a.metadata.hmtx.widths.length;A++)a.metadata.hmtx.widths[A]=parseInt(a.metadata.hmtx.widths[A]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+jh(a.fontName)+"/FontDescriptor "+S+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+o.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var n=function(s){var r,a=s.text||"",l=s.x,u=s.y,d=s.options||{},p=s.mutex||{},b=p.pdfEscape,g=p.activeFontKey,y=p.fonts,w=g,S="",A=0,E="",D=y[w].encoding;if(y[w].encoding!=="Identity-H")return{text:a,x:l,y:u,options:d,mutex:p};for(E=a,w=g,Array.isArray(a)&&(E=a[0]),A=0;A<E.length;A+=1)y[w].metadata.hasOwnProperty("cmap")&&(r=y[w].metadata.cmap.unicode.codeMap[E[A].charCodeAt(0)]),r||E[A].charCodeAt(0)<256&&y[w].metadata.hasOwnProperty("Unicode")?S+=E[A]:S+="";var q="";return parseInt(w.slice(1))<14||D==="WinAnsiEncoding"?q=b(S,w).split("").map(function(G){return G.charCodeAt(0).toString(16)}).join(""):D==="Identity-H"&&(q=e(S,y[w])),p.isHex=!0,{text:q,x:l,y:u,options:d,mutex:p}};t.events.push(["postProcessText",function(s){var r=s.text||"",a=[],l={text:r,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(r)){var u=0;for(u=0;u<r.length;u+=1)Array.isArray(r[u])&&r[u].length===3?a.push([n(Object.assign({},l,{text:r[u][0]})).text,r[u][1],r[u][2]]):a.push(n(Object.assign({},l,{text:r[u]})).text);s.text=a}else s.text=n(Object.assign({},l,{text:r})).text}])}(Kt),function(o){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};o.existsFileInVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0},o.addFileToVFS=function(e,i){return t.call(this),this.internal.vFS[e]=i,this},o.getFileFromVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0?this.internal.vFS[e]:null}}(Kt.API),function(o){o.__bidiEngine__=o.prototype.__bidiEngine__=function(i){var n,s,r,a,l,u,d,p=t,b=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},S=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],A=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),E=!1,D=0;this.__bidiEngine__={};var q=function(I){var O=I.charCodeAt(),$=O>>8,W=w[$];return W!==void 0?p[256*W+(255&O)]:$===252||$===253?"AL":A.test($)?"L":$===8?"R":"N"},G=function(I){for(var O,$=0;$<I.length;$++){if((O=q(I.charAt($)))==="L")return!1;if(O==="R")return!0}return!1},K=function(I,O,$,W){var ht,lt,at,it,mt=O[W];switch(mt){case"L":case"R":E=!1;break;case"N":case"AN":break;case"EN":E&&(mt="AN");break;case"AL":E=!0,mt="R";break;case"WS":mt="N";break;case"CS":W<1||W+1>=O.length||(ht=$[W-1])!=="EN"&&ht!=="AN"||(lt=O[W+1])!=="EN"&&lt!=="AN"?mt="N":E&&(lt="AN"),mt=lt===ht?lt:"N";break;case"ES":mt=(ht=W>0?$[W-1]:"B")==="EN"&&W+1<O.length&&O[W+1]==="EN"?"EN":"N";break;case"ET":if(W>0&&$[W-1]==="EN"){mt="EN";break}if(E){mt="N";break}for(at=W+1,it=O.length;at<it&&O[at]==="ET";)at++;mt=at<it&&O[at]==="EN"?"EN":"N";break;case"NSM":if(r&&!a){for(it=O.length,at=W+1;at<it&&O[at]==="NSM";)at++;if(at<it){var ut=I[W],wt=ut>=1425&&ut<=2303||ut===64286;if(ht=O[at],wt&&(ht==="R"||ht==="AL")){mt="R";break}}}mt=W<1||(ht=O[W-1])==="B"?"N":$[W-1];break;case"B":E=!1,n=!0,mt=D;break;case"S":s=!0,mt="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":E=!1;break;case"BN":mt="N"}return mt},X=function(I,O,$){var W=I.split("");return $&&H(W,$,{hiLevel:D}),W.reverse(),O&&O.reverse(),W.join("")},H=function(I,O,$){var W,ht,lt,at,it,mt=-1,ut=I.length,wt=0,C=[],j=D?g:b,U=[];for(E=!1,n=!1,s=!1,ht=0;ht<ut;ht++)U[ht]=q(I[ht]);for(lt=0;lt<ut;lt++){if(it=wt,C[lt]=K(I,U,C,lt),W=240&(wt=j[it][y[C[lt]]]),wt&=15,O[lt]=at=j[wt][5],W>0)if(W===16){for(ht=mt;ht<lt;ht++)O[ht]=1;mt=-1}else mt=-1;if(j[wt][6])mt===-1&&(mt=lt);else if(mt>-1){for(ht=mt;ht<lt;ht++)O[ht]=at;mt=-1}U[lt]==="B"&&(O[lt]=0),$.hiLevel|=at}s&&function(Y,Q,st){for(var pt=0;pt<st;pt++)if(Y[pt]==="S"){Q[pt]=D;for(var gt=pt-1;gt>=0&&Y[gt]==="WS";gt--)Q[gt]=D}}(U,O,ut)},et=function(I,O,$,W,ht){if(!(ht.hiLevel<I)){if(I===1&&D===1&&!n)return O.reverse(),void($&&$.reverse());for(var lt,at,it,mt,ut=O.length,wt=0;wt<ut;){if(W[wt]>=I){for(it=wt+1;it<ut&&W[it]>=I;)it++;for(mt=wt,at=it-1;mt<at;mt++,at--)lt=O[mt],O[mt]=O[at],O[at]=lt,$&&(lt=$[mt],$[mt]=$[at],$[at]=lt);wt=it}wt++}}},ct=function(I,O,$){var W=I.split(""),ht={hiLevel:D};return $||($=[]),H(W,$,ht),function(lt,at,it){if(it.hiLevel!==0&&d)for(var mt,ut=0;ut<lt.length;ut++)at[ut]===1&&(mt=S.indexOf(lt[ut]))>=0&&(lt[ut]=S[mt+1])}(W,$,ht),et(2,W,O,$,ht),et(1,W,O,$,ht),W.join("")};return this.__bidiEngine__.doBidiReorder=function(I,O,$){if(function(ht,lt){if(lt)for(var at=0;at<ht.length;at++)lt[at]=at;a===void 0&&(a=G(ht)),u===void 0&&(u=G(ht))}(I,O),r||!l||u)if(r&&l&&a^u)D=a?1:0,I=X(I,O,$);else if(!r&&l&&u)D=a?1:0,I=ct(I,O,$),I=X(I,O);else if(!r||a||l||u){if(r&&!l&&a^u)I=X(I,O),a?(D=0,I=ct(I,O,$)):(D=1,I=ct(I,O,$),I=X(I,O));else if(r&&a&&!l&&u)D=1,I=ct(I,O,$),I=X(I,O);else if(!r&&!l&&a^u){var W=d;a?(D=1,I=ct(I,O,$),D=0,d=!1,I=ct(I,O,$),d=W):(D=0,I=ct(I,O,$),I=X(I,O),D=1,d=!1,I=ct(I,O,$),d=W,I=X(I,O))}}else D=0,I=ct(I,O,$);else D=a?1:0,I=ct(I,O,$);return I},this.__bidiEngine__.setOptions=function(I){I&&(r=I.isInputVisual,l=I.isOutputVisual,a=I.isInputRtl,u=I.isOutputRtl,d=I.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],e=new o.__bidiEngine__({isInputVisual:!0});o.API.events.push(["postProcessText",function(i){var n=i.text,s=(i.x,i.y,i.options||{}),r=(i.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,e.setOptions(s),Object.prototype.toString.call(n)==="[object Array]"){var a=0;for(r=[],a=0;a<n.length;a+=1)Object.prototype.toString.call(n[a])==="[object Array]"?r.push([e.doBidiReorder(n[a][0]),n[a][1],n[a][2]]):r.push([e.doBidiReorder(n[a])]);i.text=r}else i.text=e.doBidiReorder(n);e.setOptions({isInputVisual:!0})}])}(Kt),Kt.API.TTFFont=function(){function o(t){var e;if(this.rawData=t,e=this.contents=new Ao(t),this.contents.pos=4,e.readString(4)==="ttcf")throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new ZA(this),this.registerTTF()}return o.open=function(t){return new o(t)},o.prototype.parse=function(){return this.directory=new BA(this.contents),this.head=new HA(this),this.name=new GA(this),this.cmap=new cv(this),this.toUnicode={},this.hhea=new zA(this),this.maxp=new XA(this),this.hmtx=new $A(this),this.post=new WA(this),this.os2=new UA(this),this.loca=new QA(this),this.glyf=new YA(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},o.prototype.registerTTF=function(){var t,e,i,n,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var r,a,l,u;for(u=[],r=0,a=(l=this.bbox).length;r<a;r++)t=l[r],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(i=255&(n=this.post.italic_angle),32768&(e=n>>16)&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},o.prototype.characterToGlyph=function(t){var e;return((e=this.cmap.unicode)!=null?e.codeMap[t]:void 0)||0},o.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},o.prototype.widthOfString=function(t,e,i){var n,s,r,a;for(r=0,s=0,a=(t=""+t).length;0<=a?s<a:s>a;s=0<=a?++s:--s)n=t.charCodeAt(s),r+=this.widthOfGlyph(this.characterToGlyph(n))+i*(1e3/e)||0;return r*(e/1e3)},o.prototype.lineHeight=function(t,e){var i;return e==null&&(e=!1),i=e?this.lineGap:0,(this.ascender+i-this.decender)/1e3*t},o}();var Ks,Ao=function(){function o(t){this.data=t??[],this.pos=0,this.length=this.data.length}return o.prototype.readByte=function(){return this.data[this.pos++]},o.prototype.writeByte=function(t){return this.data[this.pos++]=t},o.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},o.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},o.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},o.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},o.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},o.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},o.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},o.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},o.prototype.readString=function(t){var e,i;for(i=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)i[e]=String.fromCharCode(this.readByte());return i.join("")},o.prototype.writeString=function(t){var e,i,n;for(n=[],e=0,i=t.length;0<=i?e<i:e>i;e=0<=i?++e:--e)n.push(this.writeByte(t.charCodeAt(e)));return n},o.prototype.readShort=function(){return this.readInt16()},o.prototype.writeShort=function(t){return this.writeInt16(t)},o.prototype.readLongLong=function(){var t,e,i,n,s,r,a,l;return t=this.readByte(),e=this.readByte(),i=this.readByte(),n=this.readByte(),s=this.readByte(),r=this.readByte(),a=this.readByte(),l=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^i)+4294967296*(255^n)+16777216*(255^s)+65536*(255^r)+256*(255^a)+(255^l)+1):72057594037927940*t+281474976710656*e+1099511627776*i+4294967296*n+16777216*s+65536*r+256*a+l},o.prototype.writeLongLong=function(t){var e,i;return e=Math.floor(t/4294967296),i=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},o.prototype.readInt=function(){return this.readInt32()},o.prototype.writeInt=function(t){return this.writeInt32(t)},o.prototype.read=function(t){var e,i;for(e=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)e.push(this.readByte());return e},o.prototype.write=function(t){var e,i,n,s;for(s=[],i=0,n=t.length;i<n;i++)e=t[i],s.push(this.writeByte(e));return s},o}(),BA=function(){var o;function t(e){var i,n,s;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},n=0,s=this.tableCount;0<=s?n<s:n>s;n=0<=s?++n:--n)i={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[i.tag]=i}return t.prototype.encode=function(e){var i,n,s,r,a,l,u,d,p,b,g,y,w;for(w in g=Object.keys(e).length,l=Math.log(2),p=16*Math.floor(Math.log(g)/l),r=Math.floor(p/l),d=16*g-p,(n=new Ao).writeInt(this.scalarType),n.writeShort(g),n.writeShort(p),n.writeShort(r),n.writeShort(d),s=16*g,u=n.pos+s,a=null,y=[],e)for(b=e[w],n.writeString(w),n.writeInt(o(b)),n.writeInt(u),n.writeInt(b.length),y=y.concat(b),w==="head"&&(a=u),u+=b.length;u%4;)y.push(0),u++;return n.write(y),i=2981146554-o(n.data),n.pos=a+8,n.writeUInt32(i),n.data},o=function(e){var i,n,s,r;for(e=uv.call(e);e.length%4;)e.push(0);for(s=new Ao(e),n=0,i=0,r=e.length;i<r;i=i+=4)n+=s.readUInt32();return 4294967295&n},t}(),qA={}.hasOwnProperty,kr=function(o,t){for(var e in t)qA.call(t,e)&&(o[e]=t[e]);function i(){this.constructor=o}return i.prototype=t.prototype,o.prototype=new i,o.__super__=t.prototype,o};Ks=function(){function o(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return o.prototype.parse=function(){},o.prototype.encode=function(){},o.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},o}();var HA=function(o){function t(){return t.__super__.constructor.apply(this,arguments)}return kr(t,Ks),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var i;return(i=new Ao).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(e),i.writeShort(this.glyphDataFormat),i.data},t}(),Bm=function(){function o(t,e){var i,n,s,r,a,l,u,d,p,b,g,y,w,S,A,E,D;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),p=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=t.readByte();break;case 4:for(g=t.readUInt16(),b=g/2,t.pos+=6,s=function(){var q,G;for(G=[],l=q=0;0<=b?q<b:q>b;l=0<=b?++q:--q)G.push(t.readUInt16());return G}(),t.pos+=2,w=function(){var q,G;for(G=[],l=q=0;0<=b?q<b:q>b;l=0<=b?++q:--q)G.push(t.readUInt16());return G}(),u=function(){var q,G;for(G=[],l=q=0;0<=b?q<b:q>b;l=0<=b?++q:--q)G.push(t.readUInt16());return G}(),d=function(){var q,G;for(G=[],l=q=0;0<=b?q<b:q>b;l=0<=b?++q:--q)G.push(t.readUInt16());return G}(),n=(this.length-t.pos+this.offset)/2,a=function(){var q,G;for(G=[],l=q=0;0<=n?q<n:q>n;l=0<=n?++q:--q)G.push(t.readUInt16());return G}(),l=A=0,D=s.length;A<D;l=++A)for(S=s[l],i=E=y=w[l];y<=S?E<=S:E>=S;i=y<=S?++E:--E)d[l]===0?r=i+u[l]:(r=a[d[l]/2+(i-y)-(b-l)]||0)!==0&&(r+=u[l]),this.codeMap[i]=65535&r}t.pos=p}return o.encode=function(t,e){var i,n,s,r,a,l,u,d,p,b,g,y,w,S,A,E,D,q,G,K,X,H,et,ct,I,O,$,W,ht,lt,at,it,mt,ut,wt,C,j,U,Y,Q,st,pt,gt,Et,Nt,Dt;switch(W=new Ao,r=Object.keys(t).sort(function(It,Jt){return It-Jt}),e){case"macroman":for(w=0,S=function(){var It=[];for(y=0;y<256;++y)It.push(0);return It}(),E={0:0},s={},ht=0,mt=r.length;ht<mt;ht++)E[gt=t[n=r[ht]]]==null&&(E[gt]=++w),s[n]={old:t[n],new:E[t[n]]},S[n]=E[t[n]];return W.writeUInt16(1),W.writeUInt16(0),W.writeUInt32(12),W.writeUInt16(0),W.writeUInt16(262),W.writeUInt16(0),W.write(S),{charMap:s,subtable:W.data,maxGlyphID:w+1};case"unicode":for(O=[],p=[],D=0,E={},i={},A=u=null,lt=0,ut=r.length;lt<ut;lt++)E[G=t[n=r[lt]]]==null&&(E[G]=++D),i[n]={old:G,new:E[G]},a=E[G]-n,A!=null&&a===u||(A&&p.push(A),O.push(n),u=a),A=n;for(A&&p.push(A),p.push(65535),O.push(65535),ct=2*(et=O.length),H=2*Math.pow(Math.log(et)/Math.LN2,2),b=Math.log(H/2)/Math.LN2,X=2*et-H,l=[],K=[],g=[],y=at=0,wt=O.length;at<wt;y=++at){if(I=O[y],d=p[y],I===65535){l.push(0),K.push(0);break}if(I-($=i[I].new)>=32768)for(l.push(0),K.push(2*(g.length+et-y)),n=it=I;I<=d?it<=d:it>=d;n=I<=d?++it:--it)g.push(i[n].new);else l.push($-I),K.push(0)}for(W.writeUInt16(3),W.writeUInt16(1),W.writeUInt32(12),W.writeUInt16(4),W.writeUInt16(16+8*et+2*g.length),W.writeUInt16(0),W.writeUInt16(ct),W.writeUInt16(H),W.writeUInt16(b),W.writeUInt16(X),st=0,C=p.length;st<C;st++)n=p[st],W.writeUInt16(n);for(W.writeUInt16(0),pt=0,j=O.length;pt<j;pt++)n=O[pt],W.writeUInt16(n);for(Et=0,U=l.length;Et<U;Et++)a=l[Et],W.writeUInt16(a);for(Nt=0,Y=K.length;Nt<Y;Nt++)q=K[Nt],W.writeUInt16(q);for(Dt=0,Q=g.length;Dt<Q;Dt++)w=g[Dt],W.writeUInt16(w);return{charMap:i,subtable:W.data,maxGlyphID:D+1}}},o}(),cv=function(o){function t(){return t.__super__.constructor.apply(this,arguments)}return kr(t,Ks),t.prototype.tag="cmap",t.prototype.parse=function(e){var i,n,s;for(e.pos=this.offset,this.version=e.readUInt16(),s=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=s?n<s:n>s;n=0<=s?++n:--n)i=new Bm(e,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},t.encode=function(e,i){var n,s;return i==null&&(i="macroman"),n=Bm.encode(e,i),(s=new Ao).writeUInt16(0),s.writeUInt16(1),n.table=s.data.concat(n.subtable),n},t}(),zA=function(o){function t(){return t.__super__.constructor.apply(this,arguments)}return kr(t,Ks),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),UA=function(o){function t(){return t.__super__.constructor.apply(this,arguments)}return kr(t,Ks),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var i,n;for(n=[],i=0;i<10;++i)n.push(e.readByte());return n}(),this.charRange=function(){var i,n;for(n=[],i=0;i<4;++i)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var i,n;for(n=[],i=0;i<2;i=++i)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),WA=function(o){function t(){return t.__super__.constructor.apply(this,arguments)}return kr(t,Ks),t.prototype.tag="post",t.prototype.parse=function(e){var i,n,s;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:break;case 131072:var r;for(n=e.readUInt16(),this.glyphNameIndex=[],r=0;0<=n?r<n:r>n;r=0<=n?++r:--r)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],s=[];e.pos<this.offset+this.length;)i=e.readByte(),s.push(this.names.push(e.readString(i)));return s;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 196608:break;case 262144:return this.map=(function(){var a,l,u;for(u=[],r=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;r=0<=l?++a:--a)u.push(e.readUInt32());return u}).call(this)}},t}(),VA=function(o,t){this.raw=o,this.length=o.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},GA=function(o){function t(){return t.__super__.constructor.apply(this,arguments)}return kr(t,Ks),t.prototype.tag="name",t.prototype.parse=function(e){var i,n,s,r,a,l,u,d,p,b,g;for(e.pos=this.offset,e.readShort(),i=e.readShort(),l=e.readShort(),n=[],r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(u={},r=p=0,b=n.length;p<b;r=++p)s=n[r],e.pos=s.offset,d=e.readString(s.length),a=new VA(d,s),u[g=s.nameID]==null&&(u[g]=[]),u[s.nameID].push(a);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t}(),XA=function(o){function t(){return t.__super__.constructor.apply(this,arguments)}return kr(t,Ks),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),$A=function(o){function t(){return t.__super__.constructor.apply(this,arguments)}return kr(t,Ks),t.prototype.tag="hmtx",t.prototype.parse=function(e){var i,n,s,r,a,l,u;for(e.pos=this.offset,this.metrics=[],i=0,l=this.file.hhea.numberOfMetrics;0<=l?i<l:i>l;i=0<=l?++i:--i)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,p;for(p=[],i=d=0;0<=s?d<s:d>s;i=0<=s?++d:--d)p.push(e.readInt16());return p}(),this.widths=(function(){var d,p,b,g;for(g=[],d=0,p=(b=this.metrics).length;d<p;d++)r=b[d],g.push(r.advance);return g}).call(this),n=this.widths[this.widths.length-1],u=[],i=a=0;0<=s?a<s:a>s;i=0<=s?++a:--a)u.push(this.widths.push(n));return u},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),uv=[].slice,YA=function(o){function t(){return t.__super__.constructor.apply(this,arguments)}return kr(t,Ks),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var i,n,s,r,a,l,u,d,p,b;return e in this.cache?this.cache[e]:(r=this.file.loca,i=this.file.contents,n=r.indexOf(e),(s=r.lengthOf(e))===0?this.cache[e]=null:(i.pos=this.offset+n,a=(l=new Ao(i.read(s))).readShort(),d=l.readShort(),b=l.readShort(),u=l.readShort(),p=l.readShort(),this.cache[e]=a===-1?new JA(l,d,b,u,p):new KA(l,a,d,b,u,p),this.cache[e]))},t.prototype.encode=function(e,i,n){var s,r,a,l,u;for(a=[],r=[],l=0,u=i.length;l<u;l++)s=e[i[l]],r.push(a.length),s&&(a=a.concat(s.encode(n)));return r.push(a.length),{table:a,offsets:r}},t}(),KA=function(){function o(t,e,i,n,s,r){this.raw=t,this.numberOfContours=e,this.xMin=i,this.yMin=n,this.xMax=s,this.yMax=r,this.compound=!1}return o.prototype.encode=function(){return this.raw.data},o}(),JA=function(){function o(t,e,i,n,s){var r,a;for(this.raw=t,this.xMin=e,this.yMin=i,this.xMax=n,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],r=this.raw;a=r.readShort(),this.glyphOffsets.push(r.pos),this.glyphIDs.push(r.readUInt16()),32&a;)r.pos+=1&a?4:2,128&a?r.pos+=8:64&a?r.pos+=4:8&a&&(r.pos+=2)}return o.prototype.encode=function(){var t,e,i;for(e=new Ao(uv.call(this.raw.data)),t=0,i=this.glyphIDs.length;t<i;++t)e.pos=this.glyphOffsets[t];return e.data},o}(),QA=function(o){function t(){return t.__super__.constructor.apply(this,arguments)}return kr(t,Ks),t.prototype.tag="loca",t.prototype.parse=function(e){var i,n;return e.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var s,r;for(r=[],n=0,s=this.length;n<s;n+=2)r.push(2*e.readUInt16());return r}).call(this):(function(){var s,r;for(r=[],n=0,s=this.length;n<s;n+=4)r.push(e.readUInt32());return r}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,i){for(var n=new Uint32Array(this.offsets.length),s=0,r=0,a=0;a<n.length;++a)if(n[a]=s,r<i.length&&i[r]==a){++r,n[a]=s;var l=this.offsets[a],u=this.offsets[a+1]-l;u>0&&(s+=u)}for(var d=new Array(4*n.length),p=0;p<n.length;++p)d[4*p+3]=255&n[p],d[4*p+2]=(65280&n[p])>>8,d[4*p+1]=(16711680&n[p])>>16,d[4*p]=(4278190080&n[p])>>24;return d},t}(),ZA=function(){function o(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return o.prototype.generateCmap=function(){var t,e,i,n,s;for(e in n=this.font.cmap.tables[0].codeMap,t={},s=this.subset)i=s[e],t[e]=n[i];return t},o.prototype.glyphsFor=function(t){var e,i,n,s,r,a,l;for(n={},r=0,a=t.length;r<a;r++)n[s=t[r]]=this.font.glyf.glyphFor(s);for(s in e=[],n)(i=n[s])!=null&&i.compound&&e.push.apply(e,i.glyphIDs);if(e.length>0)for(s in l=this.glyphsFor(e))i=l[s],n[s]=i;return n},o.prototype.encode=function(t,e){var i,n,s,r,a,l,u,d,p,b,g,y,w,S,A;for(n in i=cv.encode(this.generateCmap(),"unicode"),r=this.glyphsFor(t),g={0:0},A=i.charMap)g[(l=A[n]).old]=l.new;for(y in b=i.maxGlyphID,r)y in g||(g[y]=b++);return d=function(E){var D,q;for(D in q={},E)q[E[D]]=D;return q}(g),p=Object.keys(d).sort(function(E,D){return E-D}),w=function(){var E,D,q;for(q=[],E=0,D=p.length;E<D;E++)a=p[E],q.push(d[a]);return q}(),s=this.font.glyf.encode(r,w,g),u=this.font.loca.encode(s.offsets,w),S={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(S["OS/2"]=this.font.os2.raw()),this.font.directory.encode(S)},o}();Kt.API.PDFObject=function(){var o;function t(){}return o=function(e,i){return(Array(i+1).join("0")+e).slice(-i)},t.convert=function(e){var i,n,s,r;if(Array.isArray(e))return"["+function(){var a,l,u;for(u=[],a=0,l=e.length;a<l;a++)i=e[a],u.push(t.convert(i));return u}().join(" ")+"]";if(typeof e=="string")return"/"+e;if(e!=null&&e.isString)return"("+e+")";if(e instanceof Date)return"(D:"+o(e.getUTCFullYear(),4)+o(e.getUTCMonth(),2)+o(e.getUTCDate(),2)+o(e.getUTCHours(),2)+o(e.getUTCMinutes(),2)+o(e.getUTCSeconds(),2)+"Z)";if({}.toString.call(e)==="[object Object]"){for(n in s=["<<"],e)r=e[n],s.push("/"+n+" "+t.convert(r));return s.push(">>"),s.join(`
`)}return""+e},t}();const t3=Gi.lazy(()=>Er(()=>import("./LanguageSwitcher-CdE5WNON.js"),__vite__mapDeps([5,1,2,6,3,4]))),e3=Gi.lazy(()=>Er(()=>import("./Helmet-w-JA7pje.js"),__vite__mapDeps([7,1,2])).then(o=>({default:o.Helmet}))),i3=Gi.lazy(()=>Er(()=>import("./Description-5auFE1Wt.js"),__vite__mapDeps([8,1,2]))),o3=()=>{const[o,t]=Gi.useState(null),[e,i]=Gi.useState(""),[n,s]=Gi.useState(""),[r,a]=Gi.useState(null),[l,u]=Gi.useState(""),[d,p]=Gi.useState(!1),[b,g]=Gi.useState(null),[y,w]=Gi.useState(0),[S,A]=Gi.useState(!1),[E,D]=Gi.useState(""),{t:q}=Jv(),G=Qv(),X=G.pathname.split("/")[1]||"en";eA.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.worker.min.js";const H=ut=>{const wt=ut.target.files[0];if(wt.size>10*1024*1024){u(q("file_too_large"));return}t(wt),D(wt.name),u(""),a(null),g(null),w(0),i(wt==null?void 0:wt.type),wt!=null&&wt.type.startsWith("image")?(s("image/jpeg"),et(wt)):(wt==null?void 0:wt.type)==="application/pdf"||(wt==null?void 0:wt.type)==="application/vnd.openxmlformats-officedocument.wordprocessingml.document"||(wt==null?void 0:wt.type)==="text/plain"?s("application/pdf"):s("")},et=ut=>{const wt=new FileReader;wt.onload=C=>{g(C.target.result)},wt.readAsDataURL(ut)},ct=ut=>{s(ut.target.value)},I=async()=>{if(!o){u(q("please_select_file"));return}p(!0),w(0);try{e.startsWith("image")&&n.startsWith("image")?await O():e==="application/pdf"&&n==="application/pdf"?(a(URL.createObjectURL(o)),p(!1)):e==="application/pdf"&&n.startsWith("image")?await $():e==="application/vnd.openxmlformats-officedocument.wordprocessingml.document"&&n==="application/pdf"?await W():e==="text/plain"&&n==="application/pdf"?await ht():(u(q("conversion_not_possible")),p(!1))}catch(ut){u(q("conversion_error")),console.error(ut),p(!1)}},O=async()=>{const ut=new FileReader;ut.onload=wt=>{const C=new Image;C.src=wt.target.result,C.onload=()=>{const j=document.createElement("canvas"),U=j.getContext("2d");j.width=C.width,j.height=C.height,U.drawImage(C,0,0),j.toBlob(Y=>{const Q=new File([Y],o.name.replace(/\.[^/.]+$/,`.${n.split("/")[1]}`),{type:n});a(URL.createObjectURL(Q)),p(!1)},n,.95)}},ut.readAsDataURL(o)},$=async()=>{const ut=await o.arrayBuffer(),wt=await iA(ut).promise,C=wt.numPages;let j=new Zv,U=100/C;for(let Y=1;Y<=C;Y++){const Q=await wt.getPage(Y),st=Q.getViewport({scale:1.5}),pt=document.createElement("canvas"),gt=pt.getContext("2d");pt.height=st.height,pt.width=st.width,await Q.render({canvasContext:gt,viewport:st}).promise;const Et=pt.toDataURL(n);j.file(`page_${Y}.jpg`,Et.split(",")[1],{base64:!0}),w(Nt=>Nt+U)}j.generateAsync({type:"blob"}).then(function(Y){const Q=new File([Y],"converted_images.zip",{type:"application/zip"});a(URL.createObjectURL(Q)),p(!1)})},W=async()=>{const ut=await o.arrayBuffer(),C=(await ty.convertToHtml({arrayBuffer:ut})).value;new Kt().html(C,{callback:function(U){const Y=U.output("blob"),Q=new File([Y],o.name.replace(/\.[^/.]+$/,".pdf"),{type:"application/pdf"});a(URL.createObjectURL(Q)),p(!1)},x:10,y:10,width:180,height:280})},ht=async()=>{const ut=await o.text(),wt=new Kt;wt.setFontSize(12);const C=wt.internal.pageSize.getWidth(),j=10,U=C-2*j,Y=wt.splitTextToSize(ut,U),Q=6;let st=j;Y.forEach(Et=>{wt.text(Et,j,st),st+=Q,st+Q>wt.internal.pageSize.getHeight()-j&&(wt.addPage(),st=j)});const pt=wt.output("blob"),gt=new File([pt],o.name.replace(/\.[^/.]+$/,".pdf"),{type:"application/pdf"});a(URL.createObjectURL(gt)),p(!1)},lt=()=>e.startsWith("image")?["image/jpeg","image/png","image/gif","image/bmp"]:e==="application/pdf"?["application/pdf","image/jpeg","image/png"]:e==="application/vnd.openxmlformats-officedocument.wordprocessingml.document"?["application/pdf"]:e==="text/plain"?["application/pdf"]:[],at=Gi.useCallback(ut=>{ut.preventDefault(),ut.stopPropagation();const wt=ut.dataTransfer.files[0];wt&&H({target:{files:[wt]}}),A(!1)},[]),it=ut=>{ut.preventDefault(),ut.stopPropagation(),A(!0)},mt=ut=>{ut.preventDefault(),ut.stopPropagation(),A(!1)};return te.jsxs("div",{className:"container p-0",children:[te.jsxs("div",{className:tm.title,children:[te.jsxs("div",{className:tm.title_content,children:[te.jsx("h3",{children:q("image_converter")}),te.jsx(Gi.Suspense,{fallback:null,children:te.jsx(t3,{})})]}),te.jsx("ul",{children:te.jsx("li",{children:te.jsxs("a",{href:"/imageCompression",children:[te.jsx("i",{className:"fa fa-file-image-o"}),te.jsxs("p",{children:[q("image_compression")," ",te.jsx("span",{children:".jpg, .png, .svg, .gif"})," "]})]})})})]}),te.jsxs("div",{className:"mb-3",children:[te.jsx("label",{className:"form-label",children:q("select_image_for_conversion")}),te.jsx("div",{className:`file-drop-zone ${S?"drag-over":""}`,onDrop:at,onDragOver:it,onDragLeave:mt,children:te.jsx("input",{id:"fileInput",type:"file",className:"form-control",onChange:H})})]}),te.jsxs("div",{className:"form-group mt-4",children:[te.jsx("label",{htmlFor:"outputType",children:q("select_output_format")}),te.jsx("select",{id:"outputType",className:"form-control",value:n,onChange:ct,disabled:!o,children:lt().map(ut=>te.jsx("option",{value:ut,children:ut.split("/")[1].toUpperCase()},ut))})]}),te.jsx("div",{className:"form-group mt-4",children:te.jsx("button",{className:"btn btn-primary w-100",onClick:I,disabled:!n||d,children:q(d?"converting":"convert")})}),y>0&&y<100&&te.jsx("div",{className:"progress mt-3",children:te.jsx("div",{className:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar",style:{width:`${y}%`}})}),l&&te.jsx("div",{className:"alert alert-danger mt-3",children:l}),r&&te.jsxs("div",{className:"mt-3 text-center",children:[te.jsx("h5",{children:q("converted_file")}),te.jsx("a",{href:r,download:!0,className:"btn btn-success",children:q("download_converted_file")})]}),te.jsx(Gi.Suspense,{fallback:null,children:te.jsx(i3,{title:"image_converters",description:"image_converter_description"})}),te.jsx(Gi.Suspense,{fallback:null,children:te.jsxs(e3,{children:[te.jsx("html",{lang:X}),te.jsx("title",{children:q("image_converters")}),te.jsx("meta",{name:"description",content:q("image_converter_description")}),te.jsx("meta",{name:"keywords",content:q("image_page_keywords")}),te.jsx("link",{rel:"alternate",href:"https://sneptool.com/en/currencyConverter",hrefLang:"en"}),te.jsx("link",{rel:"alternate",href:"https://sneptool.com/ru/currencyConverter",hrefLang:"ru"}),te.jsx("link",{rel:"alternate",href:"https://sneptool.com/uz/currencyConverter",hrefLang:"uz"}),te.jsx("link",{rel:"alternate",href:"https://sneptool.com/tr/currencyConverter",hrefLang:"tr"}),te.jsx("link",{rel:"alternate",href:"https://sneptool.com/ky/currencyConverter",hrefLang:"ky"}),te.jsx("link",{rel:"alternate",href:"https://sneptool.com/fr/currencyConverter",hrefLang:"fr"}),te.jsx("link",{rel:"alternate",href:"https://sneptool.com/es/currencyConverter",hrefLang:"es"}),te.jsx("link",{rel:"alternate",href:"https://sneptool.com/de/currencyConverter",hrefLang:"de"}),te.jsx("link",{rel:"alternate",href:"https://sneptool.com/zh/currencyConverter",hrefLang:"zh"}),te.jsx("link",{rel:"alternate",href:"https://sneptool.com/ar/currencyConverter",hrefLang:"ar"}),te.jsx("link",{rel:"alternate",href:"https://sneptool.com/cs/currencyConverter",hrefLang:"cs"})]})})]})};export{o3 as default};
