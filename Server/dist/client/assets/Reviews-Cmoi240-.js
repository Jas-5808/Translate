const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LanguageSwitcher-CdE5WNON.js","assets/index-DMOjk18q.js","assets/index-Cn18mLjp.css","assets/react-select.esm-D7xumVL8.js","assets/defineProperty-DJACW-dl.js","assets/typeof-QjJsDpFa.js"])))=>i.map(i=>d[i]);
import{r as a,_ as y,u as S,j as e,c as p}from"./index-DMOjk18q.js";import{a as E}from"./axios-CCb-kr4I.js";const m=E.create({baseURL:"http://localhost:3000/api",timeout:1e4}),L=a.lazy(()=>y(()=>import("./LanguageSwitcher-CdE5WNON.js"),__vite__mapDeps([0,1,2,3,4,5])));function D(){const[r,i]=a.useState(""),[c,o]=a.useState(""),[j,g]=a.useState([]),[_,f]=a.useState(!0),[h,l]=a.useState(""),[x,n]=a.useState(""),[v,b]=a.useState(!1),{t}=S();a.useEffect(()=>{d()},[]);const d=async()=>{try{const s=await m.get("user/getusers");g(s.data),console.log(s.data)}catch{l("Error fetching reviews. Please try again.")}finally{f(!1)}},w=async s=>{if(s.preventDefault(),!(!r||!c))try{if(r==="@COco5808"){b(!0),i(""),o("");return}await m.post("user/adduser",{name:r,coment:c}),i(""),o(""),d(),n(t("review_submitted_successfully")),setTimeout(()=>{n("")},3e3)}catch(u){u.response&&u.response.status===429?l(t("one_message_per_hour")):l(t("review_submission_error"))}},N=async s=>{try{await m.delete(`user/deleteuser/${s}`),n(t("review_deleted_successfully")),setTimeout(()=>{n("")},3e3),d()}catch{l("Error deleting review. Please try again.")}};return e.jsxs("div",{className:"container p-0",children:[e.jsx("div",{className:p.title,children:e.jsxs("div",{className:p.title_content,children:[e.jsx("h3",{children:t("reviews")}),e.jsx(a.Suspense,{fallback:null,children:e.jsx(L,{})})]})}),h&&e.jsx("div",{className:"alert alert-danger",children:h}),x&&e.jsx("div",{className:"alert alert-success position-fixed top-0 start-50 translate-middle-x w-50 zindex-9999",role:"alert",style:{transition:"top 0.3s ease-in-out",zIndex:9999},children:x}),e.jsxs("form",{onSubmit:w,className:"mt-4",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"name",className:"form-label",children:t("name")}),e.jsx("input",{type:"text",id:"name",value:r,onChange:s=>i(s.target.value),placeholder:t("enter_your_name"),className:"form-control",required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"review",className:"form-label",children:t("review")}),e.jsx("textarea",{id:"review",value:c,onChange:s=>o(s.target.value),placeholder:t("enter_your_review"),className:"form-control",required:!0,maxLength:250,minLength:4})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:t("submit_review")})]}),v&&e.jsxs("div",{className:"alert alert-warning mt-4",children:[e.jsx("strong",{children:t("attention")})," ",t("review_deletion_available")]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{children:t("all_reviews")}),_?e.jsx("div",{children:t("loading_reviews")}):e.jsx("ul",{className:"list-group",children:j.map(s=>e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-start",children:[e.jsxs("div",{children:[e.jsx("span",{className:"fw-bold",children:s.name}),":",e.jsx("span",{className:"ms-2",children:s.coment})]}),v&&e.jsxs("button",{className:"btn btn-danger btn-sm",onClick:()=>N(s.id),children:[" ",t("delete")," "]})]},s.id||s.name))})]})]})}export{D as default};
